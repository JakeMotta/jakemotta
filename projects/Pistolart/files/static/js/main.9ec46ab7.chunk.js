(this["webpackJsonpambii-business-web"]=this["webpackJsonpambii-business-web"]||[]).push([[0],{1018:function(e,t,a){},1019:function(e,t,a){},1020:function(e,t,a){},1021:function(e,t,a){},1022:function(e,t,a){},1023:function(e,t,a){},1029:function(e,t,a){},1032:function(e,t,a){},1033:function(e,t,a){},1034:function(e,t,a){},1037:function(e,t,a){},1039:function(e,t,a){},1040:function(e,t,a){},1041:function(e,t,a){},1042:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(6),o=a(284),i=(a(476),a(477),a(18)),c=(a(433),a(287)),l=a(57),u=a(8),m="Welcome",d="Discover",p="Dashboard",g="Schedule",h="General",f="Signed up for web application",v="Previewed a station",b="Updated station preference",y="Swapped to advance station browse",E="Started web player",S="Closed web player",O="Pressed connect button",w="Created Schedule",j="Closed Schedule",k="Back To Dashboard",N="Viewed on Mobile Device",C="Clicked a button",L="Toggled a station as favorite",I="User signed out of web application",M="button",T="error",P={Electronica:"#44d474","Alternative & Punk":"#d9964a",Rock:"#d64b46",Pop:"#d04283",Classical:"#8046d6",Traditional:"#c178ff",Jazz:"#42c4d0",Soundtrack:"#E6DD5D",Urban:"#191919",Other:"#999999"},x={googleBtn:a(482),iosBtn:a(483),appLogo:a(484),bg1:a(485),bg2:a(486),bg3:a(487),bg4:a(488),bg5:a(489),bg6:a(490)},A=[{title:"Inactive",time:"0"},{title:"Every 15 Minutes",time:"15"},{title:"Every 30 Minutes",time:"30"},{title:"Every Hour",time:"60"},{title:"Every Few Hours",time:"180"}],D={"Popular Today":"The Top Hits of Today","Holiday Music":"Get into the spirit of the season!","Flattening the Curve":"Battling COVID-19, one song at a time.","Upbeat Energy":"Energetic songs to get the mood flowing.","Laid-back, Low-key.":"Songs for relaxation and chill-out times.","Learning to Grow":"A series for those looking to overcome rough times, through different genres of music.",Decades:"Your home for all decades of music.","Ahead of the Curve":"A series for those who are tomorrow's trendsetters.","Liquid Courage":"Beats for those that are bold and those that are beautiful.","Beats and Beers":"Cheer on your favorite team with these country hits!","Taproom Treasures":"Stripped-down music for the sophisticated drinker.","Flirtatious Friday Night":"She's sitting right there.","Settled-Down Speakeasy":"Jazzy tunes for a sparkilng night.","Dancin' Across the World":"Iresistable, international glimmers of firey fun.","Coffee Curiosity":"A perfect morning moodsetter.","Bookstore Barista":"Quiet jazz for newspapers and novelists.","Classical Cappuccino":"Upscale grandiose through caffine and classical.","Countryside Cafe":"For french toast, syrup, and kickin' up those boots in the morning.","Late Night Study ":"Beats for the studious individual ","Glitz At the Ritz":"Wonder and wow through jazzy band ballads.","Loungeside Lovers":"Ambiance for the low-key days and nights.","Hearthside Hip":"R&B treasures for the late-night bonfire vibes","Travelers Rest":"Soft stripped music to lay down to.","Elegant Entertainment":"Classical masterpieces for the sophisticated traveler.","Tropical Getaway":"A cabana soundtrack for pina coladas and the poolside.","Pep Rally Pop":"Let's get this bread.","Study Beats":"Lo-fi music for the late study nights.","Intelligence through Inspiration":"Ambiance for peaceful reflection and quiet times.","Classical Concentration":"Inspiration through piano, strings, and eras of talent","Developing Brains":"For the little ones.","Academy Alternative":"Alternative hits for those looking to get work done.","Boutique Beats":"Continuous flow and feel-good vibes.","Diamonds Are Forever":"Inspirational classical music for the sophisticated shopper.","Retail R&B":"R&B and pop hits for the casual customer.","Food Court Finds":"Grab a bite to eat with this easy-listening soundtrack!","Girls Night Out":"Empowering women through confident, feel-good beats.","Upscaled Grace":"Elegance through classical masterpieces.","Jukebox of the Ages":"Your home for all decades of music.","Wax and Relax":"Set the mood with the perfect ambiiance.","Hairdresser Hop":"R&B and hip hop hits for the trendsetter.","Nails, Hair, Hips, Heels":"Endless feel-good beats.","Pumpin Metal":"Rock and Metal soundtrack for the heavy lifter.","Persistence Pop":"Keep that grind up.","Pre-Game Pump Up":"Get in your head, get in the ring.","Fire Dancing Fiesta":"High-energy music for the dancers...and for that perfect body.","Heavy Lifting Hype":"Get turnt.","Hamburger Hits":"Quick beats for quick bites.","Barbecue Bash":"Perfect for the backyard and the beer.","Asian Eats":"You don't need a plane ticket.","Taco Truck Temposetter":"Are you going to finish all 10 of those tacos?","Boba Beats":"Passionfruit, peach stars, pearls, and perfection.","Royalty Dining":"Elegnat music for roses and candlelit dinners.","Ethereal Elegance":"Transcend within yourself.","Self-Care Classical":"Classical music to rejuvinate the brain.","Asian Getaway":"Sounds through Japaneese cherry blossoms and night-market eats.","Relaxin' R&B":"Good vibes only.","Hot Spring Hits":"Glimmering hits for feel-good moments.","Working From Home":"Chill beats for ultimate focus and productivity.","New Hobby, New Self":"Cooking, dancing, stretching, reading- with this time, anything is possible.","A Time For Reflection":"Rise above and let serenity flow in this time of unrest.","Go Hard or (Stay) Home":"Quarantine ain't stopping these muscle gains.","Treasured Throwbacks":"Remembering the days before this period of time.","Positive Vibes Only (Singing in the Shower)":"Sing your heart out to these songs of joy and jubilation!"},_={global:["Popular Today"],defaultIndividual:["Working From Home","New Hobby, New Self","A Time For Reflection","Go Hard or (Stay) Home","Treasured Throwbacks","Positive Vibes Only (Singing in the Shower)"],bar:["Liquid Courage","Beats and Beers","Taproom Treasures","Flirtatious Friday Night","Settled-Down Speakeasy","Dancin' Across the World"],cafe:["Coffee Curiosity","Bookstore Barista","Classical Cappuccino","Boba Beats","Countryside Cafe","Late Night Study "],gym:["Pumpin Metal","Persistence Pop","Pre-Game Pump Up","Fire Dancing Fiesta","Heavy Lifting Hype"],hotel:["Glitz At the Ritz","Loungeside Lovers","Hearthside Hip","Travelers Rest","Elegant Entertainment","Tropical Getaway"],other:["Flattening the Curve","Upbeat Energy","Laid-back, Low-key.","Learning to Grow","Decades","Ahead of the Curve"],restaurant:["Hamburger Hits","Barbecue Bash","Asian Eats","Taco Truck Temposetter","Boba Beats","Royalty Dining"],salon:["Girls Night Out","Upscaled Grace","Jukebox of the Ages","Wax and Relax","Hairdresser Hop","Nails, Hair, Hips, Heels"],school:["Pep Rally Pop","Study Beats","Intelligence through Inspiration","Classical Concentration","Developing Brains","Academy Alternative"],spa:["Ethereal Elegance","Tropical Getaway","Self-Care Classical","Asian Getaway","Relaxin' R&B","Hot Spring Hits"],shop:["Boutique Beats","Diamonds Are Forever","Jukebox of the Ages","Retail R&B","Girls Night Out","Food Court Finds"]},B=a(49),F={Slower:{title:"Slower",min:0,max:55,icon:B.g},Slow:{title:"Slow",min:55,max:75,icon:B.i},Moderate:{title:"Moderate",min:75,max:95,icon:B.h},Fast:{title:"Fast",min:95,max:115,icon:B.d},Faster:{title:"Faster",min:115,max:900,icon:B.e}},R={"America/Adak":"-09:00","America/Anchorage":"-08:00","America/Boise":"-06:00","America/Chicago":"-05:00","America/Denver":"-06:00","America/Detroit":"-04:00","America/Indiana/Indianapolis":"-04:00","America/Indiana/Knox":"-05:00","America/Indiana/Marengo":"-04:00","America/Indiana/Petersburg":"-04:00","America/Indiana/Tell_City":"- 05:00","America/Indiana/Vevay":"-04:00","America/Indiana/Vincennes":"-04:00","America/Indiana/Winamac":"-04:00","America/Juneau":"-08:00","America/Kentucky/Louisville":"-04:00","America/Kentucky/Monticello":"-04:00","America/Los_Angeles":"-07:00","America/Menominee":"-05:00","America/Metlakatla":"-08:00","America/New_York":"-04:00","America/Nome":"-08:00","America/North_Dakota/Beulah":"-05:00","America/North_Dakota/Center":"-05:00","America/North_Dakota/New_Salem":"-05:00","America/Phoenix":"-07:00","America/Sitka":"-08:00","America/Yakutat":"-08:00","Pacific/Honolulu":"-10:00"},U={Alabama:"AL",Alaska:"AK",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE",Florida:"FL",Georgia:"GA",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisconsin:"WI",Wyoming:"WY"},V={"ar-XA":"Arabic","bn-IN":"Bengali (India)","cmn-CN":"Mandarin Chinese","cmn-TW":"Mandarin Chinese","cs-CZ":"Czech (Czech Republic)","da-DK":"Danish (Denmark)","de-DE":"German (Germany)","el-GR":"Greek (Greece)","en-AU":"English (Australia)","en-GB":"English (UK)","en-IN":"English (India)","en-US":"English (US)","es-ES":"Spanish (Spain)","fi-FI":"Finnish (Finland)","fil-PH":"Filipino (Philippines)","fr-CA":"French (Canada)","fr-FR":"French (France)","gu-IN":"Gujarati (India)","hi-IN":"Hindi (India)","hu-HU":"Hungarian (Hungary)","id-ID":"Indonesian (Indonesia)","it-IT":"Italian (Italy)","ja-JP":"Japanese (Japan)","kn-IN":"Kannada (India)","ko-KR":"Korean (South Korea)","ml-IN":"Malayalam (India)","nb-NO":"Norwegian (Norway)","nl-NL":"Dutch (Netherlands)","pl-PL":"Polish (Poland)","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","ru-RU":"Russian (Russia)","sk-SK":"Slovak (Slovakia)","sv-SE":"Swedish (Sweden)","ta-IN":"Tamil (India)","te-IN":"Telugu (India)","th-TH":"Thai (Thailand)","tr-TR":"Turkish (Turkey)","uk-UA":"Ukrainian (Ukraine)","vi-VN":"Vietnamese (Vietnam)","yue-HK":"Chinese (Hong Kong)"},z={"Female A":"Amazing Female","Female B":"Awesome Female","Female C":"Charming Female","Female D":"Excellent Female","Female E":"Fabulous Female","Female F":"Fantastic Female","Female G":"Outstanding Female","Female H":"Remarkable Female","Female I":"Spectacular Female","Female J":"Splendid Female","Female K":"Stellar Female","Female L":"Strong Female","Male A":"Amazing Male","Male B":"Awesome Male","Male C":"Charming Male","Male D":"Excellent Male","Male E":"Fabulous Male","Male F":"Fantastic Male","Male G":"Outstanding Male","Male H":"Remarkable Male","Male I":"Spectacular Male","Male J":"Splendid Male","Male K":"Stellar Male","Male L":"Strong Male"},q="dev",H="production",W="Individual",G={auth:{user:null,location:{},isApple:!1,inApp:!1},loader:{requestInProgress:0},locations:{data:[],count:0,limit:0,skip:0},playlists:{schedules:[]},stations:{topTrack:[],artists:[],tracks:[],playlistList:[],genreList:[],eraList:[],moodList:[],data:[],count:0,skip:0,limit:10},stationPreviews:{genre:[],era:[],mood:[],activeStationPreview:[]},selectedPreviews:{ID:"",track:[]},zones:{data:[],count:0,limit:0,skip:0},schedules:{activeSchedule:null,schedules:[]},player:{showPlayer:!1,isPlaying:!1,skipDisabled:!1,trackNumber:0,trackMap:{},playerError:{}},inStoreMessaging:{messages:[]}},K=a(2),Y=function(e,t){if(!e||!t)return[];var a=[];return e.map((function(e){return a[Object(K.get)(e,t,null)]=e})),a},J=function(e){return e?"https://random-station-artwork.s3-us-west-2.amazonaws.com/"+Math.abs(e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0))%101+".jpg":""},Z=function(){return window.outerWidth<=650},X=function(e){return isNaN(e)?"0:00":Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},Q=function(e){return e>=0&&e<=55?F.Slower:e>=55&&e<=75?F.Slow:e>=75&&e<=95?F.Moderate:e>=95&&e<=115?F.Fast:e>=115&&e<=900?F.Faster:F.Moderate},$=function(){var e=localStorage.getItem("deviceId");return e||(e="web-"+function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t.toUpperCase()}(10),localStorage.setItem("deviceId",e)),e},ee=function(e,t){try{var a="ADVERT_"===Object(K.get)(e,"isrc","").substring(0,7),n="ISM_"===Object(K.get)(e,"isrc","").substring(0,4);if(a||n)return!1;for(var r=0;r<t.length;r++)if(Object(K.get)(t[r],"isrc","")===Object(K.get)(e,"isrc",e))return r;return 0}catch(s){return console.log("caught getTrackNumberByTrack err: ",s),!1}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object.assign({},e,Object(u.a)({},t.data));case"SET_USER":return Object.assign({},e,{user:t.data});case"SET_LOCATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},t.data),{},{favoritesMap:Y(Object(K.get)(t,"data.favorites",[]),"_id")})});case"SET_STATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{station:t.data})});case"SET_CURRENT_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{currentTrack:t.data})});case"SET_FAVORITES":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{favorites:t.data,favoritesMap:Y(Object(K.get)(t,"data",[]),"_id")})});case"SET_EXPLICIT":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{explicitAllowed:t.data})});case"SET_PAIRED_DEVICE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{pairedDevice:t.data})});case"SET_LAST_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{lastTrack:t.data})});case"SET_TRACK_NUMBER":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{currentTrackNumber:t.data})});case"SET_TRACK_SCHEDULE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{trackSchedule:t.data})});case"SET_SCHEDULE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{schedule:t.data})});case"SET_SUBSCRIPTION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{subscription:t.data})});case"SET_IS_APPLE":return Object.assign({},e,{isApple:t.data});case"SET_INAPP":return Object(K.get)(t,"data",!1)&&(localStorage.setItem("inApp",!0),window.inApp=!0),Object.assign({},e,{inApp:t.data});default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INSTORE_MESSAGES":return Object.assign({},e,{messages:t.data});default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.player,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRACK_MAP":return Object.assign({},e,{trackMap:t.data});case"SET_TRACK_NUMBER":return Object.assign({},e,{trackNumber:t.data});case"SET_IS_PLAYING":return Object.assign({},e,{isPlaying:t.data});case"SET_SKIP_DISABLED":return Object.assign({},e,{skipDisabled:t.data});case"SET_SHOW_PLAYER":return Object.assign({},e,{showPlayer:t.data});case"PLAYER_ERROR":return Object.assign({},e,{playerError:t.data});default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.playlists,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SCHEDULES":return Object.assign([],e,{schedules:t.data});default:return e}},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.selectedPreviews,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCHEDULE":return Object.assign({},Object(u.a)({},e),{data:null});case"ACTIVE_SCHEDULE":return Object.assign({},e,{activeSchedule:t.data});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G.stations,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_STATIONS":return Object.assign({},e,{playlistList:t.data.playlistList,genreList:t.data.genreList,eraList:t.data.eraList,moodList:t.data.moodList});default:return e}},ie=Object(i.c)({auth:te,inStoreMessaging:ae,player:ne,playlists:re,schedules:se,stations:oe});Object(l.a)();var ce=function(e){var t=[c.a];return Object(i.e)(ie,e,Object(i.d)(i.a.apply(void 0,t)))},le=a(10),ue=a(11),me=a(13),de=a(12),pe=a(15),ge=a(9),he=a.n(ge),fe=a(22),ve=a(35),be=a(40),ye=a(434),Ee=a.n(ye);function Se(e,t,a){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(fe.a)(he.a.mark((function e(t,a,n){var r,s,o,i,c,l,u=arguments;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>3&&void 0!==u[3]?u[3]:null,s=u.length>4&&void 0!==u[4]?u[4]:null,o="".concat(ze).concat(a).trim(),i={method:t,url:o,headers:{}},null!==r&&(i.headers=r),null!==s&&(i.params=s),"post"!==t&&"put"!==t&&"delete"!==t&&"patch"!==t||(i.data=n),c=localStorage.getItem("ambii_auth_jwt"),l=localStorage.getItem("ambii_player_jwt"),qe&&(i.headers.ambii_api_key=qe),c&&(i.headers.Authorization="Bearer "+localStorage.getItem("ambii_auth_jwt")),l&&(i.headers.ambii_player_jwt=localStorage.getItem("ambii_player_jwt")),e.abrupt("return",new Promise((function(e,t){Ee()(i).then((function(t){e(t)})).catch((function(a){console.log("Caught api error: ",a),"Network Error"===a.message?window.alert(a.message):"The token has expired, please login again!"===Object(K.get)(a,"response.data.message",null)?e(!1):a.response&&401===a.response.status?localStorage.removeItem("ambii_auth_jwt"):t(a)}))})));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we=a(163),je=function(e){var t=e.category,a=e.action,n=e.value,r=e.label;we.a.event({category:t,action:a,value:n?parseInt(n):null,label:r})},ke=function(){we.a.pageview(window.location.pathname+window.location.search)},Ne=function(e){we.a.modalview(e)},Ce=a(435),Le=a.n(Ce)()("https://hola.ambii.io"),Ie="connect-web",Me="disconnect",Te="reconnect",Pe="player-paired",xe="player-un-paired",Ae="player-disconnected",De="player-played",_e="player-paused",Be="station-updated",Fe="player-called-next",Re="production",Ue=Re===H?"pk_live_51H0l3xBY2i2h5IOVo9Edk9SwGfqsOBcdd5cfJdaxKxWgijujk141nn5fMq7h4pija45rxwou240Tj9bIwNwmTjxZ00YIrQmclD":"pk_test_51H0l3xBY2i2h5IOVpoRwxwg9JzYonjA6Eo6CdrAodp27CFNzh4P3VnxN79OamqCtgurRvR2j6ogCmyThe7dFaMgc00mdCVUCVM",Ve=Re===H?"U6LfUnEpkLYrtnZ2u3IAuSDlraBebeGP":"MkozMO1FrxX4SNXS6xZ8y2UNpCX9RM1x",ze=Re===H?"https://hola.ambii.io/v2":Re===q?"https://hola-dev.ambii.io/v2":"http://localhost:4040/v2",qe=Re===H?"2OnLqkqy-YJKm4-RIsaJ2-KucW5v1pjjn-fUx":"ygv6lz8tQ0FVxAkMQV-xtPpCSFiMZu~BikF.C",He=function(e){return function(t){t({type:"SET_INAPP",data:e})}},We=function(e){return function(t){t({type:"SET_IS_APPLE",data:e})}},Ge=function(e){return function(t){t({type:"SET_TRACK_SCHEDULE",data:e})}},Ke=function(e){return function(t){t({type:"SET_PAIRED_DEVICE",data:e})}},Ye=function(e){return function(t){t({type:"SET_LAST_TRACK",data:e})}},Je=function(e){return function(t){t({type:"SET_TRACK_MAP",data:e})}},Ze=function(e){return function(t){t({type:"SET_LOCATION",data:e})}},Xe=function(e){return function(t){t({type:"SET_STATION",data:e})}},Qe=function(e){return function(t){t({type:"SET_CURRENT_TRACK",data:e})}},$e=function(e){return function(t){t({type:"PLAYER_ERROR",data:e})}},et=function(e){return function(t){t({type:"SET_SHOW_PLAYER",data:e})}},tt=function(e){return function(t){t({type:"SET_IS_PLAYING",data:e})}},at=function(e){return function(t){t({type:"SET_SKIP_DISABLED",data:e})}},nt=function(e){return function(t){t({type:"SET_TRACK_NUMBER",data:e})}},rt=function(e){return function(t){t({type:"LOGIN_SUCCESS",data:e})}},st=function(e){return function(t){t({type:"SET_USER",data:e})}},ot=function(e){return function(t){t({type:"SET_SCHEDULE",data:e})}},it=function(e){return function(t){t({type:"SET_SCHEDULES",data:e})}},ct=function(e){return function(t){t({type:"SET_INSTORE_MESSAGES",data:e})}},lt=function(e){return function(t){t({type:"SET_SUBSCRIPTION",data:e})}},ut=function(){return function(e){Et(e),St(e),Ot(e),wt(e),jt(e)}};function mt(){return function(e){return new Promise(function(){var t=Object(fe.a)(he.a.mark((function t(a,n){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Se("post","/api/player/disconnect",{deviceId:$()}).then(function(){var t=Object(fe.a)(he.a.mark((function t(n){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e(Ke(Object(K.get)(n,"data.data.pairedDevice",{}))),e(et(!1)),localStorage.removeItem("ambii_player_jwt")}catch(r){console.log("Caught error on disconnectPlayer: ",r)}a(Object(K.get)(n,"data.data",null));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("disconnectPlayer error: ",e),n(e.response)}));case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}())}}function dt(e){return function(t){return new Promise((function(a){if(!e)return a(!1);Se("post","/api/player/connect",e).then(function(){var e=Object(fe.a)(he.a.mark((function e(n){var r,s,o,i,c,l,u;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(K.get)(n,"data.data",null),"DEVICE_ALREADY_PAIRED"!==Object(K.get)(r,"data",null)){e.next=5;break}return e.abrupt("return",a("DEVICE_ALREADY_PAIRED"));case 5:localStorage.setItem("ambii_player_jwt",Object(K.get)(r,"ambii_player_jwt",null)),s=Object(K.get)(r,"location",{}),o=Object(K.get)(s,"trackSchedule",{}),i=Y(Object(K.get)(o,"queue",[]),"isrc"),c=Object(K.get)(s,"currentTrack",null),l=Object(K.get)(s,"currentTrackNumber",0),u=Object(K.get)(o,"queue["+l+"]",c),console.log("connectPlayer : ",{response:n,res:r}),t(Ze(s)),t(Je(i)),t(nt(l)),t(Qe(u)),t(Ge(o)),t(et(!0)),a(r);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("connectPlayer error: ",e),a(!1)}))}))}}function pt(e){var t=e.data;return function(e,a){return new Promise(function(){var n=Object(fe.a)(he.a.mark((function n(r){return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t){n.next=3;break}return n.abrupt("return",r(!1));case 3:Se("post","/api/player/finishedTrack",t).then(function(){var t=Object(fe.a)(he.a.mark((function t(n){var s,o,i,c,l,u,m,d,p,g,h;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=15;break}if(s=Object(K.get)(n,"data.data",{}),console.log("finishedTrack res: ",s),o=Object(K.get)(s,"newStation",!1),i=Object(K.get)(s,"newTrackSchedule",!1),c=Object(K.get)(s,"newUrls",!1),l=Object(K.get)(a(),"auth.location.currentTrack",Object(K.get)(s,"track",null)),u=Object(K.get)(a(),"player.trackNumber",0),"DEVICE_ALREADY_PAIRED"!==Object(K.get)(s,"data","")){t.next=10;break}return t.abrupt("return",r(Object(K.get)(s,"data","")));case 10:o&&(m=Object(K.get)(s,"station",{}),e(Xe(m))),(i||c)&&(d=Object(K.get)(s,"trackSchedule",{}),p=Y(Object(K.get)(d,"queue",[]),"isrc"),e(Je(p)),g=o?0:ee(l,Object(K.get)(d,"queue",[])),u!==g&&(g||0===g?e(nt(g)):(h=Object(K.get)(a(),"auth.location.lastTrack",""),g=ee(h,Object(K.get)(d,"queue",[])),e(nt(g||u)))),e(Ge(d))),r(!0),t.next=16;break;case 15:r(!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("error: ",e),r(!1)})),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),console.log("finishedTrack err: ",n.t0),r(!1);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}())}}function gt(e){var t=e.songCompletion;return function(e,a){return new Promise(function(){var n=Object(fe.a)(he.a.mark((function n(r){var s,o,i,c,l,u,m,d,p,g;return he.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t||(t="0"),s=Object(K.get)(a(),"auth.location",{}),o=Object(K.get)(a(),"player",{}),e(at(!0)),i=Object(K.get)(s,"trackSchedule",""),c=Object(K.get)(i,"queue",[]).length-1,l=Object(K.get)(i,"queue",[]),u=Object(K.get)(i,"queueHash",""),m=Object(K.get)(s,"currentTrack",{}),d=Object(K.get)(o,"trackNumber",0),p=null,d+1<=c?(p=l[d+1]||"",d+=1):(p=Object(K.get)(s,"trackSchedule.queue[0]",""),d=0),e(Ye(m)),e(Qe(p)),e(nt(d)),n.next=18,e(pt({data:{locationId:Object(K.get)(s,"_id",null),stationId:Object(K.get)(s,"station._id",null),nextTrack:p,lastTrack:m,deviceId:$(),songCompletion:t,currentTrackNumber:d.toString(),queueHash:u}}));case 18:if(!(g=n.sent)){n.next=29;break}if(console.log("music bar props: ",a()),"DEVICE_ALREADY_PAIRED"!==g){n.next=27;break}return e(tt(!1)),e(at(!1)),n.next=26,e(mt());case 26:return n.abrupt("return",r(g));case 27:n.next=30;break;case 29:return n.abrupt("return",r(!1));case 30:r(!0),n.next=38;break;case 33:n.prev=33,n.t0=n.catch(0),e(at(!1)),console.log("caught callPlayNext err: ",n.t0),r(!1);case 38:case"end":return n.stop()}}),n,null,[[0,33]])})));return function(e){return n.apply(this,arguments)}}())}}function ht(e){return function(t){var a="ADVERT_"===Object(K.get)(e,"isrc","").substring(0,7),n="ISM_"===Object(K.get)(e,"isrc","").substring(0,4);if(a||n)t(at(!0));else var r=setTimeout((function(){clearTimeout(r),t(at(!1))}),1e3)}}var ft=function(){return function(e){Le.removeEventListener(Pe),Le.removeEventListener(xe),Le.removeEventListener(Ae),Le.removeEventListener(De),Le.removeEventListener(_e)}},vt=function(){return function(e){Le.on(Be,(function(t){e(Xe(t))}))}},bt=function(){return function(e){Le.on(Fe,(function(t){e(Qe(Object(K.get)(t,"track",{})))}))}},yt=function(){return function(e){Le.removeEventListener(Be)}},Et=function(e){Le.on(Pe,(function(e){console.log("Player Paired",e)}))},St=function(e){Le.on(xe,(function(e){console.log("Player UnPaired",e)}))},Ot=function(e){Le.on(Ae,(function(e){console.log("Player Disconnected",e)}))},wt=function(e){Le.on(De,(function(e){console.log("Player playerPlayed",e)}))},jt=function(e){Le.on(_e,(function(e){console.log("Player playerPaused")}))};function kt(){return function(e){return new Promise(function(){var t=Object(fe.a)(he.a.mark((function t(a){var n,r,s,o,i,c;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=Se("get","/auth/getUser"),r=Se("get","/auth/getLocation"),t.next=5,Promise.all([n,r]);case 5:s=t.sent,o=Object(K.get)(s[0],"data.data",null),i=Object(K.get)(s[1],"data.data",null),"apple@ambii.io"===Object(K.get)(o,"email","").toLowerCase()&&e(We(!0)),e(rt({location:i,user:o})),e(st(o)),e(Ze(i)),$(),Object(K.get)(i,"pairedDevice.uniqueId",null)===$()&&(c={storeCode:Object(K.get)(i,"storeCode",""),deviceName:"web",uniqueId:$(),deviceBrand:"web",override:!1},e(dt(c))),a(!0),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),console.log("err: ",t.t0),a(!1);case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}())}}function Nt(e){return function(t){return new Promise((function(a,n){t((function(e){e({type:"LOADER_SHOW"})})),Se("post","/auth/complete-user-setup",e).then((function(e){var n=Object(K.get)(e,"data.data");Object(K.get)(e,"data.success",!1)&&(t(function(e){return function(t){t({type:"SIGNUP_SUCCESS",data:e})}}(n)),t(st(Object(K.get)(n,"user",{}))),t(Ze(Object(K.get)(n,"location",{})))),a(e.data)})).catch((function(e){var a=Object(K.get)(e,"response","");t(function(e){return function(t){t({type:"SIGNUP_FAILED",error:e})}}(a)),n(a)})).finally((function(){t((function(e){e({type:"LOADER_HIDE"})}))}))}))}}function Ct(e){var t=e.id,a=e.email,n=e.name;return function(e){Se("post","/public/create-new-mix-max-contact",{id:t,email:a,name:n,groupName:"Signed Up Users"})}}var Lt=a(81),It=a(1045);function Mt(e){var t=e.stationId,a=e.favorites;return function(e){return new Promise((function(n){if(!t||!a)return n(!1);Se("post","/auth/toggleFavorite/",{stationId:t}).then((function(t){var r,s=Object(K.get)(t,"data.data.station",{}),o=Object(K.get)(t,"data.data.type",{}),i=Object(Lt.a)(a);if("remove"===o){for(var c=0;c<i.length;c++)i[c]._id===s&&i.splice(c,1);It.a.success({message:"Removed Favorite",placement:"bottomLeft"})}else i.push(s),It.a.success({message:"Added Favorite",placement:"bottomLeft"});e((r=i,function(e){e({type:"SET_FAVORITES",data:r})})),n(!0)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),n(!0)}))}))}}function Tt(e){var t=e.currentTrack;return function(e,a){return new Promise((function(n){if(!t)return n(!1);var r=Object(K.get)(a(),"auth.location.explicitAllowed",!1);Se("post","/auth/toggleExplicit/",{currentTrack:t}).then((function(t){var a=Object(K.get)(t,"data.data",{}),r=Object(K.get)(a,"explicitAllowed",!1);!0===r?It.a.success({message:"Explicit Filter On",description:"Ambii will prevent explicit songs from streaming",placement:"bottomLeft"}):It.a.success({message:"Explicit Filter Off",description:"Ambii will not prevent explicit songs from streaming",placement:"bottomLeft"}),e(function(e){return function(t){t({type:"SET_EXPLICIT",data:e})}}(r)),n(!0)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),n(r)}))}))}}function Pt(){return function(e){return new Promise((function(t,a){Se("get","/api/getStations").then((function(a){var n=Object(K.get)(a,"data.data",{}),r={eraList:[],genreList:[],moodList:[],tempoList:[],playlistList:[]};Object(K.get)(n,"playlistList",[]).forEach((function(e){r.playlistList.push(e)})),e(function(e){return function(t){t({type:"GET_STATIONS",data:e})}}(r)),t(r)})).catch((function(e){console.log("getStations error in action ",e),a(e)}))}))}}function xt(e){return function(t){return new Promise((function(t){if(!e)return t(!1);Se("get","/api/getStation/"+e).then((function(e){t(Object(K.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)}))}))}}function At(e){return function(t){return new Promise((function(a,n){if(!e)return a(!1);Se("post","/auth/assignStation/"+e).then((function(e){console.log("assignStation: ",e);var n=Object(K.get)(e,"data.data",!1),r=Object(K.get)(n,"station",!1),s=Object(K.get)(n,"trackSchedule",!1),o=Y(Object(K.get)(s,"queue",[]),"isrc"),i=Object(K.get)(n,"currentTrack",!1),c=Object(K.get)(n,"currentTrackNumber",!1);t(ot(null)),r&&t(Xe(r)),s&&t(Ge(s)),o&&t(Je(o)),i&&t(Qe(i)),c&&t(nt(c)),It.a.success({message:"Station Assigned",placement:"bottomLeft"}),a(n)})).catch((function(e){console.log("Error :",e),n(e.response)}))}))}}function Dt(){return function(e){return new Promise((function(e){Se("post","/auth/createSchedule").then((function(t){console.log("Create Schedule Res!",t),e(t.data)})).catch((function(t){console.log("createSchedule error",t.response),It.a.error({message:Object(K.get)(t,"response.message","Could not create schedule!"),placement:"bottomLeft"}),e(!1)}))}))}}function _t(e){return function(t){return new Promise((function(t){console.log("hit getschedule: ",e),Se("post","/auth/getSchedule/"+e).then((function(e){console.log("Get Schedule Res!",e),t(e.data)})).catch((function(e){console.log("getSchedule error",e.response),It.a.error({message:Object(K.get)(e,"response.message","Could not find schedule!"),placement:"bottomLeft"}),t(!1)}))}))}}function Bt(e){return function(t){return new Promise((function(a){var n;t((n=e,function(e){e({type:"ACTIVE_SCHEDULE",data:n})})),a(!0)}))}}function Ft(e){var t=e.scheduleId,a=e.name,n=e.stations;return function(e){return new Promise((function(r){if(!a||!n)return r(!1);Se("post","/auth/saveSchedule",{scheduleId:t,name:a,stations:n}).then((function(t){var a=Object(K.get)(t,"data",{});console.log("create playlist res in action ",t),e(ot(a)),r(a)})).catch((function(e){console.log("setSchedule error",e.response),It.a.error({message:Object(K.get)(e,"response.message","Could not save schedule"),placement:"bottomLeft"}),r(!1)}))}))}}function Rt(){return function(e){return new Promise((function(t){Se("get","/auth/getSchedules").then((function(a){console.log("getSchedules res: ",a);var n=Object(K.get)(a,"data.data.schedules",[]);e(it(n)),t(!0)})).catch((function(e){console.log("getSchedules error",e.response),t(!1)}))}))}}function Ut(e){return function(t){return new Promise((function(a){if(!e)return a(!1);Se("post","/auth/assignSchedule/"+e).then((function(e){console.log("assignSchedule: ",e);var n=Object(K.get)(e,"data.data",!1),r=Object(K.get)(n,"schedule",!1),s=Object(K.get)(n,"station",!1),o=Object(K.get)(n,"trackSchedule",!1),i=Y(Object(K.get)(o,"queue",[]),"isrc"),c=Object(K.get)(n,"currentTrack",!1),l=Object(K.get)(n,"currentTrackNumber",!1);n?(r&&t(ot(r)),s&&t(Xe(s)),o&&t(Ge(o)),i&&t(Je(i)),c&&t(Qe(c)),l&&t(nt(l)),It.a.success({message:"Schedule Assigned",placement:"bottomLeft"})):It.a.info({message:"Schedule is already active!",placement:"bottomLeft"}),a(!0)})).catch((function(e){console.log("assignSchedule error:",e),a(!1)}))}))}}function Vt(e){var t=e.scheduleId;return function(e,a){return new Promise((function(n){if(!t)return n(!1);Se("post","/auth/deleteSchedule/"+t).then((function(t){var r=Object(K.get)(t,"data.data._id",null);if(r){for(var s=Object(Lt.a)(Object(K.get)(a(),"playlists.schedules",[])),o=0;o<s.length;o++)Object(K.get)(s[o],"_id","")===r&&s.splice(o,1);e(it(s)),It.a.success({message:"Schedule Deleted",placement:"bottomLeft"})}n(!0)})).catch((function(e){console.log("deleteSchedule error:",e),n(!1)}))}))}}function zt(){return function(e){return new Promise((function(t){Se("post","/auth/listMessages").then((function(a){console.log("getMessages res",a),e(ct(Object(K.get)(a,"data.data",[]))),t(!0)})).catch((function(e){console.log("getMessages error",e),t(!1)}))}))}}function qt(e){var t=e.voice,a=e.language,n=e.message,r=e.speed,s=e.hash,o=e.messageId;return function(e){return new Promise((function(e){if(!s)return e(!1);Se("post","/auth/createPreviewMessage",{voice:t,language:a,message:n,speed:r,hash:s,messageId:o}).then((function(t){e(Object(K.get)(t,"data",!1))})).catch((function(t){console.log("createPreviewMessage error: ",t),e(!1)}))}))}}function Ht(e){var t=e.title,a=e.voice,n=e.language,r=e.message,s=e.speed,o=e.frequency,i=e.savedPreviews,c=e.hash;return function(e){return new Promise((function(e){if(!t||!r)return e(!1);Se("post","/auth/createMessage",{title:t,voice:a,language:n,message:r,speed:s,frequency:o,savedPreviews:i,hash:c}).then((function(t){e(Object(K.get)(t,"data",!1))})).catch((function(t){console.log("createMessage error: ",t),e(!1)}))}))}}function Wt(e){var t=e.messageId,a=e.title,n=e.voice,r=e.language,s=e.message,o=e.speed,i=e.frequency,c=e.savedPreviews,l=e.hash;return function(e){return new Promise((function(e){if(!a||!s)return e(!1);Se("post","/auth/editMessage",{messageId:t,title:a,voice:n,language:r,message:s,speed:o,frequency:i,savedPreviews:c,hash:l}).then((function(t){e(Object(K.get)(t,"data",!1))})).catch((function(t){console.log("editMessage error: ",t),e(!1)}))}))}}function Gt(e){return function(t){return new Promise((function(t){if(!e)return t(!1);Se("post","/auth/deleteMessagingFile",{id:e}).then((function(e){t(Object(K.get)(e,"data",!1))})).catch((function(e){console.log("deleteMessage error: ",e),t(!1)}))}))}}function Kt(e){var t=e.id,a=e.frequency;return function(e){return new Promise((function(e){if(!t||!a)return e(!1);Se("post","/auth/changeMessagingFileFrequency",{id:t,frequency:a}).then((function(t){e(Object(K.get)(t,"data",!1))})).catch((function(t){console.log("updateFrequency error: ",t),e(!1)}))}))}}function Yt(){return function(e){return new Promise((function(e){Se("get","/api/listVoices",null).then((function(t){e(Object(K.get)(t,"data.data",[]))})).catch((function(t){console.log("getVoiceData error: ",t),e(!1)}))}))}}function Jt(e){return function(t){return new Promise((function(t){Se("post","/auth/updateUploadedISM",e).then((function(e){return t(e.data)})).catch((function(e){console.log(e),It.a.error({message:"Update Failed",placement:"bottomLeft"})}))}))}}function Zt(){return function(e){e((function(e){Le.on("connect",(function(){console.log("Socket Connected")}))})),e((function(e){Le.on(Me,(function(){console.log("Socket Disconnected"),It.a.warn({message:"Connection Lost",placement:"bottomLeft"})}))})),e((function(e){Le.on(Te,(function(){console.log("Socket Reconnected"),It.a.success({message:"Reconnected",placement:"bottomLeft"})}))}))}}var Xt=a(1046),Qt=a(19),$t=r.a.createElement(Qt.a,{type:"loading",style:{fontSize:24,color:"#D04283"},spin:!0}),ea=a(88),ta=(a(577),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={},n}return Object(ue.a)(a,[{key:"render",value:function(){return this.props.auth0.isAuthenticated&&this.props.auth.user&&this.props.history.push("/nowPlaying"),r.a.createElement("div",{style:{width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Xt.a,{indicator:$t,spinning:!0}))}}]),a}(n.Component));var aa=Object(pe.b)((function(e){return{auth:e.auth}}),(function(e){return{actions:Object(i.b)({},e)}}))(Object(be.f)(Object(ea.a)(ta))),na=a(438),ra=a(1052),sa=(a(235),ra.a.Item),oa=window.google,ia=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).getLocation=Object(fe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation;case 2:e.sent.getCurrentPosition((function(e){e.coords?n.setState({myLocation:{lng:e.coords.longitude,lat:e.coords.latitude}}):It.a.info({message:"location permission not granted",placement:"bottomLeft"})}));case 4:case"end":return e.stop()}}),e)}))),n.onSuggestSelect=function(){var e=Object(fe.a)(he.a.mark((function e(t){var a,r,s,o,i,c,l,m,d,p;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.gmaps&&(t.gmaps.address_components.forEach((function(e){var t=e.types;t.indexOf("locality")>-1&&(s=e.long_name),(t.indexOf("sublocality_level_1")>-1||t.indexOf("route")>-1||t.indexOf("administrative_area_level_2")>-1)&&(a=e.long_name),t.indexOf("sublocality_level_2")>-1&&(r=e.long_name),t.indexOf("administrative_area_level_1")>-1&&(o=e.long_name),t.indexOf("postal_code")>-1&&(i=e.long_name),(t.indexOf("country")>-1||t.indexOf("political")>-1)&&(c=e.long_name)})),l=Intl.DateTimeFormat().resolvedOptions().timeZone,m=Object(K.get)(t,"location.lng",""),d=Object(K.get)(t,"location.lat",""),p=Object(u.a)(Object(u.a)({},n.props.userData),{},{businessName:Object(K.get)(t,"gmaps.name",t.label),addressLineOne:a,addressLineTwo:r,city:s,state:o,postalCode:i,country:c,timezone:l,cords:[m,d],companySearch:!0}),n.setState({userData:p},(function(){Object(K.get)(n.state,"userData.addressLineOne",!1)&&Object(K.get)(n.state,"userData.postalCode",!1)&&Object(K.get)(n.state,"userData.city",!1)&&Object(K.get)(n.state,"userData.state",!1)&&Object(K.get)(n.state,"userData.timezone",!1)?n.props.onSumbit(p):(p.missingData=!0,n.setState({userData:p},(function(){It.a.error({message:"Some required data is missing. Please fill out the below fields.",placement:"bottomLeft",duration:5}),n.props.onSumbit(p)})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={address:"",userData:{businessName:"",addressLineOne:"",addressLineTwo:"",city:"",state:"",postalCode:"",cords:[]},myLocation:{lng:0,lat:0}},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.myLocation;return r.a.createElement(ra.a,{className:"auto-complete-form"},r.a.createElement(sa,{className:"form-item"},t("userData",{rules:[{required:!0,message:"Please input Company name or address."}]})(r.a.createElement(na.a,{ref:function(t){return e._geoSuggest=t},onChange:function(e){return console.log(e)},placeholder:"Ambii Inc. 123 Main St",onSuggestSelect:this.onSuggestSelect,location:new oa.maps.LatLng(a.lat,a.lng),radius:20,country:"us"}))))}}]),a}(n.Component);var ca=ra.a.create()(ia),la=Object(be.f)(Object(pe.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(ca)),ua=a(465),ma=a(1059),da=a(68),pa=ra.a.Item,ga=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){console.log(e),n.props.form.validateFieldsAndScroll((function(e,t){console.log("vals: ",t);var a=n.checkIfValidTimezone(Object(K.get)(t,"timezone","")),r=n.checkIfValidState(Object(K.get)(t,"state",""));!e&&a&&r?n.setState({isLoading:!0},(function(){var e=Object(u.a)(Object(u.a)(Object(u.a)({},n.props.userData),n.state.userData),{},{businessName:Object(K.get)(t,"businessName","").toString(),addressLineOne:Object(K.get)(t,"addressLineOne","").toString(),addressLineTwo:Object(K.get)(t,"addressLineTwo","").toString(),city:Object(K.get)(t,"city","").toString(),state:Object(K.get)(t,"state","").toString(),postalCode:Object(K.get)(t,"postalCode","").toString(),country:Object(K.get)(t,"country","United States").toString(),cords:Object(K.get)(t,"cords",[]),timezone:Object(K.get)(t,"timezone",Intl.DateTimeFormat().resolvedOptions().timeZone)});n.props.onSumbit(e)})):(a||It.a.error({message:"Invalid timezone selection",placement:"bottomLeft"}),r?e?It.a.error({message:"One or more fields has an error",placement:"bottomLeft"}):It.a.error({message:"An error occurred",placement:"bottomLeft"}):It.a.error({message:"Invalid state selection",placement:"bottomLeft"}))}))},n.onSearch=function(e){var t=Object.keys(R),a=t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}));n.setState({selectedTimezone:e,timezoneRes:e.length<=0?t:a})},n.onSearchState=function(e){var t=Object.keys(U),a=t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}));n.setState({selectedState:e,statesRes:e.length<=0?t:a})},n.onSelect=function(e){n.setState({selectedTimezone:e})},n.onSelectState=function(e){n.setState({state:e})},n.state={address:"",dropdownError:!1,selectedTimezone:"",timezoneData:{},timezones:[],timezoneRes:[],selectedState:"",states:[],stateData:{},statesRes:[],userData:{businessName:Object(K.get)(n.props,"userData.businessName",""),addressLineOne:Object(K.get)(n.props,"userData.addressLineOne",""),addressLineTwo:Object(K.get)(n.props,"userData.addressLineTwo",""),city:Object(K.get)(n.props,"userData.city",""),country:Object(K.get)(n.props,"userData.country","United States"),state:Object(K.get)(n.props,"userData.state",""),cords:Object(K.get)(n.props,"userData.cords",[]),postalCode:Object(K.get)(n.props,"userData.postalCode",""),timezone:Object(K.get)(n.props,"userData.timezone","")}},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=[],t=[];Object.keys(R).forEach((function(t){e.push(t)})),Object.keys(U).forEach((function(e){t.push(e)}));var a=Intl.DateTimeFormat().resolvedOptions().timeZone;this.setState({timezoneRes:e,selectedTimezone:a,statesRes:t})}},{key:"checkIfValidTimezone",value:function(e){return!!e&&!!R[e]}},{key:"checkIfValidState",value:function(e){return!!e&&!!U[e]}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.timezoneRes,s=a.selectedTimezone,o=this.props.form.getFieldDecorator;return r.a.createElement(ra.a,{hideRequiredMark:!0,onSubmit:this.onSubmit},r.a.createElement("p",{style:{float:"right"}},"* Indicates a required field "),r.a.createElement(pa,{className:"form-item"},o("businessName",{rules:[{required:!0,message:"Please input your company name"}],initialValue:this.state.userData.businessName})(r.a.createElement(ua.a,{onPressEnter:function(){t.onSubmit()},placeholder:"* Enter Company Name"}))),r.a.createElement(pa,{className:"form-item"},o("addressLineOne",{rules:[{required:!0,message:"Please input your Address"}],initialValue:this.state.userData.addressLineOne})(r.a.createElement(ua.a,{onPressEnter:function(){t.onSubmit()},placeholder:"* Enter Address Line 1"}))),r.a.createElement(pa,{className:"form-item"},o("addressLineTwo",{initialValue:this.state.userData.addressLineTwo})(r.a.createElement(ua.a,{onPressEnter:function(){t.onSubmit()},placeholder:"Enter Address Line 2"}))),r.a.createElement(pa,{className:"form-item"},o("city",{rules:[{required:!0,message:"Please input City"}],initialValue:this.state.userData.city})(r.a.createElement(ua.a,{onPressEnter:function(){t.onSubmit()},placeholder:"* Enter City"}))),r.a.createElement(pa,{className:"form-item"},o("state",{rules:[{required:!0,message:"Please input your state"}],initialValue:this.state.userData.state})(r.a.createElement(ma.a,{placeholder:"* Enter State",value:null===(e=this.state)||void 0===e?void 0:e.state,dataSource:this.state.statesRes,onSelect:function(e){return t.onSelectState(e)},onSearch:function(e){return t.onSearchState(e)}}))),r.a.createElement(pa,{className:"form-item"},o("postalCode",{rules:[{required:!0,message:"Please input your Postal Code"}],initialValue:this.state.userData.postalCode})(r.a.createElement(ua.a,{type:"number",onPressEnter:function(){t.onSubmit()},placeholder:"* Enter Postal Code"}))),r.a.createElement(pa,{className:"form-item"},o("timezone",{rules:[{required:!0,message:"Please input your location's timezone"}],initialValue:s})(r.a.createElement(ma.a,{placeholder:"* Enter Location Timezone",dataSource:n,style:{width:"100%"},onSelect:function(e){return t.onSelect(e)},onSearch:function(e){return t.onSearch(e)}}))),r.a.createElement(da.a,{style:{float:"right"},type:"primary",onClick:function(){return t.onSubmit()}},"Confirm Address"))}}]),a}(n.Component);var ha=ra.a.create()(ga),fa=Object(be.f)(Object(pe.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(ha)),va=a(291),ba=a(1054),ya=a(1055),Ea=a(5),Sa=(a(347),a(665),va.a.Option),Oa=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){var t=n.state,a=t.countryCode,r=t.businessType;e.preventDefault();var s=r.toLowerCase()!=="Select Business Type".toLowerCase(),o=Object(K.get)(n.props,"userData.userType","company");n.props.form.validateFieldsAndScroll((function(e,t){if(Object.keys(e||[]).length<=0&&("company"!==o||s)){var i,c,l=Object(u.a)(Object(u.a)({},n.props.userData),{},{firstName:null!==(i=t.firstName)&&void 0!==i?i:"",lastName:null!==(c=t.lastName)&&void 0!==c?c:"",phoneNumber:a.concat(n.parsePhoneNumber(Object(K.get)(t,"phone","234567890"))),businessType:"individual"===o?"other":r});"individual"===o&&(Object(K.get)(n.props,"userData.name",null)||(l.name="Individual"),Object(K.get)(n.props,"userData.addressLineOne",null)||(l.addressLineOne=""),Object(K.get)(n.props,"userData.addressLineTwo",null)||(l.addressLineTwo=""),Object(K.get)(n.props,"userData.city",null)||(l.city=""),Object(K.get)(n.props,"userData.state",null)||(l.state=""),Object(K.get)(n.props,"userData.postalCode",null)||(l.postalCode=""),Object(K.get)(n.props,"userData.timezone",null)||(l.timezone=""),Object(K.get)(n.props,"userData.cords",null)||(l.cords=[])),n.props.onSumbit(l)}else s||n.setState({dropdownError:!0})}))},n.state={businessType:"Select Business Type",dropdownError:!1,countryCode:"1"},n}return Object(ue.a)(a,[{key:"menu",value:function(){var e=this;return r.a.createElement(ba.a,{onClick:function(t){return e.handleMenuClick(t)},id:"company-info-dropdown-menu"},r.a.createElement(ba.a.Item,{key:"bar"},"Bar"),r.a.createElement(ba.a.Item,{key:"cafe"},"Cafe"),r.a.createElement(ba.a.Item,{key:"gym"},"Gym"),r.a.createElement(ba.a.Item,{key:"hotel"},"Hotel"),r.a.createElement(ba.a.Item,{key:"other"},"Other"),r.a.createElement(ba.a.Item,{key:"restaurant"},"Restaurant"),r.a.createElement(ba.a.Item,{key:"salon"},"Salon"),r.a.createElement(ba.a.Item,{key:"school"},"School"),r.a.createElement(ba.a.Item,{key:"spa"},"Spa"),r.a.createElement(ba.a.Item,{key:"shop"},"Shop"))}},{key:"handleMenuClick",value:function(e){this.setState({businessType:e.key,dropdownError:!1})}},{key:"parsePhoneNumber",value:function(e){return e.replace(/\D/g,"")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.businessType,s=a.dropdownError,o=t("prefix",{initialValue:a.countryCode})(r.a.createElement(va.a,{style:{width:70,borderRight:"1px solid #d9d9d9"}},r.a.createElement(Sa,{value:"1"},"+1")));return r.a.createElement(ra.a,{hideRequiredMark:!0,onSubmit:this.onSubmit,className:"company-info-form"},"company"===Object(K.get)(this.props,"userData.userType","company")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ra.a.Item,{className:"form-item no-margin",label:"First Name:"},t("firstName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your first name!"}]})(r.a.createElement(ua.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter First Name"}))),r.a.createElement(ra.a.Item,{className:"form-item no-margin",label:"Last Name:"},t("lastName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your last name!"}]})(r.a.createElement(ua.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter Last Name"}))),r.a.createElement(ra.a.Item,{label:"Phone"},t("phone",{rules:[{required:!0,message:"Please input your phone number!",min:10,pattern:/^[0-9 ()-]*$/}]})(r.a.createElement(ua.a,{addonBefore:o,placeholder:"Phone Number"}))),r.a.createElement(ra.a.Item,{label:"Type"},r.a.createElement(ya.a,{overlay:this.menu(),trigger:["click"],className:s?"button-error":""},r.a.createElement(da.a,{style:{textTransform:"capitalize"}},n," ",r.a.createElement(Ea.a,{icon:B.b,style:{marginLeft:"5px"}}))))),r.a.createElement(da.a,{style:{float:"right"},type:"primary",onClick:function(t){return e.onSubmit(t)}},"Continue"))}}]),a}(n.Component);var wa=ra.a.create()(Oa),ja=Object(be.f)(Object(pe.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(wa)),ka=a(1057),Na=ka.a.Step,Ca=[{key:"Company"},{key:"Contact Info"}],La=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).next=function(e){if(e){var t=Object(K.get)(e,"missingData",!1);t&&delete e.missingData,n.setState({current:t?n.state.current:n.state.current+1,userData:e,steps:Ca,companySearch:!t&&n.state.companySearch})}n.state.current===n.state.steps.length-1&&n.signUpSubmit(e)},n.signUpSubmit=function(e){n.setState({isLoading:!0},(function(){e?(delete e.missingData,delete e.companySearch,n.props.actions.signUp(e).then((function(t){n.props.actions.mixMaxRegister({id:Object(K.get)(t,"data.user._id",""),email:Object(K.get)(e,"email",""),name:Object(K.get)(e,"firstName","Ambii")+" "+Object(K.get)(e,"lastName","User")}),n.setState({isLoading:!1}),t.success&&(je({category:m,action:f,value:Object(K.get)(e,"email","")}),n.props.history.push("/"))})).catch((function(e){je({category:m,action:f,value:e,label:T}),n.setState({isLoading:!1,current:0}),It.a.error({message:Object(K.get)(e,"userData.message","Something went wrong. Please try again"),placement:"bottomLeft"})}))):(n.setState({isLoading:!1}),It.a.error({message:"Fields are missing",placement:"bottomLeft"}))}))},n.prev=function(){n.setState({current:n.state.current-1})},n.state={isLoading:!1,current:0,companySearch:!0,steps:Ca,userData:{}},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){ke()}},{key:"quickDevSignup",value:function(){this.signUpSubmit({businessName:"Some Test Location",addressLineOne:"Santa Clara County",city:"Mountain View",state:"California",postalCode:"94043",country:"United States",timezone:"America/Los_Angeles",cords:[-122.096419,37.4218],firstName:"Test",lastName:"User",phoneNumber:"1234567890",businessType:"restaurant"})}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.steps,s=t.userData,o=t.isLoading,i=t.companySearch,c=ze.includes("localhost")||ze.includes("-dev");return r.a.createElement(Xt.a,{indicator:$t,spinning:o},r.a.createElement("div",{className:"signup-modal-subtitle"},"Let's set up your first location!"),r.a.createElement("div",{className:"signUp-container"},a>=0&&r.a.createElement(ka.a,{className:"steps",progressDot:!0,current:a,style:{textAlign:"justify"}},n.map((function(e){return r.a.createElement(Na,{key:e.key,title:e.key})}))),{0:i?r.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter business name or address"):null,1:r.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter your contact information")}[a],r.a.createElement("div",{className:"form_container"},{0:i?r.a.createElement(la,{onSumbit:this.next,userData:s}):r.a.createElement(fa,{onSumbit:this.next,userData:s}),1:r.a.createElement(ja,{onSumbit:this.next,userData:s})}[a],r.a.createElement("div",{className:"button_row",style:{float:"right"}},!o&&a>0&&r.a.createElement(da.a,{onClick:function(){return e.prev()},style:{marginRight:"10px"}},"Previous"),c?r.a.createElement(da.a,{onClick:function(){return e.quickDevSignup()}},"Dev Signup"):null,i&&0===a?r.a.createElement(da.a,{onClick:function(){return e.setState({companySearch:!1})}},"Manually Enter Company"):null,i||0!==a?null:r.a.createElement(da.a,{onClick:function(){return e.setState({companySearch:!0})},style:{marginRight:"10px"}},"Search Company")))))}}]),a}(n.Component);var Ia=ra.a.create()(La),Ma=Object(be.f)(Object(pe.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({signUp:Nt,mixMaxRegister:Ct},e)}}))(Ia)),Ta=(a(666),ra.a.Item),Pa=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e))._onLogin=function(){n.props.form.validateFieldsAndScroll((function(e,t){e?It.a.error({message:"Fields Required",placement:"bottomLeft"}):n.setState({isLoading:!0},(function(){t.email,t.password}))}))},n.state={isLoading:!1,isLogin:!1,userData:{email:"",password:""}},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){ke(),localStorage.getItem("ambii_auth_jwt")&&this.props.history.push("/nowPlaying")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(Xt.a,{indicator:$t,spinning:this.state.isLoading},r.a.createElement("div",{className:"form-container"},r.a.createElement(ra.a,{className:"form-wrapper",hideRequiredMark:!0,onSubmit:this._onLogin},r.a.createElement(Ta,{className:"form-item no-margin"},t("email",{rules:[{type:"email",message:"The input is not a valid Email!"},{required:!0,message:"Please input your Email!"}]})(r.a.createElement(ua.a,{onPressEnter:function(){e._onLogin()},placeholder:"Email"}))),r.a.createElement(Ta,{className:"form-item"},t("password",{rules:[{required:!0,message:"Please input your password!"}]})(r.a.createElement(ua.a.Password,{onPressEnter:function(){e._onLogin()},placeholder:"Password"}))),r.a.createElement(da.a,{className:"login-btn",block:!0,type:"primary",onClick:function(){return e.props.auth0.loginWithRedirect()}},"Login"))))}}]),a}(n.Component);var xa,Aa,Da,_a,Ba,Fa,Ra,Ua,Va,za=ra.a.create()(Pa),qa=(Object(be.f)(Object(pe.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(Object(ea.a)(za))),a(667),function(e){var t=e.storeCode,a=e.fontSize;return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},t?t.split("").map((function(e,t){return r.a.createElement("div",{key:t,className:"storeCode-character"},r.a.createElement("p",{style:{fontWeight:"bold",color:"#2A2A2A",fontSize:a||"28px",margin:"0"}},e))})):null)}),Ha=a(1053),Wa=a(1048),Ga=a(44),Ka=a(16);function Ya(){return(Ya=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ja(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Za=function(e){var t=e.svgRef,a=e.title,n=Ja(e,["svgRef","title"]);return r.a.createElement("svg",Ya({id:"Layer_1",viewBox:"0 0 408 466.9",width:2185,height:2500,ref:t},n),a?r.a.createElement("title",null,a):null,xa||(xa=r.a.createElement("style",null,".st0{fill:url(#SVGID_1_)}.st1{fill:url(#SVGID_2_)}.st2{fill:url(#SVGID_3_)}.st3{fill:url(#SVGID_4_)}")),Aa||(Aa=r.a.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",y1:112.094,x2:261.746,y2:112.094},r.a.createElement("stop",{offset:0,stopColor:"#63be6b"}),r.a.createElement("stop",{offset:.506,stopColor:"#5bbc6a"}),r.a.createElement("stop",{offset:1,stopColor:"#4ab96a"}))),Da||(Da=r.a.createElement("path",{className:"st0",d:"M261.7 142.3L15 1.3C11.9-.5 8-.4 5 1.4c-3.1 1.8-5 5-5 8.6 0 0 .1 13 .2 34.4l179.7 179.7 81.8-81.8z"})),_a||(_a=r.a.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:.152,y1:223.393,x2:179.896,y2:223.393},r.a.createElement("stop",{offset:0,stopColor:"#3ec6f2"}),r.a.createElement("stop",{offset:1,stopColor:"#45afe3"}))),Ba||(Ba=r.a.createElement("path",{className:"st1",d:"M.2 44.4C.5 121.6 1.4 309 1.8 402.3L180 224.1.2 44.4z"})),Fa||(Fa=r.a.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:179.896,y1:229.464,x2:407.976,y2:229.464},r.a.createElement("stop",{offset:0,stopColor:"#faa51a"}),r.a.createElement("stop",{offset:.387,stopColor:"#fab716"}),r.a.createElement("stop",{offset:.741,stopColor:"#fac412"}),r.a.createElement("stop",{offset:1,stopColor:"#fac80f"}))),Ra||(Ra=r.a.createElement("path",{className:"st2",d:"M402.9 223l-141.2-80.7-81.9 81.8 92.4 92.4L403 240.3c3.1-1.8 5-5.1 5-8.6 0-3.6-2-6.9-5.1-8.7z"})),Ua||(Ua=r.a.createElement("linearGradient",{id:"SVGID_4_",gradientUnits:"userSpaceOnUse",x1:1.744,y1:345.521,x2:272.296,y2:345.521},r.a.createElement("stop",{offset:0,stopColor:"#ec3b50"}),r.a.createElement("stop",{offset:1,stopColor:"#e7515b"}))),Va||(Va=r.a.createElement("path",{className:"st3",d:"M1.7 402.3c.2 33.3.3 54.6.3 54.6 0 3.6 1.9 6.9 5 8.6 3.1 1.8 6.9 1.8 10 0l255.3-148.9-92.4-92.4L1.7 402.3z"})))},Xa=r.a.forwardRef((function(e,t){return r.a.createElement(Za,Ya({svgRef:t},e))})),Qa=(a.p,a(668),a(446)),$a=a.n(Qa),en=a(1047),tn=a(282),an=a.n(tn),nn=function(){function e(){Object(le.a)(this,e)}return Object(ue.a)(e,null,[{key:"initialize",value:function(){window.lock=new an.a(Ve,"auth.ambii.io",{configurationBaseUrl:"https://ambii.us.auth0.com",autoclose:!0,autofocus:!0,closable:!0,allowShowPassword:!0,auth:{redirectUrl:window.location.origin,responseType:"id_token",sso:!0},theme:{logo:"".concat(window.location.origin,"/icon.png"),primaryColor:"#d04283"},languageDictionary:{title:"",signUpTitle:"",forgotPasswordTitle:""},additionalSignUpFields:[]})}},{key:"getLock",value:function(){return window.lock}},{key:"isLoggedIn",value:function(){return localStorage.getItem("ambii_auth_jwt")}},{key:"login",value:function(){window.lock.show()}},{key:"signUp",value:function(){window.lock.show({initialScreen:"signUp"})}},{key:"logout",value:function(){localStorage.removeItem("ambii_auth_jwt"),window.lock.logout()}}]),e}(),rn=function(){function e(){Object(le.a)(this,e)}return Object(ue.a)(e,null,[{key:"inApp",value:function(){return window.inApp}},{key:"send",value:function(e,t){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({data:t,endpoint:e}))}}]),e}(),sn=en.a.Content,on=null,cn=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).assignStation=function(){var e=n.props,t=e.location,a=e.close,r=e.history,s=e.actions,o=e.inApp,i=n.state.station;nn.isLoggedIn()?n.setState({startStationDisabled:!0},(function(){s.assignStation(i._id).then((function(e){n.setState({startStationDisabled:!1},(function(){if(je({category:d,action:s.startStation,value:Object(K.get)(i,"_id","Error")}),o){var c=Object(K.get)(n.props,"myLocation",null),l=Object(K.get)(e,"trackSchedule.queue",null);a(),c&&l?rn.send("newStation",{location:c,trackSchedule:l}):rn.send("newStation",null)}Object(K.get)(t,"pathname","").toLowerCase().includes("nowplaying")?a():o?r.push("/discover"):r.push("/nowPlaying",{isBack:!0})}))})).catch((function(e){console.log("assignStation err: ",e),It.a.error({message:"Error",description:"There was an error when assigning the station. Please refresh and try again.",placement:"bottomLeft"}),n.setState({startStationDisabled:!1})}))})):nn.signUp()},n.favoriteStation=function(){nn.isLoggedIn()?n.setState({favoriteDisabled:!0},(function(){var e=Object(K.get)(n.state,"station._id",""),t=Object(K.get)(n.props,"myLocation.favorites",[]);n.props.actions.toggleFavorite({stationId:e,favorites:t}).then((function(){je({category:h,action:L,value:e}),n.setState({favoriteDisabled:!1})}))})):nn.signUp()},n.state={isLoading:!0,station:{},isBackgroundImage:!1,explicit:!1,startStationDisabled:!1,favoriteDisabled:!1,isMobile:!1},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.checkForMobile(),document.body.scrollTop=document.documentElement.scrollTop=0,on=window.addEventListener("resize",(function(){e.checkForMobile()})),this.setStationDetails()}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",on),on=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"componentDidUpdate",value:function(e){Object(K.isEqual)(Object(K.get)(this.props,"playlistId",null),Object(K.get)(e,"playlistId",null))||this.setStationDetails()}},{key:"setStationDetails",value:function(){var e=Object(fe.a)(he.a.mark((function e(){var t=this;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0},Object(fe.a)(he.a.mark((function e(){var a,n,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Object(K.get)(t.props,"match.params.id",null)||Object(K.get)(t.props,"playlistId",null))){e.next=9;break}return e.next=4,t.props.actions.getStationDetails(a);case 4:n=e.sent,r=Object(K.get)(n,"explicit",!1),t.setState({isLoading:!1,explicit:r,station:n}),e.next=10;break;case 9:t.setState({isLoading:!1});case 10:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForMobile",value:function(){var e=this,t=this.state.isBackgroundImage;this.setState({isMobile:Z()},(function(){e.state.isMobile&&!t&&e.setStationBackgroundImage(),!e.state.isMobile&&t&&e.removeStationBackgroundImage()}))}},{key:"setStationBackgroundImage",value:function(){var e=this,t=this.state.station,a=setInterval((function(){var n=document.getElementById("station-header");n&&(n.style.backgroundImage="url('"+t.cover+"')",t.cover&&e.setState({isBackgroundImage:!0}),clearInterval(a))}),100)}},{key:"removeStationBackgroundImage",value:function(){var e=this,t=setInterval((function(){var a=document.getElementById("station-header");a&&(a.style.backgroundImage=null,e.setState({isBackgroundImage:!1}),clearInterval(t))}),100)}},{key:"checkIfFavorited",value:function(e){return!!Object(K.get)(this.props,"myLocation.favoritesMap",[])[e]}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.station,n=(e.explicit,e.startStationDisabled),s=e.favoriteDisabled,o=(e.isMobile,e.source,Object(K.get)(a,"_id","")),i=Object(K.get)(a,"track",[]),c=this.checkIfFavorited(o),l=!Object(K.get)(this.props,"myLocation.schedule._id","")&&Object(K.get)(this.props,"myLocation.station._id","")===o;return r.a.createElement(en.a,{className:"create-layout"},r.a.createElement(sn,{className:"create-body"},r.a.createElement(Xt.a,{indicator:$t,spinning:t},r.a.createElement("div",{id:"station-header",className:"cover-content-wrapper",style:{backgroundColor:void 0!==a.hex?a.hex:"#aa4e9f"}},r.a.createElement("div",{className:"headerLeft"},r.a.createElement("div",{className:"station-head-wrapper"},r.a.createElement("h1",{className:"cover-heading"},a.name)),r.a.createElement("div",{className:"cover-btn-div"},r.a.createElement(da.a,{size:"large",loading:n,className:"cover-btn".concat(l?" disabledButton":""),disabled:l||n,onClick:this.assignStation},l?null:r.a.createElement(Ea.a,{icon:B.c,className:"cover-icon"}),r.a.createElement("div",null," ",l?"Now Playing":"Start"," ")),r.a.createElement(da.a,{size:"large",loading:s,className:"cover-btn",disabled:s,onClick:this.favoriteStation},r.a.createElement(Ea.a,{icon:Ka.j,className:"cover-icon".concat(c?" favorited":"")}),r.a.createElement("div",null," ",c?"Favorited":"Favorite"," "))),r.a.createElement("div",{className:"description"},a.description)),r.a.createElement("div",{className:"headerRight"},r.a.createElement("img",{src:!a.cover&&a.name?J(a.name):a.cover,className:"stationImage",alt:""}))),r.a.createElement("div",{className:"station-table-wrapper"},r.a.createElement("div",{className:"station-table-item station-table-header"},r.a.createElement("div",{className:"station-table-track title"},r.a.createElement("h1",null,"Track")),r.a.createElement("div",{className:"station-table-artist title"},r.a.createElement("h1",null,"Artist/Album"))),i.map((function(e,t){return r.a.createElement("div",{className:"station-table-item",key:e._id,style:{opacity:t>.5*i.length?(i.length+1-t)/i.length:1}},r.a.createElement("div",{className:"station-table-track"},e.title),r.a.createElement("div",{className:"station-table-artist"},e.artist[0],", ",e.album))}))))))}}]),a}(n.Component);var ln=Object(pe.b)((function(e){return{auth:e.auth,user:e.auth.user,stations:e.stations.data,count:e.stations.count,myLocation:e.auth.location,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({getStationDetails:xt,assignStation:At,toggleFavorite:Mt},e)}}))(Object(be.f)(cn)),un=(a(871),function(e){var t=e.animate,a=e.speed,n=e.value,s=e.display,o=e.hideText,i=e.style;return r.a.createElement("div",{className:"bpm-container".concat("column"===s?" column":" row"),style:i},r.a.createElement("div",{className:"beat-container",style:{animation:t?"bpm ".concat(a,"s linear infinite"):"none"}}),!o&&n&&r.a.createElement("div",{className:"bpm-text"},"".concat(parseInt(n).toFixed(0)," BPM")))}),mn=a(48),dn=(a(872),function(e){var t=e.title,a=e.subtitle,n=e.style,s=e.backArrow,o=e.backArrowPress;return r.a.createElement("div",{className:"title-container",style:n},s&&r.a.createElement("div",{className:"backArrow",onClick:o},r.a.createElement(Ea.a,{icon:mn.a})),r.a.createElement("div",{className:"flexCol"},r.a.createElement("div",{className:"create-list-view-title"}," ",t," "),r.a.createElement("div",{className:"create-list-view-subtitle"}," ",a," ")),s&&r.a.createElement("div",{className:"backArrow"}))}),pn=(a(873),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={},n}return Object(ue.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content,n=e.icon,s=e.style,o=Array.isArray(a);return r.a.createElement("div",{className:"dashboard-module",style:s},r.a.createElement("div",{className:"dashboard-header"},r.a.createElement("div",{className:"dashboard-icon"},n&&r.a.createElement(Ea.a,{icon:n,style:{fontSize:"24px"}})),r.a.createElement("div",{className:"dashboard-title"},t),r.a.createElement("div",{className:"dashboard-icon"})),r.a.createElement("div",{className:"dashboard-content"},o?r.a.Children.map(a,(function(e){return r.a.cloneElement(e)})):a))}}]),a}(n.Component)),gn=(a(407),a(447)),hn=a.n(gn),fn=a(448),vn=a.n(fn),bn=a(283),yn=(a(874),Object(pe.b)((function(e){return{myLocation:e.auth.location}}))(Object(be.f)((function(e){var t,a=e.visible,n=e.onOk,s=e.onCancel,o=(e.history,e.myLocation),i=e.playStation,c=e.isApple,l=null===o||void 0===o||null===(t=o.storeCode)||void 0===t?void 0:t.split(""),u=function(e){window.open(e,"_blank")};return r.a.createElement(Ha.a,{centered:!0,className:"instructionModalContainer",visible:a,onOk:n,onCancel:function(){s()},closable:!0,footer:null},r.a.createElement("div",{className:"instructionModalWrapper"},r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"headerText"},"Connect Player"),r.a.createElement("div",{className:"contentInfo"},r.a.createElement("h3",null,"Download the ",r.a.createElement("span",{style:{color:"#D04283",fontWeight:"bold"}}," Ambii - Music for Business")," app on your phone/tablet and enter the code"),r.a.createElement("div",{className:"storeCodeWrapper"},r.a.createElement("h2",{className:"headerText"},"Store Code"),r.a.createElement("div",{className:"storeCodes"},void 0!==l?l.map((function(e){return r.a.createElement("div",{key:e,className:"codeBox"},e)})):null)),r.a.createElement("div",{className:"logos"},r.a.createElement("div",{className:"ambiiLogo"},r.a.createElement("img",{src:vn.a,height:"100%",width:"100%",alt:"..."})),r.a.createElement("div",{className:"store-button-wrapper",onClick:function(){return u("https://play.google.com/store/apps/details?id=com.ambii_business_music")}},!c&&r.a.createElement("div",{className:"store-button"},r.a.createElement(Xa,{className:"connect-music-icon brand-icon",style:{width:24,height:48}}),r.a.createElement("div",{className:"store-button-text"},r.a.createElement("div",{className:"store-button-subtitle"},"Download on"),r.a.createElement("div",{className:"store-button-title"}," Google Play "))),r.a.createElement("div",{className:"store-button",onClick:function(){return u("https://apps.apple.com/us/app/ambii-music-for-business/id1501666271")}},r.a.createElement(Ea.a,{icon:bn.a,className:"connect-music-icon brand-icon",style:{fontSize:"32px"}}),r.a.createElement("div",{className:"store-button-text"},r.a.createElement("div",{className:"store-button-subtitle"},"Download on"),r.a.createElement("div",{className:"store-button-title"}," App Store "))))),r.a.createElement("p",{className:"playOnWeb",onClick:function(){n(),i()}},"or play on the web instead")))),r.a.createElement("div",{className:"imageWrapper"},r.a.createElement("img",{src:hn.a,alt:"...",height:"100%",width:"100%"}))))})))),En=null,Sn=null,On=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).checkPlayerState=function(){var e=n.props,t=e.myLocation,a=e.player,r=Object(K.get)(t,"pairedDevice.deviceBrand",""),s=r&&Object(K.get)(n.state,"playerInfo.uniqueId","")===Object(K.get)(t,"pairedDevice.uniqueId",""),o=Object(u.a)({},n.state.playerInfo);o.storeCode=Object(K.get)(t,"storeCode",""),n.setState({playerInfo:o,isLoading:!Object(K.get)(t,"station",null),explicitAllowed:Object(K.get)(t,"explicitAllowed",!1),controllerStyle:!!r&&(s?"WEB":s?"MOBILE":"OTHER")},(function(){Object(K.get)(a,"showPlayer",null)?(n.getSongTime(),Object(K.get)(a,"isPlaying",null)&&(clearInterval(Sn),Sn=setInterval((function(){n.getSongTime()}),100))):clearInterval(Sn)}))},n.scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),Ne("Playlist Modal"),je({category:p,action:v,value:e,label:M})},n.afterCreateStaion=function(){n.setState({showStationSearch:!1})},n.toggleStationSearch=function(){var e=!n.state.showStationSearch;n.setState({showStationSearch:e}),e&&setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100)},n.parseLocationName=function(e){if(e)return e.split(",")[0]},n.connectPress=function(){n.setState({showAppModal:!0}),Ne("Connect Modal"),je({category:p,action:O,label:M})},n.loadPlayer=function(e){var t=e.override,a=Object(u.a)(Object(u.a)({},n.state.playerInfo),{},{override:t});n.setState({loadingPlayer:!0},(function(){n.props.actions.connectPlayer(a).then((function(){n.setState({showConnectModal:!1,loadingPlayer:!1})}))}))},n.playStation=function(){n.state.playButtonDisabled||n.setState({playButtonDisabled:!0},(function(){n.props.actions.connectPlayer(n.state.playerInfo).then((function(e){n.setState({playButtonDisabled:!1},(function(){"DEVICE_ALREADY_PAIRED"===e&&(Ne("Device Already Connected Modal"),n.setState({showConnectModal:!0})),je({category:p,action:E,label:M})}))})).catch((function(e){n.setState({playButtonDisabled:!1}),console.log("caught err: ",e)}))}))},n.toggleExplicit=function(){n.setState({loadingExplicit:!0},(function(){n.props.actions.toggleExplicit({currentTrack:Object(K.get)(n.props,"currentTrack",null)}).then((function(){n.setState({loadingExplicit:!1})}))}))},n.state={isMobile:Z(),isLoading:!1,loadingPlayer:!1,artistName:"",searchText:void 0,isFixHeader:!1,pageHeight:0,showStationSearch:!1,showAppModal:!1,showConnectModal:!1,showErrorModal:!1,playlistModalId:!1,playButtonDisabled:!1,userName:"",errorTitle:"",errorMessage:"",errorIcon:"",errorButton:"",playerInfo:{storeCode:Object(K.get)(n.props,"myLocation.storeCode",""),deviceName:"web",uniqueId:$(),deviceBrand:"web",override:!1},loadingExplicit:!1,currentSongTime:"0:00",currentSongDuration:"0:00",controllerStyle:!1,showInstructions:!1},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e,t=this,a=this.props,n=a.myLocation,r=a.user,s=a.actions,o=a.inApp;!1===(null===n||void 0===n?void 0:n.isDevicePaired)&&(null===n||void 0===n||null===(e=n.stationHistory)||void 0===e?void 0:e.length)<2&&this.setState({showInstructions:!0}),ke(),o&&rn.send("player","player/"+Object(K.get)(n,"storeCode","")),this.checkPlayerState(),this.setState({isMobile:Z(),userName:this.createUserName()},(function(){t.state.isMobile&&je({category:p,action:s.viewedMobile})})),Object(K.get)(r,"_id",null)&&(Le.emit(Ie,{userId:r._id}),s.addPlayerListeners(),s.updateStationListener(),s.updateCurrentTrackListener())}},{key:"componentWillUnmount",value:function(){try{this.props.actions.removePlayerListeners(),this.props.actions.removeStationListener(),clearInterval(Sn),clearTimeout(En)}catch(e){console.log("caught error when unmounting 'nowPlaying' page: ",e)}}},{key:"componentDidUpdate",value:function(e){var t=this;if(!Object(K.isEqual)(Object(K.get)(this.props,"myLocation",null),Object(K.get)(e,"myLocation",null))&&Object(K.get)(this.props,"myLocation",null)&&(Object(K.get)(this.props,"myLocation.station",null)||this.props.history.push("/discover"),this.checkPlayerState()),!Object(K.isEqual)(Object(K.get)(this.props,"player.playerError",null),Object(K.get)(e,"player.playerError",null))&&Object(K.get)(this.props,"player.playerError.error",null)){console.log("got player error!",Object(K.get)(this.props,"player.playerError",{}));var a=Object(K.get)(this.props,"player.playerError.title",""),n=Object(K.get)(this.props,"player.playerError.message",""),r=Object(K.get)(this.props,"player.playerError.icon",""),s=Object(K.get)(this.props,"player.playerError.button","");this.setState({showErrorModal:!0,errorTitle:a,errorMessage:n,errorIcon:r,errorButton:s}),this.props.actions.playerError({}),Ne("Error Modal"),je({category:p,value:n,label:T}),En=setTimeout((function(){t.closeErrorMessage(),clearTimeout(En),En=null}),3e5)}Object(K.isEqual)(Object(K.get)(this.props,"player.isPlaying",null),Object(K.get)(e,"player.isPlaying",null))&&Object(K.isEqual)(Object(K.get)(this.props,"player.showPlayer",null),Object(K.get)(e,"player.showPlayer",null))||(clearInterval(Sn),Sn=setInterval((function(){Object(K.get)(t.props,"player.isPlaying",null),t.getSongTime()}),100)),Object(K.isEqual)(Object(K.get)(this.props,"player.showPlayer",null),Object(K.get)(e,"player.showPlayer",null))||this.checkPlayerState(),Object(K.isEqual)(Object(K.get)(this.props,"myLocation.pairedDevice.deviceName",null),Object(K.get)(e,"myLocation.pairedDevice.deviceName",null))||console.log("Changed playback device")}},{key:"getSongTime",value:function(){try{var e=document.getElementById("current-song-time").innerHTML,t=document.getElementById("current-song-duration").innerHTML,a=document.getElementById("invis-current-song-time").innerHTML;this.setState({currentSongTime:e,currentSongDuration:t,songCompletion:a})}catch(n){console.log("getSongTime err: ",n)}}},{key:"createUserName",value:function(){var e=Object(K.get)(this.props,"user.firstName",""),t=Object(K.get)(this.props,"user.lastName","");return(e=e.substring(0,1).toUpperCase()+e.substring(1,e.length))+" "+(t=t.substring(0,1).toUpperCase()+t.substring(1,t.length))}},{key:"getTrackData",value:function(e){var t=this.props.myLocation,a=e;a||(a=Object(K.get)(t,"station.track[0]",null));var n={songImage:Object(K.get)(a,"picture",null),locationName:Object(K.get)(t,"name",null),songTrack:Object(K.get)(a,"title",null),bpm:Object(K.get)(a,"bpm",null),songArtist:Object(K.get)(a,"artist",null),storeCode:Object(K.get)(t,"storeCode",null),stationName:Object(K.get)(t,"station.name",null)};return Array.isArray(n.songArtist)&&(n.songArtist=n.songArtist[0]),n}},{key:"openLink",value:function(e){window.open(e,"_blank")}},{key:"closeErrorMessage",value:function(){this.setState({showErrorModal:!1,errorTitle:"",errorMessage:"",errorIcon:"",errorButton:""})}},{key:"openAdBlockMessage",value:function(){this.setState({showErrorModal:!0,errorTitle:"Please Disable Ad-Block",errorMessage:"All of our advertisements help fund small business relief programs. Please help us help them by disabling your ad-blocker.",errorIcon:r.a.createElement(Ea.a,{icon:Ka.k,className:"connect-icon",style:{color:"#d04283"}}),errorButton:"Ok, Got It"})}},{key:"sendToMobileDevice",value:function(e){this.props.inApp?rn.send("player","player/"+e):this.openLink("https://ambii.app.link/OpenMobile")}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:r.a.createElement(Ea.a,{icon:Ga.b,className:"connect-icon"})})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isApple,n=t.myLocation,s=Object(K.get)(this.props,"player",{}),o=s.isPlaying,i=s.skipDisabled,c=this.state,l=c.isLoading,u=c.loadingExplicit,m=c.songCompletion,d=c.controllerStyle,p=c.showAppModal,g=c.showConnectModal,h=c.showErrorModal,f=c.loadingPlayer,v=c.errorTitle,b=c.errorMessage,y=c.errorIcon,E=c.errorButton,S=c.playlistModalId,O=c.userName,w=c.isMobile,j=c.playButtonDisabled,k=c.currentSongTime,N=c.currentSongDuration,C=this.getTrackData(Object(K.get)(n,"currentTrack",null)),L=C.songImage,I=C.locationName,M=C.songTrack,T=C.songArtist,P=C.storeCode,x=C.stationName,A=Object(K.get)(n,"company.isIndividual","individual"===Object(K.get)(n,"name","").toLowerCase()),D=Object(K.get)(n,"isPlaying",!1),_=Object(K.get)(n,"station._id",null),B=Object(K.get)(n,"explicitAllowed",!1),F=Object(K.get)(n,"schedule.name",!1),R=Object(K.get)(n,"schedule._id",""),U=Z()?"90%":"80%",V=!1,z=!1,q=Object(K.get)(C,"bpm",100);q||(q=100);var H=document.getElementById("now-playing-info-wrapper")||null,W=document.getElementById("now-playing-track")||null,G=document.getElementById("now-playing-artist")||null;return H&&W&&G&&((H=H.getBoundingClientRect().width-(Z()?0:310))<(W=W.getBoundingClientRect().width)&&(V=!0),H<(G=G.getBoundingClientRect().width)&&(z=!0)),r.a.createElement("div",{className:"dashboard-page-wrapper"},r.a.createElement(Ha.a,{visible:Boolean(S),onCancel:function(){return e.showPlaylistModal(null)},width:U,bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},r.a.createElement(ln,{playlistId:S,close:function(){return e.showPlaylistModal(null)},source:"dashboard"})),r.a.createElement(dn,{title:r.a.createElement("span",null,"Welcome ",r.a.createElement("span",{style:{color:"#D04283"}},"Back")),subtitle:A?O:I}),r.a.createElement(Xt.a,{indicator:$t,spinning:l,style:{backgroundColor:"#f5f5f5",maxHeight:"100%"}},r.a.createElement("div",{className:"dashboard-content-wrapper"},r.a.createElement("div",{className:"nowPlayingContainer"},r.a.createElement("div",{className:"imgAndInfo",id:"now-playing-info-wrapper"},r.a.createElement("div",{className:"songImageContainer"},r.a.createElement("img",{className:"songImage noselect",src:L,alt:""})),r.a.createElement("div",{className:"infoContainer"},r.a.createElement("div",{className:"nowPlayingTitle"},"Now Playing",D&&q&&r.a.createElement(un,{animate:!0,speed:60/q,value:q,hideText:!0,style:{marginLeft:"12px",justifyContent:"flex-start"}})),r.a.createElement("div",{className:"songTitle",style:{justifyContent:w&&!V?"center":"flex-start"}},r.a.createElement("span",{id:"now-playing-track",className:V?"marquee":""},M)),r.a.createElement("div",{className:"songArtist",style:{justifyContent:w&&!z?"center":"flex-start"}},r.a.createElement("span",{id:"now-playing-artist",className:z?"marquee":""},T)),r.a.createElement("div",null,"Station:",r.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.showPlaylistModal(_)}},x)),F&&r.a.createElement("div",null,"Schedule:",r.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.props.history.push("/createSchedule/".concat(R))}},F))),r.a.createElement("div",{className:"adblock-div",onClick:function(){return e.openAdBlockMessage()}},r.a.createElement($a.a,null,r.a.createElement(Ea.a,{icon:Ka.k,className:"connect-icon"}))))),r.a.createElement("div",{className:"module-row"},"MOBILE"===d?r.a.createElement(pn,{title:"Playing on Mobile",icon:Ga.c,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(K.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(K.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!w&&r.a.createElement(Xt.a,{indicator:$t,spinning:j},r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(Ea.a,{icon:Ga.f,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"OTHER"===d?r.a.createElement(pn,{title:"Playing on Another Device",icon:Ga.f,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(K.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(K.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!w&&r.a.createElement(Xt.a,{indicator:$t,spinning:j},r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(Ea.a,{icon:Ga.f,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"WEB"===d?r.a.createElement(pn,{title:"Playing on Web",icon:Ga.f,style:{backgroundColor:"#D04283",borderColor:"#FFF",color:"#FFF"},content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},r.a.createElement("div",{className:"dashboard-music-controller"},r.a.createElement("div",{className:"dashboard-music-time"},k," / ",N),r.a.createElement("div",{className:"dashboard-music-controls"},o?r.a.createElement(Ea.a,{icon:Ka.o,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(!1)}}):r.a.createElement(Ea.a,{icon:Ka.p,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(K.stubTrue)}}),r.a.createElement(Ea.a,{icon:Ka.t,className:"music-controller-icon".concat(i?" disabled":""),onClick:function(){return i?null:e.skipSong(m)}}),r.a.createElement(Ea.a,{icon:Ga.e,className:"music-controller-icon close-icon",onClick:function(){return e.props.actions.disconnectPlayer()}}))),r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283",marginTop:"10px"},onClick:function(){return w?e.sendToMobileDevice(P):e.connectPress()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(Ea.a,{icon:Ga.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},w?"Open App":"Play on Mobile")))]}):r.a.createElement(pn,{title:"Play Music",icon:Ka.n,content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},!w&&r.a.createElement(Xt.a,{indicator:$t,spinning:j},r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginBottom:"15px"},onClick:function(){return e.playStation()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(Ea.a,{icon:Ga.f,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))),r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283"},onClick:function(){return w?e.sendToMobileDevice(P):e.connectPress()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(Ea.a,{icon:Ga.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},w?"Open App":"Play on Mobile")))]}),r.a.createElement("div",{className:"flexCol",style:{justifyContent:"space-evenly"}},r.a.createElement(pn,{title:"Store Code",icon:Ka.l,content:[r.a.createElement(qa,{storeCode:P,fontSize:"22px"})]}),r.a.createElement(pn,{title:"Settings",icon:Ka.f,content:r.a.createElement("div",{className:"dashboard-setting-wrapper"},r.a.createElement("div",{className:"dashboard-setting-text"},"Allow Explicit"),r.a.createElement("div",{className:"dashboard-setting-option"},r.a.createElement(Wa.a,{style:{width:"30px"},checked:B,disabled:null===B,loading:u,onClick:function(){return e.toggleExplicit()}})))}))))),r.a.createElement(yn,{visible:p,onOk:function(){return e.setState({showAppModal:!1})},onCancel:function(){return e.setState({showAppModal:!1})},playStation:this.playStation,isApple:a}),r.a.createElement(Ha.a,{visible:g,onOk:function(){return e.setState({showConnectModal:!1})},onCancel:function(){return e.setState({showConnectModal:!1})},width:U,footer:[],className:"app-modal"},r.a.createElement("div",{className:"connect-wrapper"},r.a.createElement("div",{className:"connect-header"},"Device Already Connected!"),r.a.createElement("div",{className:"connect-text"},"Another device is already connected to this account. Would you like to play music on this device instead?"),r.a.createElement("div",{className:"connect-display rowItem"},r.a.createElement(Ea.a,{icon:Ga.g,className:"connect-icon"})),r.a.createElement("div",{className:"connect-button-group"},r.a.createElement(da.a,{className:"optionButton",loading:f,disabled:f,onClick:function(){return e.loadPlayer({override:!0})}},"Yes, Connect"),r.a.createElement(da.a,{className:"optionButton mobile-padding",onClick:function(){return e.setState({showConnectModal:!1})}},"No, Cancel")))),r.a.createElement(Ha.a,{visible:h,onOk:function(){return e.closeErrorMessage()},onCancel:function(){return e.closeErrorMessage()},width:U,footer:[],className:"app-modal"},r.a.createElement("div",{className:"connect-wrapper"},r.a.createElement("div",{className:"connect-header"},v),r.a.createElement("div",{className:"connect-text"},b),r.a.createElement("div",{className:"connect-display rowItem"},y),r.a.createElement("div",{className:"connect-button-group"},r.a.createElement(da.a,{className:"optionButton mobile-padding",onClick:function(){return e.closeErrorMessage()}},E||"Ok")))),r.a.createElement(yn,{visible:this.state.showInstructions,onOk:function(){return e.setState({showInstructions:!1})},playStation:this.playStation,isApple:a,onCancel:function(){e.setState({showInstructions:!1})}}))}}]),a}(n.Component);var wn=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,player:e.player,currentTrack:e.auth.location.currentTrack,isApple:e.auth.isApple,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({addPlayerListeners:ut,removePlayerListeners:ft,updateStationListener:vt,updateCurrentTrackListener:bt,removeStationListener:yt,connectPlayer:dt,playerError:$e,assignStation:At,toggleExplicit:Tt,setDisableSkip:at,skipSong:gt,setIsPlaying:tt,disconnectPlayer:mt},e)}}))(Object(be.f)(On)),jn=a(56),kn=a(73),Nn=a(451),Cn=(a(285),a(466)),Ln=(a(878),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={isHovered:!1},e.onMouseOver=function(){e.setState({isHovered:!0})},e.onMouseOut=function(){e.setState({isHovered:!1})},e}return Object(ue.a)(a,[{key:"render",value:function(){var e=this.props,t=e.performSelect,a=e.text;return r.a.createElement("div",{className:"mood_tag",onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:t},r.a.createElement("span",{style:{marginLeft:8}},a))}}]),a}(n.Component)),In=(a(879),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).removeTag=function(e){return function(){n.props.performSelect(e)}},n.onChangeText=function(e){n.setState({search:e.target.value},(function(){var e=Object(Lt.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))},n.performSelect=function(e){return function(){n.props.performSelect(e),n.setState({search:""},(function(){var e=Object(Lt.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))}},n.filterTagArray=function(){var e=new Set(n.props.selectedTags);return Object(Lt.a)(n.state.tags).filter((function(t){return!e.has(t)}))},n.handleClick=function(e){n.node.contains(e.target)||n.setState({isSearchFocused:!1})},n.state={tags:n.props.items,search:"",isSearchFocused:!1},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.isSearchFocused;return r.a.createElement(Cn.a,{handleHeight:!0},(function(t){var s=t.height;return r.a.createElement("div",{className:"mood_container",ref:function(t){return e.node=t}},r.a.createElement("div",{className:"input-tag ".concat(n?"red-focus":"")},r.a.createElement("ul",{className:"input-tag__tags",ref:function(t){return e.tagListRef=t}},e.props.selectedTags.map((function(t,a){return r.a.createElement("li",{key:t},t,r.a.createElement("button",{type:"button",className:"remove_btn",onClick:e.removeTag(t)},"+"))})),r.a.createElement("li",{className:"input-tag__tags__input"},r.a.createElement("textarea",{className:"mood_searchBar",type:"text",placeholder:"Search for Moods",onFocus:function(){return e.setState({isSearchFocused:!0})},value:a,onChange:e.onChangeText,ref:function(t){e.tagInput=t}}),r.a.createElement(Ea.a,{icon:mn.h,color:"rgba(95, 95, 95, 0.4)"})))),n?r.a.createElement("div",{className:"tag-result",style:{position:"absolute",top:s}},e.filterTagArray().map((function(t,a){return r.a.createElement(Ln,{key:a,text:t,performSelect:e.performSelect(t)})}))):null)}))}}]),a}(n.Component));a(880);function Mn(e){var t=function(t,a){return function(){a!==e.currentSelectedTempo?e.selectTempo(t,a):e.deSelectTempo()}};return r.a.createElement("div",{className:"tempo_container"},Object.keys(F).map((function(a,n){return r.a.createElement("div",{key:n,className:"wrapper"},r.a.createElement("div",{className:"energy",onClick:t([F[a].min,F[a].max],n),style:{backgroundColor:n===e.currentSelectedTempo?"rgba(95, 95, 95, 0.1)":"white"}},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"inner"},r.a.createElement(Ea.a,{icon:F[a].icon,className:"tempo_icon"}),r.a.createElement("span",null,F[a].title)))))})))}a(881),["10's","00's","90's","80's","70's","60's"].reverse();var Tn=function(e){var t=e.browseMoods,a=e.currentSelectedTempo,n=e.onSelectTempo,s=e.onDeselectTempo,o=(e.browseEraRange,e.onSelectEra,e.onSelectMood);return r.a.createElement("div",null,r.a.createElement("div",{className:"moodWrapper",style:{margin:"auto"}},r.a.createElement("div",{className:"browseSettingsTitle"},"Tags"),r.a.createElement("div",{className:"browseSelectionsContainer"},r.a.createElement(In,{items:Object.keys(t),selectedTags:Object.keys(t).filter((function(e){return!0===t[e]})),performSelect:o}))),r.a.createElement("div",{className:"tempoWrapper",style:{margin:"auto"}},r.a.createElement("div",{className:"browseSettingsTitle"},"Energy"),r.a.createElement("div",{className:"browseSelectionsContainer"},r.a.createElement(Mn,{currentSelectedTempo:a,selectTempo:n,deSelectTempo:s}))))},Pn=a(213),xn=a(1049),An=(a(882),function(e){var t=e.visible,a=e.onCancel,n=e.tracks,s=e.title;return r.a.createElement(Ha.a,{title:s,visible:t,onCancel:a,footer:[]},n.map((function(e,t){return r.a.createElement("div",{className:"track-container",key:t},e.albumCover?r.a.createElement(xn.a,{shape:"square",size:50,src:e.albumCover}):r.a.createElement(xn.a,{shape:"square",size:50,icon:"user"}),r.a.createElement("div",null,r.a.createElement("p",{style:{marginLeft:10},className:"heading-regular margin-0"},e.title),r.a.createElement("p",{style:{marginLeft:10},className:"margin-0"},e.artist)))})))}),Dn=(a(883),function(e){var t,a,n=e.genres,s=e.roundBottom,o=e.bpm,i=e.simple,c=Object.entries(n||[]).sort((function(e,t){return t[1]-e[1]})).slice(0,3),l=0;try{t=c[0][1],a=c[1][1],l=c[2][1]}catch(p){console.log("Not all genre fields available")}var u=(t&&t>.1?t:0)+(a&&a>.1?a:0)+(l&&l>.1?l:0),m=function(e){return e/u},d=Q(o);return r.a.createElement("div",{className:"genre-container"},r.a.createElement("div",{className:"genre-color-bar"},c.map((function(e,t){var a=e[0],o=m(e[1]);return r.a.createElement("div",{className:"genre-wrapper",style:{width:"".concat(100*o,"%"),display:o>.1?"flex":"none"},key:a},r.a.createElement("div",{className:"genre-chunk",style:{backgroundColor:P[a],borderBottomLeftRadius:0===t&&s?"8px":null,borderBottomRightRadius:t===n.length-1&&s?"8px":null}}))}))),!i&&r.a.createElement("div",{className:"genre-tile-info-wrapper"},r.a.createElement("div",{className:"genre-tile-genre-wrapper"},c.map((function(e,t){var a=e[0];if(m(e[1])>.1)return r.a.createElement("div",{className:"flexRow",key:a},r.a.createElement("div",{className:"genre-color-dot",style:{backgroundColor:P[a]}}),r.a.createElement("span",{style:{position:"relative",bottom:4,left:4,fontWeight:0===t?"bold":"normal"}},a))}))),r.a.createElement("div",{className:"genre-bpm"},r.a.createElement(Ea.a,{icon:Object(K.get)(d,"icon",""),className:"bpm-icon"}),r.a.createElement("div",null,Object(K.get)(d,"title","")))))}),_n=(a(884),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={modalVisible:!1,hovered:!1},e.showModal=function(){e.setState({modalVisible:!0})},e.hideModal=function(){e.setState({modalVisible:!1})},e.stationPress=function(t,a){var n=e.props.history;t&&(je({category:d,action:C,value:a,label:M}),n.push("/station/".concat(t)))},e}return Object(ue.a)(a,[{key:"render",value:function(){var e=this,t=this.state.modalVisible,a=this.props,n=a.bpm,s=a.genres,o=a._id,i=a.hex,c=a.track,l=a.title,u=a.type,m=a.rowIndex,d=a.browse,p=a.showPlaylistModal,g=a.isApple,h=(a.explicit,"advanced"===u?"advanced-station-preview":"public-station noselect"),f=(o?"item-container pointer":"item-container-preview item-container pointer").concat(0===m?" first-row":""),v=Object(K.get)(this.props,"name",""),b=Object(K.get)(n,"mean",1);return r.a.createElement("div",{className:h,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:d?{margin:"0px 0px 10px 0px",border:"2px solid white"}:{border:"2px solid white"},onClick:function(){return p(o)}},r.a.createElement("div",{className:f,style:{backgroundColor:i,backgroundImage:"url(".concat(J(this.props.name),")")}},r.a.createElement("div",{className:"station-tile-header"},"advanced"!==u&&r.a.createElement("div",{style:o?{}:{fontSize:14},className:"name"},v?v.replace(" (Explicit)",""):l))),c&&c.length?r.a.createElement(An,{title:v,visible:t,onCancel:this.hideModal,tracks:c}):null,r.a.createElement("div",{className:"info-container"},r.a.createElement(Dn,{genres:s,showStats:!g,bpm:b||100})))}}]),a}(r.a.PureComponent)),Bn=(a(885),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showArrows:!1,showLeftArrow:!1,showRightArrow:!0,diff:0},e}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth,a=Math.round(5*e/100);this.setState({diff:t-e+a}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.title,s=t.type,o=t.showViewAll,i=t.rowIndex,c=t.isApple,l=Object(K.get)(this.props,"data",[]),u=this.state,m=u.showArrows,d=u.showLeftArrow,p=u.showRightArrow,g=u.diff;return r.a.createElement("section",{className:"feature-section",id:a,style:o?{}:{padding:"25px 0px"}},r.a.createElement("div",{className:"feature-section-head-wrapper"},r.a.createElement("div",{className:"feature-section-title-wrapper"},r.a.createElement("div",{className:"preMargin"}),r.a.createElement("div",{className:"heading heading-large"}," ",n," "),!o&&r.a.createElement(da.a,{type:"primary",onClick:function(){return Fn(0,s,e.props.history)}},r.a.createElement(Ea.a,{icon:mn.d}),"Go back"))),r.a.createElement("div",{className:"description"},D[n]),r.a.createElement("div",{className:"blurredWrapper"},r.a.createElement("div",{className:"blurredEdgeStart",onMouseEnter:function(){e.rightMoveSpeed=2,e.scrollRight=setInterval((function(){e.rightMoveSpeed=Math.min(12,e.rightMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:-e.rightMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},m&&d?r.a.createElement(Ea.a,{icon:mn.b}):null),r.a.createElement(Pn.a,{className:"stationPreviewWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===g?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},r.a.createElement("div",{className:"preMargin"}),r.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},l.map((function(t,a){return r.a.createElement(_n,Object.assign({assignStation:e.props.actions.assignStation,showPlaylistModal:e.props.showPlaylistModal,company:e.props.company,history:e.props.history,key:a,rowIndex:i,isApple:c},t))})))),r.a.createElement("div",{className:"blurredEdgeEnd",onMouseEnter:function(){e.leftMoveSpeed=2,e.scrollLeft=setInterval((function(){e.leftMoveSpeed=Math.min(12,e.leftMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:e.leftMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},m&&p?r.a.createElement(Ea.a,{icon:mn.c}):null)))}}]),a}(n.Component)),Fn=function(e,t,a){0===e&&a.push("/discover",{isBack:!0}),1===e&&(je({category:d,action:C,value:"View More",label:M}),a.push("/stations/".concat(t)))};var Rn=Object(pe.b)((function(e){return{activeStationPreview:e.activeStationPreview}}),(function(e){return{actions:Object(i.b)({assignStation:At},e)}}))(Object(be.f)(Bn)),Un=(a(886),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={showArrows:!1,showLeftArrow:!1,showRightArrow:!0,diff:0},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth;this.setState({diff:t-e}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.showArrows,n=t.showLeftArrow,s=t.showRightArrow,o=t.diff;return r.a.createElement("div",{className:"genre_container"},r.a.createElement("div",{className:"edgeStart",onMouseEnter:function(){var t=2;e.scrollRight=setInterval((function(){t=Math.min(12,t+.1),n&&e.scrollView.getElement().scrollBy({left:-t})}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},a&&r.a.createElement(Ea.a,{className:"icon",icon:mn.b,style:{fontSize:24,color:n?"#2a2a2a":"#CCC"}})),r.a.createElement(Pn.a,{className:"itemWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===o?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},r.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},this.props.items)),r.a.createElement("div",{className:"edgeEnd",onMouseEnter:function(){var t=2;e.scrollLeft=setInterval((function(){t=Math.min(12,t+.1),e.scrollView.getElement().scrollBy({left:t})}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},a&&r.a.createElement(Ea.a,{icon:mn.c,style:{fontSize:24,color:s?"#2a2a2a":"#CCC"}})))}}]),a}(n.Component)),Vn=a(214),zn=a(215),qn=a.n(zn),Hn=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={isStopped:!1,isPaused:!1},n}return Object(ue.a)(a,[{key:"render",value:function(){var e=this.props,t=e.animationData,a=e.height,n=e.width,s={loop:!0,autoplay:!0,animationData:t,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return r.a.createElement("div",{className:"controlled"},r.a.createElement(qn.a,{options:s,height:a||400,width:n||400,isStopped:this.state.isStopped,isPaused:this.state.isPaused}))}}]),a}(n.Component),Wn=(a(929),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.toggleStationSearch=function(){var e=n.state.showStationSearch;n.setState({showStationSearch:!e},(function(){e?setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100):je({category:d,action:y,label:M})}))},n.calculateBrowse=function(){var e=n.state.loadNumber,t=function(e){var t={},a=Object.keys(e).filter((function(t){return e[t]}));return a.forEach((function(e){t[e]=1/a.length})),t},a=function(e,t){var a=[];return Object.keys(t).forEach((function(t){e[t]?a.push(e[t]):a.push(0)})),a},r=function(e,t){for(var a=0,n=0,r=0,s=0;s<e.length;s++)a+=e[s]*t[s],n+=e[s]*e[s],r+=t[s]*t[s];return a/((n=Math.sqrt(n))*(r=Math.sqrt(r)))},s=function(e,t){for(var a=0,n=0;n<e.length;n++)for(var r=n+1;r<e.length+1;r++){var s=e.slice(n,r);if(!t.includes(s))break;a+=Math.pow(s.length,1.5)/t.length}return a},o=n.state.playlists.filter((function(e){var t,a,r,s;return!((null===e||void 0===e||null===(t=e.bpm)||void 0===t?void 0:t.mean)>(null===(a=n.state.browseTempoRange)||void 0===a?void 0:a.max))&&!((null===e||void 0===e||null===(r=e.bpm)||void 0===r?void 0:r.mean)<(null===(s=n.state.browseTempoRange)||void 0===s?void 0:s.min))}));if(n.state.searchText)o=o.map((function(e){var t=0;return t+=s(n.state.searchText,e.name),e.description&&(t+=s(n.state.searchText,e.description)),Object(u.a)(Object(u.a)({},e),{},{searchScore:t})})).sort((function(e,t){return t.searchScore-e.searchScore}));else{var i=t(n.state.browseGenres),c=t(n.state.browseMoods),l=0!==Object.keys(i).length,m=0!==Object.keys(c).length;i=a(i,n.state.browseGenres),c=a(c,n.state.browseMoods);var d={};l&&o.forEach((function(e){d[e._id]=r(a(e.genres,n.state.browseGenres),i)}));var p={};m&&o.forEach((function(e){p[e._id]=r(a(e.moods,n.state.browseMoods),c)})),o=o.sort((function(e,t){var a=0;return l&&(a+=.5*(d[t._id]-d[e._id])),m&&(a+=.5*(p[t._id]-p[e._id])),a}))}o=o.slice(0,e),n.setState({calculatedPlaylists:o})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),Ne("Station Preview: "+e)},n._checkIfAllFalse=function(e){var t,a=Object(kn.a)(e);try{for(a.s();!(t=a.n()).done;){if(!0===t.value)return!1}}catch(n){a.e(n)}finally{a.f()}return!0},n._checkIsFiltering=function(){var e=n.state,t=e.searchText,a=e.browseGenres,r=e.browseMoods,s=e.currentSelectedTempo,o=t.length>0,i=!1===n._checkIfAllFalse(Object.values(a)),c=!1===n._checkIfAllFalse(Object.values(r));return o||i||c||s>-1},n.onSetFiltering=function(){n._checkIsFiltering()?n.setState({isFiltering:!0}):n.setState({isFiltering:!1})},n.onSelectGenre=function(e){return function(){var t=Object(u.a)({},n.state.selectedGenres);t[e]?delete t[e]:t[e]=!0,n.setState({showAdvancedSearch:Object.keys(t).length>0,selectedGenres:t,browseGenres:Object(u.a)(Object(u.a)({},n.state.browseGenres),{},Object(jn.a)({},e,!n.state.browseGenres[e])),loadNumber:12},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))}},n.onSelectMood=function(e){var t=Object(u.a)({},n.state.selectedMoods);t[e]?delete t[e]:t[e]=!0,n.setState({selectedMoods:t,browseMoods:Object(u.a)(Object(u.a)({},n.state.browseMoods),{},Object(jn.a)({},e,!n.state.browseMoods[e]))},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onSelectTempo=function(e,t){n.setState({browseTempoRange:{min:e[0],max:e[1]},currentSelectedTempo:t},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onDeselectTempo=function(){n.setState({browseTempoRange:{min:30,max:150},currentSelectedTempo:-1},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onSelectEra=function(e){n.setState({browseEraRange:{from:e[0],to:e[1]}})},n.onSetSearchText=function(e){n.setState({searchText:e.target.value},(function(){n.onSetFiltering(),clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.calculateBrowse,250)}))},n.state={isLoading:!0,artistName:"",searchText:"",isStation:!1,isFixHeader:!1,showStationSearch:!1,showAppModal:!1,businessType:"other",browseGenres:{},defaultGenres:{},browseMoods:{},defaultMoods:{},browseTempoRange:{min:30,max:150},browseEraRange:{from:1950,to:2020},playlistModalId:null,playlists:null,calculatedPlaylists:null,showAdvancedSearch:!1,isFiltering:!1,currentSelectedTempo:-1,selectedGenres:{},selectedMoods:{},loadNumber:12},n}return Object(ue.a)(a,[{key:"getBusinessType",value:function(){var e=Object(K.get)(this.props,"myLocation.company.businessType","restaurant").toLowerCase();"other"===e.toLowerCase()&&(e="other"),this.setState({businessType:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.inApp;if(!Object(K.isEqual)(Object(K.get)(this.props,"myLocation",null),Object(K.get)(e,"myLocation",null))&&(this.getBusinessType(),t)){var a,n=Object(K.get)(this.props,"myLocation.storeCode",""),r=Object(K.get)(this.props,"myLocation.station._id",""),s=Object(K.get)(this.props,"myLocation","");localStorage.getItem("mobileIntroLogin")&&nn.isLoggedIn()&&n&&r&&(null===s||void 0===s||null===(a=s.company)||void 0===a?void 0:a.name)&&(localStorage.removeItem("mobileIntroLogin"),rn.send("player","player/"+n))}}},{key:"componentDidMount",value:function(){var e=Object(fe.a)(he.a.mark((function e(){var t,a,n,r,s,o=this;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ke(),this.getBusinessType(),t=Object(K.get)(this.props,"playlistList",[]),a=null,t&&!(t.length<=0)){e.next=8;break}return e.next=7,this.props.actions.getStations();case 7:a=e.sent;case 8:n=a?Object(K.get)(a,"playlistList",[]):Object(K.get)(this.props,"playlistList",[]),r=n.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),s=n.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{}),this.setState({isLoading:!1,playlists:n,browseGenres:r,defaultGenres:r,browseMoods:s,defaultMoods:s},(function(){o.calculateBrowse()}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.actions.removePlayerListeners()}},{key:"updatePreference",value:function(e){this.setState({businessType:e.key}),je({category:d,action:b,value:e.key,label:M})}},{key:"clearAdvancedFilters",value:function(){var e=this,t=this.state,a=t.defaultGenres,n=t.defaultMoods;this.setState({searchText:"",selectedGenres:{},selectedMoods:{},browseGenres:a,browseMoods:n,loadNumber:12,currentSelectedTempo:-1},(function(){e.onSetFiltering(),clearTimeout(e.searchTimeout),e.searchTimeout=setTimeout(e.calculateBrowse,250)}))}},{key:"showClearFilters",value:function(){var e=this.state,t=e.currentSelectedTempo,a=e.selectedGenres,n=e.selectedMoods;return e.searchText.length>0||Object.keys(a).length>0||Object.keys(n).length>0||-1!==t}},{key:"loadMoreStations",value:function(){var e=this;this.setState({loadNumber:this.state.loadNumber+12},(function(){e.calculateBrowse()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isApple,n=t.inApp,s=this.state,o=(s.showAdFreeModal,s.browseMoods),i=s.isLoading,c=s.playlists,l=s.businessType,u=s.playlistModalId,m=s.showAdvancedSearch,d=s.currentSelectedTempo,p=s.browseEraRange,g=s.isFiltering,h=s.browseGenres,f=s.searchText,v=s.calculatedPlaylists,b=(s.selectedGenres,Z()?"90%":"80%"),y={},E={},S=Object(K.get)(this.props,"user.role",null),O=Object(K.get)(this.props,"user.company",""),w=Object(K.get)(this.props,"myLocation.favorites",[]),j=w.length>0,k={};j&&(k.Favorites=w);var N,C=Object(kn.a)(_.global);try{for(C.s();!(N=C.n()).done;){var L=N.value;y[L]=[]}}catch(V){C.e(V)}finally{C.f()}var I,M="other"===l.toLowerCase()&&S===W?_.defaultIndividual:_[l.toLowerCase()],T=Object(kn.a)(M);try{for(T.s();!(I=T.n()).done;){L=I.value;E[L]=[]}}catch(V){T.e(V)}finally{T.f()}if(!i){var P,x=Object(kn.a)(c);try{for(x.s();!(P=x.n()).done;){var A,D=P.value,B=Object(kn.a)(Object(K.get)(D,"supersets",[]));try{for(B.s();!(A=B.n()).done;){var F=A.value;F in y&&y[F].push(D),F in E&&E[F].push(D)}}catch(V){B.e(V)}finally{B.f()}}}catch(V){x.e(V)}finally{x.f()}}var R,U=r.a.createElement(ba.a,{onClick:function(t){return e.updatePreference(t)},selectedKeys:[l],className:"menu-wrapper"},r.a.createElement(ba.a.Item,{key:"bar"},"Bar"),r.a.createElement(ba.a.Item,{key:"cafe"},"Cafe"),r.a.createElement(ba.a.Item,{key:"gym"},"Gym"),r.a.createElement(ba.a.Item,{key:"hotel"},"Hotel"),r.a.createElement(ba.a.Item,{key:"other"},"Other"),r.a.createElement(ba.a.Item,{key:"restaurant"},"Restaurant"),r.a.createElement(ba.a.Item,{key:"salon"},"Salon"),r.a.createElement(ba.a.Item,{key:"school"},"School"),r.a.createElement(ba.a.Item,{key:"spa"},"Spa"),r.a.createElement(ba.a.Item,{key:"shop"},"Shop"));return r.a.createElement("div",{className:"discoverWrapper",id:"discover-container"},r.a.createElement(Ha.a,{visible:Boolean(u),onCancel:function(){return e.showPlaylistModal(null)},width:b,bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},r.a.createElement(ln,{login:this.props.login,playlistId:u,close:function(){return e.showPlaylistModal(null)}})),r.a.createElement("div",{className:"create-body"},!n&&r.a.createElement("div",{className:"discover-head-wrapper"},r.a.createElement(dn,{title:r.a.createElement("span",null,"Let's Find Your",r.a.createElement("span",{style:{color:"#D04283"}},"\xa0ambii"),"-ance"),subtitle:"Discover the right music for your business",style:{flex:1}}),S!==W&&r.a.createElement("div",{className:"discover-buttons"},r.a.createElement("div",{className:"viewOptions"},r.a.createElement(ya.a,{overlay:U,trigger:["click"],className:"preference-menu"},r.a.createElement(da.a,{className:"preference-menu-button"},r.a.createElement("span",{style:{marginRight:"5px",color:"black"}},"Preference:"),(R=l)?R.charAt(0).toUpperCase()+R.substring(1,R.length):"",r.a.createElement(Ea.a,{icon:Ka.c,style:{marginLeft:"8px"}})))))),r.a.createElement(Xt.a,{indicator:$t,spinning:i,style:{backgroundColor:"#f5f5f5"}},i&&r.a.createElement("div",{style:{width:"100%",height:"30vh"}}),!i&&r.a.createElement(Vn.Animated,{animationIn:"fadeIn",isVisible:!0},r.a.createElement("div",{className:"browseSettingsContainer ".concat(m&&"showAdvancedSearch")},r.a.createElement("div",{className:"searchWrapper"},r.a.createElement("div",{className:"searchInput"},r.a.createElement(ua.a.Search,{className:"searchBar",placeholder:"Search",value:f,onChange:this.onSetSearchText})),r.a.createElement(da.a,{onClick:function(){return e.setState((function(e){return{showAdvancedSearch:!e.showAdvancedSearch}}))},className:m?"active":null},r.a.createElement(Ea.a,{icon:Ka.i,style:{paddingRight:"4px"}}),"Filters"),this.showClearFilters()&&r.a.createElement(da.a,{onClick:function(){return e.clearAdvancedFilters()},style:{marginLeft:"10px"}},"Clear")),r.a.createElement("div",{className:"genreWrapper"},r.a.createElement("div",{className:"browseSelectionsContainer"},r.a.createElement(Un,{items:Object.keys(h).map((function(t){return r.a.createElement("span",{key:t,className:"mobileGenreItem",onClick:e.onSelectGenre(t),style:{backgroundColor:h[t]?"rgba(95, 95, 95, 0.2)":"transparent"}},t)}))}))),r.a.createElement(Nn.SlideDown,{style:{width:"100%"}},m?r.a.createElement(Tn,{browseMoods:o,currentSelectedTempo:d,browseEraRange:p,onSelectTempo:this.onSelectTempo,onDeselectTempo:this.onDeselectTempo,onSelectEra:this.onSelectEra,onSelectMood:this.onSelectMood}):null)),g?r.a.createElement("div",{className:"advanced-station-wrapper"},r.a.createElement("div",{className:"playlistsContainer"},v?v.map((function(t,a){return r.a.createElement("div",{className:"playlistContainer",key:Object(K.get)(t,"_id",a)},r.a.createElement(_n,Object.assign({showPlaylistModal:e.showPlaylistModal,assignStation:e.props.actions.assignStation,company:O,browse:!0,history:e.props.history},t)))})):null),r.a.createElement(da.a,{className:"load-more",onClick:function(){return e.loadMoreStations()}},"Load More")):null,g?null:r.a.createElement("div",null,j&&Object.keys(k).map((function(t,n){return r.a.createElement(Rn,{showPlaylistModal:e.showPlaylistModal,company:O,key:t,id:t,rowIndex:n,title:t,type:t,data:k[t],source:"discover",isApple:a,showViewAll:!0})})),!a&&Object.keys(y).map((function(t,a){if(y[t].length>0)return r.a.createElement(Rn,{showPlaylistModal:e.showPlaylistModal,company:O,key:t,id:t,rowIndex:j?null:a,title:t,type:t,data:y[t],source:"discover",showViewAll:!0})})),!a&&Object.keys(E).map((function(t){if(E[t].length>0)return r.a.createElement(Rn,{showPlaylistModal:e.showPlaylistModal,company:O,key:t,id:t,title:t,type:t,data:E[t],source:"discover",showViewAll:!0})}))))),r.a.createElement("div",{className:"pageFooter"})))}}]),a}(n.Component));var Gn=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,isApple:e.auth.isApple,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({addPlayerListeners:ut,removePlayerListeners:ft,getStations:Pt,assignStation:At},e)}}))(Object(be.f)(Wn)),Kn=a(113),Yn=a(205),Jn=a(455),Zn=a(138),Xn=a(456),Qn=a(294),$n=a(92),er=a.n($n),tr=(a(930),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={hovered:!1},n}return Object(ue.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.simple,s=Object(K.get)(a,"_id",a),o=Object(K.get)(a,"name",""),i=Object(K.get)(a,"bpm.mean",100).toFixed(0),c=Object(K.get)(a,"genres",[]),l=Q(i);return r.a.createElement("div",{className:"schedule-playlist draggable-events",title:o,data:s,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},r.a.createElement("div",{className:"flexRow station-content noselect"},r.a.createElement("div",{className:"name"}," ",o," "),r.a.createElement("div",{className:"bpm-wrapper"},r.a.createElement(Ea.a,{icon:Object(K.get)(l,"icon",""),style:{fontSize:24}}))),r.a.createElement(Dn,{genres:c,roundBottom:!0,simple:n}))}}]),a}(n.Component)),ar=(a(931),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n}return Object(ue.a)(a,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.data,s=this.state.expanded,o=Object(Lt.a)(n);return s||(o=o.slice(0,5)),r.a.createElement("div",{className:"music-section-wrapper"},r.a.createElement("div",{className:"music-section-header"}," ",a," "),o.map((function(e){return r.a.createElement(tr,{data:e,key:Object(K.get)(e,"_id",e),simple:!0})})),n.length>5&&r.a.createElement("div",{className:"view-more",onClick:function(){return e.toggleExpand()}},s?"View Less":"View More"))}}]),a}(n.Component)),nr=(a(932),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).handleUpdate=function(e){var t=Object(u.a)({},e),a=Object(K.get)(t,"target.value","");n.setState({text:a.length>0&&a.length<40?a:a.substring(0,40)})},n.toggleInput=function(){try{n.setState({activeInput:!n.state.activeInput},(function(){n.inputRef.current.focus()}))}catch(e){console.log("caught: ",e)}},n.state={text:"",activeInput:!1},n.inputRef=r.a.createRef(),n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this;try{document.addEventListener("mousedown",(function(t){return e.handleClickOutside(t)})),document.addEventListener("keypress",(function(t){return e.handleKeyDown(t)}))}catch(t){console.log("caught didMount toggleInput err: ",t)}}},{key:"componentDidUpdate",value:function(e,t){Object(K.isEqual)(Object(K.get)(this.props,"text",""),Object(K.get)(e,"text",""))||(console.log("props: ",this.props),this.setState({text:Object(K.get)(this.props,"text","")})),Object(K.get)(this.state,"activeInput",!1)||Object(K.isEqual)(Object(K.get)(this.state,"activeInput",!1),Object(K.get)(t,"activeInput",!1))||(console.log("onUpdate: ",this.state),this.props.onUpdate(this.state.text))}},{key:"componentWillUnmount",value:function(){try{document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("keypress",this.handleKeyDown)}catch(e){console.log("caught willUnmount toggleInput err: ",e)}}},{key:"handleKeyDown",value:function(e){"enter"===Object(K.get)(e,"key","").toLowerCase()&&this.setState({activeInput:!1})}},{key:"handleClickOutside",value:function(e){var t=Object(K.get)(this,"inputRef.current","");t&&!t.contains(e.target)&&this.setState({activeInput:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeInput,n=t.text;return r.a.createElement("div",{className:"toggle-input noselect"},!a&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:"scheduleName",onClick:function(){return e.toggleInput()}},n),r.a.createElement(Ea.a,{icon:mn.f,className:"icon inputIcon",onClick:function(){return e.toggleInput()}})),a&&r.a.createElement("input",{ref:this.inputRef,onChange:function(t){return e.handleUpdate(t)},className:"scheduleNameInput",placeholder:n}))}}]),a}(n.Component)),rr=(a(933),Ha.a.confirm),sr=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).setUpFunction=Object(fe.a)(he.a.mark((function e(){var t,a,r,s,o,i,c,l,u,m,d,p,h,f,v;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.setState({stationName:"New Station"}),"new"===n.props.match.params.id){e.next=18;break}if(n.setState({stationName:Object(K.get)(n.state.mySchedule,"name","New Station")}),!(n.props.playlists.schedules.length<1)){e.next=13;break}return e.next=6,n.props.actions.getSchedule(n.props.match.params.id);case 6:t=e.sent,a=Object(K.get)(t,"data[0]",null),r=Object(K.get)(t,"data[0].name",null),s=Object(K.get)(t,"data[0].stations",null),n.setState({mySchedule:a,stationName:r,stations:s}),e.next=18;break;case 13:c=null===(o=n.props.playlists)||void 0===o||null===(i=o.schedules)||void 0===i?void 0:i.filter((function(e){return e._id===n.props.match.params.id})),l=Object(Kn.a)(c,1),u=l[0],m=u,d=Object(K.get)(u,"name",null),p=Object(K.get)(u,"stations",null),n.setState({mySchedule:m,stationName:d,stations:p});case 18:h=Object(K.get)(n.props.stations,"playlistList",[]),f=h.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),v=h.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{}),n.setState({isLoading:!1,playlists:h,browseGenres:f,browseMoods:v,showMusicPlayer:Object(K.get)(n.props,"player.showPlayer",!1)},(function(){try{n.accessFullCalendarAPI(),window.addEventListener("resize",n.accessFullCalendarAPI.bind(Object(Yn.a)(n)));var e=document.getElementById("external-events");new Qn.a(e,{itemSelector:".draggable-events",eventData:function(e){return{title:e.getAttribute("title"),id:e.getAttribute("data")}}})}catch(t){console.log("caught err: ",t)}})),n.state.isMobile&&je({category:g,action:N});case 23:case"end":return e.stop()}}),e)}))),n.renderHeader=function(e){switch(e.getDay()){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return"Sunday"}},n.validateEvent=function(e){e.event.start.getDate()!==e.event.end.getDate()&&(e.event.start.getDate()+1===e.event.end.getDate()&&0===e.event.end.getHours()&&0===e.event.end.getMinutes()?console.log("Same day allowed"):e.revert())},n.saveScheduleChanges=function(){var e=n.state,t=e.stationName,a=e.scheduleId;try{n.setState({isSaving:!0},(function(){var e=n.calendarComponentRef.current.getApi().getEvents(),r=[];e.forEach((function(e){r.push({start:er()(e.start).format(),end:er()(e.end).format(),day:er()(e.start).format(),title:e.title,stationId:null!==e.id&&""!==e.id?e.id:e.extendedProps.stationId})})),n.props.actions.saveSchedule({scheduleId:a,name:t,stations:r}).then((function(){n.props.actions.getSchedules().then((function(e){n.setState({isSaving:!1}),It.a.success({message:"Schedule Saved",placement:"bottomLeft"}),n.props.history.push("/schedules")}))}))}))}catch(r){je({category:g,value:r,label:T}),n.setState({isSaving:!1}),console.log("caught: ",r)}},n.closeSchedule=function(){je({category:g,action:j,label:M}),n.props.history.push("/schedules")},n.backToDashboard=function(){je({category:g,action:k,label:M}),n.props.history.push("/nowPlaying")},n.state={isLoading:!0,isMobile:Z(),stations:[],stationName:"",mySchedule:{},scheduleId:"new"===n.props.match.params.id?null:n.props.match.params.id,playlists:[],showMusicPlayer:!1,isSaving:!1},n.calendarComponentRef=r.a.createRef(),n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(he.a.mark((function e(){var t=this;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ke(),0!==this.props.stations.playlistList.length){e.next=6;break}return e.next=4,this.props.actions.getStations().then((function(e){t.setState({isLoading:!1})}));case 4:e.next=7;break;case 6:this.setState({isLoading:!1});case 7:this.setUpFunction();case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;Object(K.isEqual)(Object(K.get)(this.props,"player.showPlayer",null),Object(K.get)(e,"player.showPlayer",null))||this.setState({showMusicPlayer:Object(K.get)(this.props,"player.showPlayer",!1)},(function(){t.accessFullCalendarAPI()})),e.stations!==this.props.stations&&this.setUpFunction()}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",this.accessFullCalendarAPI)}catch(e){console.log("caught: ",e)}}},{key:"accessFullCalendarAPI",value:function(){try{this.setState({isMobile:Z()});var e=document.getElementById("external-events")||null;e&&(e=e.getBoundingClientRect().height);var t=this.calendarComponentRef.current.getApi();t.setOption("height",e),t.setOption("eventColor","#2F2F2F")}catch(a){console.log("caught: ",a)}}},{key:"showErrorMessage",value:function(){var e=this;return r.a.createElement("div",{className:"error-div"},r.a.createElement("div",{className:"title"},"Mobile Not Supported"),r.a.createElement("div",{className:"subtitle"},"Please view this page on desktop."),r.a.createElement("div",{className:"phone"},r.a.createElement(Ea.a,{icon:Ga.a,className:"mobile-icon"}),r.a.createElement(Ea.a,{icon:Ga.d,className:"frown-icon"})),r.a.createElement(da.a,{className:"optionButton",onClick:function(){return e.backToDashboard()}},"Back to Dashboard"))}},{key:"eventClick",value:function(e){rr({title:"Delete this station?",content:Object(K.get)(e,"event.title","")+": "+er()(Object(K.get)(e,"event.start","")).format("ddd")+" "+er()(Object(K.get)(e,"event.start","")).format("LT")+" - "+er()(Object(K.get)(e,"event.end","")).format("ddd")+" "+er()(Object(K.get)(e,"event.end","")).format("LT"),onOk:function(){e.event.remove()},onCancel:function(){console.log("Cancel")}})}},{key:"stationNameUpdate",value:function(e){this.setState({stationName:e})}},{key:"render",value:function(){var e,t,a,n=this,s=this.props.history,o=this.state,i=o.isLoading,c=o.playlists,l=o.stations,m=o.showMusicPlayer,d=o.isMobile,p=o.stationName,g=o.isSaving,h={},f={},v=Object(K.get)(this.props,"myLocation.favorites",[]),b=Object(kn.a)(_.global);try{for(b.s();!(a=b.n()).done;){var y=a.value;h[y]=[]}}catch(T){b.e(T)}finally{b.f()}var E,S=_.defaultIndividual,O=Object(kn.a)(S);try{for(O.s();!(E=O.n()).done;){y=E.value;f[y]=[]}}catch(T){O.e(T)}finally{O.f()}if(!i){var w,j=Object(kn.a)(c);try{for(j.s();!(w=j.n()).done;){var k,N=w.value,C=Object(kn.a)(Object(K.get)(N,"supersets",[]));try{for(C.s();!(k=C.n()).done;){var L=k.value;L in h&&h[L].push(N),L in f&&f[L].push(N)}}catch(T){C.e(T)}finally{C.f()}}}catch(T){j.e(T)}finally{j.f()}}var I=Object.keys(f),M=Object.keys(h);return r.a.createElement("div",{className:"schedulePageWrapper"},r.a.createElement(Xt.a,{indicator:$t,spinning:i},d?this.showErrorMessage():r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"topRowWrapper"},r.a.createElement("div",{className:"topRowLeft"},r.a.createElement("div",{className:"scheduleNameWrapper"},r.a.createElement(nr,{text:p,onUpdate:function(e){return n.stationNameUpdate(e)}})),r.a.createElement("div",{className:"description"}," Drag and Drop Your Stations to Schedule When They Play ")),r.a.createElement("div",{className:"scheduleButtonGroup"},r.a.createElement(da.a,{className:"optionButton",loading:g,type:"primary",onClick:g?null:function(){return n.saveScheduleChanges()}},"Save & Close"),r.a.createElement(da.a,{className:"optionButton",onClick:function(){return n.closeSchedule()}},"Close"))),r.a.createElement("div",{className:"bottomRowWrapper",style:{maxHeight:m?"72vh !important":null}},r.a.createElement("div",{id:"external-events",className:"selectionWrapper"},(null===(e=this.props.myLocation)||void 0===e||null===(t=e.favorites)||void 0===t?void 0:t.length)>0&&r.a.createElement(ar,{label:"Favorites",data:v}),M.map((function(e){return r.a.createElement(ar,{key:e,label:e,data:h[e]})})),I.map((function(e){return r.a.createElement(ar,{key:e,label:e,data:f[e]})})),r.a.createElement(ar,{label:"General",data:c}),r.a.createElement("div",{className:"musicSectionWrapper"},r.a.createElement("div",{className:"musicSectionHeader"}," Browse More Soundtracks "),r.a.createElement("div",{className:"musicSectionFooter",onClick:function(){return s.push("/discover")}},"Discover Music",r.a.createElement(Ea.a,{icon:mn.e,className:"discoverIcon"})))),r.a.createElement("div",{className:"calendarWrapper"},r.a.createElement("div",{className:"app-calendar noselect",id:"mycalendartest"},r.a.createElement(Jn.a,{defaultView:"timeGridWeek",header:!1,defaultDate:"2020-01-10T00:00:00.000Z",allDayDefault:!1,eventDurationEditable:!0,editable:!0,events:l,droppable:!0,plugins:[Zn.d,Xn.a,Qn.b],ref:this.calendarComponentRef,eventDrop:this.validateEvent,eventReceive:function(e){console.log("data: ",Object(u.a)({},e))},slotDuration:"00:30",eventClick:function(e){return n.eventClick(e)},startRecur:Date.now(),allDaySlot:!1,eventOverlap:!1,columnHeaderText:this.renderHeader,eventResize:this.validateEvent,forceEventDuration:!0})))))))}}]),a}(n.Component);var or=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists,schedules:e.schedules,player:e.player}}),(function(e){return{actions:Object(i.b)({getStations:Pt,saveSchedule:Ft,getSchedule:_t,getSchedules:Rt},e)}}))(Object(be.f)(sr)),ir=(a(934),Ha.a.confirm),cr=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).assignSchedule=function(e){e.stopPropagation(),n.setState({isLoading:!0},(function(){var e=Object(K.get)(n.props,"data._id",null);n.props.actions.assignSchedule(e).then((function(e){e?(n.setState({isLoading:!1}),n.props.history.push("/nowPlaying",{isBack:!0})):(n.setState({isLoading:!1}),It.a.error({message:"Error while assigning station",placement:"bottomLeft"}))}))}))},n.deleteSchedule=function(e){var t=e.e,a=e.data,r=e.props,s=e.callback;t.stopPropagation(),n.setState({isLoading:!0},(function(){ir({title:"Delete Schedule?",content:Object(K.get)(a,"name",""),onOk:function(){var e=Object(K.get)(r,"data.company._id",null),t=Object(K.get)(r,"data._id",null);r.actions.deleteSchedule({companyId:e,scheduleId:t}).then((function(e){e||(s(),It.a.error({message:"Error while deleting station",placement:"bottomLeft"}))}))},onCancel:function(){s()}})}))},n.state={hidden:!0,isLoading:!1},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.wait,a=setTimeout((function(){e.setState({hidden:!1}),clearTimeout(a)}),t)}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onClick,s=this.state,o=s.hidden,i=s.isLoading,c=Object(K.get)(a,"stations",[]).length>0;return r.a.createElement(r.a.Fragment,null,!o&&r.a.createElement(Vn.Animated,{animationIn:"fadeIn",isVisible:!0},r.a.createElement(Xt.a,{indicator:$t,spinning:i},r.a.createElement("div",{key:a._id,className:"scheduleBlock",style:{backgroundColor:"#eee"},onClick:function(){return n(a._id)}},r.a.createElement("div",{className:"schedule-icon-row"}),r.a.createElement("div",{className:"schedule-text-wrapper",style:{flex:1}},r.a.createElement("div",{className:"schedule-text"},Object(K.get)(a,"name",""))),r.a.createElement("div",{className:"schedule-icon-row"},c&&r.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.assignSchedule(t)}},r.a.createElement(Ea.a,{icon:Ka.p,className:"icon"})),r.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.deleteSchedule({e:t,data:a,props:e.props,callback:function(){return e.stopLoading()}})}},r.a.createElement(Ea.a,{icon:Ka.w,className:"icon"})))))))}}]),a}(n.Component);var lr=Object(pe.b)((function(e){return{user:e.auth.user,stations:e.stations.data}}),(function(e){return{actions:Object(i.b)({assignSchedule:Ut,deleteSchedule:Vt},e)}}))(Object(be.f)(cr)),ur=(a(935),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).getUserSchedules=function(){n.props.actions.getSchedules().then((function(e){e&&n.setState({isLoading:!1})}))},n.state={isLoading:!0,creatingSchedule:!1},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){ke(),this.props.playlists.schedules.length<1?this.getUserSchedules():this.setState({isLoading:!1})}},{key:"componentDidUpdate",value:function(e){Object(K.isEqual)(Object(K.get)(this.props,"myLocation.storeCode",null),Object(K.get)(e,"myLocation.storeCode",null))||(console.log("update props: ",this.props),this.getUserSchedules())}},{key:"createNewSchedule",value:function(){this.props.history.push("/createSchedule/new")}},{key:"editSchedule",value:function(e){je({category:g,action:w,value:e}),this.props.history.push("/createSchedule/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props.playlists,a=this.state,n=a.isLoading,s=a.creatingSchedule;return r.a.createElement("div",{className:"scheduleWrapper"},r.a.createElement(dn,{title:r.a.createElement("span",null,"Your ",r.a.createElement("span",{style:{color:"#D04283"}},"Schedules")),subtitle:"Schedule out your stations for the whole week!"}),r.a.createElement(Xt.a,{indicator:$t,spinning:n},r.a.createElement("div",{className:"scheduleBlockWrapper noselect"},r.a.createElement("div",{className:"newSchedule",onClick:function(){return s?null:e.createNewSchedule()}},r.a.createElement("div",{className:"plusCircle"},r.a.createElement(Ea.a,{icon:mn.g,className:"icon"})),r.a.createElement("div",{className:"newScheduleText"},"Create Schedule")),Object(K.get)(t,"schedules",[]).map((function(t,a){return r.a.createElement(lr,{key:Object(K.get)(t,"_id",t),wait:300*a,data:t,onClick:function(t){return e.editSchedule(t)}})})))))}}]),a}(n.Component));var mr=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists}}),(function(e){return{actions:Object(i.b)({getSchedules:Rt,editSchedule:Bt,createSchedule:Dt},e)}}))(Object(be.f)(ur)),dr=(a(936),Ha.a.confirm),pr=va.a.Option,gr=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).setIsSavingFalse=function(){n.setState({isSaving:!1})},n.state={messageData:n.props.message,isPlaying:n.props.isPlaying,isSaving:!1},n}return Object(ue.a)(a,[{key:"componentDidUpdate",value:function(e){e.isPlaying!==this.props.isPlaying&&!1===this.props.isPlaying&&this.setState({isPlaying:!1})}},{key:"updateMessageFrequency",value:function(e){var t=this,a=e.e,n=e.messageData;e.user;this.setState({messageData:Object(u.a)(Object(u.a)({},n),{},{frequency:a})},(function(){t.props.actions.updateFrequency({id:Object(K.get)(n,"_id",""),frequency:a}).then((function(e){e&&t.props.actions.getMessages()}))}))}},{key:"editMessage",value:function(e){var t=e.messageData;e.props.history.push("/createInStoreMessaging",Object(u.a)(Object(u.a)({},t),{},{locationId:Object(K.get)(this.props,"myLocation._id","")}))}},{key:"delete",value:function(e){var t=e.messageData,a=e.props,n=e.setIsSavingFalse,r=t.title?Object(K.get)(t,"title",""):Object(K.get)(t,"fileName",""),s=t.message?Object(K.get)(t,"message",""):Object(K.get)(t,"description","No description given");dr({title:"Delete Message?",content:r+": "+s,onOk:function(){a.actions.deleteMessage(Object(K.get)(t,"_id","")).then((function(e){e&&(a.actions.setInStoreMessages(a.inStoreMessaging.messages.filter((function(e){return e._id!==t._id}))),It.a.success({message:"Message Deleted",description:r,placement:"bottomLeft"}),n())}))},onCancel:function(){console.log("Cancel"),n()}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.user,s=t.setPreviewUrl,o=t.myLocation,i=t.stopTrack,c=this.state,l=c.messageData,u=c.isPlaying;return r.a.createElement("div",{className:"messageCard"},r.a.createElement(Xt.a,{indicator:$t,spinning:this.state.isSaving},r.a.createElement("div",{className:"messageCardheader"},!1===u?r.a.createElement(Ea.a,{icon:Ka.y,className:"messageCardPreview",style:{marginRight:"10px"},onClick:function(){s(Object(K.get)(l,"url","")),e.setState({isPlaying:!0})}}):r.a.createElement(Ea.a,{icon:Ka.u,className:"messageCardStop",style:{marginRight:"10px"},onClick:function(){i(),e.setState({isPlaying:!1})}}),r.a.createElement("div",{className:"messageTitle"}," ",Object(K.get)(l,"title","")||Object(K.get)(a,"fileName","")," "),r.a.createElement(Ea.a,{icon:Ka.h,className:"icon",style:{marginLeft:"10px"},onClick:function(){return e.editMessage({user:n,messageData:l,props:e.props})}}),r.a.createElement(Ea.a,{icon:Ga.e,className:"icon",style:{marginLeft:"10px"},onClick:function(){e.delete({user:n,messageData:l,props:e.props,setIsSavingFalse:e.setIsSavingFalse}),e.setState({isSaving:!0})}})),r.a.createElement(va.a,{disabled:!a.title,defaultValue:Object(K.get)(a,"frequency['"+Object(K.get)(o,"_id","")+"']",""),onChange:function(t){e.updateMessageFrequency({e:t,messageData:l,user:n})}},A.map((function(e,t){return r.a.createElement(pr,{key:Object(K.get)(e,"time",t),value:Object(K.get)(e,"time","60")},Object(K.get)(e,"title","Error"))})))))}}]),a}(n.Component);var hr=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inStoreMessaging:e.inStoreMessaging}}),(function(e){return{actions:Object(i.b)({deleteMessage:Gt,updateFrequency:Kt,getMessages:zt,setInStoreMessages:ct},e)}}))(Object(be.f)(gr)),fr=a(134),vr=a.n(fr),br=a(457),yr=a.n(br),Er=(a(938),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).onChangeHandler=function(e){n.setState({selectedFile:e.target.files[0]})},n.stopTrack=function(){n.setState({isPlaying:!1,previewTrackUrl:null},(function(){n.rap.audioEl.pause()}))},n.state={isPlaying:!1,previewTrackUrl:null,isLoading:!0,selectedFile:null,activeMessages:[],inactiveMessages:[],unfinishedMp3:[]},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.inStoreMessaging.messages&&Object.keys(this.props.myLocation).length>1&&(this.setState({isLoading:!1,activeMessages:Object(K.get)(this.props.inStoreMessaging,"messages",[]).filter((function(t){return parseInt(Object(K.get)(t,"frequency['"+Object(K.get)(e.props.myLocation,"_id","")+"']",""))>0})),inactiveMessages:Object(K.get)(this.props.inStoreMessaging,"messages",[]).filter((function(t){return 0===parseInt(Object(K.get)(t,"frequency['"+Object(K.get)(e.props.myLocation,"_id","")+"']",""))&&t.title})),unfinishedMp3:Object(K.get)(this.props.inStoreMessaging,"messages",[]).filter((function(t){return 0===parseInt(Object(K.get)(t,"frequency['"+Object(K.get)(e.props.myLocation,"_id","")+"']",""))&&!t.title}))}),Object.keys(this.props.inStoreMessaging.messages).length<1&&(this.setState({isLoading:!0}),this.props.actions.getMessages().then((function(t){t&&e.setState({isLoading:!1})}))))}},{key:"componentDidUpdate",value:function(e){var t=this;e.myLocation!==this.props.myLocation&&this.setState({isLoading:!0},(function(){t.props.actions.getMessages().then((function(e){e&&t.setState({isLoading:!1})}))})),e.inStoreMessaging!==this.props.inStoreMessaging&&this.setState({activeMessages:Object(K.get)(this.props.inStoreMessaging,"messages",[]).filter((function(e){return parseInt(Object(K.get)(e,"frequency['"+Object(K.get)(t.props.myLocation,"_id","")+"']",""))>0})),inactiveMessages:Object(K.get)(this.props.inStoreMessaging,"messages",[]).filter((function(e){return 0===parseInt(Object(K.get)(e,"frequency['"+Object(K.get)(t.props.myLocation,"_id","")+"']",""))&&e.title})),unfinishedMp3:Object(K.get)(this.props.inStoreMessaging,"messages",[]).filter((function(e){return 0===parseInt(Object(K.get)(e,"frequency['"+Object(K.get)(t.props.myLocation,"_id","")+"']",""))&&!e.title}))})}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){this.setState({previewTrackUrl:e})}},{key:"beforeUpload",value:function(e){var t="audio/mpeg"===e.type,a=e.size/1024/1024<25;return t||It.a.error({message:"You can only upload MP3 files!",placement:"bottomLeft"}),a||It.a.error({message:"File must smaller than 50MB!",placement:"bottomLeft"}),t&&a}},{key:"render",value:function(){var e=this,t=this.props.user,a=this.state,n=a.previewTrackUrl,s=a.isLoading,o=a.activeMessages,i=a.inactiveMessages,c=a.unfinishedMp3;return r.a.createElement("div",{className:"messageWrapper"},r.a.createElement(dn,{title:r.a.createElement("span",null,"In-Store ",r.a.createElement("span",{style:{color:"#D04283"}}," Messages ")),subtitle:"Custom announcements to help drive customer action"}),r.a.createElement("div",{className:"centerMessages"},r.a.createElement("div",{className:"viewMessagesContainer"},r.a.createElement("div",null,r.a.createElement("div",{style:{display:"none"}},r.a.createElement(vr.a,{ref:function(t){e.rap=t},src:n,autoPlay:!1,controls:!1,muted:!1,volume:1,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})},onError:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})}})),r.a.createElement("div",{className:"heading heading-medium",style:{marginTop:"15px"}},"New Message"),r.a.createElement(Xt.a,{indicator:$t,spinning:s},r.a.createElement("div",{className:"messageCreatingWrapper"},r.a.createElement(da.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",className:"btnCreateMessage"},"Create New Message",r.a.createElement(Ea.a,{icon:Ka.q,className:"connect-icon",style:{marginRight:"10px"}})),r.a.createElement("div",{className:"uploadISM"},r.a.createElement(yr.a,{accept:".mp3",name:"sampleFile",beforeUpload:function(t){return e.beforeUpload(t)},action:"".concat(ze,"/auth/uploadISM/"),headers:{Authorization:"Bearer "+localStorage.getItem("ambii_auth_jwt"),ambii_api_key:qe},onChange:function(t){var a=t.file.status;"done"===a?(e.props.history.push({pathname:"/createInStoreMessaging",state:Object(u.a)({uploaded:!0},Object(K.get)(t,"file.response.data.newMessage",""))}),It.a.success({message:"Upload Success",placement:"bottomLeft"})):"error"===a&&It.a.error({message:"Upload Failed",placement:"bottomLeft"})},showUploadList:{showRemoveIcon:!1}},r.a.createElement("p",{className:"ant-upload-drag-icon"},r.a.createElement(Qt.a,{type:"inbox",style:{color:"#d04283ae"}})),r.a.createElement("p",{className:"ant-upload-text"},"Click or drag file to this area to upload"),r.a.createElement("p",{className:"ant-upload-hint"},"Upload Custom in store message in mp3 format")))),r.a.createElement("div",{className:"message-wrapper"},o.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"heading heading-medium"},"Active Messages "),o.map((function(a,n){return r.a.createElement(hr,{key:Object(K.get)(a,"_id",n),message:a,companyId:Object(K.get)(t,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)},isPlaying:e.state.isPlaying,stopTrack:e.stopTrack})}))),i.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"heading heading-medium",style:{marginTop:"15px"}},"Inactive Messages"),i.map((function(a,n){return r.a.createElement(hr,{key:Object(K.get)(a,"_id",n),message:a,companyId:Object(K.get)(t,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)},isPlaying:e.state.isPlaying,stopTrack:e.stopTrack})}))),c.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"heading heading-medium",style:{marginTop:"15px"}},"Unfinished Messages"),c.map((function(a,n){return r.a.createElement(hr,{key:Object(K.get)(a,"_id",n),message:a,companyId:Object(K.get)(t,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)},isPlaying:e.state.isPlaying,previewTrackUrl:e.state.previewTrackUrl,stopTrack:e.stopTrack})})))))))))}}]),a}(n.Component));var Sr=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inStoreMessaging:e.inStoreMessaging}}),(function(e){return{actions:Object(i.b)({getMessages:zt},e)}}))(Object(be.f)(Er)),Or=a(1050),wr=(a(1018),Object(be.f)((function(e){var t=e.match,a=Object(n.useState)({user:!1,business:!1,payment:!1,security:!1}),s=Object(Kn.a)(a,2),o=s[0],i=s[1];return r.a.createElement("div",{className:"setting-panel"},r.a.createElement("div",{className:"menu-row"},r.a.createElement(ve.b,{to:"/settings/user",className:"menu-item ".concat("user"===t.params.setting?"active":null),onMouseEnter:function(){i({user:!0})},onMouseLeave:function(){i({user:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(Ea.a,{icon:Ka.x})),r.a.createElement("div",{className:"option-text"},"Edit User"),("user"===t.params.setting||o.user)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(Ea.a,{icon:B.a})))),r.a.createElement(Or.a,null),r.a.createElement("div",{className:"menu-row"},r.a.createElement(ve.b,{to:"/settings/business",className:"menu-item ".concat("business"===t.params.setting?"active":null),onMouseEnter:function(){i({business:!0})},onMouseLeave:function(){i({business:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(Ea.a,{icon:Ka.v})),r.a.createElement("div",{className:"option-text"},"Edit Business"),("business"===t.params.setting||o.business)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(Ea.a,{icon:B.a})))),r.a.createElement(Or.a,null),r.a.createElement("div",{className:"menu-row"},r.a.createElement(ve.b,{to:"/settings/payment",className:"menu-item ".concat("payment"===t.params.setting?"active":null),onMouseEnter:function(){i({payment:!0})},onMouseLeave:function(){i({payment:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(Ea.a,{icon:Ka.g})),r.a.createElement("div",{className:"option-text"},"Payment"),("payment"===t.params.setting||o.payment)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(Ea.a,{icon:B.a})))))}))),jr=a(468),kr=(a(1019),function(e){var t=e.placeholder,a=void 0===t?null:t,n=e.type,s=void 0===n?"text":n,o=e.label,i=void 0===o?"default label":o,c=e.name,l=e.onChange,u=Object(jr.a)(e,["placeholder","type","label","name","onChange"]);return r.a.createElement("div",{className:"inputContainer"},r.a.createElement("div",{className:"inputLabel"},i),r.a.createElement("div",{className:"inputWrapper"},r.a.createElement("input",Object.assign({placeholder:a,type:s,name:c,className:"inputBox",onChange:l},u))))}),Nr=a(74);function Cr(e){return function(){var t=Object(fe.a)(he.a.mark((function t(a){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){Se("post","/auth/subscription/",e).then((function(e){var n=Object(K.get)(e,"data.data",{});a(lt(Object(K.get)(n,"subscription",null))),a(st(Object(K.get)(n,"updatedUser",{}))),t(e.data)})).catch((function(e){console.log(e),It.a.error({message:Object(K.get)(e,"response.message","Could not add subscription"),placement:"bottomLeft"}),t(!1)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}a(1020);var Lr=function(e){var t=e.toggle,a=Object(pe.d)((function(e){return e.auth})),s=Object(pe.c)(),o=a.user,i=a.location,c=Object(Nr.useStripe)(),l=Object(Nr.useElements)(),m=Object(n.useState)(!1),d=Object(Kn.a)(m,2),p=d[0],g=d[1],h=Object(n.useState)({nameOnCard:"",city:"",postal_code:"",line1:""}),f=Object(Kn.a)(h,2),v=f[0],b=f[1],y=function(e){var t=e.target,a=t.name,n=t.value;b(Object(u.a)(Object(u.a)({},v),{},Object(jn.a)({},a,n)))},E=function(){var e=Object(fe.a)(he.a.mark((function e(t){var a,n,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c.createPaymentMethod({type:"card",card:l.getElement(Nr.CardNumberElement,Nr.CardExpiryElement,Nr.CardCvcElement),billing_details:{email:o.email,name:v.nameOnCard,phone:o.company.phoneNumber,address:{city:v.city,postal_code:v.postal_code,line1:v.line1}}});case 3:if(a=e.sent,n=a.error,r=a.paymentMethod,!n){e.next=12;break}console.log(n),It.a.error({message:"Information Incomplete",description:n.message,placement:"bottomLeft"}),g(!1),e.next=14;break;case 12:return e.next=14,s(Cr({payment_method:r.id,email:o.email,location:i})).then((function(e){e.success||(g(!1),It.a.error({message:"Payment Error",description:"Something went wrong with your payment",placement:"bottomLeft"}))}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S={style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"transparent"}}}};return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"payment-method"},r.a.createElement("form",{onSubmit:E},r.a.createElement("div",{className:"card-details"},r.a.createElement("div",{className:"cardElementContainer"},r.a.createElement("div",{className:"cardLabel"},"Card Number"),r.a.createElement(Nr.CardNumberElement,{options:{showIcon:!1,iconStyle:"solid",style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px",position:"relative","::placeholder":{color:"transparent"}}}}})),r.a.createElement("div",{className:"cardCvcAndExpElementOptions"},r.a.createElement("div",{className:"cardLabel"},"Expiration"),r.a.createElement(Nr.CardExpiryElement,{options:S})),r.a.createElement("div",{className:"cardCvcAndExpElementOptions"},r.a.createElement("div",{className:"cardLabel"},"CVC"),r.a.createElement(Nr.CardCvcElement,{options:S}))),r.a.createElement("div",{className:"billing-details"},r.a.createElement(kr,{type:"text",name:"nameOnCard",label:"Name on Card",onChange:y}),r.a.createElement(kr,{type:"text",name:"line1",label:"Street Address",onChange:y})),r.a.createElement("div",{className:"location-details"},r.a.createElement(kr,{type:"text",name:"city",label:"City",onChange:y}),r.a.createElement(kr,{type:"number",name:"postal_code",label:"Zip Code",onChange:y})),r.a.createElement(da.a,{type:"primary",size:"large",htmlType:"submit",className:"activate-button",disabled:!c,loading:p,onClick:function(){return g(!0)}},"Activate")))):null)},Ir=a(1058),Mr=a(1056),Tr=a(458),Pr=a.n(Tr),xr=a(459),Ar=a.n(xr),Dr=a(460),_r=a.n(Dr),Br=a(461),Fr=a.n(Br),Rr=(a(1021),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).fetchCardDetails=Object(fe.a)(he.a.mark((function e(){var t,a,r,s,o,i,c;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props,a=t.fetchCardDetails,!(null===(r=t.user)||void 0===r?void 0:r.stripeCustomer)){e.next=6;break}return e.next=4,a({stripeCustomer:r.stripeCustomer});case 4:!0===(s=e.sent).success?(i=new Date(1e3*(null===(o=s.data.customer.subscriptions.data[0])||void 0===o?void 0:o.current_period_end)),c=i.toDateString(),n.setState({cardDetails:s.data[0].card,otherResposeDetails:s.data,subscriptionData:s.data.customer.subscriptions.data[0],expDate:c})):It.a.error({message:"Fetching card details failed!",placement:"bottomLeft"});case 6:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(){var e=Object(fe.a)(he.a.mark((function e(t){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),n.setState({visible:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={cardDetails:null,otherResposeDetails:null,subscriptionData:null,expDate:null,enterLoading:!1,visible:!1,formButton:!1,reason:null},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){this.fetchCardDetails()}},{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&this.fetchCardDetails()}},{key:"renderSwitch",value:function(e){switch(e){case"visa":return Ar.a;case"amex":return _r.a;case"mastercard":return Fr.a;default:return Pr.a}}},{key:"render",value:function(){var e=this,t=this.state,a=t.cardDetails,n=t.expDate,s=t.enterLoading,o=t.reason;return this.props.toggle?r.a.createElement("div",{className:"cancelView active"},r.a.createElement("h3",{style:{color:"white",fontWeight:"bolder"}},"Payment")," ",r.a.createElement("br",null),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-content"},r.a.createElement("p",null,"Your Premium plan will renew on ",n,"."),r.a.createElement("p",null,"You will be charged $15.99")),r.a.createElement("div",{className:"cardDetails"},r.a.createElement("div",{className:"cardLogo"},r.a.createElement("img",{src:this.renderSwitch(null===a||void 0===a?void 0:a.brand.toLowerCase()),alt:"...",height:"50",width:"50"})),r.a.createElement("div",{className:"cardInfo"},r.a.createElement("p",null,null===a||void 0===a?void 0:a.brand.toUpperCase()," **** ",null===a||void 0===a?void 0:a.last4),r.a.createElement("p",null,"Expires: ",null===a||void 0===a?void 0:a.exp_month,"/",null===a||void 0===a?void 0:a.exp_year)))):r.a.createElement(Ir.a,{active:!0}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(da.a,{type:"secondary",style:{float:"right"},htmlType:"submit",loading:s,onClick:function(){return e.setState({enterLoading:!0})}},"Cancel this Subscription")),r.a.createElement(Ha.a,{title:"Are you sure ?",visible:this.state.visible,centered:!0,onOk:Object(fe.a)(he.a.mark((function t(){var a,n,r,s;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=7;break}return e.setState({enterLoading:!1,formButton:!0}),n=e.props,r=n.location,s=n.cancelSubscription,t.next=5,s({subId:null===r||void 0===r||null===(a=r.subscription)||void 0===a?void 0:a.stripeSubscription,location:r,reason:o}).then((function(t){t.success||(It.a.error({message:"Something went wrong",description:"Something went wrong when cancelling the payment",placement:"bottomLeft"}),e.setState({formButton:!1}))}));case 5:t.next=8;break;case 7:It.a.error({message:"Please Select a reason",description:"Please Select a reason before cancelling your subscription",placement:"bottomLeft"});case 8:case"end":return t.stop()}}),t)}))),onCancel:function(){e.setState({enterLoading:!1,visible:!1})},okButtonProps:{loading:this.state.formButton},okText:"Yes, Cancel Subscription"},r.a.createElement(ra.a,{className:"modalForm"},r.a.createElement(ra.a.Item,{label:"Just so we know, why did you cancel?"},r.a.createElement(Mr.a.Group,{onChange:function(t){e.setState({reason:t.target.value})},className:"radioGroup"},r.a.createElement(Mr.a,{className:"radioBtn",value:"Too expensive"},"Too expensive"),r.a.createElement(Mr.a,{className:"radioBtn",value:"Not enough product offering"},"Not enough product offering"),r.a.createElement(Mr.a,{className:"radioBtn",value:"I don't mind ads"},"I don't mind ads"),r.a.createElement(Mr.a,{className:"radioBtn",value:"Still planning on using Ambii, but the free tier"},"Still planning on using Ambii, but the free tier")))))):null}}]),a}(r.a.Component)),Ur=Object(pe.b)((function(e){return{user:e.auth.user,location:e.auth.location}}),(function(e){return{cancelSubscription:function(t){return e(function(e){return function(){var t=Object(fe.a)(he.a.mark((function t(a){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t){Se("post","/auth/cancelSubscription",e).then((function(e){var n=Object(K.get)(e,"data.data",{});a(lt(Object(K.get)(n,"subscription",null))),t(e.data)})).catch((function(e){console.log(e),It.a.error({message:Object(K.get)(e,"response.message","Could not cancel subscription"),placement:"bottomLeft"}),t(!1)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},fetchCardDetails:function(t){return e(function(e){return function(){var t=Object(fe.a)(he.a.mark((function t(a){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){Se("post","/auth/fetchCardDetails",e).then((function(e){return t(e.data)})).catch((function(e){console.log(e),It.a.error({message:Object(K.get)(e,"response.message","Could not fetch card details"),description:"fetching card details from server failed",placement:"bottomLeft"}),a(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Rr);a(1022);var Vr=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state=Object(u.a)({loading:!1},e.props.user),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(jn.a)({},n,r))},e.handleSubmit=function(){var t=Object(fe.a)(he.a.mark((function t(a){var n,r,s,o,i,c,l,m,d,p,g;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.props,r=n.updateUser,s=n.user,o=n.setUser,i=e.state,c=i.firstName,l=void 0===c?s.firstName:c,m=i.lastName,d=void 0===m?s.lastName:m,p=i.phoneNo,g=void 0===p?s.phoneNo:p,!l||""===d){t.next=10;break}return t.next=6,r({userId:s._id,firstName:l,lastName:d,phoneNo:g});case 6:!0!==t.sent.success?It.a.error({message:"Updating Details Failed",description:"Something went wrong while updating user details",placement:"bottomLeft"}):(o(Object(u.a)(Object(u.a)({},s),{},{firstName:l,lastName:d,phoneNo:g})),e.setState({firstName:l,lastName:d,phoneNo:g})),t.next=13;break;case 10:l||It.a.error({message:"First Name is required",placement:"bottomLeft"}),d||It.a.error({message:"Last Name is required",placement:"bottomLeft"}),e.setState({loading:!1});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ue.a)(a,[{key:"componentDidUpdate",value:function(e){e.user!==this.props.user&&(It.a.success({message:"User Saved",placement:"bottomLeft"}),this.setState(Object(u.a)({loading:!1},this.props.user)))}},{key:"render",value:function(){var e,t=this;return r.a.createElement("div",{className:"contentView"},r.a.createElement("div",{className:"userDetailsWrapper"},r.a.createElement("h1",{className:"heading"},"User Details"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("div",{className:"inputsWrapper"},r.a.createElement(kr,{name:"firstName",value:this.state.firstName,placeholder:"* Enter First Name",label:"First Name",onChange:this.handleChange}),r.a.createElement(kr,{name:"lastName",value:this.state.lastName,placeholder:"* Enter Last Name",label:"Last Name",onChange:this.handleChange}),r.a.createElement("div",{className:"phoneInput"},r.a.createElement(kr,{name:"phoneNo",value:parseInt(null===(e=this.state)||void 0===e?void 0:e.phoneNo),placeholder:this.state.phoneNo?null:"No Number Assigned",label:"Phone no.",type:"number",onChange:this.handleChange}))),r.a.createElement(da.a,{type:"primary",htmlType:"submit",loading:this.state.loading,onClick:function(){return t.setState({loading:!0})},size:"large",style:{float:"left"}},"Save"))))}}]),a}(r.a.Component),zr=Object(pe.b)((function(e){return{user:e.auth.user}}),(function(e){return{updateUser:function(t){return e(function(e){return function(){var t=Object(fe.a)(he.a.mark((function t(a){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){Se("post","/auth/updateUser/",e).then((function(e){return t(e.data)})).catch((function(e){console.log(e),It.a.error({message:Object(K.get)(e,"response.message","Could not update user"),placement:"bottomLeft"}),a(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setUser:function(t){return e(st(t))}}}))(Vr),qr=a(295),Hr=a.n(qr),Wr=(a(1023),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(){var e;Object(le.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state=Object(u.a)(Object(u.a)({loading:!1,timezones:[],timezoneData:{},timezoneRes:[]},e.props.location),{},{selectedTimezone:"",states:[],stateData:{},statesRes:[],selectedState:""}),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(jn.a)({},n,r))},e.onSearch=function(t){var a=Object.keys(R);e.setState({timezone:t});var n=a.filter((function(e){return e.toLowerCase().includes(t.toLowerCase())}));e.setState({selectedTimezone:t,timezoneRes:t.length<=0?a:n})},e.onSearchState=function(t){var a=Object.keys(U);e.setState({state:t});var n=a.filter((function(e){return e.toLowerCase().includes(t.toLowerCase())}));e.setState({selectedTimezone:t,statesRes:t.length<=0?a:n})},e.onSelect=function(t){e.setState({timezone:t})},e.onSelectState=function(t){e.setState({state:t})},e.handleSubmit=function(){var t=Object(fe.a)(he.a.mark((function t(a){var n,r,s,o,i,c,l,m,d,p,g,h,f,v,b,y,E,S,O,w,j,k,N;return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.props,r=n.updateLocation,s=n.location,o=n.setLocation,i=e.state,c=i.name,l=void 0===c?s.name:c,m=i.phoneNo,d=void 0===m?s.phoneNo:m,p=i.addressLineOne,g=void 0===p?s.addressLineOne:p,h=i.addressLineTwo,f=void 0===h?s.addressLineTwo:h,v=i.city,b=void 0===v?s.city:v,y=i.state,E=void 0===y?s.state:y,S=i.postalCode,O=void 0===S?s.postalCode:S,w=i.timezone,j=void 0===w?s.timezone:w,k=e.checkIfValidTimezone(Object(K.get)(e.state,"timezone","")),N=e.checkIfValidState(Object(K.get)(e.state,"state","")),!(l&&g&&b&&E&&O&&j&&N&&k)){t.next=12;break}return t.next=8,r({locationId:s._id,name:l,phoneNo:d,addressLineOne:g,addressLineTwo:f,city:b,state:E,postalCode:O,timezone:j});case 8:!0!==t.sent.success?(e.setState({loading:!1}),It.a.error({message:"Update Failed",description:"Something went wrong while updating the location details",placement:"bottomLeft"})):(o(Object(u.a)(Object(u.a)({},s),{},{name:l,phoneNo:d,addressLineOne:g,addressLineTwo:f,city:b,state:E,postalCode:O,timezone:j})),e.setState({name:l,phoneNo:d,addressLineOne:g,addressLineTwo:f,city:b,state:E,postalCode:O,timezone:j,loading:!1}),It.a.success({message:"Location Saved",placement:"bottomLeft"})),t.next=21;break;case 12:E||It.a.error({message:"State is required",placement:"bottomLeft"}),l||It.a.error({message:"Name is required",placement:"bottomLeft"}),b||It.a.error({message:"City is required",placement:"bottomLeft"}),g||It.a.error({message:"Address Line 1 is required",placement:"bottomLeft"}),O||It.a.error({message:"Postal Code is required",placement:"bottomLeft"}),j||It.a.error({message:"Timezone is required",placement:"bottomLeft"}),N||It.a.error({message:"Invalid State",description:"Use the dropdown for state selection",placement:"bottomLeft"}),k||It.a.error({message:"Invalid Timezone",description:"Use the dropdown for timezone selection",placement:"bottomLeft"}),e.setState({loading:!1});case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=[],t=[],a=Object.keys(R);Object.keys(U).forEach((function(e){t.push(e)})),a.forEach((function(t){e.push(t)}));var n=Intl.DateTimeFormat().resolvedOptions().timeZone;this.setState({timezoneRes:e,selectedTimezone:n,statesRes:t})}},{key:"componentDidUpdate",value:function(e){e.location!==this.props.location&&this.setState(Object(u.a)({loading:!1},this.props.location))}},{key:"checkIfValidTimezone",value:function(e){return!!e&&!!R[e]}},{key:"checkIfValidState",value:function(e){return!!e&&!!U[e]}},{key:"render",value:function(){var e,t,a,n,s,o,i,c=this,l=this.props.form.getFieldDecorator;return r.a.createElement("div",{className:"contentView"},r.a.createElement("div",{className:"businessSettingWrapper"},r.a.createElement("h1",{className:"heading"},"Business Information"),r.a.createElement("form",{className:"business-form",onSubmit:this.handleSubmit},r.a.createElement(kr,{name:"name",value:null===(e=this.state)||void 0===e?void 0:e.name,placeholder:"* Enter Business Name",label:"Business Name",onChange:this.handleChange}),r.a.createElement(kr,{name:"phoneNo",value:parseInt(null===(t=this.state)||void 0===t?void 0:t.phoneNo),placeholder:(null===(a=this.state)||void 0===a?void 0:a.phoneNo)?null:"No number assigned",type:"number",label:"Business Phone No.",onChange:this.handleChange}),r.a.createElement(kr,{name:"addressLineOne",value:null===(n=this.state)||void 0===n?void 0:n.addressLineOne,placeholder:"* Enter Address Line 1",label:"Address 1",onChange:this.handleChange}),r.a.createElement(kr,{name:"addressLineTwo",value:null===(s=this.state)||void 0===s?void 0:s.addressLineTwo,placeholder:"Enter Address Line 2",label:"Address 2",onChange:this.handleChange}),r.a.createElement("div",{className:"adjacent-wrapper"},r.a.createElement("div",{className:"thirty-width"},r.a.createElement(kr,{name:"city",value:null===(o=this.state)||void 0===o?void 0:o.city,placeholder:"* Enter City",label:"City",onChange:this.handleChange})),r.a.createElement("div",{className:"thirty-width"},r.a.createElement("div",{className:"state"},r.a.createElement(Hr.a,{className:"form-item"},l("states",{initialValue:this.state.state})(r.a.createElement("div",{className:"autoCompleteStyle"},r.a.createElement("div",{className:"inputContainer"},r.a.createElement("div",{className:"inputLabel"},"State"),r.a.createElement("div",{className:"inputWrapper"},r.a.createElement(ma.a,{placeholder:"* Enter State",value:this.state.state,dataSource:this.state.statesRes,onSelect:function(e){return c.onSelectState(e)},onSearch:function(e){return c.onSearchState(e)}})))))))),r.a.createElement("div",{className:"thirty-width"},r.a.createElement(kr,{name:"postalCode",value:null===(i=this.state)||void 0===i?void 0:i.postalCode,placeholder:"* Enter Postal Code",label:"Zip Code",onChange:this.handleChange}))),r.a.createElement("div",{className:"timezone"},r.a.createElement(Hr.a,{className:"form-item"},l("timezone",{initialValue:this.state.timezone})(r.a.createElement("div",{className:"autoCompleteStyle"},r.a.createElement("div",{className:"inputContainer"},r.a.createElement("div",{className:"inputLabel"},"Change Location Timezone"),r.a.createElement("div",{className:"inputWrapper"},r.a.createElement(ma.a,{placeholder:"* Enter Timezone",value:this.state.timezone,dataSource:this.state.timezoneRes,style:{width:"100%"},onSelect:function(e){return c.onSelect(e)},onSearch:function(e){return c.onSearch(e)}}))))))),r.a.createElement(da.a,{size:"large",type:"primary",htmlType:"submit",loading:this.state.loading,onClick:function(){return c.setState({loading:!0})},style:{marginLeft:10,marginTop:-10}},"Save"))))}}]),a}(r.a.Component)),Gr=ra.a.create()(Wr),Kr=Object(pe.b)((function(e){return{location:e.auth.location}}),(function(e){return{updateLocation:function(t){return e(function(e){return function(){var t=Object(fe.a)(he.a.mark((function t(a){return he.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){Se("post","/auth/updateLocation/",e).then((function(e){return t(e.data)})).catch((function(e){console.log(e),It.a.error({message:Object(K.get)(e,"response.message","Could not update location"),placement:"bottomLeft"}),a(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},setLocation:function(t){return e(Ze(t))}}}))(Gr),Yr=(a(1029),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,formToggle:!1},n}return Object(ue.a)(a,[{key:"renderSwitch",value:function(e){var t,a=this,n=this.props.myLocation,s=this.state.formToggle,o=null===n||void 0===n||null===(t=n.subscription)||void 0===t?void 0:t.subscribed;switch(e){case"payment":return r.a.createElement("div",{className:"contentView"},r.a.createElement("div",{className:"top-section"},r.a.createElement("h1",{style:{padding:"0px 20px"}},"Plan"),r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"content ".concat(o?null:"active")},r.a.createElement("div",{className:"left-section"},r.a.createElement("h1",null,"Free"),o?r.a.createElement("p",null,"ambii service with ads"):r.a.createElement("p",null,"current plan")),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{style:{fontSize:18,textAlign:"right"}},"$0/mo")))),r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"content ".concat(o?"active":null," ").concat(s?"removeBorderRadius":null)},r.a.createElement("div",{className:"left-section"},r.a.createElement("h1",null,"Premium"),o?r.a.createElement("p",null,"current plan"):r.a.createElement("p",null,"activate for an ad-free experience")),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{style:{fontSize:18,textAlign:"right"}},"$15.99/mo"),r.a.createElement(da.a,{type:o?"secondary":"primary",onClick:function(){a.setState({formToggle:!s})}},r.a.createElement(Ea.a,{icon:s?Ka.c:Ka.d,className:"connect-icon",style:{marginRight:"10px"}}),s?"Hide Details":"Show Details"))),o?r.a.createElement(Ur,{toggle:s}):r.a.createElement(Lr,{toggle:s}))));case"business":return r.a.createElement(Kr,null);case"user":return r.a.createElement(zr,null);default:return r.a.createElement(be.a,{to:"/settings/user"})}}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.match,n=this.state.isLoading;return t?r.a.createElement("div",{className:"settingsWrapper"},r.a.createElement("div",{className:"headerWrapper"},r.a.createElement(dn,{title:r.a.createElement("span",null,"User ",r.a.createElement("span",{style:{color:"#D04283"}}," Settings ")),subtitle:"Change your information here"})),r.a.createElement("div",{className:"settingsView"},r.a.createElement("div",{className:"settingPanel"},r.a.createElement(wr,null)),this.renderSwitch(a.params.setting))):r.a.createElement("div",{className:"settingsWrapper"},r.a.createElement("div",{className:"headerWrapper"},r.a.createElement(dn,{title:r.a.createElement("span",null,"User ",r.a.createElement("span",{style:{color:"#D04283"}}," Settings ")),subtitle:"Change your information here"})),r.a.createElement(Xt.a,{indicator:$t,spinning:n}))}}]),a}(n.Component));var Jr=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(i.b)({getMessages:zt},e)}}))(Object(be.f)(Yr)),Zr=a(462),Xr=a.n(Zr),Qr=(a(1032),va.a.Option),$r=ua.a.TextArea,es=da.a.Group,ts=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).stopTrack=function(){n.setState({isPlaying:!1,previewMessageUrl:null},(function(){n.rap.audioEl.pause()}))},n.state={message:"",title:"",language:"English (US)",languageCode:"en-US",voice:"en-US-Wavenet-A",frequency:"30",speed:1,voiceOptions:{},sortedLanguageArray:[],editingExistingMessage:!1,isSaving:!1,previewMessageUrl:"",isPlaying:!1,isPreviewing:!1,postPreviewChanges:!1,savedPreviews:{},description:"",isModalVisible:!1,formButton:!1},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("savedISMPreviews"));this.props.actions.getVoiceOptions().then((function(a){if(Object(K.get)(e.props,"location.state._id",null)){var n=Object(K.get)(e.props,"location.state",{});e.setState({voiceOptions:a,title:Object(K.get)(n,"title",""),message:Object(K.get)(n,"message",""),language:V[Object(K.get)(n,"language","")],languageCode:Object(K.get)(n,"language",""),voice:Object(K.get)(n,"voice",""),speed:Object(K.get)(n,"speed",1),frequency:Object(K.get)(n,"frequency["+Object(K.get)(n,"locationId","")+"]",""),editingExistingMessage:!0,sortedLanguageArray:Object.keys(a).sort(),savedPreviews:t||{},description:Object(K.get)(n,"description","")})}else e.setState({voiceOptions:a,speed:1,sortedLanguageArray:Object.keys(a).sort(),savedPreviews:t||{}})}))}},{key:"componentDidUpdate",value:function(e,t){t.editingExistingMessage!==this.state.editingExistingMessage&&!0===this.props.location.state.uploaded&&(this.state.title||this.setState({title:this.props.location.state.fileName}))}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){console.log("hit setPreviewUrl"),this.setState({previewMessageUrl:e})}},{key:"renderLanguageOptions",value:function(){return this.state.sortedLanguageArray.map((function(e){return r.a.createElement(Qr,{key:e}," ",e," ")}))}},{key:"renderVoiceOptions",value:function(){var e=this.state,t=e.language,a=e.voiceOptions;if(t){var n=Object.keys(a).length>0?a[t]:[];return n.sort((function(e,t){return z[e.simpleName]>z[t.simpleName]?1:-1})),n.map((function(e){return r.a.createElement(Qr,{key:e.name,parent:e.parent},z[e.simpleName]||e.simpleName)}))}}},{key:"checkIfHashExists",value:function(){var e=this.state.savedPreviews,t=this.getMessageHash();return!!e[t]&&t}},{key:"getMessageHash",value:function(){var e=this.state,t=e.title,a=e.message,n=e.languageCode,r=e.voice,s=e.speed,o=e.frequency;return Xr()(t.concat(a).concat(n).concat(r).concat(s).concat(o))}},{key:"previewMessage",value:function(){var e,t,a,n=this,r=this.state,s=r.message,o=r.languageCode,i=r.voice,c=r.speed;r.frequency;if(!0!==(null===this||void 0===this||null===(e=this.props)||void 0===e||null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.uploaded)){if(this.checkIfValidISM()&&!this.state.isPreviewing){var l=this.getMessageHash();this.checkIfHashExists()?this.setState({previewMessageUrl:this.state.savedPreviews[l],isPreviewing:!1},(function(){n.playTrack()})):this.setState({isPreviewing:!0},(function(){n.props.actions.createPreviewMessage({voice:i,language:o,message:s,speed:c,hash:l}).then((function(e){if(e){var t=Object(K.get)(e,"data","");n.setState({previewMessageUrl:t,isPreviewing:!1,savedPreviews:Object(u.a)(Object(u.a)({},n.state.savedPreviews),{},Object(jn.a)({},l,t))},(function(){localStorage.setItem("savedISMPreviews",JSON.stringify(n.state.savedPreviews)),n.playTrack()}))}else n.onFailure("There was an error when creating your preview file")}))}))}}else{var m=this.getMessageHash();this.checkIfHashExists()?this.setState({previewMessageUrl:this.state.savedPreviews[m],isPreviewing:!1},(function(){n.playTrack()})):this.setState({isPreviewing:!0},(function(){n.props.actions.createPreviewMessage({hash:m,speed:c,messageId:n.props.location.state._id}).then((function(e){if(e){var t=n.props.location.state.url||e.data;n.setState({previewMessageUrl:t,isPreviewing:!1,savedPreviews:Object(u.a)(Object(u.a)({},n.state.savedPreviews),{},Object(jn.a)({},m,t))},(function(){localStorage.setItem("savedISMPreviews",JSON.stringify(n.state.savedPreviews)),n.playTrack()}))}else n.onFailure("There was an error in playing your uploaded file")}))}))}}},{key:"saveMessage",value:function(){var e=this,t=this.state,a=t.savedPreviews,n=t.editingExistingMessage,r=t.title,s=t.message,o=t.languageCode,i=t.voice,c=t.speed,l=t.frequency,u=t.description;this.checkIfValidISM()&&!this.state.isSaving&&this.setState({isSaving:!0},(function(){n?e.props.actions.editMessage({locationId:Object(K.get)(e.props,"myLocation._id",""),messageId:Object(K.get)(e.props,"location.state._id",""),title:r,voice:i,language:o,message:s,speed:c,frequency:l,savedPreviews:a,hash:e.checkIfHashExists(),description:u}).then((function(t){t?e.props.actions.getMessages().then((function(t){t&&e.onSuccess()})):e.onFailure()})):e.props.actions.createMessage({title:r,voice:i,language:o,message:s,speed:c,frequency:l,savedPreviews:a,hash:e.checkIfHashExists()}).then((function(t){t?e.props.actions.getMessages().then((function(t){t&&e.onSuccess()})):e.onFailure()}))}))}},{key:"onSuccess",value:function(){var e=this;this.setState({isSaving:!1},(function(){It.a.success({message:"Message Saved",placement:"bottomLeft"}),localStorage.removeItem("savedISMPreviews"),e.props.history.push("/inStoreMessaging")}))}},{key:"onFailure",value:function(e){this.setState({isSaving:!1},(function(){It.a.error({message:e||"Failed to save message",placement:"bottomLeft"})}))}},{key:"checkIfValidISM",value:function(){var e=this.state,t=e.title,a=e.message,n=e.language,r=e.voice,s=e.frequency,o=e.speed;return t?!a||a.length<10?(It.a.warn({message:"Please add a longer message",placement:"bottomLeft"}),!1):n?r?s?!!o||(It.a.warn({message:"Please select a speed",placement:"bottomLeft"}),!1):(It.a.warn({message:"Please select a frequency",placement:"bottomLeft"}),!1):(It.a.warn({message:"Please select a voice",placement:"bottomLeft"}),!1):(It.a.warn({message:"Please select a language",placement:"bottomLeft"}),!1):(It.a.warn({message:"Please add a title to your message",placement:"bottomLeft"}),!1)}},{key:"render",value:function(){var e,t,a,n,s,o,i,c,l,u,m,d,p,g,h,f,v,b,y,E=this,S=this.state,O=S.editingExistingMessage,w=S.isSaving,j=S.isPreviewing,k=S.language,N=S.voice,C=S.frequency,L=S.message,I=S.title,M=S.speed,T=S.previewMessageUrl;return r.a.createElement("div",{className:"messageWrapper"},r.a.createElement(dn,{backArrow:!0,backArrowPress:O&&!this.props.location.state.title?function(){return E.setState({isModalVisible:!0})}:function(){return E.props.history.push("/inStoreMessaging")},title:O?r.a.createElement("div",null,"Edit ",r.a.createElement("span",{style:{color:"#D04283"}}," Message ")):r.a.createElement("div",null,"Create ",r.a.createElement("span",{style:{color:"#D04283"}}," Message "))}),r.a.createElement("div",{className:"centerMessages"},r.a.createElement("div",{className:"createMessagesContainer"},r.a.createElement("div",{style:{display:"none"}},r.a.createElement(vr.a,{ref:function(e){E.rap=e},src:T,autoPlay:!1,controls:!1,muted:!1,volume:1,onCanPlay:function(){return E.playTrack()},onEnded:function(){return E.setState({isPlaying:!1,previewMessageUrl:null})},onError:function(){return E.setState({isPlaying:!1,previewMessageUrl:null})}})),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Message Name "),r.a.createElement(ua.a,{onChange:function(e){return E.setState({title:e.target.value})},value:I})),!0!==(null===(e=this.props)||void 0===e||null===(t=e.location)||void 0===t||null===(a=t.state)||void 0===a?void 0:a.uploaded)?r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Message "),r.a.createElement($r,{placeholder:"Max 200 Characters",value:L,maxLength:200,onChange:function(e){return E.setState({message:e.target.value})},rows:4})):null,!0===(null===(n=this.props)||void 0===n||null===(s=n.location)||void 0===s||null===(o=s.state)||void 0===o?void 0:o.uploaded)?r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Description "),r.a.createElement(ua.a,{onChange:function(e){return E.setState({description:e.target.value})},value:null===(i=this.state)||void 0===i?void 0:i.description})):null,!0!==(null===(c=this.props)||void 0===c||null===(l=c.location)||void 0===l||null===(u=l.state)||void 0===u?void 0:u.uploaded)?r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Language"),r.a.createElement(va.a,{value:k||"Please select a language",style:{width:"fill"},onChange:function(e,t){return E.setState({language:t.key,languageCode:"",voice:""})}},this.renderLanguageOptions())):null,!0!==(null===(m=this.props)||void 0===m||null===(d=m.location)||void 0===d||null===(p=d.state)||void 0===p?void 0:p.uploaded)?r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Voice "),r.a.createElement(va.a,{value:N||"Please select a voice",style:{width:"fill"},onChange:function(e,t){return E.setState({voice:t.key,languageCode:Object(K.get)(t,"props.parent","")})}},this.renderVoiceOptions())):null,r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Frequency "),r.a.createElement(va.a,{value:C||"Please select a frequency",style:{width:"fill"},onChange:function(e,t){return E.setState({frequency:t.key})}},A.map((function(e,t){return r.a.createElement(Qr,{key:Object(K.get)(e,"time",t),value:Object(K.get)(e,"time","60")},Object(K.get)(e,"title","Error"))})))),!0===(null===(g=this.props)||void 0===g||null===(h=g.location)||void 0===h||null===(f=h.state)||void 0===f?void 0:f.uploaded)?null:r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Speed"),r.a.createElement(es,null,r.a.createElement(da.a,{type:.75===M?"primary":"secondary",onClick:function(){return E.setState({speed:.75})}},"Slow"),r.a.createElement(da.a,{type:1===M?"primary":"secondary",onClick:function(){return E.setState({speed:1})}},"Normal"),r.a.createElement(da.a,{type:1.25===M?"primary":"secondary",onClick:function(){return E.setState({speed:1.25})}},"Fast"))),r.a.createElement("div",{className:"ism-button-group"},!1===this.state.isPlaying?r.a.createElement(da.a,{onClick:function(){return E.previewMessage()},size:"large",loading:j,className:"ism-button"},r.a.createElement(Ea.a,{icon:Ka.y,className:"icon"}),"Preview Message"):r.a.createElement(da.a,{onClick:function(){return E.stopTrack()},size:"large",className:"ism-button"},r.a.createElement(Ea.a,{icon:Ka.u,className:"icon"}),"Stop Message"),!0!==(null===(v=this.props)||void 0===v||null===(b=v.location)||void 0===b||null===(y=b.state)||void 0===y?void 0:y.uploaded)?r.a.createElement(da.a,{onClick:function(){return E.saveMessage()},size:"large",loading:w,className:"ism-button"},O?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{icon:Ka.h,className:"icon"}),"Save Changes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{icon:Ka.r,className:"icon"}),"Create Message")):r.a.createElement(r.a.Fragment,null,r.a.createElement(da.a,{size:"large",className:"ism-button",loading:w,onClick:Object(fe.a)(he.a.mark((function e(){var t,a,n,r,s,o,i,c,l,u;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=E.state,a=t.savedPreviews,n=t.title,r=t.message,s=t.languageCode,o=t.voice,i=t.speed,c=t.frequency,l=t.description,!(""===c||l.length<5)){e.next=6;break}""===c&&It.a.error({message:"Frequency Required",placement:"bottomLeft"}),l.length<5&&It.a.error({message:"Description too short",description:"Please enter a longer description",placement:"bottomLeft"}),e.next=11;break;case 6:return e.next=8,E.props.actions.updateTheUploadedISM({companyId:Object(K.get)(E.props,"user.company._id",""),locationId:Object(K.get)(E.props,"myLocation._id",""),title:n,voice:o,language:s,message:r,speed:i,frequency:c,savedPreviews:a,messageId:E.props.location.state._id,description:E.state.description,editingExistingMessage:O});case 8:u=e.sent,E.setState({isSaving:!0}),!0===u.success?E.props.actions.getMessages().then((function(e){e&&E.onSuccess()})):It.a.error({message:"Updating Message Failed",description:"Something went wrong while updating your message ",placement:"bottomLeft"});case 11:case"end":return e.stop()}}),e)})))},O?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{icon:Ka.h,className:"icon"}),"Save Changes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ea.a,{icon:Ka.r,className:"icon"}),"Create Message"))),r.a.createElement(Ha.a,{visible:this.state.isModalVisible,title:"Are you sure ?",onOk:function(){E.setState({formButton:!0}),E.props.inStoreMessaging.messages.filter((function(e){return e._id===E.props.location.state._id})).length<1?E.props.actions.getMessages().then((function(e){e&&(E.setState({isModalVisible:!1}),E.props.history.push("/inStoreMessaging"))})):E.props.history.push("/inStoreMessaging")},onCancel:function(){return E.setState({isModalVisible:!1,formButton:!1})},okButtonProps:{loading:this.state.formButton}},r.a.createElement("p",null,"You haven't saved the message yet! ",r.a.createElement("br",null),"You need to save the message before using it"),r.a.createElement("p",null,"You can also save the message later"))))))}}]),a}(n.Component);var as=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inApp:e.auth.inApp,inStoreMessaging:e.inStoreMessaging}}),(function(e){return{actions:Object(i.b)({createPreviewMessage:qt,editMessage:Wt,createMessage:Ht,getVoiceOptions:Yt,updateTheUploadedISM:Jt,getMessages:zt,setInStoreMessages:ct},e)}}))(Object(be.f)(ts)),ns=(a(1033),va.a.Option,ua.a.TextArea,function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={},n}return Object(ue.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sandbox-wrapper"},r.a.createElement(Hn,{animationData:"",height:1440,width:1440}))}}]),a}(n.Component));var rs=Object(pe.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(i.b)({},e)}}))(Object(be.f)(ns)),ss=[{path:"/",exact:!0,isChild:!1,private:!1,component:function(){return r.a.createElement(be.a,{to:"/discover"})}},{path:"/landing",exact:!1,isChild:!1,private:!1,component:function(){return r.a.createElement(aa,null)}},{path:"/login",exact:!0,isChild:!1,private:!1,component:function(){return nn.login(),r.a.createElement(Gn,null)}},{path:"/signUp",exact:!0,isChild:!1,private:!1,component:function(){return nn.signUp(),r.a.createElement(Gn,null)}},{path:"/nowPlaying",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(wn,null)}},{path:"/discover",exact:!0,isChild:!0,private:!1,component:function(){return r.a.createElement(Gn,null)}},{path:"/station/:id",exact:!0,isChild:!0,private:!1,component:function(){return r.a.createElement(ln,null)}},{path:"/createschedule/:id",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(or,null)}},{path:"/schedules",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(mr,null)}},{path:"/inStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(Sr,null)}},{path:"/createInStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(as,null)}},{path:"/sandbox",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(rs,null)}},{path:"/settings",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(be.a,{to:"/settings/user"})}},{path:"/settings/:setting",exact:!0,isChild:!1,private:!0,component:function(){return r.a.createElement(Jr,null)}}],os=a(1051);a(1034);os.a.config({top:"5%",duration:1});var is=null,cs=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).handleClick=function(){var e=Object(fe.a)(he.a.mark((function e(t){var a,r;return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props.myLocation,"features"!==t&&"price"!==t){e.next=5;break}It.a.info({message:"Service Unavailable",placement:"bottomLeft"}),e.next=16;break;case 5:if("signout"!==t){e.next=9;break}n.logInOut(),e.next=16;break;case 9:if(r=Object(K.get)(a,"station._id",null),"nowPlaying"!==t||r){e.next=13;break}return It.a.warn({message:"Please select a station before viewing your dashboard",placement:"bottomLeft"}),e.abrupt("return");case 13:n.setState({current:t}),os.a.destroy(),n.props.history.push("/"+t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.logInOut=function(){if(nn.isLoggedIn())try{je({category:h,action:I}),nn.logout()}catch(e){console.log("Caught logout err: ",e)}else nn.login()},n.state={current:void 0,windowSize:window.innerWidth},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=Object(K.get)(this.props,"location.pathname","").replace("/","");this.setState({current:t}),is=window.addEventListener("resize",(function(t){e.setState({windowSize:t.target.innerWidth})}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",is),is=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"checkIfActiveTab",value:function(e){return e?Object(K.get)(this.props,"location.pathname","").toLowerCase().includes(e.toLowerCase()):""}},{key:"printStuff",value:function(){var e=this.props,t=e.myLocation,a=e.player,n=Object(K.get)(t,"trackSchedule",{}),r=Object(K.get)(n,"queue",[]),s=Object(K.get)(t,"currentTrack",{});console.log({entireReduxStore:this.props.state,props:this.props,myLocation:t,player:a,trackSchedule:n,queue:r,currentTrack:s,pos:ee(s,r)})}},{key:"render",value:function(){var e=this,t=this.props.inApp,a=this.state,n=a.windowSize,s=a.current,o=r.a.createElement(ba.a,{mode:"horizontal",onClick:function(t){return e.handleClick(t.key)},selectedKeys:[s],className:"menu-wrapper"},r.a.createElement(ba.a.Item,{className:"mobileButtonItem",key:"nowPlaying"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(Ea.a,{icon:Ka.v})),r.a.createElement("div",{className:"mobileButtonText"},"Dashboard")),r.a.createElement(ba.a.Item,{className:"mobileButtonItem",key:"discover"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(Ea.a,{icon:Ka.s})),r.a.createElement("div",{className:"mobileButtonText"},"Stations")),r.a.createElement(ba.a.Item,{className:"mobileButtonItem",key:"schedules"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(Ea.a,{icon:Ka.e})),r.a.createElement("div",{className:"mobileButtonText"},"Schedules")),r.a.createElement(ba.a.Item,{className:"mobileButtonItem",key:"inStoreMessaging"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(Ea.a,{icon:Ka.m})),r.a.createElement("div",{className:"mobileButtonText"},"Messaging")),r.a.createElement(ba.a.Item,{className:"mobileButtonItem",key:"settings"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(Ea.a,{icon:Ka.f})),r.a.createElement("div",{className:"mobileButtonText"},"Settings")),nn.isLoggedIn()?r.a.createElement(ba.a.Item,{key:"signout",className:"mobileButtonItem"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(Ea.a,{icon:B.f,rotation:180})),r.a.createElement("div",{className:"mobileButtonText"},"Sign Out")):r.a.createElement(ba.a.Item,{key:"signout"}," Sign In")),i=Object(K.get)(this.props,"route",null),c=null,l=ze.includes("localhost")||ze.includes("-dev");i&&(c=!!i.toUpperCase().includes("createSchedule".toUpperCase()));var u=c?"header-container headerTwo":"header-container headerOne";return r.a.createElement("div",{className:u},r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{src:x.appLogo,className:"header_logo pointer noselect",onClick:function(){return e.props.history.push("/nowPlaying")},alt:"logo"})),r.a.createElement("div",{style:{flex:0}},l&&t?"inApp Mode":""),n<=760?r.a.createElement("div",{className:"mobileButtonsContainer"},r.a.createElement(ya.a,{overlay:o,trigger:["click"]},r.a.createElement(da.a,null,r.a.createElement(Ea.a,{icon:Ka.b})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mainButtonsContainer noselect"},r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("nowPlaying")?" mainButtonActive":""),key:"nowPlaying",onClick:function(){return e.handleClick("nowPlaying")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(Ea.a,{icon:Ka.v})),r.a.createElement("div",{className:"mainButtonsText"}," Dashboard ")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("discover")||this.checkIfActiveTab("browse")?" mainButtonActive":""),key:"discover",onClick:function(){return e.handleClick("discover")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(Ea.a,{icon:Ka.s})),r.a.createElement("div",{className:"mainButtonsText"},"Stations")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("schedules")||this.checkIfActiveTab("createSchedule")?" mainButtonActive":""),key:"schedules",onClick:function(){return e.handleClick("schedules")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(Ea.a,{icon:Ka.e})),r.a.createElement("div",{className:"mainButtonsText"},"Schedules")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("inStoreMessaging")||this.checkIfActiveTab("inStoreMessaging")?" mainButtonActive":""),key:"inStoreMessaging",onClick:function(){return e.handleClick("inStoreMessaging")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(Ea.a,{icon:Ka.m})),r.a.createElement("div",{className:"mainButtonsText"}," Messaging ")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("settings")||this.checkIfActiveTab("settings")?" mainButtonActive":""),key:"settings",onClick:function(){return e.handleClick("settings")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(Ea.a,{icon:Ka.f})),r.a.createElement("div",{className:"mainButtonsText"}," Settings ")),r.a.createElement("div",{className:"mainButtonsBottomBar"}))),r.a.createElement(da.a,{key:"signout",onClick:function(){return e.logInOut()}},nn.isLoggedIn()?"Sign Out":"Sign In")),l&&r.a.createElement(Ea.a,{className:"icon",style:{paddingLeft:"10px",fontSize:"32px"},icon:Ka.a,onClick:function(){return e.printStuff()}}))}}]),a}(n.Component);var ls=Object(be.f)(Object(pe.b)((function(e){return{auth:e.auth,player:e.player,myLocation:e.auth.location,inApp:e.auth.inApp,state:e}}),(function(e){return{actions:Object(i.b)({},e)}}))(Object(ea.a)(cs))),us=a(463),ms=a.n(us),ds=(a(1037),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.changeVolume(.01*e)},n.state={myVolume:0},n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){this.setState({myVolume:Object(K.get)(this.props,"volume",0)})}},{key:"componentDidUpdate",value:function(e){Object(K.isEqual)(Object(K.get)(this.props,"volume",0),Object(K.get)(e,"volume",0))||this.setState({myVolume:Object(K.get)(this.props,"volume",0)})}},{key:"calculateVolumeHeight",value:function(){return 100*this.state.myVolume}},{key:"render",value:function(){var e=this,t=this.state.myVolume;return r.a.createElement("div",{className:"volume-slider-wrapper"},r.a.createElement("div",{className:"slider orientation-reversed"},r.a.createElement("div",{className:"slider-group"},r.a.createElement("div",{className:"slider-vertical"},r.a.createElement(ms.a,{min:0,max:100,value:this.calculateVolumeHeight(t),orientation:"vertical",onChange:this.handleChange,tooltip:!1,onChangeStart:function(t){return e.props.startDrag(t)},onChangeComplete:function(t){return e.props.endDrag(t)}})))))}}]),a}(n.Component)),ps=a(296),gs=(a(1039),function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;Object(le.a)(this,a),n=t.call(this,e);var r=parseFloat(localStorage.getItem("volume"));return n.state={currentTime:"0:00",duration:"0:00",volume:r||("0"===r.toString()?0:.3),previousVolume:r||.3,showVolumeControl:!1,dragging:!1,url:null,isrc:null},n}return Object(ue.a)(a,[{key:"checkIfVolumeSlider",value:function(e){if(!e)return!1;for(var t=Object(K.get)(e,"path",[]),a=0;a<t.length;a++)if("volume-wrapper"===t[a].id)return!0;return!1}},{key:"componentDidMount",value:function(){var e=this;this.rap.audioEl.addEventListener("timeupdate",(function(t){e.setState({currentTime:t.target.currentTime,duration:t.target.duration})})),window.addEventListener("mouseover",(function(t){e.checkIfVolumeSlider(t)||e.state.dragging?e.state.showVolumeControl||e.setState({showVolumeControl:!0}):e.state.showVolumeControl&&e.setState({showVolumeControl:!1})}));var t=Object(K.get)(this.props,"currentTrack","");this.updateTrackState(),this.props.actions.checkIfAdvertisement(Object(K.get)(this.props,"currentTrack",{})),this.setState({duration:Object(K.get)(t,"duration",null)})}},{key:"componentWillUnmount",value:function(){try{this.player.removeEventListener("timeupdate"),window.removeEventListener("mouseover")}catch(e){console.log("caught error on music-bar unmount",e)}}},{key:"updateTrackState",value:function(){this.setState({url:Object(K.get)(this.props,"player.trackMap["+Object(K.get)(this.props,"currentTrack.isrc","")+"].url",""),isrc:Object(K.get)(this.props,"currentTrack.isrc",null)})}},{key:"componentDidUpdate",value:function(e){(Object(K.isEqual)(Object(K.get)(this.props,"myLocation.currentTrack.isrc",null),Object(K.get)(e,"myLocation.currentTrack.isrc",null))||(console.log("nowPlaying: ",{currentTrack:Object(K.get)(this.props,"currentTrack.title",""),duration:X(Object(K.get)(this.props,"currentTrack.duration","")),station:Object(K.get)(this.props,"myLocation.station.name","")}),this.props.actions.checkIfAdvertisement(Object(K.get)(this.props,"currentTrack",{})),this.updateTrackState()),Object(K.isEqual)(Object(K.get)(this.props,"myLocation.station._id",null),Object(K.get)(e,"myLocation.station._id",null))||(console.log("<================ CHANGED STATION B ================>",this.props),this.props.actions.setTrackNumber(0),this.updateTrackState(),ps.isSafari&&Object(K.get)(this.props,"player.isPlaying")&&(this.props.actions.setIsPlaying(!Object(K.get)(this.props,"player.isPlaying")),this.rap.audioEl.play())),Object(K.isEqual)(Object(K.get)(this.props,"player.isPlaying",!1),Object(K.get)(e,"player.isPlaying",!1)))||(Object(K.get)(this.props,"player.isPlaying",!1)?this.rap.audioEl.play():this.rap.audioEl.pause())}},{key:"getCurrentTrack",value:function(){var e=this.state,t=e.url,a=e.isrc,n=Object(K.get)(this.props,"currentTrack.isrc",""),r=Object(K.get)(this.props,"player.trackMap["+n+"].url",Object(K.get)(this.props,"currentTrack.url",""));return a&&t&&a===n&&t!==r?t:r}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){var t=e.rap.audioEl.play();void 0!==t&&t.then((function(){e.props.actions.setIsPlaying(!0)})).catch((function(){e.props.actions.setIsPlaying(!1)}))}))}},{key:"togglePlay",value:function(){this.props.actions.setIsPlaying(!Object(K.get)(this.props,"player.isPlaying"))}},{key:"toggleMute",value:function(){var e=this,t=this.state.previousVolume;this.setState({volume:this.state.volume>0?0:t},(function(){localStorage.setItem("volume",e.state.volume)}))}},{key:"setVolume",value:function(e){var t=this;this.setState({volume:e,previousVolume:e},(function(){localStorage.setItem("volume",t.state.volume)}))}},{key:"toggleVolumeDrag",value:function(e){this.setState({dragging:e})}},{key:"closePlayer",value:function(){var e=Object(fe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.actions.setIsPlaying(!1),je({category:p,action:S,label:M}),e.next=4,this.props.actions.disconnectPlayer();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"songError",value:function(e){console.log("Song error: ",{e:e,props:this.props}),this.skipSong(0)}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:r.a.createElement(Ea.a,{icon:Ga.b,className:"connect-icon"})});try{ps.isSafari&&t.props.actions.setIsPlaying(!Object(K.get)(t.props,"player.isPlaying")),t.rap.audioEl.play()}catch(a){console.log("skipSong err: ",a)}}))}},{key:"render",value:function(){var e=this,t=Object(K.get)(this.props,"player",{}),a=t.isPlaying,n=t.skipDisabled,s=this.state,o=s.volume,i=s.showVolumeControl,c=s.currentTime,l=s.duration,u=Object(K.get)(this.props,"currentTrack",{}),m=(c/l*100).toFixed(2),d=!1,p=!1,g=document.getElementById("player-info-wrapper")||null,h=document.getElementById("player-artist-info")||null,f=document.getElementById("player-track-info")||null;return g&&h&&f&&((g=g.getBoundingClientRect().width-60)<(h=h.getBoundingClientRect().width)&&(d=!0),g<(f=f.getBoundingClientRect().width)&&(p=!0)),r.a.createElement("div",{className:"music-bar-wrapper noselect",id:"music-player-controller"},r.a.createElement("div",{className:"react-music-player"},r.a.createElement(vr.a,{ref:function(t){e.rap=t},src:this.getCurrentTrack(),autoPlay:!1,controls:!1,muted:0===o,volume:o,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.skipSong(m)},onError:function(t){return e.songError(t)},preload:"auto"})),r.a.createElement("div",{className:"music-bar-scrub-wrapper"},r.a.createElement("div",{className:"music-bar-scrubber",style:{width:m+"%"}})),r.a.createElement("div",{className:"music-bar-content-wrapper"},r.a.createElement("div",{className:"music-bar-item flexRow left-controls",id:"player-info-wrapper"},r.a.createElement("img",{className:"preview-image",src:Object(K.get)(u,"picture",null),alt:""}),r.a.createElement("div",{className:"preview-text"},r.a.createElement("div",{className:"song-artist"},r.a.createElement("span",{id:"player-artist-info",className:d?"marquee":""},Object(K.get)(u,"artist[0]","NA"))),r.a.createElement("div",{className:"song-title"},r.a.createElement("span",{id:"player-track-info",className:p?"marquee":""},Object(K.get)(u,"title","NA"))))),r.a.createElement("div",{className:"music-bar-item flexRow center-controls"},a?r.a.createElement(Ea.a,{icon:Ka.o,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}):r.a.createElement(Ea.a,{icon:Ka.p,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}),r.a.createElement(Ea.a,{icon:Ka.t,className:"music-bar-icon".concat(n?" disabled":""),onClick:function(){return n?null:e.skipSong(m)}})),r.a.createElement("div",{className:"music-bar-item right-controls"},r.a.createElement("div",{className:"time-display"},r.a.createElement("span",{id:"current-song-time"},X(c))," \xa0/\xa0 ",r.a.createElement("span",{id:"current-song-duration"},X(l))," ",r.a.createElement("span",{id:"invis-current-song-time"},m)),r.a.createElement("div",{className:"volume-icon",id:"volume-wrapper"},i&&r.a.createElement(ds,{volume:o,changeVolume:function(t){return e.setVolume(t)},startDrag:function(){return e.toggleVolumeDrag(!0)},endDrag:function(){return e.toggleVolumeDrag(!1)}}),0===o?r.a.createElement(Ea.a,{icon:Ka.z,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):o<.7?r.a.createElement(Ea.a,{icon:Ka.y,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):r.a.createElement(Ea.a,{icon:Ka.A,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}})),r.a.createElement(Ea.a,{icon:Ga.e,className:"music-bar-icon close-icon",onClick:function(){return e.closePlayer()}}))))}}]),a}(n.Component));var hs=Object(pe.b)((function(e){return{player:e.player,myLocation:e.auth.location,currentTrack:e.auth.location.currentTrack}}),(function(e){return{actions:Object(i.b)({checkIfAdvertisement:ht,skipSong:gt,setIsPlaying:tt,setTrackNumber:nt,disconnectPlayer:mt,playerError:$e},e)}}))(gs);a(1040);nn.initialize();var fs=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={isLoading:!0},n}return Object(ue.a)(a,[{key:"componentWillMount",value:function(){var e=this;nn.getLock().on("authenticated",(function(t){e.initiateLogin(null===t||void 0===t?void 0:t.idToken)})),nn.getLock().on("unrecoverable_error",(function(e){console.log("auth0 - unrecoverable_error: ",{err:e})})),nn.getLock().on("authorization_error",(function(e){console.log("auth0 - authorization_error: ",{err:e})})),nn.getLock().checkSession({},(function(t,a){console.log("hit auth0 check session: ",{err:t,data:a}),e.setState({isLoading:!1},(function(){!t&&(null===a||void 0===a?void 0:a.idToken)?e.initiateLogin(null===a||void 0===a?void 0:a.idToken):(localStorage.getItem("ambii_auth_jwt")&&nn.logout(),"login_required"===Object(K.get)(t,"code","")&&nn.login(),e.setState({isLoading:!1}))}))})),(Object(K.get)(window,"location.search","").includes("inApp")||localStorage.getItem("inApp"))&&this.props.actions.setInApp(!0),window.ReactNativeWebView&&window.addEventListener("message",(function(e){Object(K.get)(e,"data.data",null);var t=Object(K.get)(e,"data.endpoint",null),a=!!nn.isLoggedIn();switch(t){case"auth":rn.send("auth",a);break;case"introLogin":localStorage.setItem("mobileIntroLogin",!0),rn.send("introLogin",null);break;case"login":nn.login(),rn.send("login","Login Success");break;case"logout":nn.logout(),rn.send("logout","Logout Success")}}))}},{key:"componentDidUpdate",value:function(){nn.isLoggedIn()&&this.state.isLoading&&this.setState({isLoading:!1})}},{key:"initiateLogin",value:function(e){localStorage.setItem("ambii_auth_jwt",e),this.props.actions.auth0setLogin()}},{key:"render",value:function(){var e=this,t=this.props,a=t.player,n=t.auth,s=t.inApp,o=Object(K.get)(a,"showPlayer",!1);return r.a.createElement(ve.a,null,r.a.createElement("div",null,ss.map((function(t,a){return r.a.createElement(be.b,{key:a,path:t.path,exact:t.exact,render:function(){var a,i,c;return e.state.isLoading||nn.isLoggedIn()||!t.private||nn.login(),nn.isLoggedIn()||!t.private?r.a.createElement(r.a.Fragment,null,(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.company)&&!(null===n||void 0===n||null===(i=n.user)||void 0===i||null===(c=i.company)||void 0===c?void 0:c.name)?r.a.createElement(Ha.a,{visible:!0,onCancel:e.onCancel,width:900,className:"modal-container",closable:!1,footer:!1},r.a.createElement("div",{className:"signup-modal-title"},"Welcome to ",r.a.createElement("span",{style:{color:"#d04283"}},"ambii")),r.a.createElement(Ma,null)):null,r.a.createElement("div",{className:"explore_container"},!s&&r.a.createElement(ls,{showMenu:"userlogin",route:t.path}),r.a.createElement("div",{className:"contentWrapper".concat(o?" player-visible":"")},t.component()))):r.a.createElement(en.a,{className:"explore_container"},!s&&r.a.createElement(ls,{id:"myHeader",showMenu:"landing"}),r.a.createElement("div",{className:"loading-app"},r.a.createElement("div",{className:"loading-app-text"},"Logging Into ",r.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),r.a.createElement(Xt.a,{indicator:$t,spinning:!0,size:"large"})))}})}))))}}]),a}(r.a.Component);var vs=Object(pe.b)((function(e){return{auth:e.auth,player:e.player,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({auth0setLogin:kt,setInApp:He},e)}}))(Object(ea.a)(fs)),bs=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(e){var n;return Object(le.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,initAnalytics:!1},we.a.initialize("UA-167385126-1",{siteSpeedSampleRate:100,testMode:!document.location.hostname.includes("business.ambii.io")}),n}return Object(ue.a)(a,[{key:"componentDidMount",value:function(){var e=Object(fe.a)(he.a.mark((function e(){return he.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.actions.startSockets();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.player,t=Object(K.get)(e,"showPlayer",!1);return this.state.isLoading?r.a.createElement("div",{className:"loading-app"},r.a.createElement("div",{className:"loading-app-text"},"Loading ",r.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),r.a.createElement(Xt.a,{indicator:$t,spinning:!0,size:"large"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(vs,{props:{showMusicPlayer:t}}),t&&r.a.createElement(hs,null))}}]),a}(r.a.Component);var ys=Object(pe.b)((function(e){return{auth:e.auth,player:e.player}}),(function(e){return{actions:Object(i.b)({startSockets:Zt},e)}}))(Object(ea.a)(bs)),Es=function(e){Object(me.a)(a,e);var t=Object(de.a)(a);function a(){return Object(le.a)(this,a),t.apply(this,arguments)}return Object(ue.a)(a,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this.props,t=e.store,a=e.stripePromise;return r.a.createElement(pe.a,{store:t},r.a.createElement("div",null,r.a.createElement(Nr.Elements,{stripe:a},r.a.createElement(ys,null))))}}]),a}(n.Component);var Ss=Object(pe.b)((function(e){return{auth:e.auth,loader:e.loader}}),(function(e){return{actions:Object(i.b)({},e)}}))(Es),Os=(a(1041),a(464));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ws=ce(),js=Object(Os.a)(Ue);"localhost"!==document.location.hostname&&"business-dev.ambii.io"!==document.location.hostname&&(console.log=function(){}),Object(s.render)(r.a.createElement(o.AppContainer,null,r.a.createElement(Ss,{store:ws,stripePromise:js})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},235:function(e,t,a){},407:function(e,t,a){},447:function(e,t,a){e.exports=a.p+"static/media/ios.c969fdc0.png"},448:function(e,t,a){e.exports=a.p+"static/media/playstore.6b8a494d.png"},458:function(e,t,a){e.exports=a.p+"static/media/credit-card.10e3740d.svg"},459:function(e,t,a){e.exports=a.p+"static/media/visa.c8009c93.svg"},460:function(e,t,a){e.exports=a.p+"static/media/amex.a9eddb34.svg"},461:function(e,t,a){e.exports=a.p+"static/media/mastercard.543bc93b.svg"},471:function(e,t,a){e.exports=a(1042)},482:function(e,t,a){e.exports=a.p+"static/media/androidBtn.e65a89bc.png"},483:function(e,t,a){e.exports=a.p+"static/media/appleBtn.99f1ed98.png"},484:function(e,t,a){e.exports=a.p+"static/media/appLogo.811d25b4.png"},485:function(e,t,a){e.exports=a.p+"static/media/bg1.069f3dec.png"},486:function(e,t,a){e.exports=a.p+"static/media/bg2.5a06bbee.png"},487:function(e,t,a){e.exports=a.p+"static/media/bg3.9f68fc4b.png"},488:function(e,t,a){e.exports=a.p+"static/media/bg4.815bb5d4.jpg"},489:function(e,t,a){e.exports=a.p+"static/media/bg5.b7d2890a.jpg"},490:function(e,t,a){e.exports=a.p+"static/media/bg6.435f2fc0.jpg"},535:function(e,t){},577:function(e,t,a){},665:function(e,t,a){},666:function(e,t,a){},667:function(e,t,a){},668:function(e,t,a){e.exports=a.p+"static/media/ambii_logo_inverse.188927ed.png"},820:function(e,t){},871:function(e,t,a){},872:function(e,t,a){},873:function(e,t,a){},874:function(e,t,a){},878:function(e,t,a){},879:function(e,t,a){},880:function(e,t,a){},881:function(e,t,a){},882:function(e,t,a){},883:function(e,t,a){},884:function(e,t,a){},885:function(e,t,a){},886:function(e,t,a){},929:function(e){e.exports=JSON.parse("{}")},930:function(e,t,a){},931:function(e,t,a){},932:function(e,t,a){},933:function(e,t,a){},934:function(e,t,a){},935:function(e,t,a){},936:function(e,t,a){},938:function(e,t,a){}},[[471,1,2]]]);
//# sourceMappingURL=main.9ec46ab7.chunk.js.map