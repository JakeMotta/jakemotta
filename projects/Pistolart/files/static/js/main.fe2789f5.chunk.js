(this["webpackJsonpambii-business-web"]=this["webpackJsonpambii-business-web"]||[]).push([[0],{226:function(e,t,a){},382:function(e,t,a){},403:function(e,t,a){e.exports=a.p+"static/media/ambii_logo_inverse.188927ed.png"},413:function(e,t,a){e.exports=a.p+"static/media/ROYAcVhHo.7e888868.png"},424:function(e,t,a){e.exports=a(908)},435:function(e,t,a){e.exports=a.p+"static/media/androidBtn.e65a89bc.png"},436:function(e,t,a){e.exports=a.p+"static/media/appleBtn.99f1ed98.png"},437:function(e,t,a){e.exports=a.p+"static/media/appLogo.811d25b4.png"},438:function(e,t,a){e.exports=a.p+"static/media/bg1.069f3dec.png"},439:function(e,t,a){e.exports=a.p+"static/media/bg2.5a06bbee.png"},440:function(e,t,a){e.exports=a.p+"static/media/bg3.9f68fc4b.png"},441:function(e,t,a){e.exports=a.p+"static/media/bg4.815bb5d4.jpg"},442:function(e,t,a){e.exports=a.p+"static/media/bg5.b7d2890a.jpg"},443:function(e,t,a){e.exports=a.p+"static/media/bg6.435f2fc0.jpg"},489:function(e,t){},531:function(e,t,a){},631:function(e,t,a){},632:function(e,t,a){},633:function(e,t,a){},827:function(e,t,a){},828:function(e,t,a){},829:function(e,t,a){},833:function(e,t,a){},834:function(e,t,a){},835:function(e,t,a){},836:function(e,t,a){},837:function(e,t,a){},838:function(e,t,a){},839:function(e,t,a){},840:function(e,t,a){},841:function(e,t,a){},885:function(e){e.exports=JSON.parse("{}")},886:function(e,t,a){},887:function(e,t,a){},888:function(e,t,a){},889:function(e,t,a){},890:function(e,t,a){},891:function(e,t,a){},892:function(e,t,a){},894:function(e,t,a){},895:function(e,t,a){},896:function(e,t,a){},899:function(e,t,a){},900:function(e,t,a){},901:function(e,t,a){},904:function(e,t,a){},905:function(e,t,a){},906:function(e,t,a){},907:function(e,t,a){},908:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(6),i=a(266),s=(a(429),a(430),a(15)),c=(a(390),a(268)),l=a(54),u=a(13),m="Welcome",d="Discover",p="Dashboard",g="Schedule",h="General",f="Signed up for web application",b="Previewed a station",v="Started station",y="Updated station preference",E="Swapped to advance station browse",O="Started web player",S="Closed web player",k="Pressed connect button",j="Created Schedule",w="Saved Schedule",N="Closed Schedule",C="Back To Dashboard",I="Viewed on Mobile Device",L="Clicked a button",P="Toggled a station as favorite",T="User signed out of web application",M="button",A="error",x={Electronica:"#44d474","Alternative & Punk":"#d9964a",Rock:"#d64b46",Pop:"#d04283",Classical:"#8046d6",Traditional:"#c178ff",Jazz:"#42c4d0",Soundtrack:"#E6DD5D",Urban:"#191919",Other:"#999999"},D={googleBtn:a(435),iosBtn:a(436),appLogo:a(437),bg1:a(438),bg2:a(439),bg3:a(440),bg4:a(441),bg5:a(442),bg6:a(443)},_=[{title:"Inactive",time:"0"},{title:"Every 15 Minutes",time:"15"},{title:"Every 30 Minutes",time:"30"},{title:"Every Hour",time:"60"},{title:"Every Few Hours",time:"180"}],B={"Popular Today":"The Top Hits of Today","Holiday Music":"Get into the spirit of the season!","Flattening the Curve":"Battling COVID-19, one song at a time.","Upbeat Energy":"Energetic songs to get the mood flowing.","Laid-back, Low-key.":"Songs for relaxation and chill-out times.","Learning to Grow":"A series for those looking to overcome rough times, through different genres of music.",Decades:"Your home for all decades of music.","Ahead of the Curve":"A series for those who are tomorrow's trendsetters.","Liquid Courage":"Beats for those that are bold and those that are beautiful.","Beats and Beers":"Cheer on your favorite team with these country hits!","Taproom Treasures":"Stripped-down music for the sophisticated drinker.","Flirtatious Friday Night":"She's sitting right there.","Settled-Down Speakeasy":"Jazzy tunes for a sparkilng night.","Dancin' Across the World":"Iresistable, international glimmers of firey fun.","Coffee Curiosity":"A perfect morning moodsetter.","Bookstore Barista":"Quiet jazz for newspapers and novelists.","Classical Cappuccino":"Upscale grandiose through caffine and classical.","Countryside Cafe":"For french toast, syrup, and kickin' up those boots in the morning.","Late Night Study ":"Beats for the studious individual ","Glitz At the Ritz":"Wonder and wow through jazzy band ballads.","Loungeside Lovers":"Ambiance for the low-key days and nights.","Hearthside Hip":"R&B treasures for the late-night bonfire vibes","Travelers Rest":"Soft stripped music to lay down to.","Elegant Entertainment":"Classical masterpieces for the sophisticated traveler.","Tropical Getaway":"A cabana soundtrack for pina coladas and the poolside.","Pep Rally Pop":"Let's get this bread.","Study Beats":"Lo-fi music for the late study nights.","Intelligence through Inspiration":"Ambiance for peaceful reflection and quiet times.","Classical Concentration":"Inspiration through piano, strings, and eras of talent","Developing Brains":"For the little ones.","Academy Alternative":"Alternative hits for those looking to get work done.","Boutique Beats":"Continuous flow and feel-good vibes.","Diamonds Are Forever":"Inspirational classical music for the sophisticated shopper.","Retail R&B":"R&B and pop hits for the casual customer.","Food Court Finds":"Grab a bite to eat with this easy-listening soundtrack!","Girls Night Out":"Empowering women through confident, feel-good beats.","Upscaled Grace":"Elegance through classical masterpieces.","Jukebox of the Ages":"Your home for all decades of music.","Wax and Relax":"Set the mood with the perfect ambiiance.","Hairdresser Hop":"R&B and hip hop hits for the trendsetter.","Nails, Hair, Hips, Heels":"Endless feel-good beats.","Pumpin Metal":"Rock and Metal soundtrack for the heavy lifter.","Persistence Pop":"Keep that grind up.","Pre-Game Pump Up":"Get in your head, get in the ring.","Fire Dancing Fiesta":"High-energy music for the dancers...and for that perfect body.","Heavy Lifting Hype":"Get turnt.","Hamburger Hits":"Quick beats for quick bites.","Barbecue Bash":"Perfect for the backyard and the beer.","Asian Eats":"You don't need a plane ticket.","Taco Truck Temposetter":"Are you going to finish all 10 of those tacos?","Boba Beats":"Passionfruit, peach stars, pearls, and perfection.","Royalty Dining":"Elegnat music for roses and candlelit dinners.","Ethereal Elegance":"Transcend within yourself.","Self-Care Classical":"Classical music to rejuvinate the brain.","Asian Getaway":"Sounds through Japaneese cherry blossoms and night-market eats.","Relaxin' R&B":"Good vibes only.","Hot Spring Hits":"Glimmering hits for feel-good moments.","Working From Home":"Chill beats for ultimate focus and productivity.","New Hobby, New Self":"Cooking, dancing, stretching, reading- with this time, anything is possible.","A Time For Reflection":"Rise above and let serenity flow in this time of unrest.","Go Hard or (Stay) Home":"Quarantine ain't stopping these muscle gains.","Treasured Throwbacks":"Remembering the days before this period of time.","Positive Vibes Only (Singing in the Shower)":"Sing your heart out to these songs of joy and jubilation!"},F={global:["Popular Today"],defaultIndividual:["Working From Home","New Hobby, New Self","A Time For Reflection","Go Hard or (Stay) Home","Treasured Throwbacks","Positive Vibes Only (Singing in the Shower)"],bar:["Liquid Courage","Beats and Beers","Taproom Treasures","Flirtatious Friday Night","Settled-Down Speakeasy","Dancin' Across the World"],cafe:["Coffee Curiosity","Bookstore Barista","Classical Cappuccino","Boba Beats","Countryside Cafe","Late Night Study "],gym:["Pumpin Metal","Persistence Pop","Pre-Game Pump Up","Fire Dancing Fiesta","Heavy Lifting Hype"],hotel:["Glitz At the Ritz","Loungeside Lovers","Hearthside Hip","Travelers Rest","Elegant Entertainment","Tropical Getaway"],other:["Flattening the Curve","Upbeat Energy","Laid-back, Low-key.","Learning to Grow","Decades","Ahead of the Curve"],restaurant:["Hamburger Hits","Barbecue Bash","Asian Eats","Taco Truck Temposetter","Boba Beats","Royalty Dining"],salon:["Girls Night Out","Upscaled Grace","Jukebox of the Ages","Wax and Relax","Hairdresser Hop","Nails, Hair, Hips, Heels"],school:["Pep Rally Pop","Study Beats","Intelligence through Inspiration","Classical Concentration","Developing Brains","Academy Alternative"],spa:["Ethereal Elegance","Tropical Getaway","Self-Care Classical","Asian Getaway","Relaxin' R&B","Hot Spring Hits"],shop:["Boutique Beats","Diamonds Are Forever","Jukebox of the Ages","Retail R&B","Girls Night Out","Food Court Finds"]},R=a(66),U={Slower:{title:"Slower",min:0,max:55,icon:R.f},Slow:{title:"Slow",min:55,max:75,icon:R.h},Moderate:{title:"Moderate",min:75,max:95,icon:R.g},Fast:{title:"Fast",min:95,max:115,icon:R.c},Faster:{title:"Faster",min:115,max:900,icon:R.d}},V={"America/Adak":"-09:00","America/Anchorage":"-08:00","America/Boise":"-06:00","America/Chicago":"-05:00","America/Denver":"-06:00","America/Detroit":"-04:00","America/Indiana/Indianapolis":"-04:00","America/Indiana/Knox":"-05:00","America/Indiana/Marengo":"-04:00","America/Indiana/Petersburg":"-04:00","America/Indiana/Tell_City":"- 05:00","America/Indiana/Vevay":"-04:00","America/Indiana/Vincennes":"-04:00","America/Indiana/Winamac":"-04:00","America/Juneau":"-08:00","America/Kentucky/Louisville":"-04:00","America/Kentucky/Monticello":"-04:00","America/Los_Angeles":"-07:00","America/Menominee":"-05:00","America/Metlakatla":"-08:00","America/New_York":"-04:00","America/Nome":"-08:00","America/North_Dakota/Beulah":"-05:00","America/North_Dakota/Center":"-05:00","America/North_Dakota/New_Salem":"-05:00","America/Phoenix":"-07:00","America/Sitka":"-08:00","America/Yakutat":"-08:00","Pacific/Honolulu":"-10:00"},q={"ar-XA":"Arabic","bn-IN":"Bengali (India)","cmn-CN":"Mandarin Chinese","cmn-TW":"Mandarin Chinese","cs-CZ":"Czech (Czech Republic)","da-DK":"Danish (Denmark)","de-DE":"German (Germany)","el-GR":"Greek (Greece)","en-AU":"English (Australia)","en-GB":"English (UK)","en-IN":"English (India)","en-US":"English (US)","es-ES":"Spanish (Spain)","fi-FI":"Finnish (Finland)","fil-PH":"Filipino (Philippines)","fr-CA":"French (Canada)","fr-FR":"French (France)","gu-IN":"Gujarati (India)","hi-IN":"Hindi (India)","hu-HU":"Hungarian (Hungary)","id-ID":"Indonesian (Indonesia)","it-IT":"Italian (Italy)","ja-JP":"Japanese (Japan)","kn-IN":"Kannada (India)","ko-KR":"Korean (South Korea)","ml-IN":"Malayalam (India)","nb-NO":"Norwegian (Norway)","nl-NL":"Dutch (Netherlands)","pl-PL":"Polish (Poland)","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","ru-RU":"Russian (Russia)","sk-SK":"Slovak (Slovakia)","sv-SE":"Swedish (Sweden)","ta-IN":"Tamil (India)","te-IN":"Telugu (India)","th-TH":"Thai (Thailand)","tr-TR":"Turkish (Turkey)","uk-UA":"Ukrainian (Ukraine)","vi-VN":"Vietnamese (Vietnam)","yue-HK":"Chinese (Hong Kong)"},z={"Female A":"Amazing Female","Female B":"Awesome Female","Female C":"Charming Female","Female D":"Excellent Female","Female E":"Fabulous Female","Female F":"Fantastic Female","Female G":"Outstanding Female","Female H":"Remarkable Female","Female I":"Spectacular Female","Female J":"Splendid Female","Female K":"Stellar Female","Female L":"Strong Female","Male A":"Amazing Male","Male B":"Awesome Male","Male C":"Charming Male","Male D":"Excellent Male","Male E":"Fabulous Male","Male F":"Fantastic Male","Male G":"Outstanding Male","Male H":"Remarkable Male","Male I":"Spectacular Male","Male J":"Splendid Male","Male K":"Stellar Male","Male L":"Strong Male"},H="Individual",W={auth:{user:null,jwt:null,location:{},isApple:!1,inApp:!1},snackbar:{notification:{},message:{}},loader:{requestInProgress:0},locations:{data:[],count:0,limit:0,skip:0},playlists:{schedules:[]},stations:{topTrack:[],artists:[],tracks:[],playlistList:[],genreList:[],eraList:[],moodList:[],data:[],count:0,skip:0,limit:10},stationPreviews:{genre:[],era:[],mood:[],activeStationPreview:[]},selectedPreviews:{ID:"",track:[]},zones:{data:[],count:0,limit:0,skip:0},schedules:{activeSchedule:null,schedules:[]},player:{locationJWT:null,showPlayer:!1,isPlaying:!1,skipDisabled:!1,trackNumber:0,trackMap:{},playerError:{}},inStoreMessaging:{messages:[]}},G=a(2),K=function(e,t){if(!e||!t)return[];var a=[];return e.map((function(e){return a[Object(G.get)(e,t,null)]=e})),a},Y=function(e){return e?"https://random-station-artwork.s3-us-west-2.amazonaws.com/"+Math.abs(e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0))%101+".jpg":""},J=function(){return window.outerWidth<=650},Z=function(e){return isNaN(e)?"0:00":Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},Q=function(e){return e>=0&&e<=55?U.Slower:e>=55&&e<=75?U.Slow:e>=75&&e<=95?U.Moderate:e>=95&&e<=115?U.Fast:e>=115&&e<=900?U.Faster:U.Moderate},X=function(){var e=localStorage.getItem("deviceID");return e||(e="web-"+function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,o=0;o<e;o++)t+=a.charAt(Math.floor(Math.random()*n));return t.toUpperCase()}(10),localStorage.setItem("deviceID",e)),e},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object.assign({},e,Object(u.a)({},t.data));case"SET_USER":return Object.assign({},e,{user:t.data});case"SET_LOCATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},t.data),{},{favoritesMap:K(Object(G.get)(t,"data.favorites",[]),"_id")})});case"UPDATE_STATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{station:t.data})});case"UPDATE_CURRENT_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{currentTrack:t.data})});case"SET_FAVORITES":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{favorites:t.data,favoritesMap:K(Object(G.get)(t,"data",[]),"_id")})});case"SET_EXPLICIT":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{explicit:t.data})});case"SET_PAIRED_DEVICE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{pairedDevice:t.data})});case"SET_LAST_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{lastTrack:t.data})});case"SET_TRACK_SCHEDULE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{trackSchedule:t.data})});case"SET_IS_APPLE":return Object.assign({},e,{isApple:t.data});case"SET_INAPP":return Object(G.get)(t,"data",!1)&&(localStorage.setItem("inApp",!0),window.inApp=!0),Object.assign({},e,{inApp:t.data});default:return e}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INSTORE_MESSAGES":return Object.assign({},e,{messages:t.data});default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.player,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRACK_MAP":return Object.assign({},e,{trackMap:t.data});case"SET_TRACK_NUMBER":return Object.assign({},e,{trackNumber:t.data});case"SET_IS_PLAYING":return Object.assign({},e,{isPlaying:t.data});case"SET_SKIP_DISABLED":return Object.assign({},e,{skipDisabled:t.data});case"SET_SHOW_PLAYER":return Object.assign({},e,{showPlayer:t.data});case"SET_LOCATION_JWT":return Object.assign({},e,{locationJWT:t.data});case"PLAYER_ERROR":return Object.assign({},e,{playerError:t.data});case"DISCONNECT_PLAYER_SUCCESS":return localStorage.removeItem("location-jwt"),Object.assign({},e,{locationJWT:null});default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.playlists,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYLISTS":return Object.assign([],e,{schedules:t.data});default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.selectedPreviews,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCHEDULE":return Object.assign({},Object(u.a)({},e),{data:null});case"SET_SCHEDULE":return Object.assign({},e,{ID:"",track:[]});case"ACTIVE_SCHEDULE":return Object.assign({},e,{activeSchedule:t.data});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SNACKBAR_NOTIFICATION":return Object.assign({},e,{notification:t.data});case"SET_SNACKBAR_MESSAGE":return Object.assign({},e,{message:t.data});default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.stations,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PUBLIC_STATIONS_FOR_DISCOVER":return Object.assign({},e,{playlistList:t.data.playlistList,genreList:t.data.genreList,eraList:t.data.eraList,moodList:t.data.moodList});default:return e}},ie=Object(s.c)({auth:$,inStoreMessaging:ee,player:te,playlists:ae,schedules:ne,snackbar:oe,stations:re});Object(l.a)();var se=function(e){var t=[c.a];return Object(s.e)(ie,e,Object(s.d)(s.a.apply(void 0,t)))},ce=a(8),le=a(9),ue=a(12),me=a(11),de=a(18),pe=a(20),ge=a.n(pe),he=a(33),fe=a(39),be=a(42),ve=a(128),ye=a.n(ve),Ee={API_URL:"https://hola.ambii.io/v2",SOCKET_URL:"https:/hola.ambii.io",APP_TITLE:"Ambii"};function Oe(e,t,a){return Se.apply(this,arguments)}function Se(){return(Se=Object(he.a)(ge.a.mark((function e(t,a,n){var o,r,i,s,c=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>3&&void 0!==c[3]?c[3]:null,r=c.length>4&&void 0!==c[4]?c[4]:null,i="".concat(Ee.API_URL).concat(a).trim(),s={method:t,url:i,headers:{}},null!==o&&(s.headers=o),null!==r&&(s.params=r),"post"!==t&&"put"!==t&&"delete"!==t&&"patch"!==t||(s.data=n),s.headers.Authorization="Bearer "+localStorage.getItem("access-token"),e.abrupt("return",new Promise((function(e,t){ye()(s).then((function(t){e(t)})).catch((function(a){console.log("Caught api error: ",a),"Network Error"===a.message?window.alert(a.message):"The token has expired, please login again!"===Object(G.get)(a,"response.data.message",null)?e(!1):a.response&&401===a.response.status?localStorage.removeItem("access-token"):t(a)}))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(e){return function(t){t({type:"SET_INAPP",data:e})}},je=function(e){return function(t){t({type:"SET_TRACK_SCHEDULE",data:e})}},we=function(e){return function(t){t({type:"SET_PAIRED_DEVICE",data:e})}},Ne=function(e){return function(t){t({type:"SET_LAST_TRACK",data:e})}},Ce=function(e){return function(t){t({type:"SET_TRACK_MAP",data:e})}},Ie=function(e){return function(t){t({type:"SET_LOCATION",data:e})}},Le=function(e){return function(t){t({type:"SET_LOCATION_JWT",data:e})}},Pe=function(e){return function(t){t({type:"UPDATE_CURRENT_TRACK",data:e})}},Te=function(e){return function(t){t({type:"PLAYER_ERROR",data:e})}},Me=function(e){return function(t){t({type:"SET_SHOW_PLAYER",data:e})}},Ae=function(e){return function(t){t({type:"SET_IS_PLAYING",data:e})}},xe=function(e){return function(t){t({type:"SET_SKIP_DISABLED",data:e})}},De=function(e){return function(t){t({type:"SET_TRACK_NUMBER",data:e})}},_e=function(e){return function(t){t({type:"SET_USER",data:e})}},Be=function(e){return function(t){t({type:"SET_PLAYLISTS",data:e})}},Fe=a(392),Re=a.n(Fe)()(Ee.SOCKET_URL),Ue="connect-web",Ve="disconnect",qe="reconnect",ze="player-paired",He="player-un-paired",We="player-disconnected",Ge="player-played",Ke="player-paused",Ye="station-updated",Je="player-called-next",Ze=function(){return function(e){st(e),ct(e),lt(e),ut(e),mt(e)}};function Qe(){return function(e,t){return new Promise(function(){var a=Object(he.a)(ge.a.mark((function a(n,o){var r;return ge.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=localStorage.getItem("location-jwt")){a.next=3;break}return a.abrupt("return",n(!1));case 3:Oe("post","/auth/player/disconnect",{locationId:Object(G.get)(t(),"auth.location._id",""),locationJWT:r,deviceID:X()},{"player-access-token":r}).then(function(){var t=Object(he.a)(ge.a.mark((function t(a){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("disconnect: ",a),e(we(Object(G.get)(a,"data.data.pairedDevice",{}))),e((function(e){e({type:"DISCONNECT_PLAYER_SUCCESS"})})),e(Me(!1))}catch(o){console.log("Caught error on disconnectPlayer: ",o)}n(Object(G.get)(a,"data.data",null));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("disconnectPlayer error: ",e),o(e.response)}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}}function Xe(e){return function(t){return new Promise((function(a){if(!e)return a(!1);Oe("post","/auth/player/connect",e).then(function(){var e=Object(he.a)(ge.a.mark((function e(n){var o,r,i,s,c,l,u,m;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object(G.get)(n,"data.data",null),"DEVICE_ALREADY_PAIRED"!==Object(G.get)(o,"data",null)){e.next=5;break}return e.abrupt("return",a("DEVICE_ALREADY_PAIRED"));case 5:console.log("connectPlayer : ",n),r=Object(G.get)(o,"jwt",null),localStorage.setItem("location-jwt",r),i=Object(G.get)(o,"location",{}),s=Object(G.get)(i,"trackSchedule",[]),c=K(Object(G.get)(s,"queue",[]),"isrc"),l=Object(G.get)(i,"currentTrack",null),u=Object(G.get)(i,"currentTrackNumber",0),m=Object(G.get)(s,"queue["+u+"]",l),t(Ie(i)),t(Le(r)),t(Ce(c)),t(De(u)),t(Pe(m)),t(je(s)),t(Me(!0)),a(o);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("connectPlayer error: ",e),a(!1)}))}))}}function $e(e){var t=e.jwt,a=e.data;return function(e){return new Promise(function(){var n=Object(he.a)(ge.a.mark((function n(o){return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t&&a){n.next=3;break}return n.abrupt("return",o(!1));case 3:Oe("post","/auth/player/play-next",a,{"player-access-token":t}).then(function(){var t=Object(he.a)(ge.a.mark((function t(a){var n,r,i,s,c;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("playNextReq: ",a),!a){t.next=10;break}if(n=Object(G.get)(a,"data.data",{}),r=Object(G.get)(n,"sameStation",!0),"DEVICE_ALREADY_PAIRED"!==Object(G.get)(n,"data","")){t.next=6;break}return t.abrupt("return",o(Object(G.get)(n,"data","")));case 6:r||(i=Object(G.get)(n,"location",{}),s=Object(G.get)(n,"location.trackSchedule",{}),c=K(Object(G.get)(s,"queue",[]),"isrc"),e(Ie(i)),e(Ce(c)),e(De(Object(G.get)(i,"currentTrackNumber",0))),e(je(s))),o(!0),t.next=11;break;case 10:o(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("error: ",e),o(!1)})),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),console.log("playNextReq err: ",n.t0),o(!1);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}())}}function et(e){var t=e.songCompletion;return function(e,a){return new Promise(function(){var n=Object(he.a)(ge.a.mark((function n(o){var r,i,s,c,l,u,m,d,p,g;return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t||(t="0"),r=Object(G.get)(a(),"auth.location",{}),i=Object(G.get)(a(),"player",{}),e(xe(!0)),s=Object(G.get)(r,"trackSchedule._id",""),c=Object(G.get)(r,"trackSchedule.queue",[]).length-1,l=Object(G.get)(r,"trackSchedule.queue",[]),u=Object(G.get)(r,"currentTrack",{}),m=Object(G.get)(i,"trackNumber",0),d=null,m+1<=c?(d=l[m+1]||"",m+=1):(d=Object(G.get)(r,"trackSchedule.queue[0]",""),m=0),n.next=14,e(at(d));case 14:return(p=n.sent)&&m!==p&&(m=p),e(Ne(u)),e(Pe(d)),e(De(m)),n.next=21,e($e({jwt:Object(G.get)(i,"locationJWT",null),data:{locationId:Object(G.get)(r,"_id",null),stationId:Object(G.get)(r,"station._id",null),trackScheduleId:s,nextTrack:d,lastTrack:u,deviceID:X(),songCompletion:t,currentTrackNumber:m.toString()}}));case 21:if(!(g=n.sent)){n.next=32;break}if(console.log("music bar props: ",a()),"DEVICE_ALREADY_PAIRED"!==g){n.next=30;break}return e(Ae(!1)),e(xe(!1)),n.next=29,e(Qe());case 29:return n.abrupt("return",o(g));case 30:n.next=33;break;case 32:return n.abrupt("return",o(!1));case 33:o(!0),n.next=41;break;case 36:n.prev=36,n.t0=n.catch(0),e(xe(!1)),console.log("caught callPlayNext err: ",n.t0),o(!1);case 41:case"end":return n.stop()}}),n,null,[[0,36]])})));return function(e){return n.apply(this,arguments)}}())}}function tt(e){return function(t){var a="ADVERT_"===Object(G.get)(e,"isrc","").substring(0,7),n="ISM_"===Object(G.get)(e,"isrc","").substring(0,4);if(a||n)t(xe(!0));else var o=setTimeout((function(){clearTimeout(o),t(xe(!1))}),2e3)}}function at(e){return function(t,a){return new Promise((function(t){var n=Object(G.get)(a(),"auth.location",{}),o=Object(G.get)(n,"trackSchedule.queue",[]),r="ADVERT_"===Object(G.get)(e,"isrc","").substring(0,7),i="ISM_"===Object(G.get)(e,"isrc","").substring(0,4);if(r||i)return t(!1);for(var s=0;s<o.length;s++)if(Object(G.get)(o[s],"isrc","")===Object(G.get)(e,"isrc",e))return t(s);t(!1)}))}}var nt=function(){return function(e){Re.removeEventListener(ze),Re.removeEventListener(He),Re.removeEventListener(We),Re.removeEventListener(Ge),Re.removeEventListener(Ke)}},ot=function(){return function(e){Re.on(Ye,(function(t){e(function(e){return function(t){t({type:"UPDATE_STATION",data:e})}}(t))}))}},rt=function(){return function(e){Re.on(Je,(function(t){e(Pe(Object(G.get)(t,"track",{})))}))}},it=function(){return function(e){Re.removeEventListener(Ye)}},st=function(e){Re.on(ze,(function(e){console.log("Player Paired",e)}))},ct=function(e){Re.on(He,(function(e){console.log("Player UnPaired",e)}))},lt=function(e){Re.on(We,(function(e){console.log("Player Disconnected",e)}))},ut=function(e){Re.on(Ge,(function(e){console.log("Player playerPlayed",e)}))},mt=function(e){Re.on(Ke,(function(e){console.log("Player playerPaused")}))};function dt(){return function(e){return new Promise((function(t){Oe("post","/auth/login").then((function(a){console.log("auth0setLogin res: ",a);var n=Object(G.get)(a,"data.data",null),o=Object(G.get)(n,"defaultLocation",{});if("apple@ambii.io"===Object(G.get)(n,"user.email","").toLowerCase()&&e(function(e){return function(t){t({type:"SET_IS_APPLE",data:e})}}(!0)),e(function(e){return function(t){t({type:"LOGIN_SUCCESS",data:e})}}(n)),e(_e(Object(G.get)(n,"user",{}))),e(Ie(o)),X(),Object(G.get)(o,"pairedDevice.uniqueId",null)===X()){var r={token:Object(G.get)(o,"token",""),deviceName:"web",uniqueId:X(),deviceBrand:"web",override:!1};e(Xe(r))}t(a.data)})).catch((function(e){console.log("auth0setLogin error",e),t(!1)}))}))}}function pt(e){var t=e.id,a=e.email,n=e.name;return function(e){Oe("post","/public/create-new-mix-max-contact",{id:t,email:a,name:n,groupName:"Signed Up Users"})}}function gt(e){return function(t){return new Promise((function(a,n){t((function(e){e({type:"LOADER_SHOW"})})),Oe("post","/auth/sign-up",e).then((function(e){var n=Object(G.get)(e,"data.data");Object(G.get)(e,"data.success",!1)&&(t(function(e){return function(t){t({type:"SIGNUP_SUCCESS",data:e})}}(n)),t(_e(Object(G.get)(n,"user",{}))),t(Ie(Object(G.get)(n,"defaultLocation",{})))),a(e.data)})).catch((function(e){var a=Object(G.get)(e,"response","");t(function(e){return function(t){t({type:"SIGNUP_FAILED",error:e})}}(a)),n(a)})).finally((function(){t((function(e){e({type:"LOADER_HIDE"})}))}))}))}}var ht=a(78);function ft(e){var t=e.locationId,a=e.stationId,n=e.favorites;return function(e){return new Promise((function(o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)&&!t||!a||!n)return o(!1);Oe("post","/api/location/".concat(t,"/toggleFavorite/"),{locationId:t,stationId:a},r).then((function(t){var a,r=Object(G.get)(t,"data.data.station",{}),i=Object(G.get)(t,"data.data.type",{}),s=Object(ht.a)(n);if("remove"===i)for(var c=0;c<s.length;c++)s[c]._id===r&&s.splice(c,1);else s.push(r);e((a=s,function(e){e({type:"SET_FAVORITES",data:a})})),o(!0)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),o(!0)}))}))}}function bt(e){var t=e.locationId,a=e.currentTrack;return function(e,n){return new Promise((function(o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)&&!t||!a)return o(!1);var i=Object(G.get)(n(),"auth.location.explicitAllowed",!1);Oe("post","/api/location/".concat(t,"/toggleExplicit/"),{locationId:t,currentTrack:a},r).then((function(t){console.log("toggleExplicit: ",t);var a=Object(G.get)(t,"data.data.location",{}),n=Object(G.get)(a,"trackSchedule",{}),r=K(Object(G.get)(n,"queue",[]),"isrc"),i=Object(G.get)(a,"explicitAllowed",!1),s=Object(G.get)(a,"lastTrack",null);e(function(e){return function(t){t({type:"SET_EXPLICIT",data:e})}}(i)),e(Ce(r)),e(je(n)),e(De(0)),e(Ne(s)),o(i)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),o(i)}))}))}}function vt(e){return function(t){return new Promise((function(a,n){var o={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(o,"access-token",!1)||!e)return a(!1);Oe("get","/api/location/"+e,null,o).then((function(e){console.log("getStation: ",e),t(Ie(Object(G.get)(e,"data.data",null))),a(e)})).catch((function(e){console.log("getStation err: ",e),n(e)}))}))}}function yt(){return function(e){return new Promise((function(t,a){Oe("get","/public/station").then((function(a){var n=Object(G.get)(a,"data.data",{}),o={eraList:[],genreList:[],moodList:[],tempoList:[],playlistList:[]};Object(G.get)(n,"playlistList",[]).forEach((function(e){e.track.length>0&&o.playlistList.push(e)})),e(function(e){return function(t){t({type:"GET_PUBLIC_STATIONS_FOR_DISCOVER",data:e})}}(o)),t(o)})).catch((function(e){console.log("getDiscoverPulicStations error in action ",e),a(e)}))}))}}function Et(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!e)return t(!1);Object(G.get)(a,"access-token",!1)?Oe("get","/api/station/".concat(e),null,a).then((function(e){t(Object(G.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)})):Oe("get","/public/station/".concat(e),null,a).then((function(e){t(Object(G.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)}))}))}}function Ot(e,t){return function(a){return new Promise((function(n,o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)&&!e||!t)return n(!1);Oe("post","/api/company/".concat(e,"/station/").concat(t),null,r).then((function(e){var t=Object(G.get)(e,"data.data",{}),o=Object(G.get)(t,"trackSchedule",{}),r=K(Object(G.get)(o,"queue",[]),"isrc");a(Ie(t)),a(Ce(r));var i=Object(G.get)(o,"queue[0]",Object(G.get)(t,"currentTrack",{}));a(je(o)),a(Pe(i)),a(De(0)),n(t)})).catch((function(e){console.log("Error :",e),o(e.response)}))}))}}var St=a(909);function kt(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(a,"access-token",!1)||!e)return t(!1);Oe("post","/api/company/"+e+"/createSchedule",null,a).then((function(e){console.log("Create Schedule Res!",e),t(e.data)})).catch((function(e){console.log("createSchedule error",e.response),St.a.error(Object(G.get)(e,"response.message","Could not create schedule!")),t(!1)}))}))}}function jt(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(a,"access-token",!1)||!e)return t(!1);Oe("post","/api/company/"+e+"/getSchedule",null,a).then((function(e){console.log("Get Schedule Res!",e),t(e.data)})).catch((function(e){console.log("getSchedule error",e.response),St.a.error(Object(G.get)(e,"response.message","Could not find schedule!")),t(!1)}))}))}}function wt(e){return function(t){return new Promise((function(a){var n;t((n=e,function(e){e({type:"ACTIVE_SCHEDULE",data:n})})),a(!0)}))}}function Nt(e){var t=e.companyId,a=e.scheduleId,n=e.name,o=e.stations;return function(e){return new Promise((function(r){var i={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(i,"access-token",!1)||!t||!a||!n||!o)return r(!1);Oe("post","/api/company/"+t+"/schedule",{scheduleId:a,name:n,stations:o},i).then((function(t){var a,n=Object(G.get)(t,"data",{});console.log("create playlist res in action ",t),e((a=n,function(e){e({type:"SET_SCHEDULE",data:a})})),r(n)})).catch((function(e){console.log("setSchedule error",e.response),St.a.error(Object(G.get)(e,"response.message","cannot find artist or track")),r(!1)}))}))}}function Ct(e){var t=e.companyId;return function(e){return new Promise((function(a){var n={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(n,"access-token",!1)||!t)return a(!1);Oe("get","/api/company/"+t+"/getSchedules",null,n).then((function(t){console.log("getMyPlaylists res: ",t);var n=Object(G.get)(t,"data.data.schedules",[]);e(Be(n)),a(!0)})).catch((function(e){console.log("getMyPlaylists error",e.response),a(!1)}))}))}}function It(e){var t=e.companyId,a=e.scheduleId;return function(e){return new Promise((function(n,o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a)return n(!1);Oe("post","/api/company/"+t+"/assignSchedule/"+a,{companyId:t,scheduleId:a},r).then((function(t){console.log("assignSchedule: ",t);var a=Object(G.get)(t,"data.data",!1);if(a){var o=Object(G.get)(a,"trackSchedule",{}),r=K(Object(G.get)(o,"queue",[]),"isrc");e(Ie(a)),e(Ce(r));var i=Object(G.get)(o,"queue[0]",Object(G.get)(a,"currentTrack",{}));e(je(o)),e(Pe(i)),e(De(0))}else e(Rt({message:"Schedule is already playing!",type:"info"}));n(!0)})).catch((function(e){console.log("assignSchedule error:",e),n(!1)}))}))}}function Lt(e){var t=e.companyId,a=e.scheduleId;return function(e,n){return new Promise((function(o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a)return o(!1);Oe("post","/api/company/"+t+"/deleteSchedule/"+a,{companyId:t,scheduleId:a},r).then((function(t){console.log("deleteSchedule: ",t);var a=Object(G.get)(t,"data.data._id",null);if(a){for(var r=Object(ht.a)(Object(G.get)(n(),"playlists.schedules",[])),i=0;i<r.length;i++)Object(G.get)(r[i],"_id","")===a&&r.splice(i,1);e(Be(r))}o(!0)})).catch((function(e){console.log("deleteSchedule error:",e),o(!1)}))}))}}function Pt(e){var t=e.companyId,a=e.locationId;return function(e){return new Promise((function(n){var o={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(o,"access-token",!1)||!t||!a)return n(!1);Oe("post","/api/listMessages",{companyId:t,locationId:a},o).then((function(t){var a;console.log("getMessages res",t),e((a=Object(G.get)(t,"data.data",[]),function(e){e({type:"SET_INSTORE_MESSAGES",data:a})})),n(!0)})).catch((function(e){console.log("getMessages error",e),n(!1)}))}))}}function Tt(e){var t=e.voice,a=e.language,n=e.message,o=e.speed,r=e.hash;return function(e){return new Promise((function(e,i){var s={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(s,"access-token",!1)||!r)return e(!1);Oe("post","/api/createPreviewMessage",{voice:t,language:a,message:n,speed:o,hash:r},s).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(t){console.log("createPreviewMessage error: ",t),e(!1)}))}))}}function Mt(e){var t=e.companyId,a=e.locationId,n=e.title,o=e.voice,r=e.language,i=e.message,s=e.speed,c=e.frequency,l=e.savedPreviews,u=e.hash;return function(e){return new Promise((function(e){var m={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(m,"access-token",!1)||!n||!i)return e(!1);Oe("post","/api/createMessage",{companyId:t,locationId:a,title:n,voice:o,language:r,message:i,speed:s,frequency:c,savedPreviews:l,hash:u},m).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(t){console.log("createMessage error: ",t),e(!1)}))}))}}function At(e){var t=e.companyId,a=e.locationId,n=e.messageId,o=e.title,r=e.voice,i=e.language,s=e.message,c=e.speed,l=e.frequency,u=e.savedPreviews,m=e.hash;return function(e){return new Promise((function(e){var d={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(d,"access-token",!1)||!o||!s)return e(!1);Oe("post","/api/editMessage",{companyId:t,locationId:a,messageId:n,title:o,voice:r,language:i,message:s,speed:c,frequency:l,savedPreviews:u,hash:m},d).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(t){console.log("editMessage error: ",t),e(!1)}))}))}}function xt(e){var t=e.companyId,a=e.locationId,n=e.id;return function(e){return new Promise((function(e){var o={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(o,"access-token",!1)||!t||!a||!n)return e(!1);Oe("post","/api/deleteMessagingFile",{companyId:t,locationId:a,id:n},o).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(t){console.log("deleteMessage error: ",t),e(!1)}))}))}}function Dt(e){var t=e.companyId,a=e.locationId,n=e.id,o=e.frequency;return function(e){return new Promise((function(e){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a||!n||!o)return e(!1);Oe("post","/api/changeMessagingFileFrequency",{companyId:t,locationId:a,id:n,frequency:o},r).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(t){console.log("updateFrequency error: ",t),e(!1)}))}))}}function _t(){return function(e){return new Promise((function(e){var t={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(t,"access-token",!1))return e(!1);Oe("get","/public/listVoices",null,t).then((function(t){e(Object(G.get)(t,"data.data",[]))})).catch((function(t){console.log("getVoiceData error: ",t),e(!1)}))}))}}function Bt(){return function(e){e((function(e){Re.on("connect",(function(){console.log("Socket Connected")}))})),e((function(e){Re.on(Ve,(function(){console.log("Socket Disconnected"),e(Rt({message:"Connection Lost",type:"warn"}))}))})),e((function(e){Re.on(qe,(function(){console.log("Socket Reconnected"),e(Rt({message:"Reconnected",type:"success"}))}))}))}}function Ft(e){return function(t){t(function(e){return function(t){t({type:"SET_SNACKBAR_NOTIFICATION",data:e})}}(e))}}function Rt(e){return function(t){t(function(e){return function(t){t({type:"SET_SNACKBAR_MESSAGE",data:e})}}(e))}}var Ut=a(910),Vt=a(16),qt=o.a.createElement(Vt.a,{type:"loading",style:{fontSize:24,color:"#D04283"},spin:!0}),zt=a(84),Ht=(a(531),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(le.a)(a,[{key:"render",value:function(){return this.props.auth0.isAuthenticated&&this.props.auth.user&&this.props.history.push("/nowPlaying"),o.a.createElement("div",{style:{width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(Ut.a,{indicator:qt,spinning:!0}))}}]),a}(n.Component));var Wt=Object(de.b)((function(e){return{auth:e.auth}}),(function(e){return{actions:Object(s.b)({},e)}}))(Object(be.f)(Object(zt.a)(Ht))),Gt=a(395),Kt=a(917),Yt=(a(226),Kt.a.Item),Jt=window.google,Zt=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).getLocation=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation;case 2:e.sent.getCurrentPosition((function(e){e.coords?n.setState({myLocation:{lng:e.coords.longitude,lat:e.coords.latitude}}):St.a.info("location permission not granted")}));case 4:case"end":return e.stop()}}),e)}))),n.onSuggestSelect=function(){var e=Object(he.a)(ge.a.mark((function e(t){var a,o,r,i,s,c,l,m,d,p;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.gmaps&&(t.gmaps.address_components.forEach((function(e){var t=e.types;t.indexOf("locality")>-1&&(r=e.long_name),(t.indexOf("sublocality_level_1")>-1||t.indexOf("route")>-1||t.indexOf("administrative_area_level_2")>-1)&&(a=e.long_name),t.indexOf("sublocality_level_2")>-1&&(o=e.long_name),t.indexOf("administrative_area_level_1")>-1&&(i=e.long_name),t.indexOf("postal_code")>-1&&(s=e.long_name),(t.indexOf("country")>-1||t.indexOf("political")>-1)&&(c=e.long_name)})),l=Intl.DateTimeFormat().resolvedOptions().timeZone,m=Object(G.get)(t,"location.lng",""),d=Object(G.get)(t,"location.lat",""),p=Object(u.a)(Object(u.a)({},n.props.userData),{},{name:Object(G.get)(t,"gmaps.name",t.label),addressLineOne:a,addressLineTwo:o,city:r,state:i,postalCode:s,country:c,timezone:l,cords:[m,d],companySearch:!0}),n.setState({userData:p},(function(){Object(G.get)(n.state,"userData.addressLineOne",!1)&&Object(G.get)(n.state,"userData.postalCode",!1)&&Object(G.get)(n.state,"userData.city",!1)&&Object(G.get)(n.state,"userData.state",!1)&&Object(G.get)(n.state,"userData.timezone",!1)?n.props.onSumbit(p):(p.missingData=!0,n.setState({userData:p},(function(){St.a.error("Some required data is missing. Please fill out the below fields.",5),n.props.onSumbit(p)})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={address:"",userData:{name:"",addressLineOne:"",addressLineTwo:"",city:"",state:"",postalCode:"",cords:[]},myLocation:{lng:0,lat:0}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.myLocation;return o.a.createElement(Kt.a,{className:"auto-complete-form"},o.a.createElement(Yt,{className:"form-item"},t("userData",{rules:[{required:!0,message:"Please input Company name or address."}]})(o.a.createElement(Gt.a,{ref:function(t){return e._geoSuggest=t},onChange:function(e){return console.log(e)},placeholder:"Ambii Inc. 123 Main St",onSuggestSelect:this.onSuggestSelect,location:new Jt.maps.LatLng(a.lat,a.lng),radius:20,country:"us"}))))}}]),a}(n.Component);var Qt=Kt.a.create()(Zt),Xt=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(s.b)({},e)}}))(Qt)),$t=a(417),ea=a(921),ta=a(67),aa=Kt.a.Item,na=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){console.log(e),n.props.form.validateFieldsAndScroll((function(e,t){console.log("vals: ",t);var a=n.checkIfValidTimezone(Object(G.get)(t,"timezone",""));!e&&a?n.setState({isLoading:!0},(function(){var e=Object(u.a)(Object(u.a)(Object(u.a)({},n.props.userData),n.state.userData),{},{name:Object(G.get)(t,"name","").toString(),addressLineOne:Object(G.get)(t,"addressLineOne","").toString(),addressLineTwo:Object(G.get)(t,"addressLineTwo","").toString(),city:Object(G.get)(t,"city","").toString(),state:Object(G.get)(t,"state","").toString(),postalCode:Object(G.get)(t,"postalCode","").toString(),country:Object(G.get)(t,"country","United States").toString(),cords:Object(G.get)(t,"cords",[]),timezone:Object(G.get)(t,"timezone",Intl.DateTimeFormat().resolvedOptions().timeZone)});n.props.onSumbit(e)})):a?e?St.a.error("One or more fields has an error"):St.a.error("An error occurred"):St.a.error("Invalid timezone selection")}))},n.onSearch=function(e){var t=Object.keys(V),a=t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}));n.setState({selectedTimezone:e,timezoneRes:e.length<=0?t:a})},n.onSelect=function(e){n.setState({selectedTimezone:e})},n.state={address:"",dropdownError:!1,selectedTimezone:"",timezoneData:{},timezones:[],timezoneRes:[],userData:{name:Object(G.get)(n.props,"userData.name",""),addressLineOne:Object(G.get)(n.props,"userData.addressLineOne",""),addressLineTwo:Object(G.get)(n.props,"userData.addressLineTwo",""),city:Object(G.get)(n.props,"userData.city",""),country:Object(G.get)(n.props,"userData.country","United States"),state:Object(G.get)(n.props,"userData.state",""),cords:Object(G.get)(n.props,"userData.cords",[]),postalCode:Object(G.get)(n.props,"userData.postalCode",""),timezone:Object(G.get)(n.props,"userData.timezone","")}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=[];Object.keys(V).forEach((function(t){e.push(t)}));var t=Intl.DateTimeFormat().resolvedOptions().timeZone;this.setState({timezoneRes:e,selectedTimezone:t})}},{key:"checkIfValidTimezone",value:function(e){return!!e&&!!V[e]}},{key:"render",value:function(){var e=this,t=this.state,a=t.timezoneRes,n=t.selectedTimezone,r=this.props.form.getFieldDecorator;return o.a.createElement(Kt.a,{hideRequiredMark:!0,onSubmit:this.onSubmit},o.a.createElement("p",{style:{float:"right"}},"* Indicates a required field "),o.a.createElement(aa,{className:"form-item"},r("name",{rules:[{required:!0,message:"Please input your company name"}],initialValue:this.state.userData.name})(o.a.createElement($t.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Company Name"}))),o.a.createElement(aa,{className:"form-item"},r("addressLineOne",{rules:[{required:!0,message:"Please input your Address"}],initialValue:this.state.userData.addressLineOne})(o.a.createElement($t.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Address Line 1"}))),o.a.createElement(aa,{className:"form-item"},r("addressLineTwo",{initialValue:this.state.userData.addressLineTwo})(o.a.createElement($t.a,{onPressEnter:function(){e.onSubmit()},placeholder:"Enter Address Line 2"}))),o.a.createElement(aa,{className:"form-item"},r("city",{rules:[{required:!0,message:"Please input City"}],initialValue:this.state.userData.city})(o.a.createElement($t.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter City"}))),o.a.createElement(aa,{className:"form-item"},r("state",{rules:[{required:!0,message:"Please input your state"}],initialValue:this.state.userData.state})(o.a.createElement($t.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter State"}))),o.a.createElement(aa,{className:"form-item"},r("postalCode",{rules:[{required:!0,message:"Please input your Postal Code"}],initialValue:this.state.userData.postalCode})(o.a.createElement($t.a,{type:"number",onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Postal Code"}))),o.a.createElement(aa,{className:"form-item"},r("timezone",{rules:[{required:!0,message:"Please input your location's timezone"}],initialValue:n})(o.a.createElement(ea.a,{placeholder:"* Enter Location Timezone",dataSource:a,style:{width:"100%"},onSelect:function(t){return e.onSelect(t)},onSearch:function(t){return e.onSearch(t)}}))),o.a.createElement(ta.a,{style:{float:"right"},type:"primary",onClick:function(){return e.onSubmit()}},"Confirm Address"))}}]),a}(n.Component);var oa=Kt.a.create()(na),ra=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(s.b)({},e)}}))(oa)),ia=a(274),sa=a(278),ca=a(922),la=a(5),ua=(a(322),a(631),ia.a.Option),ma=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){var t=n.state,a=t.countryCode,o=t.businessType;e.preventDefault();var r=o.toLowerCase()!=="Select Business Type".toLowerCase(),i=Object(G.get)(n.props,"userData.userType","company");n.props.form.validateFieldsAndScroll((function(e,t){if(Object.keys(e||[]).length<=0&&("company"!==i||r)){var s,c,l=Object(u.a)(Object(u.a)({},n.props.userData),{},{firstName:null!==(s=t.firstName)&&void 0!==s?s:"",lastName:null!==(c=t.lastName)&&void 0!==c?c:"",phoneNumber:a.concat(n.parsePhoneNumber(Object(G.get)(t,"phone","234567890"))),businessType:"individual"===i?"other":o});"individual"===i&&(Object(G.get)(n.props,"userData.name",null)||(l.name="Individual"),Object(G.get)(n.props,"userData.addressLineOne",null)||(l.addressLineOne=""),Object(G.get)(n.props,"userData.addressLineTwo",null)||(l.addressLineTwo=""),Object(G.get)(n.props,"userData.city",null)||(l.city=""),Object(G.get)(n.props,"userData.state",null)||(l.state=""),Object(G.get)(n.props,"userData.postalCode",null)||(l.postalCode=""),Object(G.get)(n.props,"userData.timezone",null)||(l.timezone=""),Object(G.get)(n.props,"userData.cords",null)||(l.cords=[])),n.props.onSumbit(l)}else r||n.setState({dropdownError:!0})}))},n.state={businessType:"Select Business Type",dropdownError:!1,countryCode:"1"},n}return Object(le.a)(a,[{key:"menu",value:function(){var e=this;return o.a.createElement(sa.a,{onClick:function(t){return e.handleMenuClick(t)},id:"company-info-dropdown-menu"},o.a.createElement(sa.a.Item,{key:"bar"},"Bar"),o.a.createElement(sa.a.Item,{key:"cafe"},"Cafe"),o.a.createElement(sa.a.Item,{key:"gym"},"Gym"),o.a.createElement(sa.a.Item,{key:"hotel"},"Hotel"),o.a.createElement(sa.a.Item,{key:"other"},"Other"),o.a.createElement(sa.a.Item,{key:"restaurant"},"Restaurant"),o.a.createElement(sa.a.Item,{key:"salon"},"Salon"),o.a.createElement(sa.a.Item,{key:"school"},"School"),o.a.createElement(sa.a.Item,{key:"spa"},"Spa"),o.a.createElement(sa.a.Item,{key:"shop"},"Shop"))}},{key:"handleMenuClick",value:function(e){this.setState({businessType:e.key,dropdownError:!1})}},{key:"parsePhoneNumber",value:function(e){return e.replace(/\D/g,"")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.businessType,r=a.dropdownError,i=t("prefix",{initialValue:a.countryCode})(o.a.createElement(ia.a,{style:{width:70,borderRight:"1px solid #d9d9d9"}},o.a.createElement(ua,{value:"1"},"+1")));return o.a.createElement(Kt.a,{hideRequiredMark:!0,onSubmit:this.onSubmit,className:"company-info-form"},"company"===Object(G.get)(this.props,"userData.userType","company")&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Kt.a.Item,{className:"form-item no-margin",label:"First Name:"},t("firstName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your first name!"}]})(o.a.createElement($t.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter First Name"}))),o.a.createElement(Kt.a.Item,{className:"form-item no-margin",label:"Last Name:"},t("lastName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your last name!"}]})(o.a.createElement($t.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter Last Name"}))),o.a.createElement(Kt.a.Item,{label:"Phone"},t("phone",{rules:[{required:!0,message:"Please input your phone number!",min:10,pattern:/^[0-9 ()-]*$/}]})(o.a.createElement($t.a,{addonBefore:i,placeholder:"Phone Number"}))),o.a.createElement(Kt.a.Item,{label:"Type"},o.a.createElement(ca.a,{overlay:this.menu(),trigger:["click"],className:r?"button-error":""},o.a.createElement(ta.a,{style:{textTransform:"capitalize"}},n," ",o.a.createElement(la.a,{icon:R.a,style:{marginLeft:"5px"}}))))),o.a.createElement(ta.a,{style:{float:"right"},type:"primary",onClick:function(t){return e.onSubmit(t)}},"Continue"))}}]),a}(n.Component);var da=Kt.a.create()(ma),pa=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(s.b)({},e)}}))(da)),ga=a(920),ha=a(154),fa=function(e){var t=e.category,a=e.action,n=e.value,o=e.label;ha.a.event({category:t,action:a,value:n?parseInt(n):null,label:o})},ba=function(){ha.a.pageview(window.location.pathname+window.location.search)},va=function(e){ha.a.modalview(e)},ya=ga.a.Step,Ea=[{key:"Company"},{key:"Contact Info"}],Oa=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).next=function(e){if(e){var t=Object(G.get)(e,"missingData",!1);t&&delete e.missingData,n.setState({current:t?n.state.current:n.state.current+1,userData:e,steps:Ea,companySearch:!t&&n.state.companySearch})}n.state.current===n.state.steps.length-1&&n.signUpSubmit(e)},n.signUpSubmit=function(e){n.setState({isLoading:!0},(function(){e?(delete e.missingData,delete e.companySearch,n.props.actions.signUp(e).then((function(t){n.props.actions.mixMaxRegister({id:Object(G.get)(t,"data.user._id",""),email:Object(G.get)(e,"email",""),name:Object(G.get)(e,"firstName","Ambii")+" "+Object(G.get)(e,"lastName","User")}),n.setState({isLoading:!1}),t.success&&(fa({category:m,action:f,value:Object(G.get)(e,"email","")}),n.props.history.push("/"))})).catch((function(e){fa({category:m,action:f,value:e,label:A}),n.setState({isLoading:!1,current:0}),St.a.error(Object(G.get)(e,"userData.message","Something went wrong. Please try again"))}))):(n.setState({isLoading:!1}),St.a.error("Fields are missing"))}))},n.prev=function(){n.setState({current:n.state.current-1})},n.state={isLoading:!1,current:0,companySearch:!0,steps:Ea,userData:{}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){ba()}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.steps,r=t.userData,i=t.isLoading,s=t.companySearch;return o.a.createElement(Ut.a,{indicator:qt,spinning:i},o.a.createElement("div",{className:"signup-modal-subtitle"},"Let's set up your first location!"),o.a.createElement("div",{className:"signUp-container"},a>=0&&o.a.createElement(ga.a,{className:"steps",progressDot:!0,current:a,style:{textAlign:"justify"}},n.map((function(e){return o.a.createElement(ya,{key:e.key,title:e.key})}))),{0:s?o.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter business name or address"):null,1:o.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter your contact information")}[a],o.a.createElement("div",{className:"form_container"},{0:s?o.a.createElement(Xt,{onSumbit:this.next,userData:r}):o.a.createElement(ra,{onSumbit:this.next,userData:r}),1:o.a.createElement(pa,{onSumbit:this.next,userData:r})}[a],o.a.createElement("div",{className:"button_row",style:{float:"right"}},!i&&a>0&&o.a.createElement(ta.a,{onClick:function(){return e.prev()},style:{marginRight:"10px"}},"Previous"),s&&0===a?o.a.createElement(ta.a,{onClick:function(){return e.setState({companySearch:!1})}},"Manually Enter Company"):null,s||0!==a?null:o.a.createElement(ta.a,{onClick:function(){return e.setState({companySearch:!0})},style:{marginRight:"10px"}},"Search Company")))))}}]),a}(n.Component);var Sa=Kt.a.create()(Oa),ka=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(s.b)({signUp:gt,mixMaxRegister:pt},e)}}))(Sa)),ja=(a(632),Kt.a.Item),wa=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e))._onLogin=function(){n.props.form.validateFieldsAndScroll((function(e,t){e?St.a.error("Fields Required"):n.setState({isLoading:!0},(function(){t.email,t.password}))}))},n.state={isLoading:!1,isLogin:!1,userData:{email:"",password:""}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){ba(),localStorage.getItem("access-token")&&this.props.history.push("/nowPlaying")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return o.a.createElement(Ut.a,{indicator:qt,spinning:this.state.isLoading},o.a.createElement("div",{className:"form-container"},o.a.createElement(Kt.a,{className:"form-wrapper",hideRequiredMark:!0,onSubmit:this._onLogin},o.a.createElement(ja,{className:"form-item no-margin"},t("email",{rules:[{type:"email",message:"The input is not a valid Email!"},{required:!0,message:"Please input your Email!"}]})(o.a.createElement($t.a,{onPressEnter:function(){e._onLogin()},placeholder:"Email"}))),o.a.createElement(ja,{className:"form-item"},t("password",{rules:[{required:!0,message:"Please input your password!"}]})(o.a.createElement($t.a.Password,{onPressEnter:function(){e._onLogin()},placeholder:"Password"}))),o.a.createElement(ta.a,{className:"login-btn",block:!0,type:"primary",onClick:function(){return e.props.auth0.loginWithRedirect()}},"Login"))))}}]),a}(n.Component);var Na=Kt.a.create()(wa),Ca=(Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(s.b)({},e)}}))(Object(zt.a)(Na))),a(633),function(e){var t=e.token,a=e.fontSize;return o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},t?t.split("").map((function(e,t){return o.a.createElement("div",{key:t,className:"token-character"},o.a.createElement("p",{style:{fontWeight:"bold",color:"#2A2A2A",fontSize:a||"28px",margin:"0"}},e))})):null)}),Ia=a(918),La=a(912),Pa=a(38),Ta=a(17),Ma=a(407);function Aa(){return(Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function xa(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var Da=o.a.createElement("style",null,".st0{fill:url(#SVGID_1_)}.st1{fill:url(#SVGID_2_)}.st2{fill:url(#SVGID_3_)}.st3{fill:url(#SVGID_4_)}"),_a=o.a.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",y1:112.094,x2:261.746,y2:112.094},o.a.createElement("stop",{offset:0,stopColor:"#63be6b"}),o.a.createElement("stop",{offset:.506,stopColor:"#5bbc6a"}),o.a.createElement("stop",{offset:1,stopColor:"#4ab96a"})),Ba=o.a.createElement("path",{className:"st0",d:"M261.7 142.3L15 1.3C11.9-.5 8-.4 5 1.4c-3.1 1.8-5 5-5 8.6 0 0 .1 13 .2 34.4l179.7 179.7 81.8-81.8z"}),Fa=o.a.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:.152,y1:223.393,x2:179.896,y2:223.393},o.a.createElement("stop",{offset:0,stopColor:"#3ec6f2"}),o.a.createElement("stop",{offset:1,stopColor:"#45afe3"})),Ra=o.a.createElement("path",{className:"st1",d:"M.2 44.4C.5 121.6 1.4 309 1.8 402.3L180 224.1.2 44.4z"}),Ua=o.a.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:179.896,y1:229.464,x2:407.976,y2:229.464},o.a.createElement("stop",{offset:0,stopColor:"#faa51a"}),o.a.createElement("stop",{offset:.387,stopColor:"#fab716"}),o.a.createElement("stop",{offset:.741,stopColor:"#fac412"}),o.a.createElement("stop",{offset:1,stopColor:"#fac80f"})),Va=o.a.createElement("path",{className:"st2",d:"M402.9 223l-141.2-80.7-81.9 81.8 92.4 92.4L403 240.3c3.1-1.8 5-5.1 5-8.6 0-3.6-2-6.9-5.1-8.7z"}),qa=o.a.createElement("linearGradient",{id:"SVGID_4_",gradientUnits:"userSpaceOnUse",x1:1.744,y1:345.521,x2:272.296,y2:345.521},o.a.createElement("stop",{offset:0,stopColor:"#ec3b50"}),o.a.createElement("stop",{offset:1,stopColor:"#e7515b"})),za=o.a.createElement("path",{className:"st3",d:"M1.7 402.3c.2 33.3.3 54.6.3 54.6 0 3.6 1.9 6.9 5 8.6 3.1 1.8 6.9 1.8 10 0l255.3-148.9-92.4-92.4L1.7 402.3z"}),Ha=function(e){var t=e.svgRef,a=e.title,n=xa(e,["svgRef","title"]);return o.a.createElement("svg",Aa({id:"Layer_1",viewBox:"0 0 408 466.9",width:2185,height:2500,ref:t},n),a?o.a.createElement("title",null,a):null,Da,_a,Ba,Fa,Ra,Ua,Va,qa,za)},Wa=o.a.forwardRef((function(e,t){return o.a.createElement(Ha,Aa({svgRef:t},e))})),Ga=(a.p,a(403)),Ka=a.n(Ga),Ya=a(404),Ja=a.n(Ya),Za=a(911),Qa=a(265),Xa=a.n(Qa),$a=function(){function e(){Object(ce.a)(this,e)}return Object(le.a)(e,null,[{key:"initialize",value:function(){window.lock=new Xa.a("U6LfUnEpkLYrtnZ2u3IAuSDlraBebeGP","auth.ambii.io",{configurationBaseUrl:"https://ambii.us.auth0.com",autoclose:!0,autofocus:!0,closable:!0,allowShowPassword:!0,auth:{redirectUrl:window.location.origin,responseType:"id_token",sso:!0},theme:{logo:"".concat(window.location.origin,"/icon.png"),primaryColor:"#d04283"},languageDictionary:{title:"",signUpTitle:"",forgotPasswordTitle:""},additionalSignUpFields:[]})}},{key:"getLock",value:function(){return window.lock}},{key:"isLoggedIn",value:function(){return localStorage.getItem("access-token")}},{key:"login",value:function(){window.lock.show()}},{key:"signUp",value:function(){window.lock.show({initialScreen:"signUp"})}},{key:"logout",value:function(){localStorage.removeItem("access-token"),localStorage.removeItem("location-jwt"),window.lock.logout()}}]),e}(),en=function(){function e(){Object(ce.a)(this,e)}return Object(le.a)(e,null,[{key:"inApp",value:function(){return window.inApp}},{key:"send",value:function(e,t){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({data:t,endpoint:e}))}}]),e}(),tn=Za.a.Content,an=null,nn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).assignStation=function(){var e=n.props,t=e.location,a=e.close,o=e.history,r=e.actions,i=e.user,s=e.inApp,c=n.state.station;$a.isLoggedIn()?n.setState({startStationDisabled:!0},(function(){var e=Object(G.get)(i,"company._id","");r.assignStation(e,c._id).then((function(){n.setState({startStationDisabled:!1},(function(){if(fa({category:d,action:r.startStation,value:Object(G.get)(c,"_id","Error")}),s){var e=Object(G.get)(n.props,"myLocation",null),i=Object(G.get)(n.props,"myLocation.trackSchedule.queue",null);a(),e&&i?en.send("newStation",{location:e,trackSchedule:i}):en.send("newStation",null)}Object(G.get)(t,"pathname","").toLowerCase().includes("nowplaying")?a():s?o.push("/discover"):o.push("/nowPlaying",{isBack:!0})}))}))})):$a.signUp()},n.favoriteStation=function(){$a.isLoggedIn()?n.setState({favoriteDisabled:!0},(function(){var e=Object(G.get)(n.props,"myLocation._id",""),t=Object(G.get)(n.state,"station._id",""),a=Object(G.get)(n.props,"myLocation.favorites",[]);n.props.actions.toggleFavorite({locationId:e,stationId:t,favorites:a}).then((function(){fa({category:h,action:P,value:t}),n.setState({favoriteDisabled:!1})}))})):$a.signUp()},n.state={isLoading:!0,station:{},isBackgroundImage:!1,explicit:!1,startStationDisabled:!1,favoriteDisabled:!1,isMobile:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.checkForMobile(),document.body.scrollTop=document.documentElement.scrollTop=0,an=window.addEventListener("resize",(function(){e.checkForMobile()})),this.setStationDetails()}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",an),an=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"playlistId",null),Object(G.get)(e,"playlistId",null))||this.setStationDetails()}},{key:"setStationDetails",value:function(){var e=Object(he.a)(ge.a.mark((function e(){var t=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0},Object(he.a)(ge.a.mark((function e(){var a,n,o;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Object(G.get)(t.props,"match.params.id",null)||Object(G.get)(t.props,"playlistId",null))){e.next=9;break}return e.next=4,t.props.actions.getStationDetails(a);case 4:n=e.sent,o=Object(G.get)(n,"explicit",!1),t.setState({isLoading:!1,explicit:o,station:n}),e.next=10;break;case 9:t.setState({isLoading:!1});case 10:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForMobile",value:function(){var e=this,t=this.state.isBackgroundImage;this.setState({isMobile:J()},(function(){e.state.isMobile&&!t&&e.setStationBackgroundImage(),!e.state.isMobile&&t&&e.removeStationBackgroundImage()}))}},{key:"setStationBackgroundImage",value:function(){var e=this,t=this.state.station,a=setInterval((function(){var n=document.getElementById("station-header");n&&(n.style.backgroundImage="url('"+t.cover+"')",t.cover&&e.setState({isBackgroundImage:!0}),clearInterval(a))}),100)}},{key:"removeStationBackgroundImage",value:function(){var e=this,t=setInterval((function(){var a=document.getElementById("station-header");a&&(a.style.backgroundImage=null,e.setState({isBackgroundImage:!1}),clearInterval(t))}),100)}},{key:"checkIfFavorited",value:function(e){return!!Object(G.get)(this.props,"myLocation.favoritesMap",[])[e]}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.station,n=(e.explicit,e.startStationDisabled),r=e.favoriteDisabled,i=(e.isMobile,e.source,Object(G.get)(a,"_id","")),s=Object(G.get)(a,"track",[]),c=this.checkIfFavorited(i),l=!Object(G.get)(this.props,"myLocation.schedule._id","")&&Object(G.get)(this.props,"myLocation.station._id","")===i;return o.a.createElement(Za.a,{className:"create-layout"},o.a.createElement(tn,{className:"create-body"},o.a.createElement(Ut.a,{indicator:qt,spinning:t},o.a.createElement("div",{id:"station-header",className:"cover-content-wrapper",style:{backgroundColor:void 0!==a.hex?a.hex:"#aa4e9f"}},o.a.createElement("div",{className:"headerLeft"},o.a.createElement("div",{className:"station-head-wrapper"},o.a.createElement("h1",{className:"cover-heading"},a.name)),o.a.createElement("div",{className:"cover-btn-div"},o.a.createElement(ta.a,{size:"large",loading:n,className:"cover-btn".concat(l?" disabledButton":""),disabled:l||n,onClick:this.assignStation},l?null:o.a.createElement(la.a,{icon:R.b,className:"cover-icon"}),o.a.createElement("div",null," ",l?"Now Playing":"Start"," ")),o.a.createElement(ta.a,{size:"large",loading:r,className:"cover-btn",disabled:r,onClick:this.favoriteStation},o.a.createElement(la.a,{icon:Ta.j,className:"cover-icon".concat(c?" favorited":"")}),o.a.createElement("div",null," ",c?"Favorited":"Favorite"," "))),o.a.createElement("div",{className:"description"},a.description)),o.a.createElement("div",{className:"headerRight"},o.a.createElement("img",{src:!a.cover&&a.name?Y(a.name):a.cover,className:"stationImage",alt:""}))),o.a.createElement("div",{className:"station-table-wrapper"},o.a.createElement("div",{className:"station-table-item station-table-header"},o.a.createElement("div",{className:"station-table-track title"},o.a.createElement("h1",null,"Track")),o.a.createElement("div",{className:"station-table-artist title"},o.a.createElement("h1",null,"Artist/Album"))),s.map((function(e,t){return o.a.createElement("div",{className:"station-table-item",key:e._id,style:{opacity:t>.5*s.length?(s.length+1-t)/s.length:1}},o.a.createElement("div",{className:"station-table-track"},e.title),o.a.createElement("div",{className:"station-table-artist"},e.artist[0],", ",e.album))}))))))}}]),a}(n.Component);var on=Object(de.b)((function(e){return{auth:e.auth,user:e.auth.user,stations:e.stations.data,count:e.stations.count,myLocation:e.auth.location,inApp:e.auth.inApp}}),(function(e){return{actions:Object(s.b)({getStationDetails:Et,assignStation:Ot,toggleFavorite:ft},e)}}))(Object(be.f)(nn)),rn=(a(827),function(e){var t=e.animate,a=e.speed,n=e.value,r=e.display,i=e.hideText,s=e.style;return o.a.createElement("div",{className:"bpm-container".concat("column"===r?" column":" row"),style:s},o.a.createElement("div",{className:"beat-container",style:{animation:t?"bpm ".concat(a,"s linear infinite"):"none"}}),!i&&n&&o.a.createElement("div",{className:"bpm-text"},"".concat(parseInt(n).toFixed(0)," BPM")))}),sn=a(48),cn=(a(828),function(e){var t=e.title,a=e.subtitle,n=e.style,r=e.backArrow,i=e.backArrowPress;return o.a.createElement("div",{className:"title-container",style:n},r&&o.a.createElement("div",{className:"backArrow",onClick:i},o.a.createElement(la.a,{icon:sn.a})),o.a.createElement("div",{className:"flexCol"},o.a.createElement("div",{className:"create-list-view-title"}," ",t," "),o.a.createElement("div",{className:"create-list-view-subtitle"}," ",a," ")))}),ln=(a(829),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(le.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content,n=e.icon,r=e.style,i=Array.isArray(a);return o.a.createElement("div",{className:"dashboard-module",style:r},o.a.createElement("div",{className:"dashboard-header"},o.a.createElement("div",{className:"dashboard-icon"},n&&o.a.createElement(la.a,{icon:n,style:{fontSize:"24px"}})),o.a.createElement("div",{className:"dashboard-title"},t),o.a.createElement("div",{className:"dashboard-icon"})),o.a.createElement("div",{className:"dashboard-content"},i?o.a.Children.map(a,(function(e){return o.a.cloneElement(e)})):a))}}]),a}(n.Component)),un=(a(382),null),mn=null,dn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).checkPlayerState=function(){var e=n.props,t=e.myLocation,a=e.player,o=Object(G.get)(t,"pairedDevice.deviceBrand",""),r=o&&Object(G.get)(n.state,"playerInfo.uniqueId","")===Object(G.get)(t,"pairedDevice.uniqueId",""),i=Object(u.a)({},n.state.playerInfo);i.token=Object(G.get)(t,"token",""),n.setState({playerInfo:i,isLoading:!Object(G.get)(t,"station",null),explicitAllowed:Object(G.get)(t,"explicitAllowed",!1),controllerStyle:!!o&&(r?"WEB":r?"MOBILE":"OTHER")},(function(){Object(G.get)(a,"showPlayer",null)?(n.getSongTime(),Object(G.get)(a,"isPlaying",null)&&(clearInterval(mn),mn=setInterval((function(){n.getSongTime()}),100))):clearInterval(mn)}))},n.scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),va("Playlist Modal"),fa({category:p,action:b,value:e,label:M})},n.afterCreateStaion=function(){n.setState({showStationSearch:!1})},n.toggleStationSearch=function(){var e=!n.state.showStationSearch;n.setState({showStationSearch:e}),e&&setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100)},n.parseLocationName=function(e){if(e)return e.split(",")[0]},n.connectPress=function(){n.setState({showAppModal:!0}),va("Connect Modal"),fa({category:p,action:k,label:M})},n.loadPlayer=function(e){var t=e.override,a=Object(u.a)(Object(u.a)({},n.state.playerInfo),{},{override:t});n.setState({loadingPlayer:!0},(function(){n.props.actions.connectPlayer(a).then((function(){n.setState({showConnectModal:!1,loadingPlayer:!1})}))}))},n.changeStationPress=function(){fa({category:p,action:L,value:"Back",label:M}),n.props.history.push("/discover")},n.playStation=function(){n.state.playButtonDisabled||n.setState({playButtonDisabled:!0},(function(){n.props.actions.connectPlayer(n.state.playerInfo).then((function(e){n.setState({playButtonDisabled:!1},(function(){"DEVICE_ALREADY_PAIRED"===e&&(va("Device Already Connected Modal"),n.setState({showConnectModal:!0})),fa({category:p,action:O,label:M})}))})).catch((function(e){n.setState({playButtonDisabled:!1}),console.log("caught err: ",e)}))}))},n.toggleExplicit=function(){n.setState({loadingExplicit:!0},(function(){n.props.actions.toggleExplicit({locationId:Object(G.get)(n.props,"myLocation._id",""),currentTrack:Object(G.get)(n.props,"currentTrack",null)}).then((function(e){n.setState({loadingExplicit:!1,explicitAllowed:e})}))}))},n.state={isMobile:J(),isLoading:!1,loadingPlayer:!1,artistName:"",searchText:void 0,isFixHeader:!1,pageHeight:0,showStationSearch:!1,showAppModal:!1,showConnectModal:!1,showErrorModal:!1,playlistModalId:!1,playButtonDisabled:!1,userName:"",errorTitle:"",errorMessage:"",errorIcon:"",errorButton:"",playerInfo:{token:Object(G.get)(n.props,"myLocation.token",""),deviceName:"web",uniqueId:X(),deviceBrand:"web",override:!1},loadingExplicit:!1,explicitAllowed:!1,currentSongTime:"0:00",currentSongDuration:"0:00",controllerStyle:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.myLocation,n=t.user,o=t.actions,r=t.inApp;ba(),r&&en.send("player","player/"+Object(G.get)(a,"token","")),this.checkPlayerState(),this.setState({isMobile:J(),userName:this.createUserName()},(function(){e.state.isMobile&&fa({category:p,action:o.viewedMobile})})),Object(G.get)(n,"_id",null)&&(Re.emit(Ue,{userId:n._id}),o.addPlayerListeners(),o.updateStationListener(),o.updateCurrentTrackListener())}},{key:"componentWillUnmount",value:function(){try{this.props.actions.removePlayerListeners(),this.props.actions.removeStationListener(),clearInterval(mn),clearTimeout(un)}catch(e){console.log("caught error when unmounting 'nowPlaying' page: ",e)}}},{key:"componentDidUpdate",value:function(e){var t=this;if(!Object(G.isEqual)(Object(G.get)(this.props,"myLocation",null),Object(G.get)(e,"myLocation",null))&&Object(G.get)(this.props,"myLocation",null)&&(Object(G.get)(this.props,"myLocation.station",null)||this.props.history.push("/discover"),this.checkPlayerState()),!Object(G.isEqual)(Object(G.get)(this.props,"player.playerError",null),Object(G.get)(e,"player.playerError",null))&&Object(G.get)(this.props,"player.playerError.error",null)){console.log("got player error!",Object(G.get)(this.props,"player.playerError",{}));var a=Object(G.get)(this.props,"player.playerError.title",""),n=Object(G.get)(this.props,"player.playerError.message",""),o=Object(G.get)(this.props,"player.playerError.icon",""),r=Object(G.get)(this.props,"player.playerError.button","");this.setState({showErrorModal:!0,errorTitle:a,errorMessage:n,errorIcon:o,errorButton:r}),this.props.actions.playerError({}),va("Error Modal"),fa({category:p,value:n,label:A}),un=setTimeout((function(){t.closeErrorMessage(),clearTimeout(un),un=null}),3e5)}Object(G.isEqual)(Object(G.get)(this.props,"player.isPlaying",null),Object(G.get)(e,"player.isPlaying",null))&&Object(G.isEqual)(Object(G.get)(this.props,"player.showPlayer",null),Object(G.get)(e,"player.showPlayer",null))||(clearInterval(mn),mn=setInterval((function(){Object(G.get)(t.props,"player.isPlaying",null),t.getSongTime()}),100)),Object(G.isEqual)(Object(G.get)(this.props,"player.showPlayer",null),Object(G.get)(e,"player.showPlayer",null))||this.checkPlayerState(),Object(G.isEqual)(Object(G.get)(this.props,"myLocation.pairedDevice.deviceName",null),Object(G.get)(e,"myLocation.pairedDevice.deviceName",null))||console.log("Changed playback device")}},{key:"getSongTime",value:function(){try{var e=document.getElementById("current-song-time").innerHTML,t=document.getElementById("current-song-duration").innerHTML,a=document.getElementById("invis-current-song-time").innerHTML;this.setState({currentSongTime:e,currentSongDuration:t,songCompletion:a})}catch(n){console.log("getSongTime err: ",n)}}},{key:"createUserName",value:function(){var e=Object(G.get)(this.props,"user.firstName",""),t=Object(G.get)(this.props,"user.lastName","");return(e=e.substring(0,1).toUpperCase()+e.substring(1,e.length))+" "+(t=t.substring(0,1).toUpperCase()+t.substring(1,t.length))}},{key:"getTrackData",value:function(e){var t=this.props.myLocation,a=e;a||(a=Object(G.get)(t,"station.track[0]",null));var n={songImage:Object(G.get)(a,"picture",null),locationName:Object(G.get)(t,"name",null),songTrack:Object(G.get)(a,"title",null),bpm:Object(G.get)(a,"bpm",null),songArtist:Object(G.get)(a,"artist",null),token:Object(G.get)(t,"token",null),stationName:Object(G.get)(t,"station.name",null)};return Array.isArray(n.songArtist)&&(n.songArtist=n.songArtist[0]),n}},{key:"openLink",value:function(e){window.open(e,"_blank")}},{key:"closeErrorMessage",value:function(){this.setState({showErrorModal:!1,errorTitle:"",errorMessage:"",errorIcon:"",errorButton:""})}},{key:"openAdBlockMessage",value:function(){this.setState({showErrorModal:!0,errorTitle:"Please Disable Ad-Block",errorMessage:"All of our advertisements help fund small business relief programs. Please help us help them by disabling your ad-blocker.",errorIcon:o.a.createElement(la.a,{icon:Ta.k,className:"connect-icon",style:{color:"#d04283"}}),errorButton:"Ok, Got It"})}},{key:"sendToMobileDevice",value:function(e){this.props.inApp?en.send("player","player/"+e):this.openLink("https://ambii.app.link/OpenMobile")}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:o.a.createElement(la.a,{icon:Pa.b,className:"connect-icon"})})}))}},{key:"render",value:function(){var e=this,t=this.props.isApple,a=Object(G.get)(this.props,"player",{}),n=a.isPlaying,r=a.skipDisabled,i=this.state,s=i.isLoading,c=i.explicitAllowed,l=i.loadingExplicit,u=i.songCompletion,m=i.controllerStyle,d=i.showAppModal,p=i.showConnectModal,g=i.showErrorModal,h=i.loadingPlayer,f=i.errorTitle,b=i.errorMessage,v=i.errorIcon,y=i.errorButton,E=i.playlistModalId,O=i.userName,S=i.isMobile,k=i.playButtonDisabled,j=i.currentSongTime,w=i.currentSongDuration,N=this.getTrackData(Object(G.get)(this.props,"myLocation.currentTrack",null)),C=N.songImage,I=N.locationName,L=N.songTrack,P=N.songArtist,T=N.token,M=N.stationName,A=Object(G.get)(this.props,"myLocation.company.isIndividual","individual"===Object(G.get)(this.props,"myLocation.name","").toLowerCase()),x=Object(G.get)(this.props,"myLocation.isPlaying",!1),D=Object(G.get)(this.props,"myLocation.station._id",null),_=Object(G.get)(this.props,"myLocation.schedule.name",!1),B=Object(G.get)(this.props,"myLocation.schedule._id",""),F=J()?"90%":"80%",R=!1,U=!1,V=Object(G.get)(N,"bpm",100);V||(V=100);var q=document.getElementById("now-playing-info-wrapper")||null,z=document.getElementById("now-playing-track")||null,H=document.getElementById("now-playing-artist")||null;return q&&z&&H&&((q=q.getBoundingClientRect().width-(J()?0:310))<(z=z.getBoundingClientRect().width)&&(R=!0),q<(H=H.getBoundingClientRect().width)&&(U=!0)),o.a.createElement("div",{className:"dashboard-page-wrapper"},o.a.createElement(Ia.a,{visible:Boolean(E),onCancel:function(){return e.showPlaylistModal(null)},width:F,bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},o.a.createElement(on,{playlistId:E,close:function(){return e.showPlaylistModal(null)},source:"dashboard"})),o.a.createElement(cn,{title:o.a.createElement("span",null,"Welcome ",o.a.createElement("span",{style:{color:"#D04283"}},"Back")),subtitle:A?O:I,backArrow:!0,backArrowPress:function(){return e.changeStationPress()}}),o.a.createElement(Ut.a,{indicator:qt,spinning:s,style:{backgroundColor:"#f5f5f5",maxHeight:"100%"}},o.a.createElement("div",{className:"dashboard-content-wrapper"},o.a.createElement("div",{className:"nowPlayingContainer"},o.a.createElement("div",{className:"imgAndInfo",id:"now-playing-info-wrapper"},o.a.createElement("div",{className:"songImageContainer"},o.a.createElement("img",{className:"songImage noselect",src:C,alt:""})),o.a.createElement("div",{className:"infoContainer"},o.a.createElement("div",{className:"nowPlayingTitle"},"Now Playing",x&&V&&o.a.createElement(rn,{animate:!0,speed:60/V,value:V,hideText:!0,style:{marginLeft:"12px",justifyContent:"flex-start"}})),o.a.createElement("div",{className:"songTitle",style:{justifyContent:S&&!R?"center":"flex-start"}},o.a.createElement("span",{id:"now-playing-track",className:R?"marquee":""},L)),o.a.createElement("div",{className:"songArtist",style:{justifyContent:S&&!U?"center":"flex-start"}},o.a.createElement("span",{id:"now-playing-artist",className:U?"marquee":""},P)),o.a.createElement("div",null,"Station:",o.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.showPlaylistModal(D)}},M)),_&&o.a.createElement("div",null,"Schedule:",o.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.props.history.push("/createSchedule/".concat(B))}},_))),o.a.createElement("div",{className:"adblock-div",onClick:function(){return e.openAdBlockMessage()}},o.a.createElement(Ja.a,null,o.a.createElement(la.a,{icon:Ta.k,className:"connect-icon"}))))),o.a.createElement("div",{className:"module-row"},"MOBILE"===m?o.a.createElement(ln,{title:"Playing on Mobile",icon:Pa.c,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!S&&o.a.createElement(Ut.a,{indicator:qt,spinning:k},o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(la.a,{icon:Pa.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"OTHER"===m?o.a.createElement(ln,{title:"Playing on Another Device",icon:Pa.g,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!S&&o.a.createElement(Ut.a,{indicator:qt,spinning:k},o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(la.a,{icon:Pa.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"WEB"===m?o.a.createElement(ln,{title:"Playing on Web",icon:Pa.g,style:{backgroundColor:"#D04283",borderColor:"#FFF",color:"#FFF"},content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},o.a.createElement("div",{className:"dashboard-music-controller"},o.a.createElement("div",{className:"dashboard-music-time"},j," / ",w),o.a.createElement("div",{className:"dashboard-music-controls"},n?o.a.createElement(la.a,{icon:Ta.p,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(!1)}}):o.a.createElement(la.a,{icon:Ta.r,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(G.stubTrue)}}),o.a.createElement(la.a,{icon:Ta.v,className:"music-controller-icon".concat(r?" disabled":""),onClick:function(){return r?null:e.skipSong(u)}}),o.a.createElement(la.a,{icon:Pa.f,className:"music-controller-icon close-icon",onClick:function(){return e.props.actions.disconnectPlayer()}}))),o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283",marginTop:"10px"},onClick:function(){return S?e.sendToMobileDevice(T):e.connectPress()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(la.a,{icon:Pa.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},S?"Open App":"Play on Mobile")))]}):o.a.createElement(ln,{title:"Play Music",icon:Ta.o,content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},!S&&o.a.createElement(Ut.a,{indicator:qt,spinning:k},o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginBottom:"15px"},onClick:function(){return e.playStation()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(la.a,{icon:Pa.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))),o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283"},onClick:function(){return S?e.sendToMobileDevice(T):e.connectPress()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(la.a,{icon:Pa.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},S?"Open App":"Play on Mobile")))]}),o.a.createElement("div",{className:"flexCol",style:{justifyContent:"space-evenly"}},o.a.createElement(ln,{title:"Store Code",icon:Ta.l,content:[o.a.createElement(Ca,{token:T,fontSize:"22px"})]}),o.a.createElement(ln,{title:"Settings",icon:Ta.e,content:o.a.createElement("div",{className:"dashboard-setting-wrapper"},o.a.createElement("div",{className:"dashboard-setting-text"},"Allow Explicit"),o.a.createElement("div",{className:"dashboard-setting-option"},o.a.createElement(La.a,{style:{width:"30px"},checked:c,disabled:null===c,loading:l,onClick:function(){return e.toggleExplicit()}})))}))))),o.a.createElement(Ia.a,{visible:d,onOk:function(){return e.setState({showAppModal:!1})},onCancel:function(){return e.setState({showAppModal:!1})},width:F,footer:[],className:"app-modal"},o.a.createElement("div",{className:"connect-wrapper"},o.a.createElement("div",{className:"connect-header"},"Connect Device"),o.a.createElement("div",{className:"connect-display rowItem"},o.a.createElement(la.a,{icon:Pa.h,className:"connect-icon"}),o.a.createElement("div",{className:"connect-dashes"}," - - - - - - "),o.a.createElement("div",{className:"mobile-phone"},o.a.createElement(la.a,{icon:Pa.c,className:"connect-icon"}),o.a.createElement(la.a,{icon:Ta.o,className:"special-music-icon"})),o.a.createElement("div",{className:"connect-dashes"}," - - - - - - "),o.a.createElement("div",{className:"speaker-group"},o.a.createElement(la.a,{icon:Pa.e,className:"connect-icon"}),o.a.createElement(la.a,{icon:Ta.f,className:"connect-music-icon"}))),o.a.createElement("div",{className:"connect-text rowItem"},t?o.a.createElement(o.a.Fragment,null,"1. Download the ",o.a.createElement("span",{style:{color:"#d04283",fontWeight:"bold"}},"Ambii - Music for Business")," app on the App Store."):o.a.createElement(o.a.Fragment,null,"1. Download the ",o.a.createElement("span",{style:{color:"#d04283",fontWeight:"bold"}},"Ambii - Music for Business")," app on Google Play or the App Store onto your mobile device")),o.a.createElement("div",{className:"store-wrapper rowItem"},o.a.createElement("img",{src:Ka.a,className:"connect-music-icon ambii-logo",alt:""}),o.a.createElement("div",{className:"store-button-wrapper",onClick:function(){return e.openLink("https://play.google.com/store/apps/details?id=com.ambii_business_music")}},!t&&o.a.createElement("div",{className:"store-button"},o.a.createElement(Wa,{className:"connect-music-icon brand-icon",style:{width:24,height:48}}),o.a.createElement("div",{className:"store-button-text"},o.a.createElement("div",{className:"store-button-subtitle"},"Download on"),o.a.createElement("div",{className:"store-button-title"}," Google Play "))),o.a.createElement("div",{className:"store-button",onClick:function(){return e.openLink("https://apps.apple.com/us/app/ambii-music-for-business/id1501666271")}},o.a.createElement(la.a,{icon:Ma.a,className:"connect-music-icon brand-icon",style:{fontSize:"32px"}}),o.a.createElement("div",{className:"store-button-text"},o.a.createElement("div",{className:"store-button-subtitle"},"Download on"),o.a.createElement("div",{className:"store-button-title"}," App Store "))))),o.a.createElement("div",{className:"connect-text rowItem"},"2. Once downloaded, enter your Store Code"),o.a.createElement("div",{className:"connect-text",style:{marginTop:"25px",fontSize:"24px"}},"Store Code: ",o.a.createElement("span",{className:"connect-token"},T)))),o.a.createElement(Ia.a,{visible:p,onOk:function(){return e.setState({showConnectModal:!1})},onCancel:function(){return e.setState({showConnectModal:!1})},width:F,footer:[],className:"app-modal"},o.a.createElement("div",{className:"connect-wrapper"},o.a.createElement("div",{className:"connect-header"},"Device Already Connected!"),o.a.createElement("div",{className:"connect-text"},"Another device is already connected to this account. Would you like to play music on this device instead?"),o.a.createElement("div",{className:"connect-display rowItem"},o.a.createElement(la.a,{icon:Pa.h,className:"connect-icon"})),o.a.createElement("div",{className:"connect-button-group"},o.a.createElement(ta.a,{className:"optionButton",loading:h,disabled:h,onClick:function(){return e.loadPlayer({override:!0})}},"Yes, Connect"),o.a.createElement(ta.a,{className:"optionButton mobile-padding",onClick:function(){return e.setState({showConnectModal:!1})}},"No, Cancel")))),o.a.createElement(Ia.a,{visible:g,onOk:function(){return e.closeErrorMessage()},onCancel:function(){return e.closeErrorMessage()},width:F,footer:[],className:"app-modal"},o.a.createElement("div",{className:"connect-wrapper"},o.a.createElement("div",{className:"connect-header"},f),o.a.createElement("div",{className:"connect-text"},b),o.a.createElement("div",{className:"connect-display rowItem"},v),o.a.createElement("div",{className:"connect-button-group"},o.a.createElement(ta.a,{className:"optionButton mobile-padding",onClick:function(){return e.closeErrorMessage()}},y||"Ok")))))}}]),a}(n.Component);var pn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,player:e.player,currentTrack:e.auth.location.currentTrack,isApple:e.auth.isApple,inApp:e.auth.inApp}}),(function(e){return{actions:Object(s.b)({addPlayerListeners:Ze,removePlayerListeners:nt,updateStationListener:ot,updateCurrentTrackListener:rt,removeStationListener:it,getStation:vt,connectPlayer:Xe,playerError:Te,assignStation:Ot,toggleExplicit:bt,setDisableSkip:xe,skipSong:et,setIsPlaying:Ae,disconnectPlayer:Qe},e)}}))(Object(be.f)(dn)),gn=a(83),hn=a(72),fn=a(408),bn=(a(267),a(418)),vn=(a(833),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={isHovered:!1},e.onMouseOver=function(){e.setState({isHovered:!0})},e.onMouseOut=function(){e.setState({isHovered:!1})},e}return Object(le.a)(a,[{key:"render",value:function(){var e=this.props,t=e.performSelect,a=e.text;return o.a.createElement("div",{className:"mood_tag",onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:t},o.a.createElement("span",{style:{marginLeft:8}},a))}}]),a}(n.Component)),yn=(a(834),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).removeTag=function(e){return function(){n.props.performSelect(e)}},n.onChangeText=function(e){n.setState({search:e.target.value},(function(){var e=Object(ht.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))},n.performSelect=function(e){return function(){n.props.performSelect(e),n.setState({search:""},(function(){var e=Object(ht.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))}},n.filterTagArray=function(){var e=new Set(n.props.selectedTags);return Object(ht.a)(n.state.tags).filter((function(t){return!e.has(t)}))},n.handleClick=function(e){n.node.contains(e.target)||n.setState({isSearchFocused:!1})},n.state={tags:n.props.items,search:"",isSearchFocused:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.isSearchFocused;return o.a.createElement(bn.a,{handleHeight:!0},(function(t){var r=t.height;return o.a.createElement("div",{className:"mood_container",ref:function(t){return e.node=t}},o.a.createElement("div",{className:"input-tag ".concat(n?"red-focus":"")},o.a.createElement("ul",{className:"input-tag__tags",ref:function(t){return e.tagListRef=t}},e.props.selectedTags.map((function(t,a){return o.a.createElement("li",{key:t},t,o.a.createElement("button",{type:"button",className:"remove_btn",onClick:e.removeTag(t)},"+"))})),o.a.createElement("li",{className:"input-tag__tags__input"},o.a.createElement("textarea",{className:"mood_searchBar",type:"text",placeholder:"Search for Moods",onFocus:function(){return e.setState({isSearchFocused:!0})},value:a,onChange:e.onChangeText,ref:function(t){e.tagInput=t}}),o.a.createElement(la.a,{icon:sn.h,color:"rgba(95, 95, 95, 0.4)"})))),n?o.a.createElement("div",{className:"tag-result",style:{position:"absolute",top:r}},e.filterTagArray().map((function(t,a){return o.a.createElement(vn,{key:a,text:t,performSelect:e.performSelect(t)})}))):null)}))}}]),a}(n.Component));a(835);function En(e){var t=function(t,a){return function(){a!==e.currentSelectedTempo?e.selectTempo(t,a):e.deSelectTempo()}};return o.a.createElement("div",{className:"tempo_container"},Object.keys(U).map((function(a,n){return o.a.createElement("div",{key:n,className:"wrapper"},o.a.createElement("div",{className:"energy",onClick:t([U[a].min,U[a].max],n),style:{backgroundColor:n===e.currentSelectedTempo?"rgba(95, 95, 95, 0.1)":"white"}},o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"inner"},o.a.createElement(la.a,{icon:U[a].icon,className:"tempo_icon"}),o.a.createElement("span",null,U[a].title)))))})))}a(836),["10's","00's","90's","80's","70's","60's"].reverse();var On=function(e){var t=e.browseMoods,a=e.currentSelectedTempo,n=e.onSelectTempo,r=e.onDeselectTempo,i=(e.browseEraRange,e.onSelectEra,e.onSelectMood);return o.a.createElement("div",null,o.a.createElement("div",{className:"moodWrapper",style:{margin:"auto"}},o.a.createElement("div",{className:"browseSettingsTitle"},"Tags"),o.a.createElement("div",{className:"browseSelectionsContainer"},o.a.createElement(yn,{items:Object.keys(t),selectedTags:Object.keys(t).filter((function(e){return!0===t[e]})),performSelect:i}))),o.a.createElement("div",{className:"tempoWrapper",style:{margin:"auto"}},o.a.createElement("div",{className:"browseSettingsTitle"},"Energy"),o.a.createElement("div",{className:"browseSelectionsContainer"},o.a.createElement(En,{currentSelectedTempo:a,selectTempo:n,deSelectTempo:r}))))},Sn=a(201),kn=a(410),jn=(a(837),function(e){var t=e.visible,a=e.onCancel,n=e.tracks,r=e.title;return o.a.createElement(Ia.a,{title:r,visible:t,onCancel:a,footer:[]},n.map((function(e,t){return o.a.createElement("div",{className:"track-container",key:t},e.albumCover?o.a.createElement(kn.a,{shape:"square",size:50,src:e.albumCover}):o.a.createElement(kn.a,{shape:"square",size:50,icon:"user"}),o.a.createElement("div",null,o.a.createElement("p",{style:{marginLeft:10},className:"heading-regular margin-0"},e.title),o.a.createElement("p",{style:{marginLeft:10},className:"margin-0"},e.artist)))})))}),wn=(a(838),function(e){var t,a,n=e.genres,r=e.roundBottom,i=e.bpm,s=e.simple,c=Object.entries(n||[]).sort((function(e,t){return t[1]-e[1]})).slice(0,3),l=0;try{t=c[0][1],a=c[1][1],l=c[2][1]}catch(p){console.log("Not all genre fields available")}var u=(t&&t>.1?t:0)+(a&&a>.1?a:0)+(l&&l>.1?l:0),m=function(e){return e/u},d=Q(i);return o.a.createElement("div",{className:"genre-container"},o.a.createElement("div",{className:"genre-color-bar"},c.map((function(e,t){var a=e[0],i=m(e[1]);return o.a.createElement("div",{className:"genre-wrapper",style:{width:"".concat(100*i,"%"),display:i>.1?"flex":"none"},key:a},o.a.createElement("div",{className:"genre-chunk",style:{backgroundColor:x[a],borderBottomLeftRadius:0===t&&r?"8px":null,borderBottomRightRadius:t===n.length-1&&r?"8px":null}}))}))),!s&&o.a.createElement("div",{className:"genre-tile-info-wrapper"},o.a.createElement("div",{className:"genre-tile-genre-wrapper"},c.map((function(e,t){var a=e[0];if(m(e[1])>.1)return o.a.createElement("div",{className:"flexRow",key:a},o.a.createElement("div",{className:"genre-color-dot",style:{backgroundColor:x[a]}}),o.a.createElement("span",{style:{position:"relative",bottom:4,left:4,fontWeight:0===t?"bold":"normal"}},a))}))),o.a.createElement("div",{className:"genre-bpm"},o.a.createElement(la.a,{icon:Object(G.get)(d,"icon",""),className:"bpm-icon"}),o.a.createElement("div",null,Object(G.get)(d,"title","")))))}),Nn=(a(839),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={modalVisible:!1,hovered:!1},e.showModal=function(){e.setState({modalVisible:!0})},e.hideModal=function(){e.setState({modalVisible:!1})},e.stationPress=function(t,a){var n=e.props.history;t&&(fa({category:d,action:L,value:a,label:M}),n.push("/station/".concat(t)))},e.playStation=function(t){var a=e.props,n=a._id,o=a.company,r=a.name,i=a.assignStation;t.stopPropagation(),i(Object(G.get)(o,"_id",""),n).then((function(){fa({category:d,action:v,value:r,label:M}),e.props.history.push("/nowPlaying",{isBack:!0})}))},e}return Object(le.a)(a,[{key:"render",value:function(){var e=this,t=this.state.modalVisible,a=this.props,n=a.bpm,r=a.genres,i=a._id,s=a.hex,c=a.track,l=a.title,u=a.type,m=a.rowIndex,d=a.browse,p=a.showPlaylistModal,g=a.isApple,h=(a.explicit,"advanced"===u?"advanced-station-preview":"public-station noselect"),f=(i?"item-container pointer":"item-container-preview item-container pointer").concat(0===m?" first-row":""),b=Object(G.get)(this.props,"name",""),v=Object(G.get)(n,"mean",1);return o.a.createElement("div",{className:h,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:d?{margin:"0px 0px 10px 0px",border:"2px solid white"}:{border:"2px solid white"},onClick:function(){return p(i)}},o.a.createElement("div",{className:f,style:{backgroundColor:s,backgroundImage:"url(".concat(Y(this.props.name),")")}},o.a.createElement("div",{className:"station-tile-header"},"advanced"!==u&&o.a.createElement("div",{style:i?{}:{fontSize:14},className:"name"},b?b.replace(" (Explicit)",""):l))),c&&c.length?o.a.createElement(jn,{title:b,visible:t,onCancel:this.hideModal,tracks:c}):null,o.a.createElement("div",{className:"info-container"},o.a.createElement(wn,{genres:r,showStats:!g,bpm:v||100})))}}]),a}(o.a.PureComponent)),Cn=(a(840),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={showArrows:!1,showLeftArrow:!0,showRightArrow:!0,diff:0},e}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth,a=Math.round(5*e/100);this.setState({diff:t-e+a}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.title,r=t.type,i=t.showViewAll,s=t.rowIndex,c=t.isApple,l=Object(G.get)(this.props,"data",[]),u=this.state,m=u.showArrows,d=u.showLeftArrow,p=u.showRightArrow,g=u.diff;return o.a.createElement("section",{className:"feature-section",id:a,style:i?{}:{padding:"25px 0px"}},o.a.createElement("div",{className:"feature-section-head-wrapper"},o.a.createElement("div",{className:"feature-section-title-wrapper"},o.a.createElement("div",{className:"preMargin"}),o.a.createElement("div",{className:"heading heading-large"}," ",n," "),!i&&o.a.createElement(ta.a,{type:"primary",onClick:function(){return In(0,r,e.props.history)}},o.a.createElement(la.a,{icon:sn.d}),"Go back"))),o.a.createElement("div",{className:"description"},B[n]),o.a.createElement("div",{className:"blurredWrapper"},o.a.createElement("div",{className:"blurredEdgeStart",onMouseEnter:function(){e.rightMoveSpeed=2,e.scrollRight=setInterval((function(){e.rightMoveSpeed=Math.min(12,e.rightMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:-e.rightMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},m&&d?o.a.createElement(la.a,{icon:sn.b}):null),o.a.createElement(Sn.a,{className:"stationPreviewWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===g?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},o.a.createElement("div",{className:"preMargin"}),o.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},l.map((function(t,a){return o.a.createElement(Nn,Object.assign({assignStation:e.props.actions.assignStation,showPlaylistModal:e.props.showPlaylistModal,company:e.props.company,history:e.props.history,key:a,rowIndex:s,isApple:c},t))})))),o.a.createElement("div",{className:"blurredEdgeEnd",onMouseEnter:function(){e.leftMoveSpeed=2,e.scrollLeft=setInterval((function(){e.leftMoveSpeed=Math.min(12,e.leftMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:e.leftMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},m&&p?o.a.createElement(la.a,{icon:sn.c}):null)))}}]),a}(n.Component)),In=function(e,t,a){0===e&&a.push("/discover",{isBack:!0}),1===e&&(fa({category:d,action:L,value:"View More",label:M}),a.push("/stations/".concat(t)))};var Ln=Object(de.b)((function(e){return{activeStationPreview:e.activeStationPreview}}),(function(e){return{actions:Object(s.b)({assignStation:Ot},e)}}))(Object(be.f)(Cn)),Pn=(a(841),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={showArrows:!1,showLeftArrow:!1,showRightArrow:!0,diff:0},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth;this.setState({diff:t-e}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.showArrows,n=t.showLeftArrow,r=t.showRightArrow,i=t.diff;return o.a.createElement("div",{className:"genre_container"},o.a.createElement("div",{className:"edgeStart",onMouseEnter:function(){var t=2;e.scrollRight=setInterval((function(){t=Math.min(12,t+.1),n&&e.scrollView.getElement().scrollBy({left:-t})}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},a&&o.a.createElement(la.a,{className:"icon",icon:sn.b,style:{fontSize:24,color:n?"#2a2a2a":"#CCC"}})),o.a.createElement(Sn.a,{className:"itemWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===i?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},o.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},this.props.items)),o.a.createElement("div",{className:"edgeEnd",onMouseEnter:function(){var t=2;e.scrollLeft=setInterval((function(){t=Math.min(12,t+.1),e.scrollView.getElement().scrollBy({left:t})}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},a&&o.a.createElement(la.a,{icon:sn.c,style:{fontSize:24,color:r?"#2a2a2a":"#CCC"}})))}}]),a}(n.Component)),Tn=a(202),Mn=a(203),An=a.n(Mn),xn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isStopped:!1,isPaused:!1},n}return Object(le.a)(a,[{key:"render",value:function(){var e=this.props,t=e.animationData,a=e.height,n=e.width,r={loop:!0,autoplay:!0,animationData:t,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return o.a.createElement("div",{className:"controlled"},o.a.createElement(An.a,{options:r,height:a||400,width:n||400,isStopped:this.state.isStopped,isPaused:this.state.isPaused}))}}]),a}(n.Component),Dn=(a(885),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.toggleStationSearch=function(){var e=n.state.showStationSearch;n.setState({showStationSearch:!e},(function(){e?setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100):fa({category:d,action:E,label:M})}))},n.calculateBrowse=function(){var e=n.state.loadNumber,t=function(e){var t={},a=Object.keys(e).filter((function(t){return e[t]}));return a.forEach((function(e){t[e]=1/a.length})),t},a=function(e,t){var a=[];return Object.keys(t).forEach((function(t){e[t]?a.push(e[t]):a.push(0)})),a},o=function(e,t){for(var a=0,n=0,o=0,r=0;r<e.length;r++)a+=e[r]*t[r],n+=e[r]*e[r],o+=t[r]*t[r];return a/((n=Math.sqrt(n))*(o=Math.sqrt(o)))},r=function(e,t){for(var a=0,n=0;n<e.length;n++)for(var o=n+1;o<e.length+1;o++){var r=e.slice(n,o);if(!t.includes(r))break;a+=Math.pow(r.length,1.5)/t.length}return a},i=n.state.playlists.filter((function(e){var t,a,o,r;return!((null===e||void 0===e||null===(t=e.bpm)||void 0===t?void 0:t.mean)>(null===(a=n.state.browseTempoRange)||void 0===a?void 0:a.max))&&!((null===e||void 0===e||null===(o=e.bpm)||void 0===o?void 0:o.mean)<(null===(r=n.state.browseTempoRange)||void 0===r?void 0:r.min))}));if(n.state.searchText)i=i.map((function(e){var t=0;return t+=r(n.state.searchText,e.name),e.description&&(t+=r(n.state.searchText,e.description)),Object(u.a)(Object(u.a)({},e),{},{searchScore:t})})).sort((function(e,t){return t.searchScore-e.searchScore}));else{var s=t(n.state.browseGenres),c=t(n.state.browseMoods),l=0!==Object.keys(s).length,m=0!==Object.keys(c).length;s=a(s,n.state.browseGenres),c=a(c,n.state.browseMoods);var d={};l&&i.forEach((function(e){d[e._id]=o(a(e.genres,n.state.browseGenres),s)}));var p={};m&&i.forEach((function(e){p[e._id]=o(a(e.moods,n.state.browseMoods),c)})),i=i.sort((function(e,t){var a=0;return l&&(a+=.5*(d[t._id]-d[e._id])),m&&(a+=.5*(p[t._id]-p[e._id])),a}))}i=i.slice(0,e),n.setState({calculatedPlaylists:i})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),va("Station Preview: "+e)},n._checkIfAllFalse=function(e){var t,a=Object(hn.a)(e);try{for(a.s();!(t=a.n()).done;){if(!0===t.value)return!1}}catch(n){a.e(n)}finally{a.f()}return!0},n._checkIsFiltering=function(){var e=n.state,t=e.searchText,a=e.browseGenres,o=e.browseMoods,r=e.currentSelectedTempo,i=t.length>0,s=!1===n._checkIfAllFalse(Object.values(a)),c=!1===n._checkIfAllFalse(Object.values(o));return i||s||c||r>-1},n.onSetFiltering=function(){n._checkIsFiltering()?n.setState({isFiltering:!0}):n.setState({isFiltering:!1})},n.onSelectGenre=function(e){return function(){var t=Object(u.a)({},n.state.selectedGenres);t[e]?delete t[e]:t[e]=!0,n.setState({showAdvancedSearch:Object.keys(t).length>0,selectedGenres:t,browseGenres:Object(u.a)(Object(u.a)({},n.state.browseGenres),{},Object(gn.a)({},e,!n.state.browseGenres[e])),loadNumber:12},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))}},n.onSelectMood=function(e){var t=Object(u.a)({},n.state.selectedMoods);t[e]?delete t[e]:t[e]=!0,n.setState({selectedMoods:t,browseMoods:Object(u.a)(Object(u.a)({},n.state.browseMoods),{},Object(gn.a)({},e,!n.state.browseMoods[e]))},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onSelectTempo=function(e,t){n.setState({browseTempoRange:{min:e[0],max:e[1]},currentSelectedTempo:t},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onDeselectTempo=function(){n.setState({browseTempoRange:{min:30,max:150},currentSelectedTempo:-1},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onSelectEra=function(e){n.setState({browseEraRange:{from:e[0],to:e[1]}})},n.onSetSearchText=function(e){n.setState({searchText:e.target.value},(function(){n.onSetFiltering(),clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.calculateBrowse,250)}))},n.state={isLoading:!0,artistName:"",searchText:"",isStation:!1,isFixHeader:!1,showStationSearch:!1,showAppModal:!1,businessType:"other",browseGenres:{},defaultGenres:{},browseMoods:{},defaultMoods:{},browseTempoRange:{min:30,max:150},browseEraRange:{from:1950,to:2020},playlistModalId:null,playlists:null,calculatedPlaylists:null,showAdvancedSearch:!1,isFiltering:!1,currentSelectedTempo:-1,selectedGenres:{},selectedMoods:{},loadNumber:12},n}return Object(le.a)(a,[{key:"getBusinessType",value:function(){var e=Object(G.get)(this.props,"myLocation.company.businessType","restaurant").toLowerCase();"other"===e.toLowerCase()&&(e="other"),this.setState({businessType:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.inApp;if(!Object(G.isEqual)(Object(G.get)(this.props,"myLocation",null),Object(G.get)(e,"myLocation",null))&&(this.getBusinessType(),t)){var a=Object(G.get)(this.props,"myLocation.token",""),n=Object(G.get)(this.props,"myLocation.station._id","");localStorage.getItem("mobileIntroLogin")&&$a.isLoggedIn()&&a&&n&&(localStorage.removeItem("mobileIntroLogin"),en.send("player","player/"+a))}}},{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){var t=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ba(),this.getBusinessType(),this.props.actions.getDiscoverPulicStations().then((function(e){var a=Object(G.get)(e,"playlistList",[]),n=a.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),o=a.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{});t.setState({isLoading:!1,playlists:a,browseGenres:n,defaultGenres:n,browseMoods:o,defaultMoods:o},t.calculateBrowse)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.actions.removePlayerListeners()}},{key:"updatePreference",value:function(e){this.setState({businessType:e.key}),fa({category:d,action:y,value:e.key,label:M})}},{key:"clearAdvancedFilters",value:function(){var e=this,t=this.state,a=t.defaultGenres,n=t.defaultMoods;this.setState({searchText:"",selectedGenres:{},selectedMoods:{},browseGenres:a,browseMoods:n,loadNumber:12,currentSelectedTempo:-1},(function(){e.onSetFiltering(),clearTimeout(e.searchTimeout),e.searchTimeout=setTimeout(e.calculateBrowse,250)}))}},{key:"showClearFilters",value:function(){var e=this.state,t=e.currentSelectedTempo,a=e.selectedGenres,n=e.selectedMoods;return e.searchText.length>0||Object.keys(a).length>0||Object.keys(n).length>0||-1!==t}},{key:"loadMoreStations",value:function(){var e=this;this.setState({loadNumber:this.state.loadNumber+12},(function(){e.calculateBrowse()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isApple,n=t.inApp,r=this.state,i=(r.showAdFreeModal,r.browseMoods),s=r.isLoading,c=r.playlists,l=r.businessType,u=r.playlistModalId,m=r.showAdvancedSearch,d=r.currentSelectedTempo,p=r.browseEraRange,g=r.isFiltering,h=r.browseGenres,f=r.searchText,b=r.calculatedPlaylists,v=(r.selectedGenres,J()?"90%":"80%"),y={},E={},O=Object(G.get)(this.props,"user.role",null),S=Object(G.get)(this.props,"user.company",""),k=Object(G.get)(this.props,"myLocation.favorites",[]),j=k.length>0,w={};j&&(w.Favorites=k);var N,C=Object(hn.a)(F.global);try{for(C.s();!(N=C.n()).done;){var I=N.value;y[I]=[]}}catch(V){C.e(V)}finally{C.f()}var L,P="other"===l.toLowerCase()&&O===H?F.defaultIndividual:F[l.toLowerCase()],T=Object(hn.a)(P);try{for(T.s();!(L=T.n()).done;){I=L.value;E[I]=[]}}catch(V){T.e(V)}finally{T.f()}if(!s){var M,A=Object(hn.a)(c);try{for(A.s();!(M=A.n()).done;){var x,D=M.value,_=Object(hn.a)(Object(G.get)(D,"supersets",[]));try{for(_.s();!(x=_.n()).done;){var B=x.value;B in y&&y[B].push(D),B in E&&E[B].push(D)}}catch(V){_.e(V)}finally{_.f()}}}catch(V){A.e(V)}finally{A.f()}}var R,U=o.a.createElement(sa.a,{onClick:function(t){return e.updatePreference(t)},selectedKeys:[l],className:"menu-wrapper"},o.a.createElement(sa.a.Item,{key:"bar"},"Bar"),o.a.createElement(sa.a.Item,{key:"cafe"},"Cafe"),o.a.createElement(sa.a.Item,{key:"gym"},"Gym"),o.a.createElement(sa.a.Item,{key:"hotel"},"Hotel"),o.a.createElement(sa.a.Item,{key:"other"},"Other"),o.a.createElement(sa.a.Item,{key:"restaurant"},"Restaurant"),o.a.createElement(sa.a.Item,{key:"salon"},"Salon"),o.a.createElement(sa.a.Item,{key:"school"},"School"),o.a.createElement(sa.a.Item,{key:"spa"},"Spa"),o.a.createElement(sa.a.Item,{key:"shop"},"Shop"));return o.a.createElement("div",{className:"discoverWrapper",id:"discover-container"},o.a.createElement(Ia.a,{visible:Boolean(u),onCancel:function(){return e.showPlaylistModal(null)},width:v,bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},o.a.createElement(on,{login:this.props.login,playlistId:u,close:function(){return e.showPlaylistModal(null)}})),o.a.createElement("div",{className:"create-body"},!n&&o.a.createElement("div",{className:"discover-head-wrapper"},o.a.createElement(cn,{title:o.a.createElement("span",null,"Let's Find Your",o.a.createElement("span",{style:{color:"#D04283"}},"\xa0ambii"),"-ance"),subtitle:"Discover the right music for your business",style:{flex:1}}),O!==H&&o.a.createElement("div",{className:"discover-buttons"},o.a.createElement("div",{className:"viewOptions"},o.a.createElement(ca.a,{overlay:U,trigger:["click"],className:"preference-menu"},o.a.createElement(ta.a,{className:"preference-menu-button"},o.a.createElement("span",{style:{marginRight:"5px",color:"black"}},"Preference:"),(R=l)?R.charAt(0).toUpperCase()+R.substring(1,R.length):"",o.a.createElement(la.a,{icon:Ta.c,style:{marginLeft:"8px"}})))))),o.a.createElement(Ut.a,{indicator:qt,spinning:s,style:{backgroundColor:"#f5f5f5"}},s&&o.a.createElement("div",{style:{width:"100%",height:"30vh"}}),!s&&o.a.createElement(Tn.Animated,{animationIn:"fadeIn",isVisible:!0},o.a.createElement("div",{className:"browseSettingsContainer ".concat(m&&"showAdvancedSearch")},o.a.createElement("div",{className:"searchWrapper"},o.a.createElement("div",{className:"searchInput"},o.a.createElement($t.a.Search,{className:"searchBar",placeholder:"Search",value:f,onChange:this.onSetSearchText})),o.a.createElement(ta.a,{onClick:function(){return e.setState((function(e){return{showAdvancedSearch:!e.showAdvancedSearch}}))},className:m?"active":null},o.a.createElement(la.a,{icon:Ta.i,style:{paddingRight:"4px"}}),"Filters"),this.showClearFilters()&&o.a.createElement(ta.a,{onClick:function(){return e.clearAdvancedFilters()},style:{marginLeft:"10px"}},"Clear")),o.a.createElement("div",{className:"genreWrapper"},o.a.createElement("div",{className:"browseSelectionsContainer"},o.a.createElement(Pn,{items:Object.keys(h).map((function(t){return o.a.createElement("span",{key:t,className:"mobileGenreItem",onClick:e.onSelectGenre(t),style:{backgroundColor:h[t]?"rgba(95, 95, 95, 0.2)":"transparent"}},t)}))}))),o.a.createElement(fn.SlideDown,{style:{width:"100%"}},m?o.a.createElement(On,{browseMoods:i,currentSelectedTempo:d,browseEraRange:p,onSelectTempo:this.onSelectTempo,onDeselectTempo:this.onDeselectTempo,onSelectEra:this.onSelectEra,onSelectMood:this.onSelectMood}):null)),g?o.a.createElement("div",{className:"advanced-station-wrapper"},o.a.createElement("div",{className:"playlistsContainer"},b?b.map((function(t,a){return o.a.createElement("div",{className:"playlistContainer",key:Object(G.get)(t,"_id",a)},o.a.createElement(Nn,Object.assign({showPlaylistModal:e.showPlaylistModal,assignStation:e.props.actions.assignStation,company:S,browse:!0,history:e.props.history},t)))})):null),o.a.createElement(ta.a,{className:"load-more",onClick:function(){return e.loadMoreStations()}},"Load More")):null,g?null:o.a.createElement("div",null,j&&Object.keys(w).map((function(t,n){return o.a.createElement(Ln,{showPlaylistModal:e.showPlaylistModal,company:S,key:t,id:t,rowIndex:n,title:t,type:t,data:w[t],source:"discover",isApple:a,showViewAll:!0})})),!a&&Object.keys(y).map((function(t,a){if(console.log({globalStations:y,superset:t,test:y[t]}),y[t].length>0)return o.a.createElement(Ln,{showPlaylistModal:e.showPlaylistModal,company:S,key:t,id:t,rowIndex:j?null:a,title:t,type:t,data:y[t],source:"discover",showViewAll:!0})})),!a&&Object.keys(E).map((function(t){if(E[t].length>0)return o.a.createElement(Ln,{showPlaylistModal:e.showPlaylistModal,company:S,key:t,id:t,title:t,type:t,data:E[t],source:"discover",showViewAll:!0})}))))),o.a.createElement("div",{className:"pageFooter"})))}}]),a}(n.Component));var _n=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,isApple:e.auth.isApple,inApp:e.auth.inApp}}),(function(e){return{actions:Object(s.b)({addPlayerListeners:Ze,removePlayerListeners:nt,getDiscoverPulicStations:yt,assignStation:Ot},e)}}))(Object(be.f)(Dn)),Bn=a(411),Fn=a(133),Rn=a(412),Un=a(277),Vn=a(98),qn=a.n(Vn),zn=(a(886),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={hovered:!1},n}return Object(le.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.simple,r=Object(G.get)(a,"_id",a),i=Object(G.get)(a,"name",""),s=Object(G.get)(a,"bpm.mean",100).toFixed(0),c=Object(G.get)(a,"genres",[]),l=Q(s);return o.a.createElement("div",{className:"schedule-playlist draggable-events",title:i,data:r,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},o.a.createElement("div",{className:"flexRow station-content noselect"},o.a.createElement("div",{className:"name"}," ",i," "),o.a.createElement("div",{className:"bpm-wrapper"},o.a.createElement(la.a,{icon:Object(G.get)(l,"icon",""),style:{fontSize:24}}))),o.a.createElement(wn,{genres:c,roundBottom:!0,simple:n}))}}]),a}(n.Component)),Hn=(a(887),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n}return Object(le.a)(a,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.data,r=this.state.expanded,i=Object(ht.a)(n);return r||(i=i.slice(0,5)),o.a.createElement("div",{className:"music-section-wrapper"},o.a.createElement("div",{className:"music-section-header"}," ",a," "),i.map((function(e){return o.a.createElement(zn,{data:e,key:Object(G.get)(e,"_id",e),simple:!0})})),n.length>5&&o.a.createElement("div",{className:"view-more",onClick:function(){return e.toggleExpand()}},r?"View Less":"View More"))}}]),a}(n.Component)),Wn=(a(888),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleUpdate=function(e){var t=Object(u.a)({},e),a=Object(G.get)(t,"target.value","");n.setState({text:a.length>0&&a.length<40?a:a.substring(0,40)})},n.toggleInput=function(){try{n.setState({activeInput:!n.state.activeInput},(function(){n.inputRef.current.focus()}))}catch(e){console.log("caught: ",e)}},n.state={text:"",activeInput:!1},n.inputRef=o.a.createRef(),n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;try{document.addEventListener("mousedown",(function(t){return e.handleClickOutside(t)})),document.addEventListener("keypress",(function(t){return e.handleKeyDown(t)}))}catch(t){console.log("caught didMount toggleInput err: ",t)}}},{key:"componentDidUpdate",value:function(e,t){Object(G.isEqual)(Object(G.get)(this.props,"text",""),Object(G.get)(e,"text",""))||(console.log("props: ",this.props),this.setState({text:Object(G.get)(this.props,"text","")})),Object(G.get)(this.state,"activeInput",!1)||Object(G.isEqual)(Object(G.get)(this.state,"activeInput",!1),Object(G.get)(t,"activeInput",!1))||(console.log("onUpdate: ",this.state),this.props.onUpdate(this.state.text))}},{key:"componentWillUnmount",value:function(){try{document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("keypress",this.handleKeyDown)}catch(e){console.log("caught willUnmount toggleInput err: ",e)}}},{key:"handleKeyDown",value:function(e){"enter"===Object(G.get)(e,"key","").toLowerCase()&&this.setState({activeInput:!1})}},{key:"handleClickOutside",value:function(e){var t=Object(G.get)(this,"inputRef.current","");t&&!t.contains(e.target)&&this.setState({activeInput:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeInput,n=t.text;return o.a.createElement("div",{className:"toggle-input noselect"},!a&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{className:"scheduleName",onClick:function(){return e.toggleInput()}},n),o.a.createElement(la.a,{icon:sn.f,className:"icon inputIcon",onClick:function(){return e.toggleInput()}})),a&&o.a.createElement("input",{ref:this.inputRef,onChange:function(t){return e.handleUpdate(t)},className:"scheduleNameInput",placeholder:n}))}}]),a}(n.Component)),Gn=(a(889),Ia.a.confirm),Kn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).renderHeader=function(e){switch(e.getDay()){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return"Sunday"}},n.validateEvent=function(e){e.event.start.getDate()!==e.event.end.getDate()&&(e.event.start.getDate()+1===e.event.end.getDate()&&0===e.event.end.getHours()&&0===e.event.end.getMinutes()?console.log("Same day allowed"):e.revert())},n.saveSchedule=function(){var e=n.state,t=e.stationName,a=e.stationId;e.isSaving;try{n.setState({isSaving:!0},(function(){var e=n.calendarComponentRef.current.getApi().getEvents(),o=Object(G.get)(n.props,"user.company._id",null),r=[];e.forEach((function(e){r.push({start:qn()(e.start).format(),end:qn()(e.end).format(),day:qn()(e.start).format(),title:e.title,stationId:null!==e.id&&""!==e.id?e.id:e.extendedProps.stationId})})),n.props.actions.setSchedule({companyId:o,scheduleId:a,name:t,stations:r}).then((function(){n.setState({isSaving:!1},(function(){fa({category:g,action:w,label:M}),n.props.history.push("/schedules")}))}))}))}catch(o){fa({category:g,value:o,label:A}),n.setState({isSaving:!1}),console.log("caught: ",o)}},n.closeSchedule=function(){fa({category:g,action:N,label:M}),n.props.history.push("/schedules")},n.backToDashboard=function(){fa({category:g,action:C,label:M}),n.props.history.push("/nowPlaying")},n.state={isLoading:!0,isMobile:J(),stations:[],stationName:"",mySchedule:{},stationId:n.props.match.params.id,playlists:[],showMusicPlayer:!1,isSaving:!1},n.calendarComponentRef=o.a.createRef(),n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){var t,a,n,o,r,i,s,c,l,u=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba(),t=this.state.stationId,e.next=4,this.props.actions.getSchedule(t);case 4:return a=e.sent,e.next=7,this.props.actions.getDiscoverPulicStations(t);case 7:n=e.sent,a.success&&(o=Object(G.get)(a,"data[0]",null),r=Object(G.get)(a,"data[0].name",null),i=Object(G.get)(a,"data[0].stations",null),this.setState({mySchedule:o,stationName:r,stations:i})),s=Object(G.get)(n,"playlistList",[]),c=s.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),l=s.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{}),this.setState({isLoading:!1,playlists:s,browseGenres:c,browseMoods:l,showMusicPlayer:Object(G.get)(this.props,"player.showPlayer",!1)},(function(){try{u.accessFullCalendarAPI(),window.addEventListener("resize",u.accessFullCalendarAPI.bind(u));var e=document.getElementById("external-events");new Un.a(e,{itemSelector:".draggable-events",eventData:function(e){return{title:e.getAttribute("title"),id:e.getAttribute("data")}}})}catch(t){console.log("caught err: ",t)}})),this.state.isMobile&&fa({category:g,action:I});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;Object(G.isEqual)(Object(G.get)(this.props,"player.showPlayer",null),Object(G.get)(e,"player.showPlayer",null))||this.setState({showMusicPlayer:Object(G.get)(this.props,"player.showPlayer",!1)},(function(){t.accessFullCalendarAPI()}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",this.accessFullCalendarAPI)}catch(e){console.log("caught: ",e)}}},{key:"accessFullCalendarAPI",value:function(){try{this.setState({isMobile:J()});var e=document.getElementById("external-events")||null;e&&(e=e.getBoundingClientRect().height);var t=this.calendarComponentRef.current.getApi();t.setOption("height",e),t.setOption("eventColor","#2F2F2F")}catch(a){console.log("caught: ",a)}}},{key:"showErrorMessage",value:function(){var e=this;return o.a.createElement("div",{className:"error-div"},o.a.createElement("div",{className:"title"},"Mobile Not Supported"),o.a.createElement("div",{className:"subtitle"},"Please view this page on desktop."),o.a.createElement("div",{className:"phone"},o.a.createElement(la.a,{icon:Pa.a,className:"mobile-icon"}),o.a.createElement(la.a,{icon:Pa.d,className:"frown-icon"})),o.a.createElement(ta.a,{className:"optionButton",onClick:function(){return e.backToDashboard()}},"Back to Dashboard"))}},{key:"eventClick",value:function(e){Gn({title:"Delete this station?",content:Object(G.get)(e,"event.title","")+": "+qn()(Object(G.get)(e,"event.start","")).format("ddd")+" "+qn()(Object(G.get)(e,"event.start","")).format("LT")+" - "+qn()(Object(G.get)(e,"event.end","")).format("ddd")+" "+qn()(Object(G.get)(e,"event.end","")).format("LT"),onOk:function(){e.event.remove()},onCancel:function(){console.log("Cancel")}})}},{key:"stationNameUpdate",value:function(e){this.setState({stationName:e})}},{key:"render",value:function(){var e,t=this,a=this.props.history,n=this.state,r=n.isLoading,i=n.playlists,s=n.stations,c=n.showMusicPlayer,l=n.isMobile,m=n.stationName,d=n.isSaving,p={},g={},h=Object(G.get)(this.props,"myLocation.favorites",[]),f=Object(hn.a)(F.global);try{for(f.s();!(e=f.n()).done;){var b=e.value;p[b]=[]}}catch(L){f.e(L)}finally{f.f()}var v,y=F.defaultIndividual,E=Object(hn.a)(y);try{for(E.s();!(v=E.n()).done;){b=v.value;g[b]=[]}}catch(L){E.e(L)}finally{E.f()}if(!r){var O,S=Object(hn.a)(i);try{for(S.s();!(O=S.n()).done;){var k,j=O.value,w=Object(hn.a)(Object(G.get)(j,"supersets",[]));try{for(w.s();!(k=w.n()).done;){var N=k.value;N in p&&p[N].push(j),N in g&&g[N].push(j)}}catch(L){w.e(L)}finally{w.f()}}}catch(L){S.e(L)}finally{S.f()}}var C=Object.keys(g),I=Object.keys(p);return o.a.createElement("div",{className:"schedulePageWrapper"},o.a.createElement(Ut.a,{indicator:qt,spinning:r},l?this.showErrorMessage():o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"topRowWrapper"},o.a.createElement("div",{className:"topRowLeft"},o.a.createElement("div",{className:"scheduleNameWrapper"},o.a.createElement(Wn,{text:m,onUpdate:function(e){return t.stationNameUpdate(e)}})),o.a.createElement("div",{className:"description"}," Drag and Drop Your Stations to Schedule When They Play ")),o.a.createElement("div",{className:"scheduleButtonGroup"},o.a.createElement(ta.a,{className:"optionButton",loading:d,type:"primary",onClick:d?null:function(){return t.saveSchedule()}},"Save & Close"),o.a.createElement(ta.a,{className:"optionButton",onClick:function(){return t.closeSchedule()}},"Close"))),o.a.createElement("div",{className:"bottomRowWrapper",style:{maxHeight:c?"72vh !important":null}},o.a.createElement("div",{id:"external-events",className:"selectionWrapper"},o.a.createElement(Hn,{label:"Favorites",data:h}),I.map((function(e){return o.a.createElement(Hn,{key:e,label:e,data:p[e]})})),C.map((function(e){return o.a.createElement(Hn,{key:e,label:e,data:g[e]})})),o.a.createElement(Hn,{label:"General",data:i}),o.a.createElement("div",{className:"musicSectionWrapper"},o.a.createElement("div",{className:"musicSectionHeader"}," Browse More Soundtracks "),o.a.createElement("div",{className:"musicSectionFooter",onClick:function(){return a.push("/discover")}},"Discover Music",o.a.createElement(la.a,{icon:sn.e,className:"discoverIcon"})))),o.a.createElement("div",{className:"calendarWrapper"},o.a.createElement("div",{className:"app-calendar noselect",id:"mycalendartest"},o.a.createElement(Bn.a,{defaultView:"timeGridWeek",header:!1,defaultDate:"2020-01-10T00:00:00.000Z",allDayDefault:!1,eventDurationEditable:!0,editable:!0,events:s,droppable:!0,plugins:[Fn.d,Rn.a,Un.b],ref:this.calendarComponentRef,eventDrop:this.validateEvent,eventReceive:function(e){console.log("data: ",Object(u.a)({},e))},slotDuration:"00:30",eventClick:function(e){return t.eventClick(e)},startRecur:Date.now(),allDaySlot:!1,eventOverlap:!1,columnHeaderText:this.renderHeader,eventResize:this.validateEvent,forceEventDuration:!0})))))))}}]),a}(n.Component);var Yn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists,schedules:e.schedules,player:e.player}}),(function(e){return{actions:Object(s.b)({getDiscoverPulicStations:yt,setSchedule:Nt,getSchedule:jt},e)}}))(Object(be.f)(Kn)),Jn=(a(890),Ia.a.confirm),Zn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).assignSchedule=function(e){e.stopPropagation(),n.setState({isLoading:!0},(function(){var e=Object(G.get)(n.props,"data.company._id",null),t=Object(G.get)(n.props,"data._id",null);n.props.actions.assignSchedule({companyId:e,scheduleId:t}).then((function(e){e?(n.setState({isLoading:!1}),n.props.history.push("/nowPlaying",{isBack:!0})):n.props.actions.setSnackbarMessage({message:"Error while assigning station",type:"error"})}))}))},n.deleteSchedule=function(e){var t=e.e,a=e.data,o=e.props,r=e.callback;t.stopPropagation(),n.setState({isLoading:!0},(function(){Jn({title:"Delete Schedule?",content:Object(G.get)(a,"name",""),onOk:function(){var e=Object(G.get)(o,"data.company._id",null),t=Object(G.get)(o,"data._id",null);o.actions.deleteSchedule({companyId:e,scheduleId:t}).then((function(e){e||(r(),o.actions.setSnackbarMessage({message:"Error while deleting station",type:"error"}))}))},onCancel:function(){r()}})}))},n.state={hidden:!0,isLoading:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.wait,a=setTimeout((function(){e.setState({hidden:!1}),clearTimeout(a)}),t)}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onClick,r=this.state,i=r.hidden,s=r.isLoading,c=Object(G.get)(a,"stations",[]).length>0;return o.a.createElement(o.a.Fragment,null,!i&&o.a.createElement(Tn.Animated,{animationIn:"fadeIn",isVisible:!0},o.a.createElement(Ut.a,{indicator:qt,spinning:s},o.a.createElement("div",{key:a._id,className:"scheduleBlock",style:{backgroundColor:"#eee"},onClick:function(){return n(a._id)}},o.a.createElement("div",{className:"schedule-icon-row"}),o.a.createElement("div",{className:"schedule-text-wrapper",style:{flex:1}},o.a.createElement("div",{className:"schedule-text"},Object(G.get)(a,"name",""))),o.a.createElement("div",{className:"schedule-icon-row"},c&&o.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.assignSchedule(t)}},o.a.createElement(la.a,{icon:Ta.r,className:"icon"})),o.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.deleteSchedule({e:t,data:a,props:e.props,callback:function(){return e.stopLoading()}})}},o.a.createElement(la.a,{icon:Ta.x,className:"icon"})))))))}}]),a}(n.Component);var Qn=Object(de.b)((function(e){return{user:e.auth.user,stations:e.stations.data}}),(function(e){return{actions:Object(s.b)({assignSchedule:It,deleteSchedule:Lt,setSnackbarMessage:Rt},e)}}))(Object(be.f)(Zn)),Xn=(a(891),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).getAllLocations=function(){var e=Object(G.get)(n.props,"user.company._id","");n.props.actions.getMyPlaylists({companyId:e}).then((function(e){e&&n.setState({isLoading:!1})}))},n.state={isLoading:!0,creatingSchedule:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){ba(),this.getAllLocations()}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"myLocation.token",null),Object(G.get)(e,"myLocation.token",null))||(console.log("update props: ",this.props),this.getAllLocations())}},{key:"createNewSchedule",value:function(){var e=this;this.setState({creatingSchedule:!0},(function(){var t=Object(G.get)(e.props,"user.company._id","");e.props.actions.createSchedule(t).then((function(t){fa({category:g,action:j});var a=Object(G.get)(t,"data._id",null);e.props.history.push("/createSchedule/".concat(a))}))}))}},{key:"editSchedule",value:function(e){fa({category:g,action:j,value:e}),this.props.history.push("/createSchedule/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props.playlists,a=this.state,n=a.isLoading,r=a.creatingSchedule;return o.a.createElement("div",{className:"scheduleWrapper"},o.a.createElement(cn,{title:o.a.createElement("span",null,"Your ",o.a.createElement("span",{style:{color:"#D04283"}},"Schedules")),subtitle:"Schedule out your stations for the whole week!"}),o.a.createElement(Ut.a,{indicator:qt,spinning:n},o.a.createElement("div",{className:"scheduleBlockWrapper noselect"},o.a.createElement("div",{className:"newSchedule",onClick:function(){return r?null:e.createNewSchedule()}},o.a.createElement("div",{className:"plusCircle"},o.a.createElement(la.a,{icon:sn.g,className:"icon"})),o.a.createElement("div",{className:"newScheduleText"},"Create Schedule")),Object(G.get)(t,"schedules",[]).map((function(t,a){return o.a.createElement(Qn,{key:Object(G.get)(t,"_id",t),wait:300*a,data:t,onClick:function(t){return e.editSchedule(t)}})})))))}}]),a}(n.Component));var $n=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists}}),(function(e){return{actions:Object(s.b)({getMyPlaylists:Ct,editSchedule:wt,createSchedule:kt},e)}}))(Object(be.f)(Xn)),eo=(a(892),Ia.a.confirm),to=ia.a.Option,ao=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={messageData:n.props.message},n}return Object(le.a)(a,[{key:"updateMessageFrequency",value:function(e){var t=this,a=e.e,n=e.messageData,o=e.user;this.setState({messageData:Object(u.a)(Object(u.a)({},n),{},{frequency:a})},(function(){t.props.actions.updateFrequency({companyId:Object(G.get)(o,"company._id"),locationId:Object(G.get)(t.props,"myLocation._id",""),id:Object(G.get)(n,"_id",""),frequency:a}).then((function(e){e&&t.props.actions.getMessages({companyId:Object(G.get)(t.props,"user.company._id"),locationId:Object(G.get)(t.props,"myLocation._id","")})}))}))}},{key:"editMessage",value:function(e){e.user;var t=e.messageData;e.props.history.push("/createInStoreMessaging",Object(u.a)(Object(u.a)({},t),{},{locationId:Object(G.get)(this.props,"myLocation._id","")}))}},{key:"delete",value:function(e){var t=e.user,a=e.messageData,n=e.props;eo({title:"Delete Message?",content:Object(G.get)(a,"title","")+": "+Object(G.get)(a,"message",""),onOk:function(){n.actions.deleteMessage({companyId:Object(G.get)(t,"company._id"),locationId:Object(G.get)(n,"myLocation._id",""),id:Object(G.get)(a,"_id","")}).then((function(e){e&&n.actions.getMessages({companyId:Object(G.get)(n,"user.company._id"),locationId:Object(G.get)(n,"myLocation._id","")})}))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.user,r=t.setPreviewUrl,i=t.myLocation,s=this.state.messageData;return o.a.createElement("div",{className:"messageCard"},o.a.createElement("div",{className:"messageCardheader"},o.a.createElement(la.a,{icon:Ta.y,className:"messageCardPreview",style:{marginRight:"10px"},onClick:function(){return r(Object(G.get)(s,"url",""))}}),o.a.createElement("div",{className:"messageTitle"}," ",Object(G.get)(s,"title","")," "),o.a.createElement(la.a,{icon:Ta.h,className:"icon",style:{marginLeft:"10px"},onClick:function(){return e.editMessage({user:n,messageData:s,props:e.props})}}),o.a.createElement(la.a,{icon:Pa.f,className:"icon",style:{marginLeft:"10px"},onClick:function(){return e.delete({user:n,messageData:s,props:e.props})}})),o.a.createElement(ia.a,{defaultValue:Object(G.get)(a,"frequency['"+Object(G.get)(i,"_id","")+"']",""),onChange:function(t){e.updateMessageFrequency({e:t,messageData:s,user:n})}},_.map((function(e,t){return o.a.createElement(to,{key:Object(G.get)(e,"time",t),value:Object(G.get)(e,"time","60")},Object(G.get)(e,"title","Error"))}))))}}]),a}(n.Component);var no=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(s.b)({deleteMessage:xt,updateFrequency:Dt,getMessages:Pt},e)}}))(Object(be.f)(ao)),oo=a(107),ro=a.n(oo),io=(a(894),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isPlaying:!1,previewTrackUrl:null,isLoading:!0},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getMessages({companyId:Object(G.get)(this.props,"user.company._id"),locationId:Object(G.get)(this.props,"myLocation._id","")}).then((function(t){t&&e.setState({isLoading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this;Object(G.isEqual)(Object(G.get)(this.props,"myLocation.token",null),Object(G.get)(e,"myLocation.token",null))||this.props.actions.getMessages({companyId:Object(G.get)(this.props,"user.company._id"),locationId:Object(G.get)(this.props,"myLocation._id","")}).then((function(){t.setState({isLoading:!1})}))}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){this.setState({previewTrackUrl:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.inStoreMessaging,r=t.myLocation,i=this.state,s=i.previewTrackUrl,c=i.isLoading,l=Object(G.get)(n,"messages",[]).filter((function(e){return parseInt(Object(G.get)(e,"frequency['"+Object(G.get)(r,"_id","")+"']",""))>0})),u=Object(G.get)(n,"messages",[]).filter((function(e){return 0===parseInt(Object(G.get)(e,"frequency['"+Object(G.get)(r,"_id","")+"']",""))}));return o.a.createElement("div",{className:"messageWrapper"},o.a.createElement(cn,{title:o.a.createElement("span",null,"In-Store ",o.a.createElement("span",{style:{color:"#D04283"}}," Messages ")),subtitle:"Custom announcements to help drive customer action"}),o.a.createElement("div",{className:"centerMessages"},o.a.createElement("div",{className:"viewMessagesContainer"},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"none"}},o.a.createElement(ro.a,{ref:function(t){e.rap=t},src:s,autoPlay:!1,controls:!1,muted:!1,volume:1,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})},onError:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})}})),o.a.createElement(Ut.a,{indicator:qt,spinning:c},l.length>0||u.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement(ta.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",style:{width:"100%",margin:"10px 0px",backgroundColor:"#e3e3e3"}},o.a.createElement(la.a,{icon:Ta.s,className:"connect-icon",style:{marginRight:"10px"}}),"Create New Message"),l.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"heading heading-medium"},"Active Messages "),l.map((function(t,n){return o.a.createElement(no,{key:Object(G.get)(t,"_id",n),message:t,companyId:Object(G.get)(a,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)}})}))),u.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"heading heading-medium"},"Inactive Messages "),u.map((function(t,n){return o.a.createElement(no,{key:Object(G.get)(t,"_id",n),message:t,companyId:Object(G.get)(a,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)}})})))):o.a.createElement(ta.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",style:{width:"100%",margin:"10px 0px",backgroundColor:"#e3e3e3"}},o.a.createElement(la.a,{icon:Ta.s,className:"connect-icon",style:{marginRight:"10px"}}),"Create Your First Message"))))))}}]),a}(n.Component));var so=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inStoreMessaging:e.inStoreMessaging}}),(function(e){return{actions:Object(s.b)({getMessages:Pt},e)}}))(Object(be.f)(io)),co=a(134),lo=a(914),uo=a(915),mo=a(919),po=a(413),go=a.n(po),ho=a(53),fo=(a(895),a(913)),bo=(a(896),function(e){var t=e.setSubscription,a=Object(de.c)((function(e){return e.auth})),r=a.user,i=a.location,s=Object(ho.useStripe)(),c=Object(ho.useElements)(),l=localStorage.getItem("access-token"),m=Object(n.useState)(!1),d=Object(co.a)(m,2),p=d[0],g=d[1],h=Object(n.useState)({nameOnCard:"",phone:"",city:"",postal_code:"",line1:""}),f=Object(co.a)(h,2),b=f[0],v=f[1],y=function(){var e=Object(he.a)(ge.a.mark((function e(a){var n,o,u;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,s.createPaymentMethod({type:"card",card:c.getElement(ho.CardNumberElement,ho.CardExpiryElement,ho.CardCvcElement),billing_details:{email:r.email,name:b.nameOnCard,phone:r.company.phoneNumber,address:{city:b.city,postal_code:b.postal_code,line1:b.line1}}});case 3:n=e.sent,o=n.error,u=n.paymentMethod,o?(fo.a.error({message:"Information Incomplete",description:o.message,placement:"bottomLeft"}),g(!1)):ye.a.post("http://localhost:4040/v2/auth/subscribtion",{payment_method:u.id,email:r.email,location:i},{headers:{Authorization:"Bearer "+l}}).then((function(e){t(e.data.stripeSubscription),console.log(e.data)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E={style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px",textAlign:"center"}}},O=function(e){var t=e.target,a=t.name,n=t.value;v((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(gn.a)({},a,n))})),console.log(b)};return o.a.createElement("form",{onSubmit:y},o.a.createElement(lo.a,null,o.a.createElement(uo.a,{span:14},o.a.createElement(ho.CardNumberElement,{options:{showIcon:!0,iconStyle:"solid",style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px",textAlign:"center"}}},className:"numberElement"})),o.a.createElement(uo.a,{span:5},o.a.createElement(ho.CardExpiryElement,{options:E,className:"cardElement"})),o.a.createElement(uo.a,{span:5},o.a.createElement(ho.CardCvcElement,{options:E,className:"cardElement"}))),o.a.createElement(lo.a,{className:"rowMargin"},o.a.createElement($t.a,{name:"nameOnCard",placeholder:"Name on the card",onChange:O})),o.a.createElement(lo.a,{className:"rowMargin"},o.a.createElement($t.a,{name:"line1",placeholder:"Street Address",onChange:O})),o.a.createElement(lo.a,{className:"rowMargin"},o.a.createElement(uo.a,{span:16},o.a.createElement($t.a,{name:"city",placeholder:"City",style:{width:"95%"},onChange:O})),o.a.createElement(uo.a,{span:8},o.a.createElement($t.a,{name:"postal_code",placeholder:"Zip Code",onChange:O}))," "),o.a.createElement("br",null),o.a.createElement(ta.a,{style:{marginBottom:"5%"},type:"primary",htmlType:"submit",disabled:!s,loading:p,onClick:function(){return g(!0)}},"Activate"))}),vo=a(916),yo=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{backgroundColor:"white",width:"80%",height:"100%",borderRadius:10,boxShadow:"0px 0px 10px grey"}},o.a.createElement("p",{style:{marginLeft:20,width:"100%",textAlign:"left",paddingTop:25,fontSize:13,fontWeight:"bold"}},o.a.createElement(la.a,{icon:Ta.q,style:{marginRight:10}}),"Edit User Details"),o.a.createElement(vo.a,null),o.a.createElement("p",{style:{marginLeft:20,width:"100%",textAlign:"left",paddingTop:3,fontSize:13,fontWeight:"bold"}},o.a.createElement(la.a,{icon:Ta.w,style:{marginRight:10}})," Edit Business Info"),o.a.createElement(vo.a,null),o.a.createElement("p",{style:{marginLeft:20,width:"100%",textAlign:"left",paddingTop:3,fontSize:13,fontWeight:"bold"}},o.a.createElement(la.a,{icon:Ta.g,style:{marginRight:10}})," Choose Plan"),o.a.createElement(vo.a,null),o.a.createElement("p",{style:{marginLeft:20,width:"100%",textAlign:"left",paddingTop:3,paddingBottom:25,fontSize:13,fontWeight:"bold"}},o.a.createElement(la.a,{icon:Ta.m,style:{marginRight:10}})," Password & Security")))},Eo=Object(be.f)((function(){var e=localStorage.getItem("access-token"),t=Object(de.c)((function(e){return e.auth})),a=t.user,r=t.location,i=Object(n.useState)(null),s=Object(co.a)(i,2),c=(s[0],s[1]);Object(ho.useStripe)();console.log(r.subscription),Object(n.useEffect)((function(){}),[r]);Object(ho.useElements)();var l=Object(n.useState)(!1),u=Object(co.a)(l,2),m=u[0],d=u[1];return null===a?o.a.createElement("div",{className:"messageWrapper"},o.a.createElement(cn,{title:o.a.createElement("span",null,"User ",o.a.createElement("span",{style:{color:"#D04283"}}," Settings ")),subtitle:"Change your information here"}),o.a.createElement(lo.a,null,o.a.createElement(uo.a,{span:6},o.a.createElement(yo,null)),o.a.createElement(uo.a,{span:16},o.a.createElement(Vt.a,{type:"loading",style:{fontSize:24,color:"#D04283",marginLeft:"30%"},spin:!0})))):o.a.createElement("div",{className:"messageWrapper"},o.a.createElement(cn,{title:o.a.createElement("span",null,"User ",o.a.createElement("span",{style:{color:"#D04283"}}," Settings ")),subtitle:"Change your information here"}),o.a.createElement(lo.a,null,o.a.createElement("div",null,o.a.createElement(uo.a,{span:6},o.a.createElement(yo,null)),"paid"!==r.subscription?o.a.createElement(uo.a,{span:16},o.a.createElement("div",{style:{backgroundColor:"white",width:"60%",height:"100%",boxShadow:"0px 0px 10px grey",borderRadius:10}},o.a.createElement(mo.a,{title:"Plan",style:{borderTopRightRadius:10,borderTopLeftRadius:10}}),o.a.createElement("div",{style:{width:"90%",backgroundColor:"#CD4D9C",margin:"auto",borderRadius:5,color:"white"}},o.a.createElement("div",null,o.a.createElement(lo.a,null,o.a.createElement(uo.a,{span:16},o.a.createElement("div",null),o.a.createElement("div",{style:{paddingLeft:30,paddingTop:10}},o.a.createElement("h2",{style:{color:"white",fontWeight:"bold"}},"Free"),o.a.createElement("p",null,"current plan"))),o.a.createElement(uo.a,{span:8},o.a.createElement("div",{style:{height:"100%"}},o.a.createElement("h2",{style:{color:"white",fontWeight:"bold",paddingTop:"10%",textAlign:"right",paddingRight:20}},"$0/mo")))))),o.a.createElement("br",null),o.a.createElement("div",{style:{width:"90%",backgroundColor:"#F5F5F2",margin:"auto",borderRadius:5}},o.a.createElement(lo.a,null,o.a.createElement(uo.a,{span:16},o.a.createElement("div",{style:{paddingLeft:30,paddingTop:10}},o.a.createElement("h2",{style:{fontWeight:"bold"}},"Premium"),o.a.createElement("p",{style:{fontWeight:"bold"}},"activate for an ad free experience"))),o.a.createElement(uo.a,{span:8},o.a.createElement("div",{style:{width:"100%"}},o.a.createElement("h2",{style:{fontWeight:"bold",paddingTop:"10%",textAlign:"right",paddingRight:20}},"$15.99/mo"),o.a.createElement(ta.a,{type:"primary",style:{marginLeft:"28%",marginTop:"3%",marginBottom:"10%"}},"Activate"))))),o.a.createElement(mo.a,{title:"Payment"},o.a.createElement("div",{style:{border:"0.2px #CD4D9c solid",borderRadius:"5px",width:"100%",margin:"auto",height:"100%"}},o.a.createElement("h4",{style:{color:"#7A7A7A",fontWeight:"bold",padding:20}},"Add payment method"),o.a.createElement("div",{style:{marginLeft:20,marginRight:20}},o.a.createElement(lo.a,null," ",o.a.createElement(bo,{setSubscription:c}))))))):o.a.createElement(uo.a,{span:16},o.a.createElement("div",{style:{backgroundColor:"white",width:"60%",height:"500px",borderRadius:10,boxShadow:"0px 0px 10px grey"}},o.a.createElement("img",{src:go.a,height:"220px",width:"350px",style:{marginLeft:"20%",marginTop:"5%"}}),o.a.createElement("div",{style:{marginLeft:50,marginTop:40}},o.a.createElement(cn,{title:"You're already subscribed!",subtitle:o.a.createElement("span",{style:{marginLeft:15,marginTop:10}}," We are glad you're onboard with ambii's premium service")})),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),ye.a.post("http://localhost:4040/v2/auth/cancelSubscribtion",{subId:r.stripeSubscription,location:r},{headers:{Authorization:"Bearer "+e}}).then((function(e){console.log(e.data)}))}},o.a.createElement(ta.a,{style:{marginLeft:"34%",marginTop:"3%",paddingTop:13,paddingBottom:35},type:"primary",htmlType:"submit",loading:m,onClick:function(){return d(!0)}},"Cancel Subscription")))))))})),Oo=a(414),So=a.n(Oo),ko=(a(899),ia.a.Option),jo=$t.a.TextArea,wo=ta.a.Group,No=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={message:"",title:"",language:"English (US)",languageCode:"en-US",voice:"en-US-Wavenet-A",frequency:"30",speed:1,voiceOptions:{},sortedLanguageArray:[],editingExistingMessage:!1,isSaving:!1,previewMessageUrl:"",isPlaying:!1,isPreviewing:!1,postPreviewChanges:!1,savedPreviews:{}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("savedISMPreviews"));this.props.actions.getVoiceOptions().then((function(a){if(Object(G.get)(e.props,"location.state._id",null)){var n=Object(G.get)(e.props,"location.state",{});e.setState({voiceOptions:a,title:Object(G.get)(n,"title",""),message:Object(G.get)(n,"message",""),language:q[Object(G.get)(n,"language","")],languageCode:Object(G.get)(n,"language",""),voice:Object(G.get)(n,"voice",""),speed:Object(G.get)(n,"speed",1),frequency:Object(G.get)(n,"frequency["+Object(G.get)(n,"locationId","")+"]",""),editingExistingMessage:!0,sortedLanguageArray:Object.keys(a).sort(),savedPreviews:t||{}})}else e.setState({voiceOptions:a,speed:1,sortedLanguageArray:Object.keys(a).sort(),savedPreviews:t||{}})}))}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){console.log("hit setPreviewUrl"),this.setState({previewMessageUrl:e})}},{key:"renderLanguageOptions",value:function(){return this.state.sortedLanguageArray.map((function(e){return o.a.createElement(ko,{key:e}," ",e," ")}))}},{key:"renderVoiceOptions",value:function(){var e=this.state,t=e.language,a=e.voiceOptions;if(t){var n=Object.keys(a).length>0?a[t]:[];return n.sort((function(e,t){return z[e.simpleName]>z[t.simpleName]?1:-1})),n.map((function(e){return o.a.createElement(ko,{key:e.name,parent:e.parent},z[e.simpleName]||e.simpleName)}))}}},{key:"checkIfHashExists",value:function(){var e=this.state.savedPreviews,t=this.getMessageHash();return!!e[t]&&t}},{key:"getMessageHash",value:function(){var e=this.state,t=e.title,a=e.message,n=e.languageCode,o=e.voice,r=e.speed,i=e.frequency;return So()(t.concat(a).concat(n).concat(o).concat(r).concat(i))}},{key:"previewMessage",value:function(){var e=this,t=this.state,a=t.message,n=t.languageCode,o=t.voice,r=t.speed;if(this.checkIfValidISM()&&!this.state.isPreviewing){var i=this.getMessageHash();this.checkIfHashExists()?this.setState({previewMessageUrl:this.state.savedPreviews[i],isPreviewing:!1},(function(){e.playTrack()})):this.setState({isPreviewing:!0},(function(){e.props.actions.createPreviewMessage({voice:o,language:n,message:a,speed:r,hash:i}).then((function(t){if(t){var a=Object(G.get)(t,"data","");e.setState({previewMessageUrl:a,isPreviewing:!1,savedPreviews:Object(u.a)(Object(u.a)({},e.state.savedPreviews),{},Object(gn.a)({},i,a))},(function(){localStorage.setItem("savedISMPreviews",JSON.stringify(e.state.savedPreviews)),e.playTrack()}))}else e.onFailure("There was an error when creating your preview file")}))}))}}},{key:"saveMessage",value:function(){var e=this,t=this.state,a=t.savedPreviews,n=t.editingExistingMessage,o=t.title,r=t.message,i=t.languageCode,s=t.voice,c=t.speed,l=t.frequency;this.checkIfValidISM()&&!this.state.isSaving&&this.setState({isSaving:!0},(function(){n?e.props.actions.editMessage({companyId:Object(G.get)(e.props,"user.company._id",""),locationId:Object(G.get)(e.props,"myLocation._id",""),messageId:Object(G.get)(e.props,"location.state._id",""),title:o,voice:s,language:i,message:r,speed:c,frequency:l,savedPreviews:a,hash:e.checkIfHashExists()}).then((function(t){t?e.onSuccess():e.onFailure()})):e.props.actions.createMessage({companyId:Object(G.get)(e.props,"user.company._id",""),locationId:Object(G.get)(e.props,"myLocation._id",""),title:o,voice:s,language:i,message:r,speed:c,frequency:l,savedPreviews:a,hash:e.checkIfHashExists()}).then((function(t){t?e.onSuccess():e.onFailure()}))}))}},{key:"onSuccess",value:function(e){var t=this,a=this.props.actions.setSnackbarMessage;this.setState({isSaving:!1},(function(){a({message:e||"Successfully saved message",type:"success"}),localStorage.removeItem("savedISMPreviews"),t.props.history.push("/inStoreMessaging")}))}},{key:"onFailure",value:function(e){var t=this.props.actions.setSnackbarMessage;this.setState({isSaving:!1},(function(){t({message:e||"There was an error when saving your message",type:"error"})}))}},{key:"checkIfValidISM",value:function(){var e=this.props.actions.setSnackbarMessage,t=this.state,a=t.title,n=t.message,o=t.language,r=t.voice,i=t.frequency,s=t.speed;return a?!n||n.length<10?(e({message:"Please add a longer message",type:"warn"}),!1):o?r?i?!!s||(e({message:"Please select a speed",type:"warn"}),!1):(e({message:"Please select a frequency",type:"warn"}),!1):(e({message:"Please select a voice",type:"warn"}),!1):(e({message:"Please select a language",type:"warn"}),!1):(e({message:"Please add a title to your message",type:"warn"}),!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.editingExistingMessage,n=t.isSaving,r=t.isPreviewing,i=t.language,s=t.voice,c=t.frequency,l=t.message,u=t.title,m=t.speed,d=t.previewMessageUrl;return console.log("ISM: ",{p:this.props,s:this.state}),o.a.createElement("div",{className:"messageWrapper"},o.a.createElement(cn,{backArrow:!0,backArrowPress:function(){return e.props.history.push("/inStoreMessaging")},title:a?o.a.createElement("div",null,"Edit ",o.a.createElement("span",{style:{color:"#D04283"}}," Message ")):o.a.createElement("div",null,"Create ",o.a.createElement("span",{style:{color:"#D04283"}}," Message "))}),o.a.createElement("div",{className:"centerMessages"},o.a.createElement("div",{className:"createMessagesContainer"},o.a.createElement("div",{style:{display:"none"}},o.a.createElement(ro.a,{ref:function(t){e.rap=t},src:d,autoPlay:!1,controls:!1,muted:!1,volume:1,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.setState({isPlaying:!1,previewMessageUrl:null})},onError:function(){return e.setState({isPlaying:!1,previewMessageUrl:null})}})),o.a.createElement("div",{className:"ism-item"},o.a.createElement("div",{className:"heading-medium"},"Message Name "),o.a.createElement($t.a,{onChange:function(t){return e.setState({title:t.target.value})},value:u})),o.a.createElement("div",{className:"ism-item"},o.a.createElement("div",{className:"heading-medium"},"Message "),o.a.createElement(jo,{placeholder:"Max 200 Characters",value:l,maxLength:200,onChange:function(t){return e.setState({message:t.target.value})},rows:4})),o.a.createElement("div",{className:"ism-item"},o.a.createElement("div",{className:"heading-medium"},"Language"),o.a.createElement(ia.a,{value:i||"Please select a language",style:{width:"fill"},onChange:function(t,a){return e.setState({language:a.key,languageCode:"",voice:""})}},this.renderLanguageOptions())),o.a.createElement("div",{className:"ism-item"},o.a.createElement("div",{className:"heading-medium"},"Voice "),o.a.createElement(ia.a,{value:s||"Please select a voice",style:{width:"fill"},onChange:function(t,a){return e.setState({voice:a.key,languageCode:Object(G.get)(a,"props.parent","")})}},this.renderVoiceOptions())),o.a.createElement("div",{className:"ism-item"},o.a.createElement("div",{className:"heading-medium"},"Frequency "),o.a.createElement(ia.a,{value:c||"Please select a frequency",style:{width:"fill"},onChange:function(t,a){return e.setState({frequency:a.key})}},_.map((function(e,t){return o.a.createElement(ko,{key:Object(G.get)(e,"time",t),value:Object(G.get)(e,"time","60")},Object(G.get)(e,"title","Error"))})))),o.a.createElement("div",{className:"ism-item"},o.a.createElement("div",{className:"heading-medium"},"Speed"),o.a.createElement(wo,null,o.a.createElement(ta.a,{type:.75===m?"primary":"secondary",onClick:function(){return e.setState({speed:.75})}},"Slow"),o.a.createElement(ta.a,{type:1===m?"primary":"secondary",onClick:function(){return e.setState({speed:1})}},"Normal"),o.a.createElement(ta.a,{type:1.25===m?"primary":"secondary",onClick:function(){return e.setState({speed:1.25})}},"Fast"))),o.a.createElement("div",{className:"ism-button-group"},o.a.createElement(ta.a,{onClick:function(){return e.previewMessage()},size:"large",loading:r,className:"ism-button"},o.a.createElement(la.a,{icon:Ta.y,className:"icon"}),"Preview Message"),o.a.createElement(ta.a,{onClick:function(){return e.saveMessage()},size:"large",loading:n,className:"ism-button"},a?o.a.createElement(o.a.Fragment,null,o.a.createElement(la.a,{icon:Ta.h,className:"icon"}),"Save Changes"):o.a.createElement(o.a.Fragment,null,o.a.createElement(la.a,{icon:Ta.t,className:"icon"}),"Create Message"))))))}}]),a}(n.Component);var Co=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inApp:e.auth.inApp}}),(function(e){return{actions:Object(s.b)({createPreviewMessage:Tt,editMessage:At,createMessage:Mt,getVoiceOptions:_t,setSnackbarNotification:Ft,setSnackbarMessage:Rt},e)}}))(Object(be.f)(No)),Io=(a(900),ia.a.Option,$t.a.TextArea,function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(le.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"sandbox-wrapper"},o.a.createElement(xn,{animationData:"",height:1440,width:1440}))}}]),a}(n.Component));var Lo=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(s.b)({setSnackbarNotification:Ft,setSnackbarMessage:Rt},e)}}))(Object(be.f)(Io)),Po=[{path:"/",exact:!0,isChild:!1,private:!1,component:function(){return o.a.createElement(be.a,{to:"/discover"})}},{path:"/landing",exact:!1,isChild:!1,private:!1,component:function(){return o.a.createElement(Wt,null)}},{path:"/login",exact:!0,isChild:!1,private:!1,component:function(){return $a.login(),o.a.createElement(_n,null)}},{path:"/signUp",exact:!0,isChild:!1,private:!1,component:function(){return $a.signUp(),o.a.createElement(_n,null)}},{path:"/nowPlaying",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(pn,null)}},{path:"/discover",exact:!0,isChild:!0,private:!1,component:function(){return o.a.createElement(_n,null)}},{path:"/station/:id",exact:!0,isChild:!0,private:!1,component:function(){return o.a.createElement(on,null)}},{path:"/createschedule/:id",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(Yn,null)}},{path:"/schedules",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement($n,null)}},{path:"/inStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(so,null)}},{path:"/createInStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(Co,null)}},{path:"/sandbox",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(Lo,null)}},{path:"/settings",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(Eo,null)}}];a(901);St.a.config({top:"5%",duration:1});var To=null,Mo=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleClick=function(){var e=Object(he.a)(ge.a.mark((function e(t){var a;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("features"!==t&&"price"!==t){e.next=4;break}St.a.info("This service will be available soon, please enjoy our other services"),e.next=15;break;case 4:if("signout"!==t){e.next=8;break}n.logInOut(),e.next=15;break;case 8:if(a=Object(G.get)(n.props,"auth.location.station._id",null),"nowPlaying"!==t||a){e.next=12;break}return n.props.actions.setSnackbarMessage({message:"Please select a station before viewing your dashboard",type:"warn"}),e.abrupt("return");case 12:n.setState({current:t}),St.a.destroy(),n.props.history.push("/"+t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.logInOut=function(){if($a.isLoggedIn())try{fa({category:h,action:T}),localStorage.removeItem("location-jwt"),$a.logout()}catch(e){console.log("Caught logout err: ",e)}else $a.login()},n.state={current:void 0,windowSize:window.innerWidth},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname.replace("/","");this.setState({current:t}),To=window.addEventListener("resize",(function(t){e.setState({windowSize:t.target.innerWidth})}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",To),To=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"checkIfActiveTab",value:function(e){return this.props.location.pathname.toLowerCase().includes(e.toLowerCase())}},{key:"render",value:function(){var e=this,t=this.props.inApp,a=this.state.windowSize,n=o.a.createElement(sa.a,{mode:"horizontal",onClick:function(t){return e.handleClick(t.key)},selectedKeys:[this.state.current],className:"menu-wrapper"},o.a.createElement(sa.a.Item,{className:"mobileButtonItem",key:"nowPlaying"},o.a.createElement("div",{className:"mobileButtonIcon"},o.a.createElement(la.a,{icon:Ta.w})),o.a.createElement("div",{className:"mobileButtonText"},"Dashboard")),o.a.createElement(sa.a.Item,{className:"mobileButtonItem",key:"discover"},o.a.createElement("div",{className:"mobileButtonIcon"},o.a.createElement(la.a,{icon:Ta.u})),o.a.createElement("div",{className:"mobileButtonText"},"Stations")),o.a.createElement(sa.a.Item,{className:"mobileButtonItem",key:"schedules"},o.a.createElement("div",{className:"mobileButtonIcon"},o.a.createElement(la.a,{icon:Ta.d})),o.a.createElement("div",{className:"mobileButtonText"},"Schedules")),o.a.createElement(sa.a.Item,{className:"mobileButtonItem",key:"inStoreMessaging"},o.a.createElement("div",{className:"mobileButtonIcon"},o.a.createElement(la.a,{icon:Ta.n})),o.a.createElement("div",{className:"mobileButtonText"},"Messaging")),$a.isLoggedIn()?o.a.createElement(sa.a.Item,{key:"signout",className:"mobileButtonItem"},o.a.createElement("div",{className:"mobileButtonIcon"},o.a.createElement(la.a,{icon:R.e,rotation:180})),o.a.createElement("div",{className:"mobileButtonText"},"Sign Out")):o.a.createElement(sa.a.Item,{key:"signout"}," Sign In")),r=Object(G.get)(this.props,"route",null),i=null,s=Object(G.get)(Ee,"API_URL","").includes("localhost")||Object(G.get)(Ee,"API_URL","").includes("-dev");r&&(i=!!r.toUpperCase().includes("createSchedule".toUpperCase()));var c=i?"header-container headerTwo":"header-container headerOne";return o.a.createElement("div",{className:c},o.a.createElement("div",{className:"logo-wrapper"},o.a.createElement("img",{src:D.appLogo,className:"header_logo pointer noselect",onClick:function(){return e.props.history.push("/nowPlaying")},alt:"logo"})),o.a.createElement("div",{style:{flex:0}},s&&t?"inApp Mode":""),a<=760?o.a.createElement("div",{className:"mobileButtonsContainer"},o.a.createElement(ca.a,{overlay:n,trigger:["click"]},o.a.createElement(ta.a,null,o.a.createElement(la.a,{icon:Ta.b})))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mainButtonsContainer noselect"},o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("nowPlaying")?" mainButtonActive":""),key:"nowPlaying",onClick:function(){return e.handleClick("nowPlaying")}},o.a.createElement("div",{className:"mainButtonsContent"},o.a.createElement("div",{className:"mainButtonsIcon"},o.a.createElement(la.a,{icon:Ta.w})),o.a.createElement("div",{className:"mainButtonsText"}," Dashboard ")),o.a.createElement("div",{className:"mainButtonsBottomBar"})),o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("discover")||this.checkIfActiveTab("browse")?" mainButtonActive":""),key:"discover",onClick:function(){return e.handleClick("discover")}},o.a.createElement("div",{className:"mainButtonsContent"},o.a.createElement("div",{className:"mainButtonsIcon"},o.a.createElement(la.a,{icon:Ta.u})),o.a.createElement("div",{className:"mainButtonsText"},"Stations")),o.a.createElement("div",{className:"mainButtonsBottomBar"})),o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("schedules")||this.checkIfActiveTab("createSchedule")?" mainButtonActive":""),key:"schedules",onClick:function(){return e.handleClick("schedules")}},o.a.createElement("div",{className:"mainButtonsContent"},o.a.createElement("div",{className:"mainButtonsIcon"},o.a.createElement(la.a,{icon:Ta.d})),o.a.createElement("div",{className:"mainButtonsText"},"Schedules")),o.a.createElement("div",{className:"mainButtonsBottomBar"})),o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("inStoreMessaging")||this.checkIfActiveTab("inStoreMessaging")?" mainButtonActive":""),key:"inStoreMessaging",onClick:function(){return e.handleClick("inStoreMessaging")}},o.a.createElement("div",{className:"mainButtonsContent"},o.a.createElement("div",{className:"mainButtonsIcon"},o.a.createElement(la.a,{icon:Ta.n})),o.a.createElement("div",{className:"mainButtonsText"}," Messaging ")),o.a.createElement("div",{className:"mainButtonsBottomBar"}))),o.a.createElement(ta.a,{key:"signout",onClick:function(){return e.logInOut()}},$a.isLoggedIn()?"Sign Out":"Sign In")),s&&o.a.createElement(la.a,{className:"icon",style:{paddingLeft:"10px",fontSize:"32px"},icon:Ta.a,onClick:function(){return console.log({props:e.props.state,trackSchedule:Object(G.get)(e.props,"state.auth.location.trackSchedule",{}),player:Object(G.get)(e.props,"state.player",{})})}}))}}]),a}(n.Component);var Ao=Object(be.f)(Object(de.b)((function(e){return{auth:e.auth,player:e.player,state:e,inApp:e.auth.inApp}}),(function(e){return{actions:Object(s.b)({setSnackbarMessage:Rt},e)}}))(Object(zt.a)(Mo))),xo=a(415),Do=a.n(xo),_o=(a(904),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.changeVolume(.01*e)},n.state={myVolume:0},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){this.setState({myVolume:Object(G.get)(this.props,"volume",0)})}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"volume",0),Object(G.get)(e,"volume",0))||this.setState({myVolume:Object(G.get)(this.props,"volume",0)})}},{key:"calculateVolumeHeight",value:function(){return 100*this.state.myVolume}},{key:"render",value:function(){var e=this,t=this.state.myVolume;return o.a.createElement("div",{className:"volume-slider-wrapper"},o.a.createElement("div",{className:"slider orientation-reversed"},o.a.createElement("div",{className:"slider-group"},o.a.createElement("div",{className:"slider-vertical"},o.a.createElement(Do.a,{min:0,max:100,value:this.calculateVolumeHeight(t),orientation:"vertical",onChange:this.handleChange,tooltip:!1,onChangeStart:function(t){return e.props.startDrag(t)},onChangeComplete:function(t){return e.props.endDrag(t)}})))))}}]),a}(n.Component)),Bo=(a(905),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;Object(ce.a)(this,a),n=t.call(this,e);var o=parseFloat(localStorage.getItem("volume"));return n.state={currentTime:"0:00",duration:"0:00",volume:o||("0"===o.toString()?0:.3),previousVolume:o||.3,showVolumeControl:!1,dragging:!1,url:null,isrc:null},n}return Object(le.a)(a,[{key:"checkIfVolumeSlider",value:function(e){if(!e)return!1;for(var t=Object(G.get)(e,"path",[]),a=0;a<t.length;a++)if("volume-wrapper"===t[a].id)return!0;return!1}},{key:"componentDidMount",value:function(){var e=this;this.rap.audioEl.addEventListener("timeupdate",(function(t){e.setState({currentTime:t.target.currentTime,duration:t.target.duration},(function(){Object(G.get)(e.props,"player.isPlaying",!0)||e.props.actions.setIsPlaying(!0)}))})),window.addEventListener("mouseover",(function(t){e.checkIfVolumeSlider(t)||e.state.dragging?e.state.showVolumeControl||e.setState({showVolumeControl:!0}):e.state.showVolumeControl&&e.setState({showVolumeControl:!1})}));var t=Object(G.get)(this.props,"currentTrack","");this.updateTrackState(),this.props.actions.checkIfAdvertisement(Object(G.get)(this.props,"currentTrack",{})),this.setState({duration:Object(G.get)(t,"duration",null)})}},{key:"componentWillUnmount",value:function(){try{this.player.removeEventListener("timeupdate"),window.removeEventListener("mouseover")}catch(e){console.log("caught error on music-bar unmount",e)}}},{key:"updateTrackState",value:function(){this.setState({url:Object(G.get)(this.props,"player.trackMap["+Object(G.get)(this.props,"currentTrack.isrc","")+"].url",""),isrc:Object(G.get)(this.props,"currentTrack.isrc",null)})}},{key:"componentDidUpdate",value:function(e){(Object(G.isEqual)(Object(G.get)(this.props,"myLocation.currentTrack.isrc",null),Object(G.get)(e,"myLocation.currentTrack.isrc",null))||(console.log("nowPlaying: ",{currentTrack:Object(G.get)(this.props,"currentTrack.title",""),duration:Z(Object(G.get)(this.props,"currentTrack.duration","")),station:Object(G.get)(this.props,"myLocation.station.name","")}),this.props.actions.checkIfAdvertisement(Object(G.get)(this.props,"currentTrack",{})),this.updateTrackState()),Object(G.isEqual)(Object(G.get)(this.props,"myLocation.station._id",null),Object(G.get)(e,"myLocation.station._id",null))||(console.log("<================ CHANGED STATION B ================>",this.props),this.props.actions.setTrackNumber(0),this.updateTrackState(),Object(G.get)(this.props,"player.isPlaying")&&(this.props.actions.setIsPlaying(!Object(G.get)(this.props,"player.isPlaying")),this.rap.audioEl.play())),Object(G.isEqual)(Object(G.get)(this.props,"player.isPlaying",!1),Object(G.get)(e,"player.isPlaying",!1)))||(Object(G.get)(this.props,"player.isPlaying",!1)?this.rap.audioEl.play():this.rap.audioEl.pause())}},{key:"getCurrentTrack",value:function(){var e=this.state,t=e.url,a=e.isrc,n=Object(G.get)(this.props,"currentTrack.isrc",""),o=Object(G.get)(this.props,"player.trackMap["+n+"].url",Object(G.get)(this.props,"currentTrack.url",""));return a&&t&&a===n&&t!==o?t:o}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){var t=e.rap.audioEl.play();void 0!==t&&t.then((function(){e.props.actions.setIsPlaying(!0)})).catch((function(){e.props.actions.setIsPlaying(!1)}))}))}},{key:"togglePlay",value:function(){this.props.actions.setIsPlaying(!Object(G.get)(this.props,"player.isPlaying"))}},{key:"toggleMute",value:function(){var e=this,t=this.state.previousVolume;this.setState({volume:this.state.volume>0?0:t},(function(){localStorage.setItem("volume",e.state.volume)}))}},{key:"setVolume",value:function(e){var t=this;this.setState({volume:e,previousVolume:e},(function(){localStorage.setItem("volume",t.state.volume)}))}},{key:"toggleVolumeDrag",value:function(e){this.setState({dragging:e})}},{key:"closePlayer",value:function(){var e=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.actions.setIsPlaying(!1),fa({category:p,action:S,label:M}),e.next=4,this.props.actions.disconnectPlayer();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"songError",value:function(e){console.log("Song error: ",{e:e,props:this.props}),this.skipSong(0)}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:o.a.createElement(la.a,{icon:Pa.b,className:"connect-icon"})}),t.props.actions.setIsPlaying(!Object(G.get)(t.props,"player.isPlaying")),t.rap.audioEl.play()}))}},{key:"render",value:function(){var e=this,t=Object(G.get)(this.props,"player",{}),a=t.isPlaying,n=t.skipDisabled,r=this.state,i=r.volume,s=r.showVolumeControl,c=r.currentTime,l=r.duration,u=Object(G.get)(this.props,"currentTrack",{}),m=(c/l*100).toFixed(2),d=!1,p=!1,g=document.getElementById("player-info-wrapper")||null,h=document.getElementById("player-artist-info")||null,f=document.getElementById("player-track-info")||null;return g&&h&&f&&((g=g.getBoundingClientRect().width-60)<(h=h.getBoundingClientRect().width)&&(d=!0),g<(f=f.getBoundingClientRect().width)&&(p=!0)),o.a.createElement("div",{className:"music-bar-wrapper noselect",id:"music-player-controller"},o.a.createElement("div",{className:"react-music-player"},o.a.createElement(ro.a,{ref:function(t){e.rap=t},src:this.getCurrentTrack(),autoPlay:!1,controls:!1,muted:0===i,volume:i,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.skipSong(m)},onError:function(t){return e.songError(t)},preload:"auto"})),o.a.createElement("div",{className:"music-bar-scrub-wrapper"},o.a.createElement("div",{className:"music-bar-scrubber",style:{width:m+"%"}})),o.a.createElement("div",{className:"music-bar-content-wrapper"},o.a.createElement("div",{className:"music-bar-item flexRow left-controls",id:"player-info-wrapper"},o.a.createElement("img",{className:"preview-image",src:Object(G.get)(u,"picture",null),alt:""}),o.a.createElement("div",{className:"preview-text"},o.a.createElement("div",{className:"song-artist"},o.a.createElement("span",{id:"player-artist-info",className:d?"marquee":""},Object(G.get)(u,"artist[0]","NA"))),o.a.createElement("div",{className:"song-title"},o.a.createElement("span",{id:"player-track-info",className:p?"marquee":""},Object(G.get)(u,"title","NA"))))),o.a.createElement("div",{className:"music-bar-item flexRow center-controls"},a?o.a.createElement(la.a,{icon:Ta.p,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}):o.a.createElement(la.a,{icon:Ta.r,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}),o.a.createElement(la.a,{icon:Ta.v,className:"music-bar-icon".concat(n?" disabled":""),onClick:function(){return n?null:e.skipSong(m)}})),o.a.createElement("div",{className:"music-bar-item right-controls"},o.a.createElement("div",{className:"time-display"},o.a.createElement("span",{id:"current-song-time"},Z(c))," \xa0/\xa0 ",o.a.createElement("span",{id:"current-song-duration"},Z(l))," ",o.a.createElement("span",{id:"invis-current-song-time"},m)),o.a.createElement("div",{className:"volume-icon",id:"volume-wrapper"},s&&o.a.createElement(_o,{volume:i,changeVolume:function(t){return e.setVolume(t)},startDrag:function(){return e.toggleVolumeDrag(!0)},endDrag:function(){return e.toggleVolumeDrag(!1)}}),0===i?o.a.createElement(la.a,{icon:Ta.z,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):i<.7?o.a.createElement(la.a,{icon:Ta.y,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):o.a.createElement(la.a,{icon:Ta.A,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}})),o.a.createElement(la.a,{icon:Pa.f,className:"music-bar-icon close-icon",onClick:function(){return e.closePlayer()}}))))}}]),a}(n.Component));var Fo=Object(de.b)((function(e){return{player:e.player,myLocation:e.auth.location,currentTrack:e.auth.location.currentTrack}}),(function(e){return{actions:Object(s.b)({checkIfAdvertisement:tt,skipSong:et,setIsPlaying:Ae,setTrackNumber:De,disconnectPlayer:Qe,playerError:Te},e)}}))(Bo);a(906);$a.initialize();var Ro=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!0},n}return Object(le.a)(a,[{key:"initiateLogin",value:function(e){localStorage.setItem("access-token",e),this.props.actions.auth0setLogin()}},{key:"componentWillMount",value:function(){var e=this;$a.getLock().on("authenticated",(function(t){e.initiateLogin(t.idToken)})),$a.getLock().on("unrecoverable_error",(function(e){console.log("auth0 - unrecoverable_error: ",{err:e})})),$a.getLock().on("authorization_error",(function(e){console.log("auth0 - authorization_error: ",{err:e})})),$a.getLock().checkSession({},(function(t,a){console.log("hit auth0 check session: ",{err:t,data:a}),e.setState({isLoading:!1},(function(){!t&&(null===a||void 0===a?void 0:a.idToken)?e.initiateLogin(a.idToken):(localStorage.getItem("access-token")&&localStorage.getItem("location-jwt")&&$a.logout(),"login_required"===Object(G.get)(t,"code","")&&$a.login(),e.setState({isLoading:!1}))}))})),(Object(G.get)(window,"location.search","").includes("inApp")||localStorage.getItem("inApp"))&&this.props.actions.setInApp(!0),window.ReactNativeWebView&&window.addEventListener("message",(function(e){Object(G.get)(e,"data.data",null);var t=Object(G.get)(e,"data.endpoint",null),a=!!$a.isLoggedIn();switch(t){case"auth":en.send("auth",a);break;case"introLogin":localStorage.setItem("mobileIntroLogin",!0),en.send("auth",a);break;case"login":$a.login(),en.send("login","Login Success");break;case"logout":$a.logout(),en.send("logout","Logout Success");break;default:en.send("default",null)}}))}},{key:"componentDidUpdate",value:function(){$a.isLoggedIn()&&this.state.isLoading&&this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.player,n=t.auth,r=t.inApp,i=Object(G.get)(a,"showPlayer",!1);return o.a.createElement(fe.a,null,o.a.createElement("div",null,Po.map((function(t,a){return o.a.createElement(be.b,{key:a,path:t.path,exact:t.exact,render:function(){var a,s,c;return e.state.isLoading||$a.isLoggedIn()||!t.private||$a.login(),$a.isLoggedIn()||!t.private?o.a.createElement(o.a.Fragment,null,(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.company)&&!(null===n||void 0===n||null===(s=n.user)||void 0===s||null===(c=s.company)||void 0===c?void 0:c.name)?o.a.createElement(Ia.a,{visible:!0,onCancel:e.onCancel,width:900,className:"modal-container",closable:!1,footer:!1},o.a.createElement("div",{className:"signup-modal-title"},"Welcome to ",o.a.createElement("span",{style:{color:"#d04283"}},"ambii")),o.a.createElement(ka,null)):null,o.a.createElement("div",{className:"explore_container"},!r&&o.a.createElement(Ao,{showMenu:"userlogin",route:t.path}),o.a.createElement("div",{className:"contentWrapper".concat(i?" player-visible":"")},t.component()))):o.a.createElement(Za.a,{className:"explore_container"},!r&&o.a.createElement(Ao,{id:"myHeader",showMenu:"landing"}),o.a.createElement("div",{className:"loading-app"},o.a.createElement("div",{className:"loading-app-text"},"Logging Into ",o.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),o.a.createElement(Ut.a,{indicator:qt,spinning:!0,size:"large"})))}})}))))}}]),a}(o.a.Component);var Uo=Object(de.b)((function(e){return{snackbar:e.snackbar,auth:e.auth,player:e.player,inApp:e.auth.inApp}}),(function(e){return{actions:Object(s.b)({auth0setLogin:dt,setInApp:ke},e)}}))(Object(zt.a)(Ro)),Vo=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,initAnalytics:!1,snackbarMessageDuration:3},ha.a.initialize("UA-167385126-1",{siteSpeedSampleRate:100,testMode:!document.location.hostname.includes("business.ambii.io")}),n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.actions.startSockets();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"snackbar.notification",null),Object(G.get)(e,"snackbar.notification",null))||this.openNotification(Object(G.get)(this.props,"snackbar.notification",null)),Object(G.isEqual)(Object(G.get)(this.props,"snackbar.message",null),Object(G.get)(e,"snackbar.message",null))||this.openMessage(Object(G.get)(this.props,"snackbar.message",null))}},{key:"openNotification",value:function(e){var t=this.state.snackbarMessageDuration;console.log("hasNotification: ",e),e&&fo.a.open({message:Object(G.get)(e,"message",""),description:Object(G.get)(e,"description",""),duration:t,onClick:function(){console.log("Notification Clicked!")},className:"snackbar-notification snackbar-type-".concat(Object(G.get)(e,"type",""))}),this.props.actions.setSnackbarNotification(null)}},{key:"openMessage",value:function(e){var t=this.state.snackbarMessageDuration;console.log("hasMessage: ",{hasMessage:e,snackbarMessageDuration:t});var a=Object(G.get)(e,"message","");switch(Object(G.get)(e,"type","")){case"success":St.a.success(a,t);break;case"info":St.a.info(a,t);break;case"warn":St.a.warn(a,t);break;case"error":St.a.error(a,t);break;default:console.log("error in openMessage")}this.props.actions.setSnackbarMessage(null)}},{key:"render",value:function(){var e=this.props.player,t=Object(G.get)(e,"showPlayer",!1);return this.state.isLoading?o.a.createElement("div",{className:"loading-app"},o.a.createElement("div",{className:"loading-app-text"},"Loading ",o.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),o.a.createElement(Ut.a,{indicator:qt,spinning:!0,size:"large"})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Uo,{props:{showMusicPlayer:t}}),t&&o.a.createElement(Fo,null))}}]),a}(o.a.Component);var qo=Object(de.b)((function(e){return{snackbar:e.snackbar,auth:e.auth,player:e.player}}),(function(e){return{actions:Object(s.b)({startSockets:Bt,setSnackbarNotification:Ft,setSnackbarMessage:Rt},e)}}))(Object(zt.a)(Vo)),zo=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(le.a)(a,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this.props,t=e.store,a=e.stripePromise;return o.a.createElement(de.a,{store:t},o.a.createElement("div",null,o.a.createElement(ho.Elements,{stripe:a},o.a.createElement(qo,null))))}}]),a}(n.Component);var Ho=Object(de.b)((function(e){return{auth:e.auth,snackbar:e.snackbar,loader:e.loader}}),(function(e){return{actions:Object(s.b)({},e)}}))(zo),Wo=(a(907),a(416));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Go=se(),Ko=Object(Wo.a)("pk_test_51H0l3xBY2i2h5IOVpoRwxwg9JzYonjA6Eo6CdrAodp27CFNzh4P3VnxN79OamqCtgurRvR2j6ogCmyThe7dFaMgc00mdCVUCVM");"localhost"!==document.location.hostname&&"business-dev.ambii.io"!==document.location.hostname&&(console.log=function(){}),Object(r.render)(o.a.createElement(i.AppContainer,null,o.a.createElement(Ho,{store:Go,stripePromise:Ko})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[424,1,2]]]);
//# sourceMappingURL=main.fe2789f5.chunk.js.map