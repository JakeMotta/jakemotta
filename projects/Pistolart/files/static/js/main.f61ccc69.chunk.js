(this["webpackJsonpambii-business-web"]=this["webpackJsonpambii-business-web"]||[]).push([[0],{219:function(e,t,a){},374:function(e,t,a){},395:function(e,t,a){e.exports=a.p+"static/media/ambii_logo_inverse.188927ed.png"},411:function(e,t,a){e.exports=a(891)},422:function(e,t,a){e.exports=a.p+"static/media/androidBtn.e65a89bc.png"},423:function(e,t,a){e.exports=a.p+"static/media/appleBtn.99f1ed98.png"},424:function(e,t,a){e.exports=a.p+"static/media/appLogo.811d25b4.png"},425:function(e,t,a){e.exports=a.p+"static/media/bg1.069f3dec.png"},426:function(e,t,a){e.exports=a.p+"static/media/bg2.5a06bbee.png"},427:function(e,t,a){e.exports=a.p+"static/media/bg3.9f68fc4b.png"},428:function(e,t,a){e.exports=a.p+"static/media/bg4.815bb5d4.jpg"},429:function(e,t,a){e.exports=a.p+"static/media/bg5.b7d2890a.jpg"},430:function(e,t,a){e.exports=a.p+"static/media/bg6.435f2fc0.jpg"},476:function(e,t){},518:function(e,t,a){},618:function(e,t,a){},619:function(e,t,a){},620:function(e,t,a){},636:function(e,t,a){},815:function(e,t,a){},816:function(e,t,a){},817:function(e,t,a){},821:function(e,t,a){},822:function(e,t,a){},823:function(e,t,a){},824:function(e,t,a){},825:function(e,t,a){},826:function(e,t,a){},827:function(e,t,a){},828:function(e,t,a){},829:function(e,t,a){},873:function(e){e.exports=JSON.parse("{}")},874:function(e,t,a){},875:function(e,t,a){},876:function(e,t,a){},877:function(e,t,a){},878:function(e,t,a){},879:function(e,t,a){},880:function(e,t,a){},882:function(e,t,a){},883:function(e,t,a){},884:function(e,t,a){},887:function(e,t,a){},888:function(e,t,a){},889:function(e,t,a){},890:function(e,t,a){},891:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(5),i=a(259),c=(a(416),a(417),a(14)),s=(a(381),a(261)),l=a(53),u=a(16),d="Welcome",m="Discover",p="Dashboard",g="Schedule",h="General",f="Signed up for web application",b="Previewed a station",v="Started station",y="Updated station preference",E="Swapped to advance station browse",O="Started web player",S="Closed web player",k="Pressed connect button",j="Created Schedule",w="Saved Schedule",N="Closed Schedule",C="Back To Dashboard",I="Viewed on Mobile Device",L="Clicked a button",T="Toggled a station as favorite",P="User signed out of web application",A="button",M="error",D={Electronica:"#44d474","Alternative & Punk":"#d9964a",Rock:"#d64b46",Pop:"#d04283",Classical:"#8046d6",Traditional:"#c178ff",Jazz:"#42c4d0",Soundtrack:"#E6DD5D",Urban:"#191919",Other:"#999999"},x={googleBtn:a(422),iosBtn:a(423),appLogo:a(424),bg1:a(425),bg2:a(426),bg3:a(427),bg4:a(428),bg5:a(429),bg6:a(430)},_=[{title:"Inactive",time:"0"},{title:"Every 15 Minutes",time:"15"},{title:"Every 30 Minutes",time:"30"},{title:"Every Hour",time:"60"},{title:"Every Few Hours",time:"180"}],R={"Popular Today":"The Top Hits of Today","Flattening the Curve":"Battling COVID-19, one song at a time.","Upbeat Energy":"Energetic songs to get the mood flowing.","Laid-back, Low-key.":"Songs for relaxation and chill-out times.","Learning to Grow":"A series for those looking to overcome rough times, through different genres of music.",Decades:"Your home for all decades of music.","Ahead of the Curve":"A series for those who are tomorrow's trendsetters.","Liquid Courage":"Beats for those that are bold and those that are beautiful.","Beats and Beers":"Cheer on your favorite team with these country hits!","Taproom Treasures":"Stripped-down music for the sophisticated drinker.","Flirtatious Friday Night":"She's sitting right there.","Settled-Down Speakeasy":"Jazzy tunes for a sparkilng night.","Dancin' Across the World":"Iresistable, international glimmers of firey fun.","Coffee Curiosity":"A perfect morning moodsetter.","Bookstore Barista":"Quiet jazz for newspapers and novelists.","Classical Cappuccino":"Upscale grandiose through caffine and classical.","Countryside Cafe":"For french toast, syrup, and kickin' up those boots in the morning.","Late Night Study ":"Beats for the studious individual ","Glitz At the Ritz":"Wonder and wow through jazzy band ballads.","Loungeside Lovers":"Ambiance for the low-key days and nights.","Hearthside Hip":"R&B treasures for the late-night bonfire vibes","Travelers Rest":"Soft stripped music to lay down to.","Elegant Entertainment":"Classical masterpieces for the sophisticated traveler.","Tropical Getaway":"A cabana soundtrack for pina coladas and the poolside.","Pep Rally Pop":"Let's get this bread.","Study Beats":"Lo-fi music for the late study nights.","Intelligence through Inspiration":"Ambiance for peaceful reflection and quiet times.","Classical Concentration":"Inspiration through piano, strings, and eras of talent","Developing Brains":"For the little ones.","Academy Alternative":"Alternative hits for those looking to get work done.","Boutique Beats":"Continuous flow and feel-good vibes.","Diamonds Are Forever":"Inspirational classical music for the sophisticated shopper.","Retail R&B":"R&B and pop hits for the casual customer.","Food Court Finds":"Grab a bite to eat with this easy-listening soundtrack!","Girls Night Out":"Empowering women through confident, feel-good beats.","Upscaled Grace":"Elegance through classical masterpieces.","Jukebox of the Ages":"Your home for all decades of music.","Wax and Relax":"Set the mood with the perfect ambiiance.","Hairdresser Hop":"R&B and hip hop hits for the trendsetter.","Nails, Hair, Hips, Heels":"Endless feel-good beats.","Pumpin Metal":"Rock and Metal soundtrack for the heavy lifter.","Persistence Pop":"Keep that grind up.","Pre-Game Pump Up":"Get in your head, get in the ring.","Fire Dancing Fiesta":"High-energy music for the dancers...and for that perfect body.","Heavy Lifting Hype":"Get turnt.","Hamburger Hits":"Quick beats for quick bites.","Barbecue Bash":"Perfect for the backyard and the beer.","Asian Eats":"You don't need a plane ticket.","Taco Truck Temposetter":"Are you going to finish all 10 of those tacos?","Boba Beats":"Passionfruit, peach stars, pearls, and perfection.","Royalty Dining":"Elegnat music for roses and candlelit dinners.","Ethereal Elegance":"Transcend within yourself.","Self-Care Classical":"Classical music to rejuvinate the brain.","Asian Getaway":"Sounds through Japaneese cherry blossoms and night-market eats.","Relaxin' R&B":"Good vibes only.","Hot Spring Hits":"Glimmering hits for feel-good moments.","Working From Home":"Chill beats for ultimate focus and productivity.","New Hobby, New Self":"Cooking, dancing, stretching, reading- with this time, anything is possible.","A Time For Reflection":"Rise above and let serenity flow in this time of unrest.","Go Hard or (Stay) Home":"Quarantine ain't stopping these muscle gains.","Treasured Throwbacks":"Remembering the days before this period of time.","Positive Vibes Only (Singing in the Shower)":"Sing your heart out to these songs of joy and jubilation!"},B={global:["Popular Today"],defaultIndividual:["Working From Home","New Hobby, New Self","A Time For Reflection","Go Hard or (Stay) Home","Treasured Throwbacks","Positive Vibes Only (Singing in the Shower)"],bar:["Liquid Courage","Beats and Beers","Taproom Treasures","Flirtatious Friday Night","Settled-Down Speakeasy","Dancin' Across the World"],cafe:["Coffee Curiosity","Bookstore Barista","Classical Cappuccino","Boba Beats","Countryside Cafe","Late Night Study "],gym:["Pumpin Metal","Persistence Pop","Pre-Game Pump Up","Fire Dancing Fiesta","Heavy Lifting Hype"],hotel:["Glitz At the Ritz","Loungeside Lovers","Hearthside Hip","Travelers Rest","Elegant Entertainment","Tropical Getaway"],other:["Flattening the Curve","Upbeat Energy","Laid-back, Low-key.","Learning to Grow","Decades","Ahead of the Curve"],restaurant:["Hamburger Hits","Barbecue Bash","Asian Eats","Taco Truck Temposetter","Boba Beats","Royalty Dining"],salon:["Girls Night Out","Upscaled Grace","Jukebox of the Ages","Wax and Relax","Hairdresser Hop","Nails, Hair, Hips, Heels"],school:["Pep Rally Pop","Study Beats","Intelligence through Inspiration","Classical Concentration","Developing Brains","Academy Alternative"],spa:["Ethereal Elegance","Tropical Getaway","Self-Care Classical","Asian Getaway","Relaxin' R&B","Hot Spring Hits"],shop:["Boutique Beats","Diamonds Are Forever","Jukebox of the Ages","Retail R&B","Girls Night Out","Food Court Finds"]},F=a(49),U={Slower:{title:"Slower",min:0,max:59,icon:F.e},Slow:{title:"Slow",min:60,max:119,icon:F.g},Moderate:{title:"Moderate",min:120,max:189,icon:F.f},Fast:{title:"Fast",min:190,max:249,icon:F.c},Faster:{title:"Faster",min:250,max:900,icon:F.d}},V={"America/Adak":"-09:00","America/Anchorage":"-08:00","America/Boise":"-06:00","America/Chicago":"-05:00","America/Denver":"-06:00","America/Detroit":"-04:00","America/Indiana/Indianapolis":"-04:00","America/Indiana/Knox":"-05:00","America/Indiana/Marengo":"-04:00","America/Indiana/Petersburg":"-04:00","America/Indiana/Tell_City":"- 05:00","America/Indiana/Vevay":"-04:00","America/Indiana/Vincennes":"-04:00","America/Indiana/Winamac":"-04:00","America/Juneau":"-08:00","America/Kentucky/Louisville":"-04:00","America/Kentucky/Monticello":"-04:00","America/Los_Angeles":"-07:00","America/Menominee":"-05:00","America/Metlakatla":"-08:00","America/New_York":"-04:00","America/Nome":"-08:00","America/North_Dakota/Beulah":"-05:00","America/North_Dakota/Center":"-05:00","America/North_Dakota/New_Salem":"-05:00","America/Phoenix":"-07:00","America/Sitka":"-08:00","America/Yakutat":"-08:00","Pacific/Honolulu":"-10:00"},q="Individual",z={auth:{user:null,jwt:null,location:{},isApple:!1},snackbar:{notification:{},message:{}},loader:{requestInProgress:0},locations:{data:[],count:0,limit:0,skip:0},playlists:{schedules:[]},stations:{topTrack:[],artists:[],tracks:[],playlistList:[],genreList:[],eraList:[],moodList:[],data:[],count:0,skip:0,limit:10},stationPreviews:{genre:[],era:[],mood:[],activeStationPreview:[]},selectedPreviews:{ID:"",track:[]},zones:{data:[],count:0,limit:0,skip:0},schedules:{activeSchedule:null,schedules:[]},player:{locationJWT:null,showPlayer:!1,isPlaying:!1,skipDisabled:!1,trackNumber:0,trackMap:{},playerError:{}},inStoreMessaging:{messages:[]}},G=a(2),W={name:"Explicit",color:"#EA526F"},H=function(e,t){if(!e||!t)return[];var a=[];return e.map((function(e){return a[Object(G.get)(e,t,null)]=e})),a},Y=function(e){return e?"https://random-station-artwork.s3-us-west-2.amazonaws.com/"+Math.abs(e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0))%101+".jpg":""},K=function(){return window.outerWidth<=650},J=function(e){return isNaN(e)?"0:00":Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},Z=function(e){return e>=0&&e<=59?U.Slower:e>=60&&e<=119?U.Slow:e>=120&&e<=189?U.Moderate:e>=190&&e<=249?U.Fast:e>=240&&e<=900?U.Faster:U.Moderate},Q=function(){var e=localStorage.getItem("deviceID");return e||(e="web-"+function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,o=0;o<e;o++)t+=a.charAt(Math.floor(Math.random()*n));return t.toUpperCase()}(10),localStorage.setItem("deviceID",e)),e},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object.assign({},e,Object(u.a)({},t.data));case"SET_USER":return Object.assign({},e,{user:t.data});case"SET_LOCATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},t.data),{},{favoritesMap:H(Object(G.get)(t,"data.favorites",[]),"_id")})});case"UPDATE_STATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{station:t.data})});case"UPDATE_CURRENT_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{currentTrack:t.data})});case"SET_FAVORITES":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{favorites:t.data,favoritesMap:H(Object(G.get)(t,"data",[]),"_id")})});case"SET_EXPLICIT":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{explicit:t.data})});case"SET_PAIRED_DEVICE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{pairedDevice:t.data})});case"SET_LAST_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{lastTrack:t.data})});case"SET_TRACK_SCHEDULE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{trackSchedule:t.data})});case"SET_IS_APPLE":return Object.assign({},e,{isApple:t.data});default:return e}},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INSTORE_MESSAGES":return Object.assign({},e,{messages:t.data});default:return e}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.player,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRACK_MAP":return Object.assign({},e,{trackMap:t.data});case"SET_TRACK_NUMBER":return Object.assign({},e,{trackNumber:t.data});case"SET_IS_PLAYING":return Object.assign({},e,{isPlaying:t.data});case"SET_SKIP_DISABLED":return Object.assign({},e,{skipDisabled:t.data});case"SET_SHOW_PLAYER":return Object.assign({},e,{showPlayer:t.data});case"SET_LOCATION_JWT":return Object.assign({},e,{locationJWT:t.data});case"PLAYER_ERROR":return Object.assign({},e,{playerError:t.data});case"DISCONNECT_PLAYER_SUCCESS":return localStorage.removeItem("location-jwt"),Object.assign({},e,{locationJWT:null});default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.playlists,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYLISTS":return Object.assign([],e,{schedules:t.data});default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.selectedPreviews,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCHEDULE":return Object.assign({},Object(u.a)({},e),{data:null});case"SET_SCHEDULE":return Object.assign({},e,{ID:"",track:[]});case"ACTIVE_SCHEDULE":return Object.assign({},e,{activeSchedule:t.data});default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SNACKBAR_NOTIFICATION":return Object.assign({},e,{notification:t.data});case"SET_SNACKBAR_MESSAGE":return Object.assign({},e,{message:t.data});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z.stations,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PUBLIC_STATIONS_FOR_DISCOVER":return Object.assign({},e,{playlistList:t.data.playlistList,genreList:t.data.genreList,eraList:t.data.eraList,moodList:t.data.moodList});default:return e}},re=Object(c.c)({auth:X,inStoreMessaging:$,player:ee,playlists:te,schedules:ae,snackbar:ne,stations:oe});Object(l.a)();var ie=function(e){var t=[s.a];return Object(c.e)(re,e,Object(c.d)(c.a.apply(void 0,t)))},ce=a(8),se=a(9),le=a(12),ue=a(11),de=a(18),me=a(19),pe=a.n(me),ge=a(32),he=a(43),fe=a(41),be=a(383),ve=a.n(be),ye={API_URL:"https://hola.ambii.io/v2",SOCKET_URL:"https:/hola.ambii.io",APP_TITLE:"Ambii"};function Ee(e,t,a){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(ge.a)(pe.a.mark((function e(t,a,n){var o,r,i,c,s=arguments;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>3&&void 0!==s[3]?s[3]:null,r=s.length>4&&void 0!==s[4]?s[4]:null,i="".concat(ye.API_URL).concat(a).trim(),c={method:t,url:i,headers:{}},null!==o&&(c.headers=o),null!==r&&(c.params=r),"post"!==t&&"put"!==t&&"delete"!==t&&"patch"!==t||(c.data=n),c.headers.Authorization="Bearer "+localStorage.getItem("access-token"),e.abrupt("return",new Promise((function(e,t){ve()(c).then((function(t){e(t)})).catch((function(a){console.log("Caught api error: ",a),"Network Error"===a.message?window.alert(a.message):"The token has expired, please login again!"===Object(G.get)(a,"response.data.message",null)?e(!1):a.response&&401===a.response.status?localStorage.removeItem("access-token"):t(a)}))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Se=function(e){return function(t){t({type:"SET_TRACK_SCHEDULE",data:e})}},ke=function(e){return function(t){t({type:"SET_PAIRED_DEVICE",data:e})}},je=function(e){return function(t){t({type:"SET_LAST_TRACK",data:e})}},we=function(e){return function(t){t({type:"SET_TRACK_MAP",data:e})}},Ne=function(e){return function(t){t({type:"SET_LOCATION",data:e})}},Ce=function(e){return function(t){t({type:"SET_LOCATION_JWT",data:e})}},Ie=function(e){return function(t){t({type:"UPDATE_CURRENT_TRACK",data:e})}},Le=function(e){return function(t){t({type:"PLAYER_ERROR",data:e})}},Te=function(e){return function(t){t({type:"SET_SHOW_PLAYER",data:e})}},Pe=function(e){return function(t){t({type:"SET_IS_PLAYING",data:e})}},Ae=function(e){return function(t){t({type:"SET_SKIP_DISABLED",data:e})}},Me=function(e){return function(t){t({type:"SET_TRACK_NUMBER",data:e})}},De=function(e){return function(t){t({type:"SET_USER",data:e})}},xe=function(e){return function(t){t({type:"SET_PLAYLISTS",data:e})}},_e=a(384),Re=a.n(_e)()(ye.SOCKET_URL),Be="connect-web",Fe="disconnect",Ue="reconnect",Ve="player-paired",qe="player-un-paired",ze="player-disconnected",Ge="player-played",We="player-paused",He="station-updated",Ye="player-called-next",Ke=function(){return function(e){rt(e),it(e),ct(e),st(e),lt(e)}};function Je(){return function(e,t){return new Promise(function(){var a=Object(ge.a)(pe.a.mark((function a(n,o){var r;return pe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r=localStorage.getItem("location-jwt")){a.next=3;break}return a.abrupt("return",n(!1));case 3:Ee("post","/auth/player/disconnect",{locationId:Object(G.get)(t(),"auth.location._id",""),locationJWT:r,deviceID:Q()},{"player-access-token":r}).then(function(){var t=Object(ge.a)(pe.a.mark((function t(a){return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("disconnect: ",a),e(ke(Object(G.get)(a,"data.data.pairedDevice",{}))),e((function(e){e({type:"DISCONNECT_PLAYER_SUCCESS"})})),e(Te(!1))}catch(o){console.log("Caught error on disconnectPlayer: ",o)}n(Object(G.get)(a,"data.data",null));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("disconnectPlayer error: ",e),o(e.response)}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}}function Ze(e){return function(t){return new Promise((function(a){if(!e)return a(!1);Ee("post","/auth/player/connect",e).then(function(){var e=Object(ge.a)(pe.a.mark((function e(n){var o,r,i,c,s,l,u,d;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Object(G.get)(n,"data.data",null),"DEVICE_ALREADY_PAIRED"!==Object(G.get)(o,"data",null)){e.next=5;break}return e.abrupt("return",a("DEVICE_ALREADY_PAIRED"));case 5:console.log("connectPlayer : ",n),r=Object(G.get)(o,"jwt",null),localStorage.setItem("location-jwt",r),i=Object(G.get)(o,"location",{}),c=Object(G.get)(i,"trackSchedule",[]),s=H(Object(G.get)(c,"queue",[]),"isrc"),l=Object(G.get)(i,"currentTrack",null),u=Object(G.get)(i,"currentTrackNumber",0),d=Object(G.get)(c,"queue["+u+"]",l),t(Ne(i)),t(Ce(r)),t(we(s)),t(Me(u)),t(Ie(d)),t(Se(c)),t(Te(!0)),a(o);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("connectPlayer error: ",e),a(!1)}))}))}}function Qe(e){var t=e.jwt,a=e.data;return function(e){return new Promise(function(){var n=Object(ge.a)(pe.a.mark((function n(o){return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t&&a){n.next=3;break}return n.abrupt("return",o(!1));case 3:Ee("post","/auth/player/play-next",a,{"player-access-token":t}).then(function(){var t=Object(ge.a)(pe.a.mark((function t(a){var n,r,i,c,s;return pe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("playNextReq: ",a),!a){t.next=10;break}if(n=Object(G.get)(a,"data.data",{}),r=Object(G.get)(n,"sameStation",!0),"DEVICE_ALREADY_PAIRED"!==Object(G.get)(n,"data","")){t.next=6;break}return t.abrupt("return",o(Object(G.get)(n,"data","")));case 6:r||(i=Object(G.get)(n,"location",{}),c=Object(G.get)(n,"location.trackSchedule",{}),s=H(Object(G.get)(c,"queue",[]),"isrc"),e(Ne(i)),e(we(s)),e(Me(Object(G.get)(i,"currentTrackNumber",0))),e(Se(c))),o(!0),t.next=11;break;case 10:o(!1);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("error: ",e),o(!1)})),n.next=10;break;case 6:n.prev=6,n.t0=n.catch(0),console.log("playNextReq err: ",n.t0),o(!1);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}())}}function Xe(e){var t=e.songCompletion;return function(e,a){return new Promise(function(){var n=Object(ge.a)(pe.a.mark((function n(o){var r,i,c,s,l,u,d,m,p,g;return pe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t||(t="0"),r=Object(G.get)(a(),"auth.location",{}),i=Object(G.get)(a(),"player",{}),e(Ae(!0)),c=Object(G.get)(r,"trackSchedule._id",""),s=Object(G.get)(r,"trackSchedule.queue",[]).length-1,l=Object(G.get)(r,"trackSchedule.queue",[]),u=Object(G.get)(r,"currentTrack",{}),d=Object(G.get)(i,"trackNumber",0),m=null,d+1<=s?(m=l[d+1]||"",d+=1):(m=Object(G.get)(r,"trackSchedule.queue[0]",""),d=0),n.next=14,e(et(m));case 14:return(p=n.sent)&&d!==p&&(d=p),e(je(u)),e(Ie(m)),e(Me(d)),n.next=21,e(Qe({jwt:Object(G.get)(i,"locationJWT",null),data:{locationId:Object(G.get)(r,"_id",null),stationId:Object(G.get)(r,"station._id",null),trackScheduleId:c,nextTrack:m,lastTrack:u,deviceID:Q(),songCompletion:t,currentTrackNumber:d.toString()}}));case 21:if(!(g=n.sent)){n.next=32;break}if(console.log("music bar props: ",a()),"DEVICE_ALREADY_PAIRED"!==g){n.next=30;break}return e(Pe(!1)),e(Ae(!1)),n.next=29,e(Je());case 29:return n.abrupt("return",o(g));case 30:n.next=33;break;case 32:return n.abrupt("return",o(!1));case 33:o(!0),n.next=41;break;case 36:n.prev=36,n.t0=n.catch(0),e(Ae(!1)),console.log("caught callPlayNext err: ",n.t0),o(!1);case 41:case"end":return n.stop()}}),n,null,[[0,36]])})));return function(e){return n.apply(this,arguments)}}())}}function $e(e){return function(t){var a="ADVERT_"===Object(G.get)(e,"isrc","").substring(0,7),n="ISM_"===Object(G.get)(e,"isrc","").substring(0,4);if(a||n)t(Ae(!0));else var o=setTimeout((function(){clearTimeout(o),t(Ae(!1))}),3e3)}}function et(e){return function(t,a){return new Promise((function(t){var n=Object(G.get)(a(),"auth.location",{}),o=Object(G.get)(n,"trackSchedule.queue",[]),r="ADVERT_"===Object(G.get)(e,"isrc","").substring(0,7),i="ISM_"===Object(G.get)(e,"isrc","").substring(0,4);if(r||i)return t(!1);for(var c=0;c<o.length;c++)if(Object(G.get)(o[c],"isrc","")===Object(G.get)(e,"isrc",e))return t(c);t(!1)}))}}var tt=function(){return function(e){Re.removeEventListener(Ve),Re.removeEventListener(qe),Re.removeEventListener(ze),Re.removeEventListener(Ge),Re.removeEventListener(We)}},at=function(){return function(e){Re.on(He,(function(t){e(function(e){return function(t){t({type:"UPDATE_STATION",data:e})}}(t))}))}},nt=function(){return function(e){Re.on(Ye,(function(t){e(Ie(Object(G.get)(t,"track",{})))}))}},ot=function(){return function(e){Re.removeEventListener(He)}},rt=function(e){Re.on(Ve,(function(e){console.log("Player Paired",e)}))},it=function(e){Re.on(qe,(function(e){console.log("Player UnPaired",e)}))},ct=function(e){Re.on(ze,(function(e){console.log("Player Disconnected",e)}))},st=function(e){Re.on(Ge,(function(e){console.log("Player playerPlayed",e)}))},lt=function(e){Re.on(We,(function(e){console.log("Player playerPaused")}))},ut=function(){function e(){Object(ce.a)(this,e)}return Object(se.a)(e,null,[{key:"inApp",value:function(){return window.inApp}},{key:"send",value:function(e,t){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({data:t,endpoint:e}))}},{key:"receive",value:function(e,t){window.ReactNativeWebView&&window.addEventListener("message",(function(a){a.endpoint===e&&t(JSON.parse(a.data))}))}}]),e}();function dt(){return function(e){return new Promise((function(t){Ee("post","/auth/login").then((function(a){console.log("auth0setLogin res: ",a);var n=Object(G.get)(a,"data.data",null),o=Object(G.get)(n,"defaultLocation",{});if("apple@ambii.io"===Object(G.get)(n,"user.email","").toLowerCase()&&e(function(e){return function(t){t({type:"SET_IS_APPLE",data:e})}}(!0)),e(function(e){return function(t){t({type:"LOGIN_SUCCESS",data:e})}}(n)),e(De(Object(G.get)(n,"user",{}))),e(Ne(o)),Q(),ut.inApp()&&(null===o||void 0===o?void 0:o.token)&&ut.send("pairCode",null===o||void 0===o?void 0:o.token),Object(G.get)(o,"pairedDevice.uniqueId",null)===Q()){var r={token:Object(G.get)(o,"token",""),deviceName:"web",uniqueId:Q(),deviceBrand:"web",override:!1};e(Ze(r))}t(a.data)})).catch((function(e){console.log("auth0setLogin error",e),t(!1)}))}))}}function mt(e){var t=e.id,a=e.email,n=e.name;return function(e){Ee("post","/public/create-new-mix-max-contact",{id:t,email:a,name:n,groupName:"Signed Up Users"})}}function pt(e){return function(t){return new Promise((function(a,n){t((function(e){e({type:"LOADER_SHOW"})})),Ee("post","/auth/sign-up",e).then((function(e){var n=Object(G.get)(e,"data.data");Object(G.get)(e,"data.success",!1)&&(t(function(e){return function(t){t({type:"SIGNUP_SUCCESS",data:e})}}(n)),t(De(Object(G.get)(n,"user",{}))),t(Ne(Object(G.get)(n,"defaultLocation",{})))),a(e.data)})).catch((function(e){var a=Object(G.get)(e,"response","");t(function(e){return function(t){t({type:"SIGNUP_FAILED",error:e})}}(a)),n(a)})).finally((function(){t((function(e){e({type:"LOADER_HIDE"})}))}))}))}}var gt=a(77);function ht(e){var t=e.locationId,a=e.stationId,n=e.favorites;return function(e){return new Promise((function(o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)&&!t||!a||!n)return o(!1);Ee("post","/api/location/".concat(t,"/toggleFavorite/"),{locationId:t,stationId:a},r).then((function(t){var a,r=Object(G.get)(t,"data.data.station",{}),i=Object(G.get)(t,"data.data.type",{}),c=Object(gt.a)(n);if("remove"===i)for(var s=0;s<c.length;s++)c[s]._id===r&&c.splice(s,1);else c.push(r);e((a=c,function(e){e({type:"SET_FAVORITES",data:a})})),o(!0)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),o(!0)}))}))}}function ft(e){var t=e.locationId,a=e.currentTrack;return function(e,n){return new Promise((function(o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)&&!t||!a)return o(!1);var i=Object(G.get)(n(),"auth.location.explicitAllowed",!1);Ee("post","/api/location/".concat(t,"/toggleExplicit/"),{locationId:t,currentTrack:a},r).then((function(t){console.log("toggleExplicit: ",t);var a=Object(G.get)(t,"data.data.location",{}),n=Object(G.get)(a,"trackSchedule",{}),r=H(Object(G.get)(n,"queue",[]),"isrc"),i=Object(G.get)(a,"explicitAllowed",!1),c=Object(G.get)(a,"lastTrack",null);e(function(e){return function(t){t({type:"SET_EXPLICIT",data:e})}}(i)),e(we(r)),e(Se(n)),e(Me(0)),e(je(c)),o(i)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),o(i)}))}))}}function bt(e){return function(t){return new Promise((function(a,n){var o={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(o,"access-token",!1)||!e)return a(!1);Ee("get","/api/location/"+e,null,o).then((function(e){console.log("getStation: ",e),t(Ne(Object(G.get)(e,"data.data",null))),a(e)})).catch((function(e){console.log("getStation err: ",e),n(e)}))}))}}function vt(){return function(e){return new Promise((function(t,a){Ee("get","/public/station").then((function(a){var n=Object(G.get)(a,"data.data",{}),o={eraList:[],genreList:[],moodList:[],tempoList:[],playlistList:[]};Object(G.get)(n,"playlistList",[]).forEach((function(e){e.track.length>0&&o.playlistList.push(e)})),e(function(e){return function(t){t({type:"GET_PUBLIC_STATIONS_FOR_DISCOVER",data:e})}}(o)),t(o)})).catch((function(e){console.log("getDiscoverPulicStations error in action ",e),a(e)}))}))}}function yt(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!e)return t(!1);Object(G.get)(a,"access-token",!1)?Ee("get","/api/station/".concat(e),null,a).then((function(e){t(Object(G.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)})):Ee("get","/public/station/".concat(e),null,a).then((function(e){t(Object(G.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)}))}))}}function Et(e,t){return function(a){return new Promise((function(n,o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)&&!e||!t)return n(!1);Ee("post","/api/company/".concat(e,"/station/").concat(t),null,r).then((function(e){var t=Object(G.get)(e,"data.data",{}),o=Object(G.get)(t,"trackSchedule",{}),r=H(Object(G.get)(o,"queue",[]),"isrc");a(Ne(t)),a(we(r));var i=Object(G.get)(o,"queue[0]",Object(G.get)(t,"currentTrack",{}));a(Se(o)),a(Ie(i)),a(Me(0)),n(t)})).catch((function(e){console.log("Error :",e),o(e.response)}))}))}}var Ot=a(892);function St(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(a,"access-token",!1)||!e)return t(!1);Ee("post","/api/company/"+e+"/createSchedule",null,a).then((function(e){console.log("Create Schedule Res!",e),t(e.data)})).catch((function(e){console.log("createSchedule error",e.response),Ot.a.error(Object(G.get)(e,"response.message","Could not create schedule!")),t(!1)}))}))}}function kt(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(a,"access-token",!1)||!e)return t(!1);Ee("post","/api/company/"+e+"/getSchedule",null,a).then((function(e){console.log("Get Schedule Res!",e),t(e.data)})).catch((function(e){console.log("getSchedule error",e.response),Ot.a.error(Object(G.get)(e,"response.message","Could not find schedule!")),t(!1)}))}))}}function jt(e){return function(t){return new Promise((function(a){var n;t((n=e,function(e){e({type:"ACTIVE_SCHEDULE",data:n})})),a(!0)}))}}function wt(e){var t=e.companyId,a=e.scheduleId,n=e.name,o=e.stations;return function(e){return new Promise((function(r){var i={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(i,"access-token",!1)||!t||!a||!n||!o)return r(!1);Ee("post","/api/company/"+t+"/schedule",{scheduleId:a,name:n,stations:o},i).then((function(t){var a,n=Object(G.get)(t,"data",{});console.log("create playlist res in action ",t),e((a=n,function(e){e({type:"SET_SCHEDULE",data:a})})),r(n)})).catch((function(e){console.log("setSchedule error",e.response),Ot.a.error(Object(G.get)(e,"response.message","cannot find artist or track")),r(!1)}))}))}}function Nt(e){var t=e.companyId;return function(e){return new Promise((function(a){var n={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(n,"access-token",!1)||!t)return a(!1);Ee("get","/api/company/"+t+"/getSchedules",null,n).then((function(t){console.log("getMyPlaylists res: ",t);var n=Object(G.get)(t,"data.data.schedules",[]);e(xe(n)),a(!0)})).catch((function(e){console.log("getMyPlaylists error",e.response),a(!1)}))}))}}function Ct(e){var t=e.companyId,a=e.scheduleId;return function(e){return new Promise((function(n,o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a)return n(!1);Ee("post","/api/company/"+t+"/assignSchedule/"+a,{companyId:t,scheduleId:a},r).then((function(t){console.log("assignSchedule: ",t);var a=Object(G.get)(t,"data.data",!1);if(a){var o=Object(G.get)(a,"trackSchedule",{}),r=H(Object(G.get)(o,"queue",[]),"isrc");e(Ne(a)),e(we(r));var i=Object(G.get)(o,"queue[0]",Object(G.get)(a,"currentTrack",{}));e(Se(o)),e(Ie(i)),e(Me(0))}else e(_t({message:"Schedule is already playing!",type:"info"}));n(!0)})).catch((function(e){console.log("assignSchedule error:",e),n(!1)}))}))}}function It(e){var t=e.companyId,a=e.scheduleId;return function(e,n){return new Promise((function(o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a)return o(!1);Ee("post","/api/company/"+t+"/deleteSchedule/"+a,{companyId:t,scheduleId:a},r).then((function(t){console.log("deleteSchedule: ",t);var a=Object(G.get)(t,"data.data._id",null);if(a){for(var r=Object(gt.a)(Object(G.get)(n(),"playlists.schedules",[])),i=0;i<r.length;i++)Object(G.get)(r[i],"_id","")===a&&r.splice(i,1);e(xe(r))}o(!0)})).catch((function(e){console.log("deleteSchedule error:",e),o(!1)}))}))}}function Lt(e){var t=e.companyId,a=e.locationId;return function(e){return new Promise((function(n){var o={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(o,"access-token",!1)||!t||!a)return n(!1);Ee("post","/public/listMessages",{companyId:t,locationId:a},o).then((function(t){var a;console.log("getMessages res",t),e((a=Object(G.get)(t,"data.data",[]),function(e){e({type:"SET_INSTORE_MESSAGES",data:a})})),n(!0)})).catch((function(e){console.log("getMessages error",e),n(!1)}))}))}}function Tt(e){var t=e.companyId,a=e.locationId,n=e.title,o=e.voice,r=e.language,i=e.message,c=e.frequency;return function(e){return new Promise((function(e,s){var l={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(l,"access-token",!1)||!n||!i)return e(!1);Ee("post","/public/createMessagingFile",{companyId:t,locationId:a,title:n,voice:o,language:r,message:i,frequency:c},l).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(e){s(Object(G.get)(e,"response",e))}))}))}}function Pt(e){var t=e.companyId,a=e.locationId,n=e.id;return function(e){return new Promise((function(e,o){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a||!n)return e(!1);Ee("post","/public/deleteMessagingFile",{companyId:t,locationId:a,id:n},r).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(e){o(Object(G.get)(e,"response",e))}))}))}}function At(e){var t=e.companyId,a=e.locationId,n=e.id,o=e.frequency;return function(e){return new Promise((function(e){var r={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(r,"access-token",!1)||!t||!a||!n||!o)return e(!1);Ee("post","/public/changeMessagingFileFrequency",{companyId:t,locationId:a,id:n,frequency:o},r).then((function(t){e(Object(G.get)(t,"data",!1))})).catch((function(t){console.log("updateFrequency error: ",t),e(!1)}))}))}}function Mt(){return function(e){return new Promise((function(e){var t={"access-token":localStorage.getItem("access-token")};if(!Object(G.get)(t,"access-token",!1))return e(!1);Ee("get","/public/listVoices",null,t).then((function(t){e(Object(G.get)(t,"data.data",[]))})).catch((function(t){console.log("getVoiceData error: ",t),e(!1)}))}))}}function Dt(){return function(e){e((function(e){Re.on("connect",(function(){console.log("Socket Connected")}))})),e((function(e){Re.on(Fe,(function(){console.log("Socket Disconnected"),e(_t({message:"Connection Lost",type:"warn"}))}))})),e((function(e){Re.on(Ue,(function(){console.log("Socket Reconnected"),e(_t({message:"Reconnected",type:"success"}))}))}))}}function xt(e){return function(t){t(function(e){return function(t){t({type:"SET_SNACKBAR_NOTIFICATION",data:e})}}(e))}}function _t(e){return function(t){t(function(e){return function(t){t({type:"SET_SNACKBAR_MESSAGE",data:e})}}(e))}}var Rt=a(893),Bt=a(15),Ft=o.a.createElement(Bt.a,{type:"loading",style:{fontSize:24,color:"#D04283"},spin:!0}),Ut=a(82),Vt=(a(518),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(se.a)(a,[{key:"render",value:function(){return this.props.auth0.isAuthenticated&&this.props.auth.user&&this.props.history.push("/nowPlaying"),o.a.createElement("div",{style:{width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center"}},o.a.createElement(Rt.a,{indicator:Ft,spinning:!0}))}}]),a}(n.Component));var qt=Object(de.b)((function(e){return{auth:e.auth}}),(function(e){return{actions:Object(c.b)({},e)}}))(Object(fe.f)(Object(Ut.a)(Vt))),zt=a(387),Gt=a(898),Wt=(a(219),Gt.a.Item),Ht=window.google,Yt=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).getLocation=Object(ge.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation;case 2:e.sent.getCurrentPosition((function(e){e.coords?n.setState({myLocation:{lng:e.coords.longitude,lat:e.coords.latitude}}):Ot.a.info("location permission not granted")}));case 4:case"end":return e.stop()}}),e)}))),n.onSuggestSelect=function(){var e=Object(ge.a)(pe.a.mark((function e(t){var a,o,r,i,c,s,l,d,m,p;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.gmaps&&(t.gmaps.address_components.forEach((function(e){var t=e.types;t.indexOf("locality")>-1&&(r=e.long_name),(t.indexOf("sublocality_level_1")>-1||t.indexOf("route")>-1||t.indexOf("administrative_area_level_2")>-1)&&(a=e.long_name),t.indexOf("sublocality_level_2")>-1&&(o=e.long_name),t.indexOf("administrative_area_level_1")>-1&&(i=e.long_name),t.indexOf("postal_code")>-1&&(c=e.long_name),(t.indexOf("country")>-1||t.indexOf("political")>-1)&&(s=e.long_name)})),l=Intl.DateTimeFormat().resolvedOptions().timeZone,d=Object(G.get)(t,"location.lng",""),m=Object(G.get)(t,"location.lat",""),p=Object(u.a)(Object(u.a)({},n.props.userData),{},{name:Object(G.get)(t,"gmaps.name",t.label),addressLineOne:a,addressLineTwo:o,city:r,state:i,postalCode:c,country:s,timezone:l,cords:[d,m],companySearch:!0}),n.setState({userData:p},(function(){Object(G.get)(n.state,"userData.addressLineOne",!1)&&Object(G.get)(n.state,"userData.postalCode",!1)&&Object(G.get)(n.state,"userData.city",!1)&&Object(G.get)(n.state,"userData.state",!1)&&Object(G.get)(n.state,"userData.timezone",!1)?n.props.onSumbit(p):(p.missingData=!0,n.setState({userData:p},(function(){Ot.a.error("Some required data is missing. Please fill out the below fields.",5),n.props.onSumbit(p)})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={address:"",userData:{name:"",addressLineOne:"",addressLineTwo:"",city:"",state:"",postalCode:"",cords:[]},myLocation:{lng:0,lat:0}},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.myLocation;return o.a.createElement(Gt.a,{className:"auto-complete-form"},o.a.createElement(Wt,{className:"form-item"},t("userData",{rules:[{required:!0,message:"Please input Company name or address."}]})(o.a.createElement(zt.a,{ref:function(t){return e._geoSuggest=t},onChange:function(e){return console.log(e)},placeholder:"Ambii Inc. 123 Main St",onSuggestSelect:this.onSuggestSelect,location:new Ht.maps.LatLng(a.lat,a.lng),radius:20,country:"us"}))))}}]),a}(n.Component);var Kt=Gt.a.create()(Yt),Jt=Object(fe.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(c.b)({},e)}}))(Kt)),Zt=a(405),Qt=a(903),Xt=a(66),$t=Gt.a.Item,ea=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){console.log(e),n.props.form.validateFieldsAndScroll((function(e,t){console.log("vals: ",t);var a=n.checkIfValidTimezone(Object(G.get)(t,"timezone",""));!e&&a?n.setState({isLoading:!0},(function(){var e=Object(u.a)(Object(u.a)(Object(u.a)({},n.props.userData),n.state.userData),{},{name:Object(G.get)(t,"name","").toString(),addressLineOne:Object(G.get)(t,"addressLineOne","").toString(),addressLineTwo:Object(G.get)(t,"addressLineTwo","").toString(),city:Object(G.get)(t,"city","").toString(),state:Object(G.get)(t,"state","").toString(),postalCode:Object(G.get)(t,"postalCode","").toString(),country:Object(G.get)(t,"country","United States").toString(),cords:Object(G.get)(t,"cords",[]),timezone:Object(G.get)(t,"timezone",Intl.DateTimeFormat().resolvedOptions().timeZone)});n.props.onSumbit(e)})):a?e?Ot.a.error("One or more fields has an error"):Ot.a.error("An error occurred"):Ot.a.error("Invalid timezone selection")}))},n.onSearch=function(e){var t=Object.keys(V),a=t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}));n.setState({selectedTimezone:e,timezoneRes:e.length<=0?t:a})},n.onSelect=function(e){n.setState({selectedTimezone:e})},n.state={address:"",dropdownError:!1,selectedTimezone:"",timezoneData:{},timezones:[],timezoneRes:[],userData:{name:Object(G.get)(n.props,"userData.name",""),addressLineOne:Object(G.get)(n.props,"userData.addressLineOne",""),addressLineTwo:Object(G.get)(n.props,"userData.addressLineTwo",""),city:Object(G.get)(n.props,"userData.city",""),country:Object(G.get)(n.props,"userData.country","United States"),state:Object(G.get)(n.props,"userData.state",""),cords:Object(G.get)(n.props,"userData.cords",[]),postalCode:Object(G.get)(n.props,"userData.postalCode",""),timezone:Object(G.get)(n.props,"userData.timezone","")}},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=[];Object.keys(V).forEach((function(t){e.push(t)}));var t=Intl.DateTimeFormat().resolvedOptions().timeZone;this.setState({timezoneRes:e,selectedTimezone:t})}},{key:"checkIfValidTimezone",value:function(e){return!!e&&!!V[e]}},{key:"render",value:function(){var e=this,t=this.state,a=t.timezoneRes,n=t.selectedTimezone,r=this.props.form.getFieldDecorator;return o.a.createElement(Gt.a,{hideRequiredMark:!0,onSubmit:this.onSubmit},o.a.createElement("p",{style:{float:"right"}},"* Indicates a required field "),o.a.createElement($t,{className:"form-item"},r("name",{rules:[{required:!0,message:"Please input your company name"}],initialValue:this.state.userData.name})(o.a.createElement(Zt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Company Name"}))),o.a.createElement($t,{className:"form-item"},r("addressLineOne",{rules:[{required:!0,message:"Please input your Address"}],initialValue:this.state.userData.addressLineOne})(o.a.createElement(Zt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Address Line 1"}))),o.a.createElement($t,{className:"form-item"},r("addressLineTwo",{initialValue:this.state.userData.addressLineTwo})(o.a.createElement(Zt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"Enter Address Line 2"}))),o.a.createElement($t,{className:"form-item"},r("city",{rules:[{required:!0,message:"Please input City"}],initialValue:this.state.userData.city})(o.a.createElement(Zt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter City"}))),o.a.createElement($t,{className:"form-item"},r("state",{rules:[{required:!0,message:"Please input your state"}],initialValue:this.state.userData.state})(o.a.createElement(Zt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter State"}))),o.a.createElement($t,{className:"form-item"},r("postalCode",{rules:[{required:!0,message:"Please input your Postal Code"}],initialValue:this.state.userData.postalCode})(o.a.createElement(Zt.a,{type:"number",onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Postal Code"}))),o.a.createElement($t,{className:"form-item"},r("timezone",{rules:[{required:!0,message:"Please input your location's timezone"}],initialValue:n})(o.a.createElement(Qt.a,{placeholder:"* Enter Location Timezone",dataSource:a,style:{width:"100%"},onSelect:function(t){return e.onSelect(t)},onSearch:function(t){return e.onSearch(t)}}))),o.a.createElement(Xt.a,{style:{float:"right"},type:"primary",onClick:function(){return e.onSubmit()}},"Confirm Address"))}}]),a}(n.Component);var ta=Gt.a.create()(ea),aa=Object(fe.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(c.b)({},e)}}))(ta)),na=a(268),oa=a(899),ra=a(901),ia=a(6),ca=(a(314),a(618),na.a.Option),sa=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){var t=n.state,a=t.countryCode,o=t.businessType;e.preventDefault();var r=o.toLowerCase()!=="Select Business Type".toLowerCase(),i=Object(G.get)(n.props,"userData.userType","company");n.props.form.validateFieldsAndScroll((function(e,t){if(Object.keys(e||[]).length<=0&&("company"!==i||r)){var c,s,l=Object(u.a)(Object(u.a)({},n.props.userData),{},{firstName:null!==(c=t.firstName)&&void 0!==c?c:"",lastName:null!==(s=t.lastName)&&void 0!==s?s:"",phoneNumber:a.concat(n.parsePhoneNumber(Object(G.get)(t,"phone","234567890"))),businessType:"individual"===i?"other":o});"individual"===i&&(Object(G.get)(n.props,"userData.name",null)||(l.name="Individual"),Object(G.get)(n.props,"userData.addressLineOne",null)||(l.addressLineOne=""),Object(G.get)(n.props,"userData.addressLineTwo",null)||(l.addressLineTwo=""),Object(G.get)(n.props,"userData.city",null)||(l.city=""),Object(G.get)(n.props,"userData.state",null)||(l.state=""),Object(G.get)(n.props,"userData.postalCode",null)||(l.postalCode=""),Object(G.get)(n.props,"userData.timezone",null)||(l.timezone=""),Object(G.get)(n.props,"userData.cords",null)||(l.cords=[])),n.props.onSumbit(l)}else r||n.setState({dropdownError:!0})}))},n.state={businessType:"Select Business Type",dropdownError:!1,countryCode:"1"},n}return Object(se.a)(a,[{key:"menu",value:function(){var e=this;return o.a.createElement(oa.a,{onClick:function(t){return e.handleMenuClick(t)},id:"company-info-dropdown-menu"},o.a.createElement(oa.a.Item,{key:"bar"},"Bar"),o.a.createElement(oa.a.Item,{key:"cafe"},"Cafe"),o.a.createElement(oa.a.Item,{key:"gym"},"Gym"),o.a.createElement(oa.a.Item,{key:"hotel"},"Hotel"),o.a.createElement(oa.a.Item,{key:"other"},"Other"),o.a.createElement(oa.a.Item,{key:"restaurant"},"Restaurant"),o.a.createElement(oa.a.Item,{key:"salon"},"Salon"),o.a.createElement(oa.a.Item,{key:"school"},"School"),o.a.createElement(oa.a.Item,{key:"spa"},"Spa"),o.a.createElement(oa.a.Item,{key:"shop"},"Shop"))}},{key:"handleMenuClick",value:function(e){this.setState({businessType:e.key,dropdownError:!1})}},{key:"parsePhoneNumber",value:function(e){return e.replace(/\D/g,"")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.businessType,r=a.dropdownError,i=t("prefix",{initialValue:a.countryCode})(o.a.createElement(na.a,{style:{width:70,borderRight:"1px solid #d9d9d9"}},o.a.createElement(ca,{value:"1"},"+1")));return o.a.createElement(Gt.a,{hideRequiredMark:!0,onSubmit:this.onSubmit,className:"company-info-form"},"company"===Object(G.get)(this.props,"userData.userType","company")&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Gt.a.Item,{className:"form-item no-margin",label:"First Name:"},t("firstName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your first name!"}]})(o.a.createElement(Zt.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter First Name"}))),o.a.createElement(Gt.a.Item,{className:"form-item no-margin",label:"Last Name:"},t("lastName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your last name!"}]})(o.a.createElement(Zt.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter Last Name"}))),o.a.createElement(Gt.a.Item,{label:"Phone"},t("phone",{rules:[{required:!0,message:"Please input your phone number!",min:10,pattern:/^[0-9 ()-]*$/}]})(o.a.createElement(Zt.a,{addonBefore:i,placeholder:"Phone Number"}))),o.a.createElement(Gt.a.Item,{label:"Type"},o.a.createElement(ra.a,{overlay:this.menu(),trigger:["click"],className:r?"button-error":""},o.a.createElement(Xt.a,{style:{textTransform:"capitalize"}},n," ",o.a.createElement(ia.a,{icon:F.a,style:{marginLeft:"5px"}}))))),o.a.createElement(Xt.a,{style:{float:"right"},type:"primary",onClick:function(t){return e.onSubmit(t)}},"Continue"))}}]),a}(n.Component);var la=Gt.a.create()(sa),ua=Object(fe.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(c.b)({},e)}}))(la)),da=a(902),ma=a(147),pa=function(e){var t=e.category,a=e.action,n=e.value,o=e.label;ma.a.event({category:t,action:a,value:n?parseInt(n):null,label:o})},ga=function(){ma.a.pageview(window.location.pathname+window.location.search)},ha=function(e){ma.a.modalview(e)},fa=da.a.Step,ba=[{key:"Company"},{key:"Contact Info"}],va=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).next=function(e){if(e){var t=Object(G.get)(e,"missingData",!1);t&&delete e.missingData,n.setState({current:t?n.state.current:n.state.current+1,userData:e,steps:ba,companySearch:!t&&n.state.companySearch})}n.state.current===n.state.steps.length-1&&n.signUpSubmit(e)},n.signUpSubmit=function(e){n.setState({isLoading:!0},(function(){e?(delete e.missingData,delete e.companySearch,n.props.actions.signUp(e).then((function(t){n.props.actions.mixMaxRegister({id:Object(G.get)(t,"data.user._id",""),email:Object(G.get)(e,"email",""),name:Object(G.get)(e,"firstName","Ambii")+" "+Object(G.get)(e,"lastName","User")}),n.setState({isLoading:!1}),t.success&&(pa({category:d,action:f,value:Object(G.get)(e,"email","")}),n.props.history.push("/"))})).catch((function(e){pa({category:d,action:f,value:e,label:M}),n.setState({isLoading:!1,current:0}),Ot.a.error(Object(G.get)(e,"userData.message","Something went wrong. Please try again"))}))):(n.setState({isLoading:!1}),Ot.a.error("Fields are missing"))}))},n.prev=function(){n.setState({current:n.state.current-1})},n.state={isLoading:!1,current:0,companySearch:!0,steps:ba,userData:{}},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){ga()}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.steps,r=t.userData,i=t.isLoading,c=t.companySearch;return o.a.createElement(Rt.a,{indicator:Ft,spinning:i},o.a.createElement("div",{className:"signup-modal-subtitle"},"Let's set up your first location!"),o.a.createElement("div",{className:"signUp-container"},a>=0&&o.a.createElement(da.a,{className:"steps",progressDot:!0,current:a,style:{textAlign:"justify"}},n.map((function(e){return o.a.createElement(fa,{key:e.key,title:e.key})}))),{0:c?o.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter business name or address"):null,1:o.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter your contact information")}[a],o.a.createElement("div",{className:"form_container"},{0:c?o.a.createElement(Jt,{onSumbit:this.next,userData:r}):o.a.createElement(aa,{onSumbit:this.next,userData:r}),1:o.a.createElement(ua,{onSumbit:this.next,userData:r})}[a],o.a.createElement("div",{className:"button_row",style:{float:"right"}},!i&&a>0&&o.a.createElement(Xt.a,{onClick:function(){return e.prev()},style:{marginRight:"10px"}},"Previous"),c&&0===a?o.a.createElement(Xt.a,{onClick:function(){return e.setState({companySearch:!1})}},"Manually Enter Company"):null,c||0!==a?null:o.a.createElement(Xt.a,{onClick:function(){return e.setState({companySearch:!0})},style:{marginRight:"10px"}},"Search Company")))))}}]),a}(n.Component);var ya=Gt.a.create()(va),Ea=Object(fe.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(c.b)({signUp:pt,mixMaxRegister:mt},e)}}))(ya)),Oa=(a(619),Gt.a.Item),Sa=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e))._onLogin=function(){n.props.form.validateFieldsAndScroll((function(e,t){e?Ot.a.error("Fields Required"):n.setState({isLoading:!0},(function(){t.email,t.password}))}))},n.state={isLoading:!1,isLogin:!1,userData:{email:"",password:""}},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){ga(),localStorage.getItem("access-token")&&this.props.history.push("/nowPlaying")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return o.a.createElement(Rt.a,{indicator:Ft,spinning:this.state.isLoading},o.a.createElement("div",{className:"form-container"},o.a.createElement(Gt.a,{className:"form-wrapper",hideRequiredMark:!0,onSubmit:this._onLogin},o.a.createElement(Oa,{className:"form-item no-margin"},t("email",{rules:[{type:"email",message:"The input is not a valid Email!"},{required:!0,message:"Please input your Email!"}]})(o.a.createElement(Zt.a,{onPressEnter:function(){e._onLogin()},placeholder:"Email"}))),o.a.createElement(Oa,{className:"form-item"},t("password",{rules:[{required:!0,message:"Please input your password!"}]})(o.a.createElement(Zt.a.Password,{onPressEnter:function(){e._onLogin()},placeholder:"Password"}))),o.a.createElement(Xt.a,{className:"login-btn",block:!0,type:"primary",onClick:function(){return e.props.auth0.loginWithRedirect()}},"Login"))))}}]),a}(n.Component);var ka=Gt.a.create()(Sa),ja=(Object(fe.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(c.b)({},e)}}))(Object(Ut.a)(ka))),a(620),function(e){var t=e.token,a=e.fontSize;return o.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},t?t.split("").map((function(e,t){return o.a.createElement("div",{key:t,className:"token-character"},o.a.createElement("p",{style:{fontWeight:"bold",color:"#2A2A2A",fontSize:a||"28px",margin:"0"}},e))})):null)}),wa=a(900),Na=a(895),Ca=a(37),Ia=a(22),La=a(399);function Ta(){return(Ta=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Pa(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var Aa=o.a.createElement("style",null,".st0{fill:url(#SVGID_1_)}.st1{fill:url(#SVGID_2_)}.st2{fill:url(#SVGID_3_)}.st3{fill:url(#SVGID_4_)}"),Ma=o.a.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",y1:112.094,x2:261.746,y2:112.094},o.a.createElement("stop",{offset:0,stopColor:"#63be6b"}),o.a.createElement("stop",{offset:.506,stopColor:"#5bbc6a"}),o.a.createElement("stop",{offset:1,stopColor:"#4ab96a"})),Da=o.a.createElement("path",{className:"st0",d:"M261.7 142.3L15 1.3C11.9-.5 8-.4 5 1.4c-3.1 1.8-5 5-5 8.6 0 0 .1 13 .2 34.4l179.7 179.7 81.8-81.8z"}),xa=o.a.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:.152,y1:223.393,x2:179.896,y2:223.393},o.a.createElement("stop",{offset:0,stopColor:"#3ec6f2"}),o.a.createElement("stop",{offset:1,stopColor:"#45afe3"})),_a=o.a.createElement("path",{className:"st1",d:"M.2 44.4C.5 121.6 1.4 309 1.8 402.3L180 224.1.2 44.4z"}),Ra=o.a.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:179.896,y1:229.464,x2:407.976,y2:229.464},o.a.createElement("stop",{offset:0,stopColor:"#faa51a"}),o.a.createElement("stop",{offset:.387,stopColor:"#fab716"}),o.a.createElement("stop",{offset:.741,stopColor:"#fac412"}),o.a.createElement("stop",{offset:1,stopColor:"#fac80f"})),Ba=o.a.createElement("path",{className:"st2",d:"M402.9 223l-141.2-80.7-81.9 81.8 92.4 92.4L403 240.3c3.1-1.8 5-5.1 5-8.6 0-3.6-2-6.9-5.1-8.7z"}),Fa=o.a.createElement("linearGradient",{id:"SVGID_4_",gradientUnits:"userSpaceOnUse",x1:1.744,y1:345.521,x2:272.296,y2:345.521},o.a.createElement("stop",{offset:0,stopColor:"#ec3b50"}),o.a.createElement("stop",{offset:1,stopColor:"#e7515b"})),Ua=o.a.createElement("path",{className:"st3",d:"M1.7 402.3c.2 33.3.3 54.6.3 54.6 0 3.6 1.9 6.9 5 8.6 3.1 1.8 6.9 1.8 10 0l255.3-148.9-92.4-92.4L1.7 402.3z"}),Va=function(e){var t=e.svgRef,a=e.title,n=Pa(e,["svgRef","title"]);return o.a.createElement("svg",Ta({id:"Layer_1",viewBox:"0 0 408 466.9",width:2185,height:2500,ref:t},n),a?o.a.createElement("title",null,a):null,Aa,Ma,Da,xa,_a,Ra,Ba,Fa,Ua)},qa=o.a.forwardRef((function(e,t){return o.a.createElement(Va,Ta({svgRef:t},e))})),za=(a.p,a(395)),Ga=a.n(za),Wa=a(396),Ha=a.n(Wa),Ya=a(894),Ka=(a(636),function(e){var t=e.title,a=e.color;return o.a.createElement("div",{className:"station-tag",style:{backgroundColor:a||null}},t)}),Ja=a(258),Za=a.n(Ja),Qa=function(){function e(){Object(ce.a)(this,e)}return Object(se.a)(e,null,[{key:"initialize",value:function(){window.lock=new Za.a("U6LfUnEpkLYrtnZ2u3IAuSDlraBebeGP","auth.ambii.io",{configurationBaseUrl:"https://ambii.us.auth0.com",autoclose:!0,autofocus:!0,closable:!0,auth:{redirectUrl:window.location.origin,responseType:"id_token",sso:!0},theme:{logo:"".concat(window.location.origin,"/icon.png"),primaryColor:"#d04283"},languageDictionary:{title:"",signUpTitle:"",forgotPasswordTitle:""},additionalSignUpFields:[]})}},{key:"getLock",value:function(){return window.lock}},{key:"isLoggedIn",value:function(){return localStorage.getItem("access-token")}},{key:"login",value:function(){window.lock.show()}},{key:"signUp",value:function(){window.lock.show({initialScreen:"signUp"})}},{key:"logout",value:function(){localStorage.removeItem("access-token"),localStorage.removeItem("location-jwt"),window.lock.logout()}}]),e}(),Xa=Ya.a.Content,$a=null,en=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).assignStation=function(){var e=n.props,t=e.location,a=e.close,o=e.history,r=e.actions,i=e.user,c=n.state.station;Qa.isLoggedIn()?n.setState({startStationDisabled:!0},(function(){var e=Object(G.get)(i,"company._id","");r.assignStation(e,c._id).then((function(){pa({category:m,action:r.startStation,value:Object(G.get)(c,"_id","Error")}),Object(G.get)(t,"pathname","").toLowerCase().includes("nowplaying")?a():o.push("/nowPlaying",{isBack:!0})}))})):Qa.signUp()},n.favoriteStation=function(){Qa.isLoggedIn()?n.setState({favoriteDisabled:!0},(function(){var e=Object(G.get)(n.props,"myLocation._id",""),t=Object(G.get)(n.state,"station._id",""),a=Object(G.get)(n.props,"myLocation.favorites",[]);n.props.actions.toggleFavorite({locationId:e,stationId:t,favorites:a}).then((function(){pa({category:h,action:T,value:t}),n.setState({favoriteDisabled:!1})}))})):Qa.signUp()},n.state={isLoading:!0,station:{},isBackgroundImage:!1,explicit:!1,startStationDisabled:!1,favoriteDisabled:!1,isMobile:!1},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.checkForMobile(),document.body.scrollTop=document.documentElement.scrollTop=0,$a=window.addEventListener("resize",(function(){e.checkForMobile()})),this.setStationDetails()}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",$a),$a=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"playlistId",null),Object(G.get)(e,"playlistId",null))||this.setStationDetails()}},{key:"setStationDetails",value:function(){var e=Object(ge.a)(pe.a.mark((function e(){var t=this;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0},Object(ge.a)(pe.a.mark((function e(){var a,n,o;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Object(G.get)(t.props,"match.params.id",null)||Object(G.get)(t.props,"playlistId",null))){e.next=9;break}return e.next=4,t.props.actions.getStationDetails(a);case 4:n=e.sent,o=Object(G.get)(n,"explicit",!1),t.setState({isLoading:!1,explicit:o,station:n}),e.next=10;break;case 9:t.setState({isLoading:!1});case 10:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForMobile",value:function(){var e=this,t=this.state.isBackgroundImage;this.setState({isMobile:K()},(function(){e.state.isMobile&&!t&&e.setStationBackgroundImage(),!e.state.isMobile&&t&&e.removeStationBackgroundImage()}))}},{key:"setStationBackgroundImage",value:function(){var e=this,t=this.state.station,a=setInterval((function(){var n=document.getElementById("station-header");n&&(n.style.backgroundImage="url('"+t.cover+"')",t.cover&&e.setState({isBackgroundImage:!0}),clearInterval(a))}),100)}},{key:"removeStationBackgroundImage",value:function(){var e=this,t=setInterval((function(){var a=document.getElementById("station-header");a&&(a.style.backgroundImage=null,e.setState({isBackgroundImage:!1}),clearInterval(t))}),100)}},{key:"checkIfFavorited",value:function(e){return!!Object(G.get)(this.props,"myLocation.favoritesMap",[])[e]}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.station,r=t.explicit,i=t.startStationDisabled,c=t.favoriteDisabled,s=t.isMobile,l=t.source,u=Object(G.get)(n,"_id",""),d=Object(G.get)(n,"track",[]),m=this.checkIfFavorited(u),p=!Object(G.get)(this.props,"myLocation.schedule._id","")&&Object(G.get)(this.props,"myLocation.station._id","")===u;return o.a.createElement(Ya.a,{className:"create-layout"},o.a.createElement(Xa,{className:"create-body"},o.a.createElement(Rt.a,{indicator:Ft,spinning:a},o.a.createElement("div",{id:"station-header",className:"cover-content-wrapper",style:{backgroundColor:void 0!==n.hex?n.hex:"#aa4e9f"}},o.a.createElement("div",{className:"headerLeft"},o.a.createElement("div",{className:"station-head-wrapper"},o.a.createElement("h1",{className:"cover-heading"},n.name),r&&o.a.createElement(Ka,{title:W.name,color:W.color})),o.a.createElement("div",{className:"cover-btn-div"},s&&"dashboard"!==l&&o.a.createElement(Xt.a,{size:"large",className:"cover-btn",onClick:function(){return e.props.history.push("/discover",{isBack:!0})}},o.a.createElement(ia.a,{icon:Ia.d,className:"cover-icon"}),o.a.createElement("div",null,"Back")),o.a.createElement(Xt.a,{size:"large",className:"cover-btn".concat(p?" disabledButton":""),disabled:p||i,onClick:this.assignStation},o.a.createElement(Rt.a,{indicator:Ft,spinning:i},p?null:o.a.createElement(ia.a,{icon:F.b,className:"cover-icon"}),o.a.createElement("div",null," ",p?"Now Playing":"Start"," "))),o.a.createElement(Xt.a,{size:"large",className:"cover-btn",disabled:c,onClick:this.favoriteStation},o.a.createElement(Rt.a,{indicator:Ft,spinning:c},o.a.createElement(ia.a,{icon:Ia.h,className:"cover-icon".concat(m?" favorited":"")}),o.a.createElement("div",null," ",m?"Favorited":"Favorite"," ")))),o.a.createElement("div",{className:"description"},n.description)),o.a.createElement("div",{className:"headerRight"},o.a.createElement("img",{src:!n.cover&&n.name?Y(n.name):n.cover,className:"stationImage",alt:""}))),o.a.createElement("div",{className:"station-table-wrapper"},o.a.createElement("div",{className:"station-table-item station-table-header"},o.a.createElement("div",{className:"station-table-track title"},o.a.createElement("h1",null,"Track")),o.a.createElement("div",{className:"station-table-artist title"},o.a.createElement("h1",null,"Artist/Album"))),d.map((function(e,t){return o.a.createElement("div",{className:"station-table-item",key:e._id,style:{opacity:t>.5*d.length?(d.length+1-t)/d.length:1}},o.a.createElement("div",{className:"station-table-track"},e.title),o.a.createElement("div",{className:"station-table-artist"},e.artist[0],", ",e.album))}))))))}}]),a}(n.Component);var tn=Object(de.b)((function(e){return{user:e.auth.user,stations:e.stations.data,count:e.stations.count,myLocation:e.auth.location}}),(function(e){return{actions:Object(c.b)({getStationDetails:yt,assignStation:Et,toggleFavorite:ht},e)}}))(Object(fe.f)(en)),an=(a(815),function(e){var t=e.animate,a=e.speed,n=e.value,r=e.display,i=e.hideText,c=e.style;return o.a.createElement("div",{className:"bpm-container".concat("column"===r?" column":" row"),style:c},o.a.createElement("div",{className:"beat-container",style:{animation:t?"bpm ".concat(a,"s linear infinite"):"none"}}),!i&&n&&o.a.createElement("div",{className:"bpm-text"},"".concat(parseInt(n).toFixed(0)," BPM")))}),nn=a(48),on=(a(816),function(e){var t=e.title,a=e.subtitle,n=e.style,r=e.backArrow,i=e.backArrowPress;return o.a.createElement("div",{className:"title-container",style:n},o.a.createElement("div",{className:"flexRow",style:{alignItems:"center"}},r&&o.a.createElement("div",{className:"backArrow",onClick:i},o.a.createElement(ia.a,{icon:nn.a})),o.a.createElement("div",{className:"flexCol"},o.a.createElement("div",{className:"create-list-view-title"}," ",t," "),o.a.createElement("div",{className:"create-list-view-subtitle"}," ",a," "))))}),rn=(a(817),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(se.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content,n=e.icon,r=e.style,i=Array.isArray(a);return o.a.createElement("div",{className:"dashboard-module",style:r},o.a.createElement("div",{className:"dashboard-header"},o.a.createElement("div",{className:"dashboard-icon"},n&&o.a.createElement(ia.a,{icon:n,style:{fontSize:"24px"}})),o.a.createElement("div",{className:"dashboard-title"},t),o.a.createElement("div",{className:"dashboard-icon"})),o.a.createElement("div",{className:"dashboard-content"},i?o.a.Children.map(a,(function(e){return o.a.cloneElement(e)})):a))}}]),a}(n.Component)),cn=(a(374),null),sn=null,ln=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).checkPlayerState=function(){var e=n.props,t=e.myLocation,a=e.player,o=Object(G.get)(t,"pairedDevice.deviceBrand",""),r=o&&Object(G.get)(n.state,"playerInfo.uniqueId","")===Object(G.get)(t,"pairedDevice.uniqueId",""),i=Object(u.a)({},n.state.playerInfo);i.token=Object(G.get)(t,"token",""),n.setState({playerInfo:i,isLoading:!Object(G.get)(t,"station",null),explicitAllowed:Object(G.get)(t,"explicitAllowed",!1),controllerStyle:!!o&&(r?"WEB":r?"MOBILE":"OTHER")},(function(){Object(G.get)(a,"showPlayer",null)?(n.getSongTime(),Object(G.get)(a,"isPlaying",null)&&(clearInterval(sn),sn=setInterval((function(){n.getSongTime()}),100))):clearInterval(sn)}))},n.scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),ha("Playlist Modal"),pa({category:p,action:b,value:e,label:A})},n.afterCreateStaion=function(){n.setState({showStationSearch:!1})},n.toggleStationSearch=function(){var e=!n.state.showStationSearch;n.setState({showStationSearch:e}),e&&setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100)},n.parseLocationName=function(e){if(e)return e.split(",")[0]},n.connectPress=function(){n.setState({showAppModal:!0}),ha("Connect Modal"),pa({category:p,action:k,label:A})},n.loadPlayer=function(e){var t=e.override,a=Object(u.a)(Object(u.a)({},n.state.playerInfo),{},{override:t});n.setState({loadingPlayer:!0},(function(){n.props.actions.connectPlayer(a).then((function(){n.setState({showConnectModal:!1,loadingPlayer:!1})}))}))},n.changeStationPress=function(){pa({category:p,action:L,value:"Back",label:A}),n.props.history.push("/discover")},n.playStation=function(){n.state.playButtonDisabled||n.setState({playButtonDisabled:!0},(function(){n.props.actions.connectPlayer(n.state.playerInfo).then((function(e){n.setState({playButtonDisabled:!1},(function(){"DEVICE_ALREADY_PAIRED"===e&&(ha("Device Already Connected Modal"),n.setState({showConnectModal:!0})),pa({category:p,action:O,label:A})}))})).catch((function(e){n.setState({playButtonDisabled:!1}),console.log("caught err: ",e)}))}))},n.toggleExplicit=function(){n.setState({loadingExplicit:!0},(function(){n.props.actions.toggleExplicit({locationId:Object(G.get)(n.props,"myLocation._id",""),currentTrack:Object(G.get)(n.props,"currentTrack",null)}).then((function(e){n.setState({loadingExplicit:!1,explicitAllowed:e})}))}))},n.state={isMobile:K(),isLoading:!1,loadingPlayer:!1,artistName:"",searchText:void 0,isFixHeader:!1,pageHeight:0,showStationSearch:!1,showAppModal:!1,showConnectModal:!1,showErrorModal:!1,playlistModalId:!1,playButtonDisabled:!1,userName:"",errorTitle:"",errorMessage:"",errorIcon:"",errorButton:"",playerInfo:{token:Object(G.get)(n.props,"myLocation.token",""),deviceName:"web",uniqueId:Q(),deviceBrand:"web",override:!1},loadingExplicit:!1,explicitAllowed:!1,currentSongTime:"0:00",currentSongDuration:"0:00",controllerStyle:!1},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.myLocation,n=t.user,o=t.actions;ga(),ut.send("pairCode",Object(G.get)(a,"token","")),this.checkPlayerState(),this.setState({isMobile:K(),userName:this.createUserName()},(function(){e.state.isMobile&&pa({category:p,action:o.viewedMobile})})),Object(G.get)(n,"_id",null)&&(Re.emit(Be,{userId:n._id}),o.addPlayerListeners(),o.updateStationListener(),o.updateCurrentTrackListener())}},{key:"componentWillUnmount",value:function(){try{this.props.actions.removePlayerListeners(),this.props.actions.removeStationListener(),clearInterval(sn),clearTimeout(cn)}catch(e){console.log("caught error when unmounting 'nowPlaying' page: ",e)}}},{key:"componentDidUpdate",value:function(e){var t=this;if(!Object(G.isEqual)(Object(G.get)(this.props,"myLocation",null),Object(G.get)(e,"myLocation",null))&&Object(G.get)(this.props,"myLocation",null)&&(Object(G.get)(this.props,"myLocation.station",null)||this.props.history.push("/discover"),this.checkPlayerState()),!Object(G.isEqual)(Object(G.get)(this.props,"player.playerError",null),Object(G.get)(e,"player.playerError",null))&&Object(G.get)(this.props,"player.playerError.error",null)){console.log("got player error!",Object(G.get)(this.props,"player.playerError",{}));var a=Object(G.get)(this.props,"player.playerError.title",""),n=Object(G.get)(this.props,"player.playerError.message",""),o=Object(G.get)(this.props,"player.playerError.icon",""),r=Object(G.get)(this.props,"player.playerError.button","");this.setState({showErrorModal:!0,errorTitle:a,errorMessage:n,errorIcon:o,errorButton:r}),this.props.actions.playerError({}),ha("Error Modal"),pa({category:p,value:n,label:M}),cn=setTimeout((function(){t.closeErrorMessage(),clearTimeout(cn),cn=null}),3e5)}Object(G.isEqual)(Object(G.get)(this.props,"player.isPlaying",null),Object(G.get)(e,"player.isPlaying",null))&&Object(G.isEqual)(Object(G.get)(this.props,"player.showPlayer",null),Object(G.get)(e,"player.showPlayer",null))||(clearInterval(sn),sn=setInterval((function(){Object(G.get)(t.props,"player.isPlaying",null),t.getSongTime()}),100)),Object(G.isEqual)(Object(G.get)(this.props,"player.showPlayer",null),Object(G.get)(e,"player.showPlayer",null))||this.checkPlayerState(),Object(G.isEqual)(Object(G.get)(this.props,"myLocation.pairedDevice.deviceName",null),Object(G.get)(e,"myLocation.pairedDevice.deviceName",null))||console.log("Changed playback device")}},{key:"getSongTime",value:function(){try{var e=document.getElementById("current-song-time").innerHTML,t=document.getElementById("current-song-duration").innerHTML,a=document.getElementById("invis-current-song-time").innerHTML;this.setState({currentSongTime:e,currentSongDuration:t,songCompletion:a})}catch(n){console.log("getSongTime err: ",n)}}},{key:"createUserName",value:function(){var e=Object(G.get)(this.props,"user.firstName",""),t=Object(G.get)(this.props,"user.lastName","");return(e=e.substring(0,1).toUpperCase()+e.substring(1,e.length))+" "+(t=t.substring(0,1).toUpperCase()+t.substring(1,t.length))}},{key:"getTrackData",value:function(e){var t=this.props.myLocation,a=e;a||(a=Object(G.get)(t,"station.track[0]",null));var n={songImage:Object(G.get)(a,"picture",null),locationName:Object(G.get)(t,"name",null),songTrack:Object(G.get)(a,"title",null),bpm:Object(G.get)(a,"bpm",null),songArtist:Object(G.get)(a,"artist",null),token:Object(G.get)(t,"token",null),stationName:Object(G.get)(t,"station.name",null)};return Array.isArray(n.songArtist)&&(n.songArtist=n.songArtist[0]),n}},{key:"openLink",value:function(e){window.open(e,"_blank")}},{key:"closeErrorMessage",value:function(){this.setState({showErrorModal:!1,errorTitle:"",errorMessage:"",errorIcon:"",errorButton:""})}},{key:"openAdBlockMessage",value:function(){this.setState({showErrorModal:!0,errorTitle:"Please Disable Ad-Block",errorMessage:"All of our advertisements help fund small business relief programs. Please help us help them by disabling your ad-blocker.",errorIcon:o.a.createElement(ia.a,{icon:Ia.i,className:"connect-icon",style:{color:"#d04283"}}),errorButton:"Ok, Got It"})}},{key:"sendToMobileDevice",value:function(e){Object(G.get)(window,"inApp",!1)?ut.send("player","player/"+e):this.openLink("https://ambii.app.link/OpenMobile")}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:o.a.createElement(ia.a,{icon:Ca.b,className:"connect-icon"})})}))}},{key:"render",value:function(){var e=this,t=this.props.isApple,a=Object(G.get)(this.props,"player",{}),n=a.isPlaying,r=a.skipDisabled,i=this.state,c=i.isLoading,s=i.explicitAllowed,l=i.loadingExplicit,u=i.songCompletion,d=i.controllerStyle,m=i.showAppModal,p=i.showConnectModal,g=i.showErrorModal,h=i.loadingPlayer,f=i.errorTitle,b=i.errorMessage,v=i.errorIcon,y=i.errorButton,E=i.playlistModalId,O=i.userName,S=i.isMobile,k=i.playButtonDisabled,j=i.currentSongTime,w=i.currentSongDuration,N=this.getTrackData(Object(G.get)(this.props,"myLocation.currentTrack",null)),C=N.songImage,I=N.locationName,L=N.songTrack,T=N.songArtist,P=N.token,A=N.stationName,M=Object(G.get)(this.props,"myLocation.company.isIndividual","individual"===Object(G.get)(this.props,"myLocation.name","").toLowerCase()),D=Object(G.get)(this.props,"myLocation.isPlaying",!1),x=Object(G.get)(this.props,"myLocation.station._id",null),_=Object(G.get)(this.props,"myLocation.schedule.name",!1),R=Object(G.get)(this.props,"myLocation.schedule._id",""),B=!1,F=!1,U=Object(G.get)(N,"bpm",100);U||(U=100);var V=document.getElementById("now-playing-info-wrapper")||null,q=document.getElementById("now-playing-track")||null,z=document.getElementById("now-playing-artist")||null;return V&&q&&z&&((V=V.getBoundingClientRect().width-(K()?0:310))<(q=q.getBoundingClientRect().width)&&(B=!0),V<(z=z.getBoundingClientRect().width)&&(F=!0)),o.a.createElement("div",{className:"dashboard-page-wrapper"},o.a.createElement(wa.a,{visible:Boolean(E),onCancel:function(){return e.showPlaylistModal(null)},width:"80%",bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},o.a.createElement(tn,{playlistId:E,close:function(){return e.showPlaylistModal(null)},source:"dashboard"})),o.a.createElement(on,{title:o.a.createElement("span",null,"Welcome ",o.a.createElement("span",{style:{color:"#D04283"}},"Back")),subtitle:M?O:I,backArrow:!0,backArrowPress:function(){return e.changeStationPress()}}),o.a.createElement(Rt.a,{indicator:Ft,spinning:c,style:{backgroundColor:"#f5f5f5",maxHeight:"100%"}},o.a.createElement("div",{className:"dashboard-content-wrapper"},o.a.createElement("div",{className:"nowPlayingContainer"},o.a.createElement("div",{className:"imgAndInfo",id:"now-playing-info-wrapper"},o.a.createElement("div",{className:"songImageContainer"},o.a.createElement("img",{className:"songImage noselect",src:C,alt:""})),o.a.createElement("div",{className:"infoContainer"},o.a.createElement("div",{className:"nowPlayingTitle"},"Now Playing",D&&U&&o.a.createElement(an,{animate:!0,speed:60/U,value:U,hideText:!0,style:{marginLeft:"12px",justifyContent:"flex-start"}})),o.a.createElement("div",{className:"songTitle",style:{justifyContent:S&&!B?"center":"flex-start"}},o.a.createElement("span",{id:"now-playing-track",className:B?"marquee":""},L)),o.a.createElement("div",{className:"songArtist",style:{justifyContent:S&&!F?"center":"flex-start"}},o.a.createElement("span",{id:"now-playing-artist",className:F?"marquee":""},T)),o.a.createElement("div",null,"Station:",o.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.showPlaylistModal(x)}},A)),_&&o.a.createElement("div",null,"Schedule:",o.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.props.history.push("/createSchedule/".concat(R))}},_))),o.a.createElement("div",{className:"adblock-div",onClick:function(){return e.openAdBlockMessage()}},o.a.createElement(Ha.a,null,o.a.createElement(ia.a,{icon:Ia.i,className:"connect-icon"}))))),o.a.createElement("div",{className:"module-row"},"MOBILE"===d?o.a.createElement(rn,{title:"Playing on Mobile",icon:Ca.c,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!S&&o.a.createElement(Rt.a,{indicator:Ft,spinning:k},o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(ia.a,{icon:Ca.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"OTHER"===d?o.a.createElement(rn,{title:"Playing on Another Device",icon:Ca.g,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),o.a.createElement("div",{className:"dashboard-mobile-info-option"},o.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(G.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!S&&o.a.createElement(Rt.a,{indicator:Ft,spinning:k},o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(ia.a,{icon:Ca.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"WEB"===d?o.a.createElement(rn,{title:"Playing on Web",icon:Ca.g,style:{backgroundColor:"#D04283",borderColor:"#FFF",color:"#FFF"},content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},o.a.createElement("div",{className:"dashboard-music-controller"},o.a.createElement("div",{className:"dashboard-music-time"},j," / ",w),o.a.createElement("div",{className:"dashboard-music-controls"},n?o.a.createElement(ia.a,{icon:Ia.l,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(!1)}}):o.a.createElement(ia.a,{icon:Ia.m,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(G.stubTrue)}}),o.a.createElement(ia.a,{icon:Ia.o,className:"music-controller-icon".concat(r?" disabled":""),onClick:function(){return r?null:e.skipSong(u)}}),o.a.createElement(ia.a,{icon:Ca.f,className:"music-controller-icon close-icon",onClick:function(){return e.props.actions.disconnectPlayer()}}))),o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283",marginTop:"10px"},onClick:function(){return S?e.sendToMobileDevice(P):e.connectPress()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(ia.a,{icon:Ca.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},S?"Open App":"Play on Mobile")))]}):o.a.createElement(rn,{title:"Play Music",icon:Ia.k,content:[o.a.createElement("div",{className:"dashboard-play-button-wrapper"},!S&&o.a.createElement(Rt.a,{indicator:Ft,spinning:k},o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginBottom:"15px"},onClick:function(){return e.playStation()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(ia.a,{icon:Ca.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))),o.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283"},onClick:function(){return S?e.sendToMobileDevice(P):e.connectPress()}},o.a.createElement("div",{className:"dashboard-play-button-left"},o.a.createElement(ia.a,{icon:Ca.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),o.a.createElement("div",{className:"dashboard-play-button-right"},S?"Open App":"Play on Mobile")))]}),o.a.createElement("div",{className:"flexCol",style:{justifyContent:"space-evenly"}},o.a.createElement(rn,{title:"Store Code",icon:Ia.j,content:[o.a.createElement(ja,{token:P,fontSize:"22px"})]}),o.a.createElement(rn,{title:"Settings",icon:Ia.e,content:o.a.createElement("div",{className:"dashboard-setting-wrapper"},o.a.createElement("div",{className:"dashboard-setting-text"},"Allow Explicit"),o.a.createElement("div",{className:"dashboard-setting-option"},o.a.createElement(Na.a,{style:{width:"30px"},checked:s,disabled:null===s,loading:l,onClick:function(){return e.toggleExplicit()}})))}))))),o.a.createElement(wa.a,{visible:m,onOk:function(){return e.setState({showAppModal:!1})},onCancel:function(){return e.setState({showAppModal:!1})},width:"80%",footer:[],className:"app-modal"},o.a.createElement("div",{className:"connect-wrapper"},o.a.createElement("div",{className:"connect-header"},"Connect Device"),o.a.createElement("div",{className:"connect-display rowItem"},o.a.createElement(ia.a,{icon:Ca.h,className:"connect-icon"}),o.a.createElement("div",{className:"connect-dashes"}," - - - - - - "),o.a.createElement("div",{className:"mobile-phone"},o.a.createElement(ia.a,{icon:Ca.c,className:"connect-icon"}),o.a.createElement(ia.a,{icon:Ia.k,className:"special-music-icon"})),o.a.createElement("div",{className:"connect-dashes"}," - - - - - - "),o.a.createElement("div",{className:"speaker-group"},o.a.createElement(ia.a,{icon:Ca.e,className:"connect-icon"}),o.a.createElement(ia.a,{icon:Ia.f,className:"connect-music-icon"}))),o.a.createElement("div",{className:"connect-text rowItem"},t?o.a.createElement(o.a.Fragment,null,"1. Download the ",o.a.createElement("span",{style:{color:"#d04283",fontWeight:"bold"}},"Ambii - Music for Business")," app on the App Store."):o.a.createElement(o.a.Fragment,null,"1. Download the ",o.a.createElement("span",{style:{color:"#d04283",fontWeight:"bold"}},"Ambii - Music for Business")," app on Google Play or the App Store onto your mobile device")),o.a.createElement("div",{className:"store-wrapper rowItem"},o.a.createElement("img",{src:Ga.a,className:"connect-music-icon ambii-logo",alt:""}),o.a.createElement("div",{className:"store-button-wrapper",onClick:function(){return e.openLink("https://play.google.com/store/apps/details?id=com.ambii_business_music")}},!t&&o.a.createElement("div",{className:"store-button"},o.a.createElement(qa,{className:"connect-music-icon brand-icon",style:{width:24,height:48}}),o.a.createElement("div",{className:"store-button-text"},o.a.createElement("div",{className:"store-button-subtitle"},"Download on"),o.a.createElement("div",{className:"store-button-title"}," Google Play "))),o.a.createElement("div",{className:"store-button",onClick:function(){return e.openLink("https://apps.apple.com/us/app/ambii-music-for-business/id1501666271")}},o.a.createElement(ia.a,{icon:La.a,className:"connect-music-icon brand-icon",style:{fontSize:"32px"}}),o.a.createElement("div",{className:"store-button-text"},o.a.createElement("div",{className:"store-button-subtitle"},"Download on"),o.a.createElement("div",{className:"store-button-title"}," App Store "))))),o.a.createElement("div",{className:"connect-text rowItem"},"2. Once downloaded, enter your Store Code"),o.a.createElement("div",{className:"connect-text",style:{marginTop:"25px",fontSize:"24px"}},"Store Code: ",o.a.createElement("span",{className:"connect-token"},P)))),o.a.createElement(wa.a,{visible:p,onOk:function(){return e.setState({showConnectModal:!1})},onCancel:function(){return e.setState({showConnectModal:!1})},width:"80%",footer:[],className:"app-modal"},o.a.createElement("div",{className:"connect-wrapper"},o.a.createElement("div",{className:"connect-header"},"Device Already Connected!"),o.a.createElement("div",{className:"connect-text"},"Another device is already connected to this account. Would you like to play music on this device instead?"),o.a.createElement("div",{className:"connect-display rowItem"},o.a.createElement(ia.a,{icon:Ca.h,className:"connect-icon"})),o.a.createElement("div",{className:"connect-button-group"},o.a.createElement(Xt.a,{className:"optionButton",disabled:h,onClick:function(){return e.loadPlayer({override:!0})}},o.a.createElement(Rt.a,{indicator:Ft,spinning:h},"Yes, Connect")),o.a.createElement(Xt.a,{className:"optionButton mobile-padding",onClick:function(){return e.setState({showConnectModal:!1})}},"No, Cancel")))),o.a.createElement(wa.a,{visible:g,onOk:function(){return e.closeErrorMessage()},onCancel:function(){return e.closeErrorMessage()},width:"80%",footer:[],className:"app-modal"},o.a.createElement("div",{className:"connect-wrapper"},o.a.createElement("div",{className:"connect-header"},f),o.a.createElement("div",{className:"connect-text"},b),o.a.createElement("div",{className:"connect-display rowItem"},v),o.a.createElement("div",{className:"connect-button-group"},o.a.createElement(Xt.a,{className:"optionButton mobile-padding",onClick:function(){return e.closeErrorMessage()}},y||"Ok")))))}}]),a}(n.Component);var un=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,player:e.player,currentTrack:e.auth.location.currentTrack,isApple:e.auth.isApple}}),(function(e){return{actions:Object(c.b)({addPlayerListeners:Ke,removePlayerListeners:tt,updateStationListener:at,updateCurrentTrackListener:nt,removeStationListener:ot,getStation:bt,connectPlayer:Ze,playerError:Le,assignStation:Et,toggleExplicit:ft,setDisableSkip:Ae,skipSong:Xe,setIsPlaying:Pe,disconnectPlayer:Je},e)}}))(Object(fe.f)(ln)),dn=a(140),mn=a(71),pn=a(400),gn=(a(260),a(406)),hn=(a(821),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={isHovered:!1},e.onMouseOver=function(){e.setState({isHovered:!0})},e.onMouseOut=function(){e.setState({isHovered:!1})},e}return Object(se.a)(a,[{key:"render",value:function(){var e=this.props,t=e.performSelect,a=e.text;return o.a.createElement("div",{className:"mood_tag",onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:t},o.a.createElement("span",{style:{marginLeft:8}},a))}}]),a}(n.Component)),fn=(a(822),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).removeTag=function(e){return function(){n.props.performSelect(e)}},n.onChangeText=function(e){n.setState({search:e.target.value},(function(){var e=Object(gt.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))},n.performSelect=function(e){return function(){n.props.performSelect(e),n.setState({search:""},(function(){var e=Object(gt.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))}},n.filterTagArray=function(){var e=new Set(n.props.selectedTags);return Object(gt.a)(n.state.tags).filter((function(t){return!e.has(t)}))},n.handleClick=function(e){n.node.contains(e.target)||n.setState({isSearchFocused:!1})},n.state={tags:n.props.items,search:"",isSearchFocused:!1},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.isSearchFocused;return o.a.createElement(gn.a,{handleHeight:!0},(function(t){var r=t.height;return o.a.createElement("div",{className:"mood_container",ref:function(t){return e.node=t}},o.a.createElement("div",{className:"input-tag ".concat(n?"red-focus":"")},o.a.createElement("ul",{className:"input-tag__tags",ref:function(t){return e.tagListRef=t}},e.props.selectedTags.map((function(t,a){return o.a.createElement("li",{key:a},t,o.a.createElement("button",{type:"button",className:"remove_btn",onClick:e.removeTag(t)},"+"))})),o.a.createElement("li",{className:"input-tag__tags__input"},o.a.createElement("textarea",{className:"mood_searchBar",type:"text",placeholder:"Search Moods or Languages",onFocus:function(){return e.setState({isSearchFocused:!0})},value:a,onChange:e.onChangeText,ref:function(t){e.tagInput=t}}),o.a.createElement(ia.a,{icon:nn.h,color:"rgba(95, 95, 95, 0.4)"})))),n?o.a.createElement("div",{className:"tag-result",style:{position:"absolute",top:r}},e.filterTagArray().map((function(t,a){return o.a.createElement(hn,{key:a,text:t,performSelect:e.performSelect(t)})}))):null)}))}}]),a}(n.Component)),bn=(a(823),[{icon:F.e,label:"Slower",min:0,max:59},{icon:F.g,label:"Slow",min:60,max:119},{icon:F.f,label:"Moderate",min:120,max:189},{icon:F.c,label:"Fast",min:190,max:249},{icon:F.d,label:"Faster",min:250,max:Number.MAX_SAFE_INTEGER}]);function vn(e){var t=function(t,a){return function(){a!==e.currentSelectedTempo?e.selectTempo(t,a):e.deSelectTempo()}};return o.a.createElement("div",{className:"tempo_container"},bn.map((function(a,n){return o.a.createElement("div",{key:n,className:"wrapper"},o.a.createElement("div",{className:"energy",onClick:t([a.min,a.max],n),style:{backgroundColor:n===e.currentSelectedTempo?"rgba(95, 95, 95, 0.1)":"white"}},o.a.createElement("div",{className:"content"},o.a.createElement("div",{className:"inner"},o.a.createElement(ia.a,{icon:a.icon,className:"tempo_icon"}),o.a.createElement("span",null,a.label)))))})))}a(824),["10's","00's","90's","80's","70's","60's"].reverse();var yn=function(e){var t=e.browseMoods,a=e.currentSelectedTempo,n=e.onSelectTempo,r=e.onDeselectTempo,i=(e.browseEraRange,e.onSelectEra,e.onSelectMood);return o.a.createElement("div",null,o.a.createElement("div",{className:"moodWrapper",style:{margin:"auto"}},o.a.createElement("div",{className:"browseSettingsTitle"},"Tags"),o.a.createElement("div",{className:"browseSelectionsContainer"},o.a.createElement(fn,{items:Object.keys(t),selectedTags:Object.keys(t).filter((function(e){return!0===t[e]})),performSelect:i}))),o.a.createElement("div",{className:"tempoWrapper",style:{margin:"auto"}},o.a.createElement("div",{className:"browseSettingsTitle"},"Energy"),o.a.createElement("div",{className:"browseSelectionsContainer"},o.a.createElement(vn,{currentSelectedTempo:a,selectTempo:n,deSelectTempo:r}))))},En=a(194),On=a(896),Sn=(a(825),function(e){var t=e.visible,a=e.onCancel,n=e.tracks,r=e.title;return o.a.createElement(wa.a,{title:r,visible:t,onCancel:a,footer:[]},n.map((function(e,t){return o.a.createElement("div",{className:"track-container",key:t},e.albumCover?o.a.createElement(On.a,{shape:"square",size:50,src:e.albumCover}):o.a.createElement(On.a,{shape:"square",size:50,icon:"user"}),o.a.createElement("div",null,o.a.createElement("p",{style:{marginLeft:10},className:"heading-regular margin-0"},e.title),o.a.createElement("p",{style:{marginLeft:10},className:"margin-0"},e.artist)))})))}),kn=(a(826),function(e){var t,a,n=e.genres,r=e.roundBottom,i=e.bpm,c=e.simple,s=Object.entries(n||[]).sort((function(e,t){return t[1]-e[1]})).slice(0,3),l=0;try{t=s[0][1],a=s[1][1],l=s[2][1]}catch(p){console.log("Not all genre fields available")}var u=(t&&t>.1?t:0)+(a&&a>.1?a:0)+(l&&l>.1?l:0),d=function(e){return e/u},m=Z(i);return o.a.createElement("div",{className:"genre-container"},o.a.createElement("div",{className:"genre-color-bar"},s.map((function(e,t){var a=e[0],i=d(e[1]);return o.a.createElement("div",{className:"genre-wrapper",style:{width:"".concat(100*i,"%"),display:i>.1?"flex":"none"},key:a},o.a.createElement("div",{className:"genre-chunk",style:{backgroundColor:D[a],borderBottomLeftRadius:0===t&&r?"8px":null,borderBottomRightRadius:t===n.length-1&&r?"8px":null}}))}))),!c&&o.a.createElement("div",{className:"genre-tile-info-wrapper"},o.a.createElement("div",{className:"genre-tile-genre-wrapper"},s.map((function(e,t){var a=e[0];if(d(e[1])>.1)return o.a.createElement("div",{className:"flexRow",key:a},o.a.createElement("div",{className:"genre-color-dot",style:{backgroundColor:D[a]}}),o.a.createElement("span",{style:{position:"relative",bottom:4,left:4,fontWeight:0===t?"bold":"normal"}},a))}))),o.a.createElement("div",{className:"genre-bpm"},o.a.createElement(ia.a,{icon:Object(G.get)(m,"icon",""),className:"bpm-icon"}),o.a.createElement("div",null,Object(G.get)(m,"title","")))))}),jn=(a(827),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={modalVisible:!1,hovered:!1},e.showModal=function(){e.setState({modalVisible:!0})},e.hideModal=function(){e.setState({modalVisible:!1})},e.stationPress=function(t,a){var n=e.props.history;t&&(pa({category:m,action:L,value:a,label:A}),n.push("/station/".concat(t)))},e.isMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},e.playStation=function(t){var a=e.props,n=a._id,o=a.company,r=a.name,i=a.assignStation;t.stopPropagation(),i(Object(G.get)(o,"_id",""),n).then((function(){pa({category:m,action:v,value:r,label:A}),e.props.history.push("/nowPlaying",{isBack:!0})}))},e}return Object(se.a)(a,[{key:"render",value:function(){var e=this,t=this.state.modalVisible,a=this.props,n=a.bpm,r=a.genres,i=a._id,c=a.hex,s=a.track,l=a.title,u=a.type,d=a.rowIndex,m=a.browse,p=a.showPlaylistModal,g=a.isApple,h=(a.explicit,"advanced"===u?"advanced-station-preview":"public-station noselect"),f=(i?"item-container pointer":"item-container-preview item-container pointer").concat(0===d?" first-row":""),b=Object(G.get)(this.props,"name",""),v=Object(G.get)(n,"mean",1);return o.a.createElement("div",{className:h,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:m?{margin:"0px 0px 10px 0px",border:"2px solid white"}:{border:"2px solid white"}},o.a.createElement("div",{className:f,onClick:function(){e.isMobile()?e.stationPress(i,b):p(i)},style:{backgroundColor:c,backgroundImage:"url(".concat(Y(this.props.name),")")}},o.a.createElement("div",{className:"station-tile-header"},"advanced"!==u&&o.a.createElement("div",{style:i?{}:{fontSize:14},className:"name"},b?b.replace(" (Explicit)",""):l))),s&&s.length?o.a.createElement(Sn,{title:b,visible:t,onCancel:this.hideModal,tracks:s}):null,o.a.createElement("div",{className:"info-container"},o.a.createElement(kn,{genres:r,showStats:!g,bpm:v||100})))}}]),a}(o.a.PureComponent)),wn=(a(828),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={showArrows:!1,showLeftArrow:!0,showRightArrow:!0,diff:0},e}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth,a=Math.round(5*e/100);this.setState({diff:t-e+a}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.title,r=t.type,i=t.showViewAll,c=t.rowIndex,s=t.isApple,l=Object(G.get)(this.props,"data",[]),u=this.state,d=u.showArrows,m=u.showLeftArrow,p=u.showRightArrow,g=u.diff;return o.a.createElement("section",{className:"feature-section",id:a,style:i?{}:{padding:"25px 0px"}},o.a.createElement("div",{className:"feature-section-head-wrapper"},o.a.createElement("div",{className:"feature-section-title-wrapper"},o.a.createElement("div",{className:"preMargin"}),o.a.createElement("div",{className:"heading heading-large"}," ",n," "),!i&&o.a.createElement(Xt.a,{type:"primary",onClick:function(){return Nn(0,r,e.props.history)}},o.a.createElement(ia.a,{icon:nn.d}),"Go back"))),o.a.createElement("div",{className:"description"},R[n]),o.a.createElement("div",{className:"blurredWrapper"},o.a.createElement("div",{className:"blurredEdgeStart",onMouseEnter:function(){e.rightMoveSpeed=2,e.scrollRight=setInterval((function(){e.rightMoveSpeed=Math.min(12,e.rightMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:-e.rightMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},d&&m?o.a.createElement(ia.a,{icon:nn.b}):null),o.a.createElement(En.a,{className:"stationPreviewWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===g?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},o.a.createElement("div",{className:"preMargin"}),o.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},l.map((function(t,a){return o.a.createElement(jn,Object.assign({assignStation:e.props.actions.assignStation,showPlaylistModal:e.props.showPlaylistModal,company:e.props.company,history:e.props.history,key:a,rowIndex:c,isApple:s},t))})))),o.a.createElement("div",{className:"blurredEdgeEnd",onMouseEnter:function(){e.leftMoveSpeed=2,e.scrollLeft=setInterval((function(){e.leftMoveSpeed=Math.min(12,e.leftMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:e.leftMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},d&&p?o.a.createElement(ia.a,{icon:nn.c}):null)))}}]),a}(n.Component)),Nn=function(e,t,a){0===e&&a.push("/discover",{isBack:!0}),1===e&&(pa({category:m,action:L,value:"View More",label:A}),a.push("/stations/".concat(t)))};var Cn=Object(de.b)((function(e){return{activeStationPreview:e.activeStationPreview}}),(function(e){return{actions:Object(c.b)({assignStation:Et},e)}}))(Object(fe.f)(wn)),In=(a(829),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={showArrows:!1,showLeftArrow:!1,showRightArrow:!0,diff:0},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth;this.setState({diff:t-e}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.showArrows,n=t.showLeftArrow,r=t.showRightArrow,i=t.diff;return o.a.createElement("div",{className:"genre_container"},o.a.createElement("div",{className:"edgeStart",onMouseEnter:function(){var t=2;e.scrollRight=setInterval((function(){t=Math.min(12,t+.1),n&&e.scrollView.getElement().scrollBy({left:-t})}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},a&&o.a.createElement(ia.a,{className:"icon",icon:nn.b,style:{fontSize:24,color:n?"#2a2a2a":"#CCC"}})),o.a.createElement(En.a,{className:"itemWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===i?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},o.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},this.props.items)),o.a.createElement("div",{className:"edgeEnd",onMouseEnter:function(){var t=2;e.scrollLeft=setInterval((function(){t=Math.min(12,t+.1),e.scrollView.getElement().scrollBy({left:t})}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},a&&o.a.createElement(ia.a,{icon:nn.c,style:{fontSize:24,color:r?"#2a2a2a":"#CCC"}})))}}]),a}(n.Component)),Ln=a(195),Tn=a(196),Pn=a.n(Tn),An=(n.Component,a(873),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).activateDot=function(e){for(var t=document.getElementById("dots").getElementsByTagName("li"),a=0;a<t.length;a++)a===e?t[a].classList.add("current"):t[a].classList.remove("current")},n.scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.afterCreateStaion=function(e){n.setState({isStation:!0,showStationSearch:!1}),n.props.history.push("/nowPlaying")},n.toggleStationSearch=function(){var e=n.state.showStationSearch;n.setState({showStationSearch:!e},(function(){e?setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100):pa({category:m,action:E,label:A})}))},n.calculateBrowse=function(){var e=n.state.loadNumber,t=function(e){var t={},a=Object.keys(e).filter((function(t){return e[t]}));return a.forEach((function(e){t[e]=1/a.length})),t},a=function(e,t){var a=[];return Object.keys(t).forEach((function(t){e[t]?a.push(e[t]):a.push(0)})),a},o=function(e,t){for(var a=0,n=0,o=0,r=0;r<e.length;r++)a+=e[r]*t[r],n+=e[r]*e[r],o+=t[r]*t[r];return a/((n=Math.sqrt(n))*(o=Math.sqrt(o)))},r=function(e,t){for(var a=0,n=0;n<e.length;n++)for(var o=n+1;o<e.length+1;o++){var r=e.slice(n,o);if(!t.includes(r))break;a+=Math.pow(r.length,1.5)/t.length}return a},i=n.state.playlists.filter((function(e){return!(e.bpm.mean>n.state.browseTempoRange.max)&&!(e.bpm.mean<n.state.browseTempoRange.min)}));if(n.state.searchText)i=i.map((function(e){var t=0;return t+=r(n.state.searchText,e.name),e.description&&(t+=r(n.state.searchText,e.description)),Object(u.a)(Object(u.a)({},e),{},{searchScore:t})})).sort((function(e,t){return t.searchScore-e.searchScore}));else{var c=t(n.state.browseGenres),s=t(n.state.browseMoods),l=0!==Object.keys(c).length,d=0!==Object.keys(s).length;c=a(c,n.state.browseGenres),s=a(s,n.state.browseMoods);var m={};l&&i.forEach((function(e){m[e._id]=o(a(e.genres,n.state.browseGenres),c)}));var p={};d&&i.forEach((function(e){p[e._id]=o(a(e.moods,n.state.browseMoods),s)})),i=i.sort((function(e,t){var a=0;return l&&(a+=.5*(m[t._id]-m[e._id])),d&&(a+=.5*(p[t._id]-p[e._id])),a}))}i=i.slice(0,e),n.setState({calculatedPlaylists:i})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),ha("Station Preview: "+e)},n._checkIfAllFalse=function(e){var t,a=Object(mn.a)(e);try{for(a.s();!(t=a.n()).done;){if(!0===t.value)return!1}}catch(n){a.e(n)}finally{a.f()}return!0},n._checkIsFiltering=function(){var e=n.state,t=e.searchText,a=e.browseGenres,o=e.browseMoods,r=e.currentSelectedTempo,i=t.length>0,c=!1===n._checkIfAllFalse(Object.values(a)),s=!1===n._checkIfAllFalse(Object.values(o));return i||c||s||r>-1},n.onSetFiltering=function(){n._checkIsFiltering()?n.setState({isFiltering:!0}):n.setState({isFiltering:!1})},n.onSelectGenre=function(e){return function(){var t=Object(u.a)({},n.state.hasSelectedGenres);t[e]?delete t[e]:t[e]=!0,n.setState({hasSelectedGenres:t,browseGenres:Object(u.a)(Object(u.a)({},n.state.browseGenres),{},Object(dn.a)({},e,!n.state.browseGenres[e])),showAdvanceSearch:!(Object.keys(t).length<=0),loadNumber:12},(function(){n.onSetFiltering(),n.calculateBrowse()}))}},n.onSelectMood=function(e){n.setState({browseMoods:Object(u.a)(Object(u.a)({},n.state.browseMoods),{},Object(dn.a)({},e,!n.state.browseMoods[e]))},(function(){n.onSetFiltering(),n.calculateBrowse()}))},n.onSelectTempo=function(e,t){n.setState({browseTempoRange:{min:e[0],max:e[1]},currentSelectedTempo:t},(function(){n.onSetFiltering(),n.calculateBrowse()}))},n.onDeselectTempo=function(){n.setState({browseTempoRange:{min:30,max:150},currentSelectedTempo:-1},(function(){n.onSetFiltering(),n.calculateBrowse()}))},n.onSelectEra=function(e){n.setState({browseEraRange:{from:e[0],to:e[1]}})},n.onSetSearchText=function(e){n.setState({searchText:e.target.value},(function(){n.onSetFiltering(),clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.calculateBrowse,250)}))},n.clearAdvancedFilters=function(e){n.setState({searchText:"",hasSelectedGenres:{},browseGenres:n.state.defaultGenres,loadNumber:12},(function(){n.onSetFiltering(),clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.calculateBrowse,250)}))},n.state={isLoading:!0,artistName:"",searchText:"",isStation:!1,isFixHeader:!1,showStationSearch:!1,showAppModal:!1,businessType:"other",browseGenres:{},defaultGenres:{},browseMoods:{},browseTempoRange:{min:30,max:150},browseEraRange:{from:1950,to:2020},playlistModalId:null,playlists:null,calculatedPlaylists:null,showAdvanceSearch:!1,isFiltering:!1,currentSelectedTempo:-1,hasSelectedGenres:{},loadNumber:12},n}return Object(se.a)(a,[{key:"getBusinessType",value:function(){var e=Object(G.get)(this.props,"myLocation.company.businessType","restaurant").toLowerCase();"other"===e.toLowerCase()&&(e="other"),this.setState({businessType:e})}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"myLocation",null),Object(G.get)(e,"myLocation",null))||this.getBusinessType()}},{key:"componentDidMount",value:function(){var e=Object(ge.a)(pe.a.mark((function e(){var t=this;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ga(),this.getBusinessType(),this.props.actions.getDiscoverPulicStations().then((function(e){var a=Object(G.get)(e,"playlistList",[]),n=a.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),o=a.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{});t.setState({isLoading:!1,playlists:a,browseGenres:n,defaultGenres:n,browseMoods:o},t.calculateBrowse)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.actions.removePlayerListeners()}},{key:"updatePreference",value:function(e){this.setState({businessType:e.key}),pa({category:m,action:y,value:e.key,label:A})}},{key:"loadMoreStations",value:function(){var e=this;this.setState({loadNumber:this.state.loadNumber+12},(function(){e.calculateBrowse()}))}},{key:"render",value:function(){var e=this,t=this.props.isApple,a=this.state,n=(a.showAdFreeModal,a.browseMoods),r=a.isLoading,i=a.playlists,c=a.businessType,s=a.playlistModalId,l=a.showAdvanceSearch,u=a.currentSelectedTempo,d=a.browseEraRange,m=a.isFiltering,p=a.browseGenres,g=a.searchText,h=a.calculatedPlaylists,f=a.hasSelectedGenres,b={},v={},y=Object(G.get)(this.props,"user.role",null),E=Object(G.get)(this.props,"user.company",""),O=Object(G.get)(this.props,"myLocation.favorites",[]),S=O.length>0,k={};S&&(k.Favorites=O);var j,w=Object(mn.a)(B.global);try{for(w.s();!(j=w.n()).done;){var N=j.value;b[N]=[]}}catch(F){w.e(F)}finally{w.f()}var C,I="other"===c.toLowerCase()&&y===q?B.defaultIndividual:B[c.toLowerCase()],L=Object(mn.a)(I);try{for(L.s();!(C=L.n()).done;){N=C.value;v[N]=[]}}catch(F){L.e(F)}finally{L.f()}if(!r){var T,P=Object(mn.a)(i);try{for(P.s();!(T=P.n()).done;){var A,M=T.value,D=Object(mn.a)(Object(G.get)(M,"supersets",[]));try{for(D.s();!(A=D.n()).done;){var x=A.value;x in b&&b[x].push(M),x in v&&v[x].push(M)}}catch(F){D.e(F)}finally{D.f()}}}catch(F){P.e(F)}finally{P.f()}}var _,R=o.a.createElement(oa.a,{onClick:function(t){return e.updatePreference(t)},selectedKeys:[c],className:"menu-wrapper"},o.a.createElement(oa.a.Item,{key:"bar"},"Bar"),o.a.createElement(oa.a.Item,{key:"cafe"},"Cafe"),o.a.createElement(oa.a.Item,{key:"gym"},"Gym"),o.a.createElement(oa.a.Item,{key:"hotel"},"Hotel"),o.a.createElement(oa.a.Item,{key:"other"},"Other"),o.a.createElement(oa.a.Item,{key:"restaurant"},"Restaurant"),o.a.createElement(oa.a.Item,{key:"salon"},"Salon"),o.a.createElement(oa.a.Item,{key:"school"},"School"),o.a.createElement(oa.a.Item,{key:"spa"},"Spa"),o.a.createElement(oa.a.Item,{key:"shop"},"Shop"));return o.a.createElement("div",{className:"discoverWrapper",id:"discover-container"},o.a.createElement(wa.a,{visible:Boolean(s),onCancel:function(){return e.showPlaylistModal(null)},width:"80%",bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},o.a.createElement(tn,{login:this.props.login,playlistId:s,close:function(){return e.showPlaylistModal(null)}})),o.a.createElement("div",{className:"create-body"},o.a.createElement("div",{className:"discover-head-wrapper"},o.a.createElement(on,{title:o.a.createElement("span",null,"Let's Find Your",o.a.createElement("span",{style:{color:"#D04283"}},"\xa0ambii"),"-ance"),subtitle:"Discover the right music for your business",style:{flex:1}}),y!==q&&o.a.createElement("div",{className:"discover-buttons"},o.a.createElement("div",{className:"viewOptions"},o.a.createElement(ra.a,{overlay:R,trigger:["click"],className:"preference-menu"},o.a.createElement(Xt.a,{className:"preference-menu-button"},o.a.createElement("span",{style:{marginRight:"5px",color:"black"}},"Preference:"),(_=c)?_.charAt(0).toUpperCase()+_.substring(1,_.length):"",o.a.createElement(ia.a,{icon:Ia.c,style:{marginLeft:"8px"}})))))),o.a.createElement(Rt.a,{indicator:Ft,spinning:r,style:{backgroundColor:"#f5f5f5"}},r&&o.a.createElement("div",{style:{width:"100%",height:"30vh"}}),!r&&o.a.createElement(Ln.Animated,{animationIn:"fadeIn",isVisible:!0},o.a.createElement("div",{className:"browseSettingsContainer"},o.a.createElement("div",{className:"searchWrapper"},o.a.createElement("div",{className:"searchInput"},o.a.createElement(Zt.a.Search,{className:"searchBar",placeholder:"Search",value:g,onChange:this.onSetSearchText})),o.a.createElement(Xt.a,{onClick:function(){return e.setState((function(e){return{showAdvanceSearch:!e.showAdvanceSearch}}))},className:l?"active":null},o.a.createElement(ia.a,{icon:Ia.g,style:{paddingRight:"4px"}}),"Filters"),(g.length>0||Object.keys(f).length>0)&&o.a.createElement(Xt.a,{onClick:function(){return e.clearAdvancedFilters()},style:{marginLeft:"10px"}},"Clear")),o.a.createElement("div",{className:"genreWrapper"},o.a.createElement("div",{className:"browseSelectionsContainer"},o.a.createElement(In,{items:Object.keys(p).map((function(t){return o.a.createElement("span",{key:t,className:"mobileGenreItem",onClick:e.onSelectGenre(t),style:{backgroundColor:p[t]?"rgba(95, 95, 95, 0.2)":"transparent"}},t)}))}))),o.a.createElement(pn.SlideDown,{style:{width:"100%"}},l?o.a.createElement(yn,{browseMoods:n,currentSelectedTempo:u,browseEraRange:d,onSelectTempo:this.onSelectTempo,onDeselectTempo:this.onDeselectTempo,onSelectEra:this.onSelectEra,onSelectMood:this.onSelectMood}):null),l&&o.a.createElement("div",{style:{width:"100%",boxShadow:"0 4px 2px -2px rgba(0, 0, 0, 0.2)",height:8,transition:".2s ease",marginTop:"10px"}}),m?o.a.createElement("div",{className:"advanced-station-wrapper"},o.a.createElement("div",{className:"playlistsContainer"},h?h.map((function(t,a){return o.a.createElement("div",{className:"playlistContainer",key:Object(G.get)(t,"_id",a)},o.a.createElement(jn,Object.assign({showPlaylistModal:e.showPlaylistModal,assignStation:e.props.actions.assignStation,company:E,browse:!0,history:e.props.history},t)))})):null),o.a.createElement(Xt.a,{className:"load-more",onClick:function(){return e.loadMoreStations()}},"Load More")):null),m?null:o.a.createElement("div",null,S&&Object.keys(k).map((function(a,n){return o.a.createElement(Cn,{showPlaylistModal:e.showPlaylistModal,company:E,key:a,id:a,rowIndex:n,title:a,type:a,data:k[a],source:"discover",isApple:t,showViewAll:!0})})),!t&&Object.keys(b).map((function(t,a){return o.a.createElement(Cn,{showPlaylistModal:e.showPlaylistModal,company:E,key:t,id:t,rowIndex:S?null:a,title:t,type:t,data:b[t],source:"discover",showViewAll:!0})})),!t&&Object.keys(v).map((function(t){return o.a.createElement(Cn,{showPlaylistModal:e.showPlaylistModal,company:E,key:t,id:t,title:t,type:t,data:v[t],source:"discover",showViewAll:!0})}))))),o.a.createElement("div",{className:"pageFooter"})))}}]),a}(n.Component));var Mn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,isApple:e.auth.isApple}}),(function(e){return{actions:Object(c.b)({addPlayerListeners:Ke,removePlayerListeners:tt,getDiscoverPulicStations:vt,assignStation:Et},e)}}))(Object(fe.f)(An)),Dn=a(402),xn=a(125),_n=a(403),Rn=a(272),Bn=a(95),Fn=a.n(Bn),Un=(a(874),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={hovered:!1},n}return Object(se.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.simple,r=Object(G.get)(a,"_id",a),i=Object(G.get)(a,"name",""),c=Object(G.get)(a,"bpm.mean",100).toFixed(0),s=Object(G.get)(a,"genres",[]),l=Z(c);return o.a.createElement("div",{className:"schedule-playlist draggable-events",title:i,data:r,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},o.a.createElement("div",{className:"flexRow station-content noselect"},o.a.createElement("div",{className:"name"}," ",i," "),o.a.createElement("div",{className:"bpm-wrapper"},o.a.createElement(ia.a,{icon:Object(G.get)(l,"icon",""),style:{fontSize:24}}))),o.a.createElement(kn,{genres:s,roundBottom:!0,simple:n}))}}]),a}(n.Component)),Vn=(a(875),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n}return Object(se.a)(a,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.data,r=this.state.expanded,i=Object(gt.a)(n);return r||(i=i.slice(0,5)),o.a.createElement("div",{className:"music-section-wrapper"},o.a.createElement("div",{className:"music-section-header"}," ",a," "),i.map((function(e){return o.a.createElement(Un,{data:e,key:Object(G.get)(e,"_id",e),simple:!0})})),n.length>5&&o.a.createElement("div",{className:"view-more",onClick:function(){return e.toggleExpand()}},r?"View Less":"View More"))}}]),a}(n.Component)),qn=(a(876),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleUpdate=function(e){var t=Object(u.a)({},e),a=Object(G.get)(t,"target.value","");n.setState({text:a.length>0&&a.length<40?a:a.substring(0,40)})},n.toggleInput=function(){try{n.setState({activeInput:!n.state.activeInput},(function(){n.inputRef.current.focus()}))}catch(e){console.log("caught: ",e)}},n.state={text:"",activeInput:!1},n.inputRef=o.a.createRef(),n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this;try{document.addEventListener("mousedown",(function(t){return e.handleClickOutside(t)})),document.addEventListener("keypress",(function(t){return e.handleKeyDown(t)}))}catch(t){console.log("caught didMount toggleInput err: ",t)}}},{key:"componentDidUpdate",value:function(e,t){Object(G.isEqual)(Object(G.get)(this.props,"text",""),Object(G.get)(e,"text",""))||(console.log("props: ",this.props),this.setState({text:Object(G.get)(this.props,"text","")})),Object(G.get)(this.state,"activeInput",!1)||Object(G.isEqual)(Object(G.get)(this.state,"activeInput",!1),Object(G.get)(t,"activeInput",!1))||(console.log("onUpdate: ",this.state),this.props.onUpdate(this.state.text))}},{key:"componentWillUnmount",value:function(){try{document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("keypress",this.handleKeyDown)}catch(e){console.log("caught willUnmount toggleInput err: ",e)}}},{key:"handleKeyDown",value:function(e){"enter"===Object(G.get)(e,"key","").toLowerCase()&&this.setState({activeInput:!1})}},{key:"handleClickOutside",value:function(e){var t=Object(G.get)(this,"inputRef.current","");t&&!t.contains(e.target)&&this.setState({activeInput:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeInput,n=t.text;return o.a.createElement("div",{className:"toggle-input noselect"},!a&&o.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},o.a.createElement("div",{className:"scheduleName",onClick:function(){return e.toggleInput()}},n),o.a.createElement(ia.a,{icon:nn.f,className:"icon inputIcon",onClick:function(){return e.toggleInput()}})),a&&o.a.createElement("input",{ref:this.inputRef,onChange:function(t){return e.handleUpdate(t)},className:"scheduleNameInput",placeholder:n}))}}]),a}(n.Component)),zn=(a(877),wa.a.confirm),Gn=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).renderHeader=function(e){switch(e.getDay()){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return"Sunday"}},n.validateEvent=function(e){e.event.start.getDate()!==e.event.end.getDate()&&(e.event.start.getDate()+1===e.event.end.getDate()&&0===e.event.end.getHours()&&0===e.event.end.getMinutes()?console.log("Same day allowed"):e.revert())},n.saveSchedule=function(){var e=n.state,t=e.stationName,a=e.stationId;e.isSaving;try{n.setState({isSaving:!0},(function(){var e=n.calendarComponentRef.current.getApi().getEvents(),o=Object(G.get)(n.props,"user.company._id",null),r=[];e.forEach((function(e){r.push({start:Fn()(e.start).format(),end:Fn()(e.end).format(),day:Fn()(e.start).format(),title:e.title,stationId:null!==e.id&&""!==e.id?e.id:e.extendedProps.stationId})})),n.props.actions.setSchedule({companyId:o,scheduleId:a,name:t,stations:r}).then((function(){n.setState({isSaving:!1},(function(){pa({category:g,action:w,label:A}),n.props.history.push("/schedules")}))}))}))}catch(o){pa({category:g,value:o,label:M}),n.setState({isSaving:!1}),console.log("caught: ",o)}},n.closeSchedule=function(){pa({category:g,action:N,label:A}),n.props.history.push("/schedules")},n.backToDashboard=function(){pa({category:g,action:C,label:A}),n.props.history.push("/nowPlaying")},n.state={isLoading:!0,isMobile:K(),stations:[],stationName:"",mySchedule:{},stationId:n.props.match.params.id,playlists:[],showMusicPlayer:!1,isSaving:!1},n.calendarComponentRef=o.a.createRef(),n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=Object(ge.a)(pe.a.mark((function e(){var t,a,n,o,r,i,c,s,l,u=this;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ga(),t=this.state.stationId,e.next=4,this.props.actions.getSchedule(t);case 4:return a=e.sent,e.next=7,this.props.actions.getDiscoverPulicStations(t);case 7:n=e.sent,a.success&&(o=Object(G.get)(a,"data[0]",null),r=Object(G.get)(a,"data[0].name",null),i=Object(G.get)(a,"data[0].stations",null),this.setState({mySchedule:o,stationName:r,stations:i})),c=Object(G.get)(n,"playlistList",[]),s=c.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),l=c.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{}),this.setState({isLoading:!1,playlists:c,browseGenres:s,browseMoods:l,showMusicPlayer:Object(G.get)(this.props,"player.showPlayer",!1)},(function(){try{u.accessFullCalendarAPI(),window.addEventListener("resize",u.accessFullCalendarAPI.bind(u));var e=document.getElementById("external-events");new Rn.a(e,{itemSelector:".draggable-events",eventData:function(e){return{title:e.getAttribute("title"),id:e.getAttribute("data")}}})}catch(t){console.log("caught err: ",t)}})),this.state.isMobile&&pa({category:g,action:I});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;Object(G.isEqual)(Object(G.get)(this.props,"player.showPlayer",null),Object(G.get)(e,"player.showPlayer",null))||this.setState({showMusicPlayer:Object(G.get)(this.props,"player.showPlayer",!1)},(function(){t.accessFullCalendarAPI()}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",this.accessFullCalendarAPI)}catch(e){console.log("caught: ",e)}}},{key:"accessFullCalendarAPI",value:function(){try{this.setState({isMobile:K()});var e=document.getElementById("external-events")||null;e&&(e=e.getBoundingClientRect().height);var t=this.calendarComponentRef.current.getApi();t.setOption("height",e),t.setOption("eventColor","#2F2F2F")}catch(a){console.log("caught: ",a)}}},{key:"showErrorMessage",value:function(){var e=this;return o.a.createElement("div",{className:"error-div"},o.a.createElement("div",{className:"title"},"Mobile Not Supported"),o.a.createElement("div",{className:"subtitle"},"Please view this page on desktop."),o.a.createElement("div",{className:"phone"},o.a.createElement(ia.a,{icon:Ca.a,className:"mobile-icon"}),o.a.createElement(ia.a,{icon:Ca.d,className:"frown-icon"})),o.a.createElement(Xt.a,{className:"optionButton",onClick:function(){return e.backToDashboard()}},"Back to Dashboard"))}},{key:"eventClick",value:function(e){zn({title:"Delete this station?",content:Object(G.get)(e,"event.title","")+": "+Fn()(Object(G.get)(e,"event.start","")).format("ddd")+" "+Fn()(Object(G.get)(e,"event.start","")).format("LT")+" - "+Fn()(Object(G.get)(e,"event.end","")).format("ddd")+" "+Fn()(Object(G.get)(e,"event.end","")).format("LT"),onOk:function(){e.event.remove()},onCancel:function(){console.log("Cancel")}})}},{key:"stationNameUpdate",value:function(e){this.setState({stationName:e})}},{key:"render",value:function(){var e=this,t=this.props.history,a=this.state,n=a.isLoading,r=a.playlists,i=a.stations,c=a.showMusicPlayer,s=a.isMobile,l=a.stationName,d=a.isSaving;console.log("state: ",this.state);var m,p={},g={},h=Object(G.get)(this.props,"myLocation.favorites",[]),f=Object(mn.a)(B.global);try{for(f.s();!(m=f.n()).done;){var b=m.value;p[b]=[]}}catch(L){f.e(L)}finally{f.f()}var v,y=B.defaultIndividual,E=Object(mn.a)(y);try{for(E.s();!(v=E.n()).done;){b=v.value;g[b]=[]}}catch(L){E.e(L)}finally{E.f()}if(!n){var O,S=Object(mn.a)(r);try{for(S.s();!(O=S.n()).done;){var k,j=O.value,w=Object(mn.a)(Object(G.get)(j,"supersets",[]));try{for(w.s();!(k=w.n()).done;){var N=k.value;N in p&&p[N].push(j),N in g&&g[N].push(j)}}catch(L){w.e(L)}finally{w.f()}}}catch(L){S.e(L)}finally{S.f()}}var C=Object.keys(g),I=Object.keys(p);return o.a.createElement("div",{className:"schedulePageWrapper"},o.a.createElement(Rt.a,{indicator:Ft,spinning:n},s?this.showErrorMessage():o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"topRowWrapper"},o.a.createElement("div",{className:"topRowLeft"},o.a.createElement("div",{className:"scheduleNameWrapper"},o.a.createElement(qn,{text:l,onUpdate:function(t){return e.stationNameUpdate(t)}})),o.a.createElement("div",{className:"description"}," Drag and Drop Your Stations to Schedule When They Play ")),o.a.createElement("div",{className:"scheduleButtonGroup"},o.a.createElement(Xt.a,{className:"optionButton whitespinner noblur",type:"primary",onClick:d?null:function(){return e.saveSchedule()}},o.a.createElement(Rt.a,{indicator:Ft,spinning:d}," ","Save"," ")),o.a.createElement(Xt.a,{className:"optionButton",onClick:function(){return e.closeSchedule()}},"Close"))),o.a.createElement("div",{className:"bottomRowWrapper",style:{maxHeight:c?"72vh !important":null}},o.a.createElement("div",{id:"external-events",className:"selectionWrapper"},o.a.createElement(Vn,{label:"Favorites",data:h}),I.map((function(e){return o.a.createElement(Vn,{key:e,label:e,data:p[e]})})),C.map((function(e){return o.a.createElement(Vn,{key:e,label:e,data:g[e]})})),o.a.createElement(Vn,{label:"General",data:r}),o.a.createElement("div",{className:"musicSectionWrapper"},o.a.createElement("div",{className:"musicSectionHeader"}," Browse More Soundtracks "),o.a.createElement("div",{className:"musicSectionFooter",onClick:function(){return t.push("/discover")}},"Discover Music",o.a.createElement(ia.a,{icon:nn.e,className:"discoverIcon"})))),o.a.createElement("div",{className:"calendarWrapper"},o.a.createElement("div",{className:"app-calendar noselect",id:"mycalendartest"},o.a.createElement(Dn.a,{defaultView:"timeGridWeek",header:!1,defaultDate:"2020-01-10T00:00:00.000Z",allDayDefault:!1,eventDurationEditable:!0,editable:!0,events:i,droppable:!0,plugins:[xn.d,_n.a,Rn.b],ref:this.calendarComponentRef,eventDrop:this.validateEvent,eventReceive:function(e){console.log("data: ",Object(u.a)({},e))},slotDuration:"00:30",eventClick:function(t){return e.eventClick(t)},startRecur:Date.now(),allDaySlot:!1,eventOverlap:!1,columnHeaderText:this.renderHeader,eventResize:this.validateEvent,forceEventDuration:!0})))))))}}]),a}(n.Component);var Wn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists,schedules:e.schedules,player:e.player}}),(function(e){return{actions:Object(c.b)({getDiscoverPulicStations:vt,setSchedule:wt,getSchedule:kt},e)}}))(Object(fe.f)(Gn)),Hn=(a(878),wa.a.confirm),Yn=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).assignSchedule=function(e){e.stopPropagation(),n.setState({isLoading:!0},(function(){var e=Object(G.get)(n.props,"data.company._id",null),t=Object(G.get)(n.props,"data._id",null);n.props.actions.assignSchedule({companyId:e,scheduleId:t}).then((function(e){e?(n.setState({isLoading:!1}),n.props.history.push("/nowPlaying",{isBack:!0})):n.props.actions.setSnackbarMessage({message:"Error while assigning station",type:"error"})}))}))},n.deleteSchedule=function(e){var t=e.e,a=e.data,o=e.props,r=e.callback;t.stopPropagation(),n.setState({isLoading:!0},(function(){Hn({title:"Delete Schedule?",content:Object(G.get)(a,"name",""),onOk:function(){var e=Object(G.get)(o,"data.company._id",null),t=Object(G.get)(o,"data._id",null);o.actions.deleteSchedule({companyId:e,scheduleId:t}).then((function(e){e||(r(),o.actions.setSnackbarMessage({message:"Error while deleting station",type:"error"}))}))},onCancel:function(){r()}})}))},n.state={hidden:!0,isLoading:!1},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.wait,a=setTimeout((function(){e.setState({hidden:!1}),clearTimeout(a)}),t)}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onClick,r=this.state,i=r.hidden,c=r.isLoading;return o.a.createElement(o.a.Fragment,null,!i&&o.a.createElement(Ln.Animated,{animationIn:"fadeIn",isVisible:!0},o.a.createElement(Rt.a,{indicator:Ft,spinning:c},o.a.createElement("div",{key:a._id,className:"scheduleBlock",style:{backgroundColor:a.hex},onClick:function(){return n(a._id)}},o.a.createElement("div",{className:"schedule-icon-row"}),o.a.createElement("div",{className:"schedule-text-wrapper",style:{flex:1}},o.a.createElement("div",{className:"schedule-text"},Object(G.get)(a,"name",""))),o.a.createElement("div",{className:"schedule-icon-row"},o.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.assignSchedule(t)}},o.a.createElement(ia.a,{icon:Ia.m,className:"icon"})),o.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.deleteSchedule({e:t,data:a,props:e.props,callback:function(){return e.stopLoading()}})}},o.a.createElement(ia.a,{icon:Ia.p,className:"icon"})))))))}}]),a}(n.Component);var Kn=Object(de.b)((function(e){return{user:e.auth.user,stations:e.stations.data}}),(function(e){return{actions:Object(c.b)({assignSchedule:Ct,deleteSchedule:It,setSnackbarMessage:_t},e)}}))(Object(fe.f)(Yn)),Jn=(a(879),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).getAllLocations=function(){var e=Object(G.get)(n.props,"user.company._id","");n.props.actions.getMyPlaylists({companyId:e}).then((function(e){e&&n.setState({isLoading:!1})}))},n.state={isLoading:!0},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){ga(),this.getAllLocations()}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"myLocation.token",null),Object(G.get)(e,"myLocation.token",null))||(console.log("update props: ",this.props),this.getAllLocations())}},{key:"createNewSchedule",value:function(){var e=this,t=Object(G.get)(this.props,"user.company._id","");this.props.actions.createSchedule(t).then((function(t){pa({category:g,action:j});var a=Object(G.get)(t,"data._id",null);e.props.history.push("/createSchedule/".concat(a))}))}},{key:"editSchedule",value:function(e){pa({category:g,action:j,value:e}),this.props.history.push("/createSchedule/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props.playlists,a=this.state.isLoading;return o.a.createElement("div",{className:"scheduleWrapper noblur"},o.a.createElement(on,{title:o.a.createElement("span",null,"Your ",o.a.createElement("span",{style:{color:"#D04283"}},"Schedules")),subtitle:"Schedule out your stations for the whole week!"}),o.a.createElement(Rt.a,{indicator:Ft,spinning:a},o.a.createElement("div",{className:"scheduleBlockWrapper noselect"},o.a.createElement("div",{className:"newSchedule",onClick:function(){return e.createNewSchedule()}},o.a.createElement("div",{className:"plusCircle"},o.a.createElement(ia.a,{icon:nn.g,className:"icon"})),o.a.createElement("div",{className:"newScheduleText"},"Create Schedule")),Object(G.get)(t,"schedules",[]).map((function(t,a){return o.a.createElement(Kn,{key:Object(G.get)(t,"_id",t),wait:300*a,data:t,onClick:function(t){return e.editSchedule(t)}})})))))}}]),a}(n.Component));var Zn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists}}),(function(e){return{actions:Object(c.b)({getMyPlaylists:Nt,editSchedule:jt,createSchedule:St},e)}}))(Object(fe.f)(Jn)),Qn=(a(880),wa.a.confirm),Xn=na.a.Option,$n=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={messageData:n.props.message},n}return Object(se.a)(a,[{key:"updateMessageFrequency",value:function(e){var t=this,a=e.e,n=e.messageData,o=e.user;this.setState({messageData:Object(u.a)(Object(u.a)({},n),{},{frequency:a})},(function(){t.props.actions.updateFrequency({companyId:Object(G.get)(o,"company._id"),locationId:Object(G.get)(t.props,"myLocation._id",""),id:Object(G.get)(n,"_id",""),frequency:a}).then((function(e){e&&t.props.actions.getMessages({companyId:Object(G.get)(t.props,"user.company._id"),locationId:Object(G.get)(t.props,"myLocation._id","")})}))}))}},{key:"delete",value:function(e){var t=e.user,a=e.messageData,n=e.props;Qn({title:"Delete Message?",content:Object(G.get)(a,"title","")+": "+Object(G.get)(a,"message",""),onOk:function(){n.actions.deleteMessage({companyId:Object(G.get)(t,"company._id"),locationId:Object(G.get)(n,"myLocation._id",""),id:Object(G.get)(a,"_id","")}).then((function(e){e&&n.actions.getMessages({companyId:Object(G.get)(n,"user.company._id"),locationId:Object(G.get)(n,"myLocation._id","")})}))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.user,r=t.setPreviewUrl,i=t.myLocation,c=this.state.messageData;return o.a.createElement("div",{className:"messageCard"},o.a.createElement("div",{className:"messageCardheader"},o.a.createElement("div",{style:{paddingRight:"10px"},onClick:function(){return r(Object(G.get)(c,"url",""))}},o.a.createElement(ia.a,{icon:Ia.q,className:"messageCardPreview"})),o.a.createElement("div",{className:"messageTitle"}," ",Object(G.get)(c,"title","")," "),o.a.createElement("div",{className:"icon",style:{paddingLeft:"10px"},onClick:function(){return e.delete({user:n,messageData:c,props:e.props})}},o.a.createElement(ia.a,{icon:Ca.f}))),o.a.createElement(na.a,{defaultValue:Object(G.get)(a,"frequency['"+Object(G.get)(i,"_id","")+"']",""),onChange:function(t){e.updateMessageFrequency({e:t,messageData:c,user:n})}},_.map((function(e,t){return o.a.createElement(Xn,{key:Object(G.get)(e,"time",t),value:Object(G.get)(e,"time","60")},Object(G.get)(e,"title","Error"))}))))}}]),a}(n.Component);var eo=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(c.b)({deleteMessage:Pt,updateFrequency:At,getMessages:Lt},e)}}))(Object(fe.f)($n)),to=a(197),ao=a.n(to),no=(a(882),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isPlaying:!1,previewTrackUrl:null,isLoading:!0},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getMessages({companyId:Object(G.get)(this.props,"user.company._id"),locationId:Object(G.get)(this.props,"myLocation._id","")}).then((function(t){t&&e.setState({isLoading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this;Object(G.isEqual)(Object(G.get)(this.props,"myLocation.token",null),Object(G.get)(e,"myLocation.token",null))||this.props.actions.getMessages({companyId:Object(G.get)(this.props,"user.company._id"),locationId:Object(G.get)(this.props,"myLocation._id","")}).then((function(){t.setState({isLoading:!1})}))}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){this.setState({previewTrackUrl:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.inStoreMessaging,r=t.myLocation,i=this.state,c=i.previewTrackUrl,s=i.isLoading,l=Object(G.get)(n,"messages",[]).filter((function(e){return parseInt(Object(G.get)(e,"frequency['"+Object(G.get)(r,"_id","")+"']",""))>0})),u=Object(G.get)(n,"messages",[]).filter((function(e){return 0===parseInt(Object(G.get)(e,"frequency['"+Object(G.get)(r,"_id","")+"']",""))}));return o.a.createElement("div",{className:"messageWrapper"},o.a.createElement(on,{title:o.a.createElement("span",null,"In-Store ",o.a.createElement("span",{style:{color:"#D04283"}}," Messages ")),subtitle:"Custom announcements to help drive customer action"}),o.a.createElement("div",{className:"centerMessages"},o.a.createElement("div",{className:"viewMessagesContainer"},o.a.createElement("div",null,o.a.createElement("div",{style:{display:"none"}},o.a.createElement(ao.a,{ref:function(t){e.rap=t},src:c,autoPlay:!1,controls:!1,muted:!1,volume:.3,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})},onError:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})}})),o.a.createElement(Rt.a,{indicator:Ft,spinning:s},l.length>0||u.length>0?o.a.createElement(o.a.Fragment,null,o.a.createElement(Xt.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",style:{width:"100%",margin:"10px 0px",backgroundColor:"#e3e3e3"}},o.a.createElement(ia.a,{icon:Ia.n,className:"connect-icon",style:{marginRight:"10px"}}),"Create New Message"),l.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"heading heading-medium"},"Active Messages "),l.map((function(t,n){return o.a.createElement(eo,{key:Object(G.get)(t,"_id",n),message:t,companyId:Object(G.get)(a,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)}})}))),u.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"heading heading-medium"},"Inactive Messages "),u.map((function(t,n){return o.a.createElement(eo,{key:Object(G.get)(t,"_id",n),message:t,companyId:Object(G.get)(a,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)}})})))):o.a.createElement(Xt.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",style:{width:"100%",margin:"10px 0px",backgroundColor:"#e3e3e3"}},o.a.createElement(ia.a,{icon:Ia.n,className:"connect-icon",style:{marginRight:"10px"}}),"Create Your First Message"))))))}}]),a}(n.Component));var oo=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inStoreMessaging:e.inStoreMessaging}}),(function(e){return{actions:Object(c.b)({getMessages:Lt},e)}}))(Object(fe.f)(no)),ro=(a(883),na.a.Option),io=Zt.a.TextArea,co=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={message:"",title:"",language:"",voice:"",frequency:"0",voiceOptions:{}},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getVoiceOptions().then((function(t){e.setState({voiceOptions:t})}))}},{key:"createMessage",value:function(){var e=this,t=this.state,a=t.title,n=t.message,o=t.language,r=t.voice,i=t.frequency;this.props.actions.createMessage({companyId:Object(G.get)(this.props,"user.company._id"),locationId:Object(G.get)(this.props,"myLocation._id",""),title:a,voice:r,language:o,message:n,frequency:i}).then((function(t){t?e.props.history.push("/inStoreMessaging"):window.alert("There was an error creating this message. Please try again.")}))}},{key:"renderVoiceOptions",value:function(){var e=this.state,t=e.language,a=e.voiceOptions;return t?a[t].map((function(e){return o.a.createElement(ro,{key:e.name}," ",e.name," ")})):void 0}},{key:"render",value:function(){var e=this,t=this.state,a=t.voiceOptions,n=t.language;return o.a.createElement("div",{className:"messageWrapper"},o.a.createElement(on,{backArrow:!0,backArrowPress:function(){return e.props.history.push("/inStoreMessaging")},title:o.a.createElement("span",null,"Create a ",o.a.createElement("span",{style:{color:"#D04283"}}," Message "))}),o.a.createElement("div",{className:"centerMessages"},o.a.createElement("div",{className:"createMessagesContainer"},o.a.createElement("div",{className:"heading heading-medium"},"Message Name "),o.a.createElement(Zt.a,{onChange:function(t){e.setState({title:t.target.value})}}),o.a.createElement("div",{className:"heading heading-medium"},"Message "),o.a.createElement(io,{placeholder:"Max 200 Characters",maxLength:200,onChange:function(t){e.setState({message:t.target.value})},rows:4}),o.a.createElement("div",{className:"heading heading-medium"},"Language / Locale "),o.a.createElement(na.a,{defaultValue:"Please select a language",style:{width:"fill"},onChange:function(t,a){e.setState({language:a.key})}},Object.keys(a).map((function(e){return o.a.createElement(ro,{key:e}," ",e," ")}))),o.a.createElement("div",{className:"heading heading-medium"},"Voice "),console.log(a[n]),o.a.createElement(na.a,{defaultValue:"Please select a voice",style:{width:"fill"},onChange:function(t,a){return e.setState({voice:a.key})}},this.renderVoiceOptions()),o.a.createElement("div",{className:"heading heading-medium"},"Frequency "),o.a.createElement(na.a,{defaultValue:"Please select a frequency",style:{width:"fill"},onChange:function(t,a){return e.setState({frequency:a.key})}},_.map((function(e,t){return o.a.createElement(ro,{key:Object(G.get)(e,"time",t),value:Object(G.get)(e,"time","60")},Object(G.get)(e,"title","Error"))}))),o.a.createElement(Xt.a,{onClick:function(){return e.createMessage()},size:"large",style:{width:"100%",marginBottom:10,marginTop:10,backgroundColor:"#e3e3e3"}},"Create Message"))))}}]),a}(n.Component);var so=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(c.b)({createMessage:Tt,getVoiceOptions:Mt},e)}}))(Object(fe.f)(co)),lo=[{path:"/",exact:!0,isChild:!1,private:!1,component:function(){return o.a.createElement(fe.a,{to:"/discover"})}},{path:"/landing",exact:!1,isChild:!1,private:!1,component:function(){return o.a.createElement(qt,null)}},{path:"/login",exact:!0,isChild:!1,private:!1,component:function(){return Qa.login(),o.a.createElement(Mn,null)}},{path:"/signUp",exact:!0,isChild:!1,private:!1,component:function(){return Qa.signUp(),o.a.createElement(Mn,null)}},{path:"/nowPlaying",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(un,null)}},{path:"/discover",exact:!0,isChild:!0,private:!1,component:function(){return o.a.createElement(Mn,null)}},{path:"/station/:id",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(tn,null)}},{path:"/createschedule/:id",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(Wn,null)}},{path:"/schedules",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(Zn,null)}},{path:"/inStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(oo,null)}},{path:"/createInStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return o.a.createElement(so,null)}}];a(884);Ot.a.config({top:"5%",duration:1});var uo=null,mo=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleClick=function(){var e=Object(ge.a)(pe.a.mark((function e(t){var a;return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("features"!==t&&"price"!==t){e.next=4;break}Ot.a.info("This service will be available soon, please enjoy our other services"),e.next=15;break;case 4:if("signout"!==t){e.next=8;break}n.logInOut(),e.next=15;break;case 8:if(a=Object(G.get)(n.props,"auth.location.station._id",null),"nowPlaying"!==t||a){e.next=12;break}return n.props.actions.setSnackbarMessage({message:"Please select a station before viewing your dashboard",type:"warn"}),e.abrupt("return");case 12:n.setState({current:t}),Ot.a.destroy(),n.props.history.push("/"+t);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.logInOut=function(){if(Qa.isLoggedIn())try{pa({category:h,action:P}),localStorage.removeItem("location-jwt"),Qa.logout()}catch(e){console.log("Caught logout err: ",e)}else Qa.login()},n.state={current:void 0,windowSize:window.innerWidth},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.pathname.replace("/","");this.setState({current:t}),uo=window.addEventListener("resize",(function(t){e.setState({windowSize:t.target.innerWidth})}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",uo),uo=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"checkIfActiveTab",value:function(e){return this.props.location.pathname.toLowerCase().includes(e.toLowerCase())}},{key:"render",value:function(){var e=this,t=this.state.windowSize,a=o.a.createElement(oa.a,{mode:"horizontal",onClick:function(t){return e.handleClick(t.key)},selectedKeys:[this.state.current],className:"menu-wrapper"},o.a.createElement(oa.a.Item,{key:"nowPlaying"},"Dashboard"),o.a.createElement(oa.a.Item,{key:"discover"},"Stations"),o.a.createElement(oa.a.Item,{key:"schedules"},"Schedules"),o.a.createElement(oa.a.Item,{key:"inStoreMessaging"},"In-Store Messaging"),o.a.createElement(oa.a.Item,{key:"signout"},Qa.isLoggedIn()?"Sign Out":"Sign In")),n=Object(G.get)(this.props,"route",null),r=null;n&&(r=!!n.toUpperCase().includes("createSchedule".toUpperCase()));var i=r?"header-container headerTwo":"header-container headerOne";return o.a.createElement("div",{className:i},o.a.createElement(On.a,{src:x.appLogo,className:"header_logo pointer noselect",size:50,onClick:function(){return e.props.history.push("/nowPlaying")},alt:"logo"}),t<=760?o.a.createElement("div",{className:"mobileButtonsContainer"},o.a.createElement(ra.a,{overlay:a,trigger:["click"]},o.a.createElement(Xt.a,null,o.a.createElement(ia.a,{icon:Ia.b})))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"mainButtonsContainer noselect"},o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("nowPlaying")?" mainButtonActive":""),key:"nowPlaying",onClick:function(){return e.handleClick("nowPlaying")}},"Dashboard"),o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("discover")||this.checkIfActiveTab("browse")?" mainButtonActive":""),key:"discover",onClick:function(){return e.handleClick("discover")}},"Stations"),o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("schedules")||this.checkIfActiveTab("createSchedule")?" mainButtonActive":""),key:"schedules",onClick:function(){return e.handleClick("schedules")}},"Schedules"),o.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("inStoreMessaging")||this.checkIfActiveTab("inStoreMessaging")?" mainButtonActive":""),key:"inStoreMessaging",onClick:function(){return e.handleClick("inStoreMessaging")}},"In-Store Messaging")),o.a.createElement(Xt.a,{key:"signout",onClick:function(){return e.logInOut()}},Qa.isLoggedIn()?"Sign Out":"Sign In")),(Object(G.get)(ye,"API_URL","").includes("localhost")||Object(G.get)(ye,"API_URL","").includes("-dev"))&&o.a.createElement(ia.a,{className:"icon",style:{paddingLeft:"10px",fontSize:"32px"},icon:Ia.a,onClick:function(){return console.log({props:e.props.state,trackSchedule:Object(G.get)(e.props,"state.auth.location.trackSchedule",{}),player:Object(G.get)(e.props,"state.player",{})})}}))}}]),a}(n.Component);var po=Object(fe.f)(Object(de.b)((function(e){return{auth:e.auth,player:e.player,state:e}}),(function(e){return{actions:Object(c.b)({setSnackbarMessage:_t},e)}}))(Object(Ut.a)(mo))),go=a(897),ho=a(404),fo=a.n(ho),bo=(a(887),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.changeVolume(.01*e)},n.state={myVolume:0},n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){this.setState({myVolume:Object(G.get)(this.props,"volume",0)})}},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"volume",0),Object(G.get)(e,"volume",0))||this.setState({myVolume:Object(G.get)(this.props,"volume",0)})}},{key:"calculateVolumeHeight",value:function(){return 100*this.state.myVolume}},{key:"render",value:function(){var e=this,t=this.state.myVolume;return o.a.createElement("div",{className:"volume-slider-wrapper"},o.a.createElement("div",{className:"slider orientation-reversed"},o.a.createElement("div",{className:"slider-group"},o.a.createElement("div",{className:"slider-vertical"},o.a.createElement(fo.a,{min:0,max:100,value:this.calculateVolumeHeight(t),orientation:"vertical",onChange:this.handleChange,tooltip:!1,onChangeStart:function(t){return e.props.startDrag(t)},onChangeComplete:function(t){return e.props.endDrag(t)}})))))}}]),a}(n.Component)),vo=(a(888),function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;Object(ce.a)(this,a),n=t.call(this,e);var o=parseFloat(localStorage.getItem("volume"));return n.state={currentTime:"0:00",duration:"0:00",volume:o||("0"===o.toString()?0:.3),previousVolume:o||.3,showVolumeControl:!1,dragging:!1,url:null,isrc:null},n}return Object(se.a)(a,[{key:"checkIfVolumeSlider",value:function(e){if(!e)return!1;for(var t=Object(G.get)(e,"path",[]),a=0;a<t.length;a++)if("volume-wrapper"===t[a].id)return!0;return!1}},{key:"componentDidMount",value:function(){var e=this;this.rap.audioEl.addEventListener("timeupdate",(function(t){e.setState({currentTime:t.target.currentTime,duration:t.target.duration})})),window.addEventListener("mouseover",(function(t){e.checkIfVolumeSlider(t)||e.state.dragging?e.state.showVolumeControl||e.setState({showVolumeControl:!0}):e.state.showVolumeControl&&e.setState({showVolumeControl:!1})}));var t=Object(G.get)(this.props,"currentTrack","");this.updateTrackState(),this.props.actions.checkIfAdvertisement(Object(G.get)(this.props,"currentTrack",{})),this.setState({duration:Object(G.get)(t,"duration",null)})}},{key:"componentWillUnmount",value:function(){try{this.player.removeEventListener("timeupdate"),window.removeEventListener("mouseover")}catch(e){console.log("caught error on music-bar unmount",e)}}},{key:"updateTrackState",value:function(){this.setState({url:Object(G.get)(this.props,"player.trackMap["+Object(G.get)(this.props,"currentTrack.isrc","")+"].url",""),isrc:Object(G.get)(this.props,"currentTrack.isrc",null)})}},{key:"componentDidUpdate",value:function(e){(Object(G.isEqual)(Object(G.get)(this.props,"myLocation.currentTrack.isrc",null),Object(G.get)(e,"myLocation.currentTrack.isrc",null))||(console.log("nowPlaying: ",{currentTrack:Object(G.get)(this.props,"currentTrack.title",""),duration:J(Object(G.get)(this.props,"currentTrack.duration","")),station:Object(G.get)(this.props,"myLocation.station.name","")}),this.props.actions.checkIfAdvertisement(Object(G.get)(this.props,"currentTrack",{})),this.updateTrackState()),Object(G.isEqual)(Object(G.get)(this.props,"myLocation.station._id",null),Object(G.get)(e,"myLocation.station._id",null))||(console.log("<================ CHANGED STATION B ================>",this.props),this.props.actions.setTrackNumber(0),this.updateTrackState()),Object(G.isEqual)(Object(G.get)(this.props,"player.isPlaying",!1),Object(G.get)(e,"player.isPlaying",!1)))||(Object(G.get)(this.props,"player.isPlaying",!1)?this.rap.audioEl.play():this.rap.audioEl.pause())}},{key:"getCurrentTrack",value:function(){var e=this.state,t=e.url,a=e.isrc,n=Object(G.get)(this.props,"currentTrack.isrc",""),o=Object(G.get)(this.props,"player.trackMap["+n+"].url",Object(G.get)(this.props,"currentTrack.url",""));return a&&t&&a===n&&t!==o?t:o}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){var t=e.rap.audioEl.play();void 0!==t&&t.then((function(){e.props.actions.setIsPlaying(!0)})).catch((function(){e.props.actions.setIsPlaying(!1)}))}))}},{key:"togglePlay",value:function(){this.props.actions.setIsPlaying(!Object(G.get)(this.props,"player.isPlaying"))}},{key:"toggleMute",value:function(){var e=this,t=this.state.previousVolume;this.setState({volume:this.state.volume>0?0:t},(function(){localStorage.setItem("volume",e.state.volume)}))}},{key:"setVolume",value:function(e){var t=this;this.setState({volume:e,previousVolume:e},(function(){localStorage.setItem("volume",t.state.volume)}))}},{key:"toggleVolumeDrag",value:function(e){this.setState({dragging:e})}},{key:"closePlayer",value:function(){var e=Object(ge.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.actions.setIsPlaying(!1),pa({category:p,action:S,label:A}),e.next=4,this.props.actions.disconnectPlayer();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"songError",value:function(e){console.log("Song error: ",{e:e,props:this.props}),this.skipSong(0)}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:o.a.createElement(ia.a,{icon:Ca.b,className:"connect-icon"})})}))}},{key:"render",value:function(){var e=this,t=Object(G.get)(this.props,"player",{}),a=t.isPlaying,n=t.skipDisabled,r=this.state,i=r.volume,c=r.showVolumeControl,s=r.currentTime,l=r.duration,u=Object(G.get)(this.props,"currentTrack",{}),d=(s/l*100).toFixed(2),m=!1,p=!1,g=document.getElementById("player-info-wrapper")||null,h=document.getElementById("player-artist-info")||null,f=document.getElementById("player-track-info")||null;return g&&h&&f&&((g=g.getBoundingClientRect().width-60)<(h=h.getBoundingClientRect().width)&&(m=!0),g<(f=f.getBoundingClientRect().width)&&(p=!0)),o.a.createElement("div",{className:"music-bar-wrapper noselect",id:"music-player-controller"},o.a.createElement("div",{className:"react-music-player"},o.a.createElement(ao.a,{ref:function(t){e.rap=t},src:this.getCurrentTrack(),autoPlay:!1,controls:!1,muted:0===i,volume:i,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.skipSong(d)},onError:function(t){return e.songError(t)}})),o.a.createElement("div",{className:"music-bar-scrub-wrapper"},o.a.createElement("div",{className:"music-bar-scrubber",style:{width:d+"%"}})),o.a.createElement("div",{className:"music-bar-content-wrapper"},o.a.createElement("div",{className:"music-bar-item flexRow left-controls",id:"player-info-wrapper"},o.a.createElement("img",{className:"preview-image",src:Object(G.get)(u,"picture",null),alt:""}),o.a.createElement("div",{className:"preview-text"},o.a.createElement("div",{className:"song-artist"},o.a.createElement("span",{id:"player-artist-info",className:m?"marquee":""},Object(G.get)(u,"artist[0]","NA"))),o.a.createElement("div",{className:"song-title"},o.a.createElement("span",{id:"player-track-info",className:p?"marquee":""},Object(G.get)(u,"title","NA"))))),o.a.createElement("div",{className:"music-bar-item flexRow center-controls"},a?o.a.createElement(ia.a,{icon:Ia.l,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}):o.a.createElement(ia.a,{icon:Ia.m,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}),o.a.createElement(ia.a,{icon:Ia.o,className:"music-bar-icon".concat(n?" disabled":""),onClick:function(){return n?null:e.skipSong(d)}})),o.a.createElement("div",{className:"music-bar-item right-controls"},o.a.createElement("div",{className:"time-display"},o.a.createElement("span",{id:"current-song-time"},J(s))," \xa0/\xa0 ",o.a.createElement("span",{id:"current-song-duration"},J(l))," ",o.a.createElement("span",{id:"invis-current-song-time"},d)),o.a.createElement("div",{className:"volume-icon",id:"volume-wrapper"},c&&o.a.createElement(bo,{volume:i,changeVolume:function(t){return e.setVolume(t)},startDrag:function(){return e.toggleVolumeDrag(!0)},endDrag:function(){return e.toggleVolumeDrag(!1)}}),0===i?o.a.createElement(ia.a,{icon:Ia.r,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):i<.7?o.a.createElement(ia.a,{icon:Ia.q,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):o.a.createElement(ia.a,{icon:Ia.s,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}})),o.a.createElement(ia.a,{icon:Ca.f,className:"music-bar-icon close-icon",onClick:function(){return e.closePlayer()}}))))}}]),a}(n.Component));var yo=Object(de.b)((function(e){return{player:e.player,myLocation:e.auth.location,currentTrack:e.auth.location.currentTrack}}),(function(e){return{actions:Object(c.b)({checkIfAdvertisement:$e,skipSong:Xe,setIsPlaying:Pe,setTrackNumber:Me,disconnectPlayer:Je,playerError:Le},e)}}))(vo);a(889);Qa.initialize();Ya.a.Content;var Eo=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,snackbarMessageDuration:5},n}return Object(se.a)(a,[{key:"initiateLogin",value:function(e){localStorage.setItem("access-token",e),this.props.actions.auth0setLogin()}},{key:"componentWillMount",value:function(){var e=this;Qa.getLock().on("authenticated",(function(t){e.initiateLogin(t.idToken)})),Qa.getLock().checkSession({},(function(t,a){e.setState({isLoading:!1},(function(){!t&&(null===a||void 0===a?void 0:a.idToken)?e.initiateLogin(a.idToken):e.setState({isLoading:!1})}))}))}},{key:"componentDidUpdate",value:function(){Qa.isLoggedIn()&&this.state.isLoading&&this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.player,n=t.auth,r=Object(G.get)(a,"showPlayer",!1);return o.a.createElement(he.a,null,o.a.createElement("div",null,lo.map((function(t,a){return o.a.createElement(fe.b,{key:a,path:t.path,exact:t.exact,render:function(){var a,i,c;return e.state.isLoading||Qa.isLoggedIn()||!t.private||Qa.login(),Qa.isLoggedIn()||!t.private?o.a.createElement(o.a.Fragment,null,(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.company)&&!(null===n||void 0===n||null===(i=n.user)||void 0===i||null===(c=i.company)||void 0===c?void 0:c.name)?o.a.createElement(wa.a,{visible:!0,onCancel:e.onCancel,width:900,className:"modal-container",closable:!1,footer:!1},o.a.createElement("div",{className:"signup-modal-title"},"Welcome to ",o.a.createElement("span",{style:{color:"#d04283"}},"ambii")),o.a.createElement(Ea,null)):null,o.a.createElement("div",{className:"explore_container"},o.a.createElement(po,{showMenu:"userlogin",route:t.path}),o.a.createElement("div",{className:"contentWrapper".concat(r?" player-visible":"")},t.component()))):o.a.createElement(Ya.a,{className:"explore_container"},o.a.createElement(po,{id:"myHeader",showMenu:"landing"}),o.a.createElement("div",{className:"loading-app"},o.a.createElement("div",{className:"loading-app-text"},"Logging Into ",o.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),o.a.createElement(Rt.a,{indicator:Ft,spinning:!0,size:"large"})))}})}))))}}]),a}(o.a.Component);var Oo=Object(de.b)((function(e){return{snackbar:e.snackbar,auth:e.auth,player:e.player}}),(function(e){return{actions:Object(c.b)({auth0setLogin:dt},e)}}))(Object(Ut.a)(Eo)),So=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,initAnalytics:!1},ma.a.initialize("UA-167385126-1",{siteSpeedSampleRate:100,testMode:!document.location.hostname.includes("business.ambii.io")}),n}return Object(se.a)(a,[{key:"componentDidMount",value:function(){var e=Object(ge.a)(pe.a.mark((function e(){return pe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.actions.startSockets();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){Object(G.isEqual)(Object(G.get)(this.props,"snackbar.notification",null),Object(G.get)(e,"snackbar.notification",null))||this.openNotification(Object(G.get)(this.props,"snackbar.notification",null)),Object(G.isEqual)(Object(G.get)(this.props,"snackbar.message",null),Object(G.get)(e,"snackbar.message",null))||this.openMessage(Object(G.get)(this.props,"snackbar.message",null))}},{key:"openNotification",value:function(e){console.log("hasNotification: ",e),go.a.open({message:Object(G.get)(e,"message",""),description:Object(G.get)(e,"description",""),onClick:function(){console.log("Notification Clicked!")},className:"snackbar-notification snackbar-type-".concat(Object(G.get)(e,"type",""))}),this.props.actions.setSnackbarNotification(null)}},{key:"openMessage",value:function(e){var t=this.state.snackbarMessageDuration;console.log("hasMessage: ",e);var a=Object(G.get)(e,"message","");switch(Object(G.get)(e,"type","")){case"success":Ot.a.success(a,t);break;case"info":Ot.a.info(a,t);break;case"warn":Ot.a.warn(a,t);break;case"error":Ot.a.error(a,t);break;default:console.log("error in openMessage")}this.props.actions.setSnackbarMessage(null)}},{key:"render",value:function(){var e=this.props.player,t=Object(G.get)(e,"showPlayer",!1);return this.state.isLoading?o.a.createElement("div",{className:"loading-app"},o.a.createElement("div",{className:"loading-app-text"},"Loading ",o.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),o.a.createElement(Rt.a,{indicator:Ft,spinning:!0,size:"large"})):o.a.createElement(o.a.Fragment,null,o.a.createElement(Oo,{props:{showMusicPlayer:t}}),t&&o.a.createElement(yo,null))}}]),a}(o.a.Component);var ko=Object(de.b)((function(e){return{snackbar:e.snackbar,auth:e.auth,player:e.player}}),(function(e){return{actions:Object(c.b)({startSockets:Dt,setSnackbarNotification:xt,setSnackbarMessage:_t},e)}}))(Object(Ut.a)(So)),jo=function(e){Object(le.a)(a,e);var t=Object(ue.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(se.a)(a,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this.props.store;return o.a.createElement(de.a,{store:e},o.a.createElement("div",null,o.a.createElement(ko,null)))}}]),a}(n.Component);var wo=Object(de.b)((function(e){return{auth:e.auth,snackbar:e.snackbar,loader:e.loader}}),(function(e){return{actions:Object(c.b)({},e)}}))(jo);a(890),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var No=ie();"localhost"!==document.location.hostname&&"business-dev.ambii.io"!==document.location.hostname&&(console.log=function(){}),Object(r.render)(o.a.createElement(i.AppContainer,null,o.a.createElement(wo,{store:No})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[411,1,2]]]);
//# sourceMappingURL=main.f61ccc69.chunk.js.map