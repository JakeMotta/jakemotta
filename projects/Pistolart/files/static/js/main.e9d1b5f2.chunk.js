(this["webpackJsonpambii-business-web"]=this["webpackJsonpambii-business-web"]||[]).push([[0],{224:function(e,t,a){},378:function(e,t,a){},400:function(e,t,a){e.exports=a.p+"static/media/ambii_logo_inverse.188927ed.png"},402:function(e,t,a){e.exports=a.p+"static/media/ios.c969fdc0.png"},403:function(e,t,a){e.exports=a.p+"static/media/playstore.6b8a494d.png"},412:function(e,t,a){e.exports=a.p+"static/media/credit-card.10e3740d.svg"},413:function(e,t,a){e.exports=a.p+"static/media/visa.0d1fbbc4.svg"},414:function(e,t,a){e.exports=a.p+"static/media/amex.a9eddb34.svg"},415:function(e,t,a){e.exports=a.p+"static/media/mastercard.543bc93b.svg"},425:function(e,t,a){e.exports=a(916)},436:function(e,t,a){e.exports=a.p+"static/media/androidBtn.e65a89bc.png"},437:function(e,t,a){e.exports=a.p+"static/media/appleBtn.99f1ed98.png"},438:function(e,t,a){e.exports=a.p+"static/media/appLogo.811d25b4.png"},439:function(e,t,a){e.exports=a.p+"static/media/bg1.069f3dec.png"},440:function(e,t,a){e.exports=a.p+"static/media/bg2.5a06bbee.png"},441:function(e,t,a){e.exports=a.p+"static/media/bg3.9f68fc4b.png"},442:function(e,t,a){e.exports=a.p+"static/media/bg4.815bb5d4.jpg"},443:function(e,t,a){e.exports=a.p+"static/media/bg5.b7d2890a.jpg"},444:function(e,t,a){e.exports=a.p+"static/media/bg6.435f2fc0.jpg"},490:function(e,t){},532:function(e,t,a){},634:function(e,t,a){},635:function(e,t,a){},636:function(e,t,a){},830:function(e,t,a){},831:function(e,t,a){},832:function(e,t,a){},833:function(e,t,a){},837:function(e,t,a){},838:function(e,t,a){},839:function(e,t,a){},840:function(e,t,a){},841:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},844:function(e,t,a){},845:function(e,t,a){},889:function(e){e.exports=JSON.parse("{}")},890:function(e,t,a){},891:function(e,t,a){},892:function(e,t,a){},893:function(e,t,a){},894:function(e,t,a){},895:function(e,t,a){},896:function(e,t,a){},898:function(e,t,a){},899:function(e,t,a){},900:function(e,t,a){},901:function(e,t,a){},902:function(e,t,a){},903:function(e,t,a){},906:function(e,t,a){},907:function(e,t,a){},908:function(e,t,a){},911:function(e,t,a){},913:function(e,t,a){},914:function(e,t,a){},915:function(e,t,a){},916:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(6),s=a(263),i=(a(430),a(431),a(16)),c=(a(386),a(265)),l=a(54),u=a(14),m="Welcome",d="Discover",p="Dashboard",g="Schedule",h="General",f="Signed up for web application",b="Previewed a station",v="Updated station preference",y="Swapped to advance station browse",E="Started web player",O="Closed web player",S="Pressed connect button",k="Created Schedule",j="Saved Schedule",w="Closed Schedule",N="Back To Dashboard",C="Viewed on Mobile Device",I="Clicked a button",L="Toggled a station as favorite",T="User signed out of web application",M="button",P="error",A={Electronica:"#44d474","Alternative & Punk":"#d9964a",Rock:"#d64b46",Pop:"#d04283",Classical:"#8046d6",Traditional:"#c178ff",Jazz:"#42c4d0",Soundtrack:"#E6DD5D",Urban:"#191919",Other:"#999999"},x={googleBtn:a(436),iosBtn:a(437),appLogo:a(438),bg1:a(439),bg2:a(440),bg3:a(441),bg4:a(442),bg5:a(443),bg6:a(444)},D=[{title:"Inactive",time:"0"},{title:"Every 15 Minutes",time:"15"},{title:"Every 30 Minutes",time:"30"},{title:"Every Hour",time:"60"},{title:"Every Few Hours",time:"180"}],_={"Popular Today":"The Top Hits of Today","Holiday Music":"Get into the spirit of the season!","Flattening the Curve":"Battling COVID-19, one song at a time.","Upbeat Energy":"Energetic songs to get the mood flowing.","Laid-back, Low-key.":"Songs for relaxation and chill-out times.","Learning to Grow":"A series for those looking to overcome rough times, through different genres of music.",Decades:"Your home for all decades of music.","Ahead of the Curve":"A series for those who are tomorrow's trendsetters.","Liquid Courage":"Beats for those that are bold and those that are beautiful.","Beats and Beers":"Cheer on your favorite team with these country hits!","Taproom Treasures":"Stripped-down music for the sophisticated drinker.","Flirtatious Friday Night":"She's sitting right there.","Settled-Down Speakeasy":"Jazzy tunes for a sparkilng night.","Dancin' Across the World":"Iresistable, international glimmers of firey fun.","Coffee Curiosity":"A perfect morning moodsetter.","Bookstore Barista":"Quiet jazz for newspapers and novelists.","Classical Cappuccino":"Upscale grandiose through caffine and classical.","Countryside Cafe":"For french toast, syrup, and kickin' up those boots in the morning.","Late Night Study ":"Beats for the studious individual ","Glitz At the Ritz":"Wonder and wow through jazzy band ballads.","Loungeside Lovers":"Ambiance for the low-key days and nights.","Hearthside Hip":"R&B treasures for the late-night bonfire vibes","Travelers Rest":"Soft stripped music to lay down to.","Elegant Entertainment":"Classical masterpieces for the sophisticated traveler.","Tropical Getaway":"A cabana soundtrack for pina coladas and the poolside.","Pep Rally Pop":"Let's get this bread.","Study Beats":"Lo-fi music for the late study nights.","Intelligence through Inspiration":"Ambiance for peaceful reflection and quiet times.","Classical Concentration":"Inspiration through piano, strings, and eras of talent","Developing Brains":"For the little ones.","Academy Alternative":"Alternative hits for those looking to get work done.","Boutique Beats":"Continuous flow and feel-good vibes.","Diamonds Are Forever":"Inspirational classical music for the sophisticated shopper.","Retail R&B":"R&B and pop hits for the casual customer.","Food Court Finds":"Grab a bite to eat with this easy-listening soundtrack!","Girls Night Out":"Empowering women through confident, feel-good beats.","Upscaled Grace":"Elegance through classical masterpieces.","Jukebox of the Ages":"Your home for all decades of music.","Wax and Relax":"Set the mood with the perfect ambiiance.","Hairdresser Hop":"R&B and hip hop hits for the trendsetter.","Nails, Hair, Hips, Heels":"Endless feel-good beats.","Pumpin Metal":"Rock and Metal soundtrack for the heavy lifter.","Persistence Pop":"Keep that grind up.","Pre-Game Pump Up":"Get in your head, get in the ring.","Fire Dancing Fiesta":"High-energy music for the dancers...and for that perfect body.","Heavy Lifting Hype":"Get turnt.","Hamburger Hits":"Quick beats for quick bites.","Barbecue Bash":"Perfect for the backyard and the beer.","Asian Eats":"You don't need a plane ticket.","Taco Truck Temposetter":"Are you going to finish all 10 of those tacos?","Boba Beats":"Passionfruit, peach stars, pearls, and perfection.","Royalty Dining":"Elegnat music for roses and candlelit dinners.","Ethereal Elegance":"Transcend within yourself.","Self-Care Classical":"Classical music to rejuvinate the brain.","Asian Getaway":"Sounds through Japaneese cherry blossoms and night-market eats.","Relaxin' R&B":"Good vibes only.","Hot Spring Hits":"Glimmering hits for feel-good moments.","Working From Home":"Chill beats for ultimate focus and productivity.","New Hobby, New Self":"Cooking, dancing, stretching, reading- with this time, anything is possible.","A Time For Reflection":"Rise above and let serenity flow in this time of unrest.","Go Hard or (Stay) Home":"Quarantine ain't stopping these muscle gains.","Treasured Throwbacks":"Remembering the days before this period of time.","Positive Vibes Only (Singing in the Shower)":"Sing your heart out to these songs of joy and jubilation!"},B={global:["Popular Today"],defaultIndividual:["Working From Home","New Hobby, New Self","A Time For Reflection","Go Hard or (Stay) Home","Treasured Throwbacks","Positive Vibes Only (Singing in the Shower)"],bar:["Liquid Courage","Beats and Beers","Taproom Treasures","Flirtatious Friday Night","Settled-Down Speakeasy","Dancin' Across the World"],cafe:["Coffee Curiosity","Bookstore Barista","Classical Cappuccino","Boba Beats","Countryside Cafe","Late Night Study "],gym:["Pumpin Metal","Persistence Pop","Pre-Game Pump Up","Fire Dancing Fiesta","Heavy Lifting Hype"],hotel:["Glitz At the Ritz","Loungeside Lovers","Hearthside Hip","Travelers Rest","Elegant Entertainment","Tropical Getaway"],other:["Flattening the Curve","Upbeat Energy","Laid-back, Low-key.","Learning to Grow","Decades","Ahead of the Curve"],restaurant:["Hamburger Hits","Barbecue Bash","Asian Eats","Taco Truck Temposetter","Boba Beats","Royalty Dining"],salon:["Girls Night Out","Upscaled Grace","Jukebox of the Ages","Wax and Relax","Hairdresser Hop","Nails, Hair, Hips, Heels"],school:["Pep Rally Pop","Study Beats","Intelligence through Inspiration","Classical Concentration","Developing Brains","Academy Alternative"],spa:["Ethereal Elegance","Tropical Getaway","Self-Care Classical","Asian Getaway","Relaxin' R&B","Hot Spring Hits"],shop:["Boutique Beats","Diamonds Are Forever","Jukebox of the Ages","Retail R&B","Girls Night Out","Food Court Finds"]},F=a(49),R={Slower:{title:"Slower",min:0,max:55,icon:F.g},Slow:{title:"Slow",min:55,max:75,icon:F.i},Moderate:{title:"Moderate",min:75,max:95,icon:F.h},Fast:{title:"Fast",min:95,max:115,icon:F.d},Faster:{title:"Faster",min:115,max:900,icon:F.e}},U={"America/Adak":"-09:00","America/Anchorage":"-08:00","America/Boise":"-06:00","America/Chicago":"-05:00","America/Denver":"-06:00","America/Detroit":"-04:00","America/Indiana/Indianapolis":"-04:00","America/Indiana/Knox":"-05:00","America/Indiana/Marengo":"-04:00","America/Indiana/Petersburg":"-04:00","America/Indiana/Tell_City":"- 05:00","America/Indiana/Vevay":"-04:00","America/Indiana/Vincennes":"-04:00","America/Indiana/Winamac":"-04:00","America/Juneau":"-08:00","America/Kentucky/Louisville":"-04:00","America/Kentucky/Monticello":"-04:00","America/Los_Angeles":"-07:00","America/Menominee":"-05:00","America/Metlakatla":"-08:00","America/New_York":"-04:00","America/Nome":"-08:00","America/North_Dakota/Beulah":"-05:00","America/North_Dakota/Center":"-05:00","America/North_Dakota/New_Salem":"-05:00","America/Phoenix":"-07:00","America/Sitka":"-08:00","America/Yakutat":"-08:00","Pacific/Honolulu":"-10:00"},V={"ar-XA":"Arabic","bn-IN":"Bengali (India)","cmn-CN":"Mandarin Chinese","cmn-TW":"Mandarin Chinese","cs-CZ":"Czech (Czech Republic)","da-DK":"Danish (Denmark)","de-DE":"German (Germany)","el-GR":"Greek (Greece)","en-AU":"English (Australia)","en-GB":"English (UK)","en-IN":"English (India)","en-US":"English (US)","es-ES":"Spanish (Spain)","fi-FI":"Finnish (Finland)","fil-PH":"Filipino (Philippines)","fr-CA":"French (Canada)","fr-FR":"French (France)","gu-IN":"Gujarati (India)","hi-IN":"Hindi (India)","hu-HU":"Hungarian (Hungary)","id-ID":"Indonesian (Indonesia)","it-IT":"Italian (Italy)","ja-JP":"Japanese (Japan)","kn-IN":"Kannada (India)","ko-KR":"Korean (South Korea)","ml-IN":"Malayalam (India)","nb-NO":"Norwegian (Norway)","nl-NL":"Dutch (Netherlands)","pl-PL":"Polish (Poland)","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)","ru-RU":"Russian (Russia)","sk-SK":"Slovak (Slovakia)","sv-SE":"Swedish (Sweden)","ta-IN":"Tamil (India)","te-IN":"Telugu (India)","th-TH":"Thai (Thailand)","tr-TR":"Turkish (Turkey)","uk-UA":"Ukrainian (Ukraine)","vi-VN":"Vietnamese (Vietnam)","yue-HK":"Chinese (Hong Kong)"},q={"Female A":"Amazing Female","Female B":"Awesome Female","Female C":"Charming Female","Female D":"Excellent Female","Female E":"Fabulous Female","Female F":"Fantastic Female","Female G":"Outstanding Female","Female H":"Remarkable Female","Female I":"Spectacular Female","Female J":"Splendid Female","Female K":"Stellar Female","Female L":"Strong Female","Male A":"Amazing Male","Male B":"Awesome Male","Male C":"Charming Male","Male D":"Excellent Male","Male E":"Fabulous Male","Male F":"Fantastic Male","Male G":"Outstanding Male","Male H":"Remarkable Male","Male I":"Spectacular Male","Male J":"Splendid Male","Male K":"Stellar Male","Male L":"Strong Male"},H="Individual",W={auth:{user:null,jwt:null,location:{},isApple:!1,inApp:!1},snackbar:{notification:{},message:{}},loader:{requestInProgress:0},locations:{data:[],count:0,limit:0,skip:0},playlists:{schedules:[]},stations:{topTrack:[],artists:[],tracks:[],playlistList:[],genreList:[],eraList:[],moodList:[],data:[],count:0,skip:0,limit:10},stationPreviews:{genre:[],era:[],mood:[],activeStationPreview:[]},selectedPreviews:{ID:"",track:[]},zones:{data:[],count:0,limit:0,skip:0},schedules:{activeSchedule:null,schedules:[]},player:{locationJWT:null,showPlayer:!1,isPlaying:!1,skipDisabled:!1,trackNumber:0,trackMap:{},playerError:{}},inStoreMessaging:{messages:[]}},z=a(2),G=function(e,t){if(!e||!t)return[];var a=[];return e.map((function(e){return a[Object(z.get)(e,t,null)]=e})),a},K=function(e){return e?"https://random-station-artwork.s3-us-west-2.amazonaws.com/"+Math.abs(e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0))%101+".jpg":""},Y=function(){return window.outerWidth<=650},J=function(e){return isNaN(e)?"0:00":Math.floor(e/60)+":"+("0"+Math.floor(e%60)).slice(-2)},Z=function(e){return e>=0&&e<=55?R.Slower:e>=55&&e<=75?R.Slow:e>=75&&e<=95?R.Moderate:e>=95&&e<=115?R.Fast:e>=115&&e<=900?R.Faster:R.Moderate},Q=function(){var e=localStorage.getItem("deviceID");return e||(e="web-"+function(e){for(var t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=a.length,r=0;r<e;r++)t+=a.charAt(Math.floor(Math.random()*n));return t.toUpperCase()}(10),localStorage.setItem("deviceID",e)),e},$=function(e,t){try{var a="ADVERT_"===Object(z.get)(e,"isrc","").substring(0,7),n="ISM_"===Object(z.get)(e,"isrc","").substring(0,4);if(a||n)return!1;for(var r=0;r<t.length;r++)if(Object(z.get)(t[r],"isrc","")===Object(z.get)(e,"isrc",e))return r;return 0}catch(o){return console.log("caught getTrackNumberByTrack err: ",o),!1}},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.auth,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_SUCCESS":return Object.assign({},e,Object(u.a)({},t.data));case"SET_USER":return Object.assign({},e,{user:t.data});case"SET_LOCATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},t.data),{},{favoritesMap:G(Object(z.get)(t,"data.favorites",[]),"_id")})});case"SET_STATION":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{station:t.data})});case"SET_CURRENT_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{currentTrack:t.data})});case"SET_FAVORITES":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{favorites:t.data,favoritesMap:G(Object(z.get)(t,"data",[]),"_id")})});case"SET_EXPLICIT":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{explicitAllowed:t.data})});case"SET_PAIRED_DEVICE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{pairedDevice:t.data})});case"SET_LAST_TRACK":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{lastTrack:t.data})});case"SET_TRACK_NUMBER":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{currentTrackNumber:t.data})});case"SET_TRACK_SCHEDULE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{trackSchedule:t.data})});case"SET_SCHEDULE":return Object.assign({},e,{location:Object(u.a)(Object(u.a)({},e.location),{},{schedule:t.data})});case"SET_IS_APPLE":return Object.assign({},e,{isApple:t.data});case"SET_INAPP":return Object(z.get)(t,"data",!1)&&(localStorage.setItem("inApp",!0),window.inApp=!0),Object.assign({},e,{inApp:t.data});default:return e}},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_INSTORE_MESSAGES":return Object.assign({},e,{messages:t.data});default:return e}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.player,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TRACK_MAP":return Object.assign({},e,{trackMap:t.data});case"SET_TRACK_NUMBER":return Object.assign({},e,{trackNumber:t.data});case"SET_IS_PLAYING":return Object.assign({},e,{isPlaying:t.data});case"SET_SKIP_DISABLED":return Object.assign({},e,{skipDisabled:t.data});case"SET_SHOW_PLAYER":return Object.assign({},e,{showPlayer:t.data});case"SET_LOCATION_JWT":return Object.assign({},e,{locationJWT:t.data});case"PLAYER_ERROR":return Object.assign({},e,{playerError:t.data});case"DISCONNECT_PLAYER_SUCCESS":return localStorage.removeItem("location-jwt"),Object.assign({},e,{locationJWT:null});default:return e}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.playlists,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PLAYLISTS":return Object.assign([],e,{schedules:t.data});default:return e}},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.selectedPreviews,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_SCHEDULE":return Object.assign({},Object(u.a)({},e),{data:null});case"ACTIVE_SCHEDULE":return Object.assign({},e,{activeSchedule:t.data});default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.inStoreMessaging,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SNACKBAR_NOTIFICATION":return Object.assign({},e,{notification:t.data});case"SET_SNACKBAR_MESSAGE":return Object.assign({},e,{message:t.data});default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W.stations,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PUBLIC_STATIONS_FOR_DISCOVER":return Object.assign({},e,{playlistList:t.data.playlistList,genreList:t.data.genreList,eraList:t.data.eraList,moodList:t.data.moodList});default:return e}},se=Object(i.c)({auth:X,inStoreMessaging:ee,player:te,playlists:ae,schedules:ne,snackbar:re,stations:oe});Object(l.a)();var ie=function(e){var t=[c.a];return Object(i.e)(se,e,Object(i.d)(i.a.apply(void 0,t)))},ce=a(8),le=a(9),ue=a(11),me=a(10),de=a(17),pe=a(13),ge=a.n(pe),he=a(23),fe=a(34),be=a(38),ve=a(388),ye=a.n(ve),Ee={API_URL:"https://prod.ambii.io/v2",SOCKET_URL:"https:/prod.ambii.io",APP_TITLE:"Ambii"};function Oe(e,t,a){return Se.apply(this,arguments)}function Se(){return(Se=Object(he.a)(ge.a.mark((function e(t,a,n){var r,o,s,i,c=arguments;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>3&&void 0!==c[3]?c[3]:null,o=c.length>4&&void 0!==c[4]?c[4]:null,s="".concat(Ee.API_URL).concat(a).trim(),i={method:t,url:s,headers:{}},null!==r&&(i.headers=r),null!==o&&(i.params=o),"post"!==t&&"put"!==t&&"delete"!==t&&"patch"!==t||(i.data=n),i.headers.Authorization="Bearer "+localStorage.getItem("access-token"),e.abrupt("return",new Promise((function(e,t){ye()(i).then((function(t){e(t)})).catch((function(a){console.log("Caught api error: ",a),"Network Error"===a.message?window.alert(a.message):"The token has expired, please login again!"===Object(z.get)(a,"response.data.message",null)?e(!1):a.response&&401===a.response.status?localStorage.removeItem("access-token"):t(a)}))})));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=function(e){return function(t){t({type:"SET_INAPP",data:e})}},je=function(e){return function(t){t({type:"SET_TRACK_SCHEDULE",data:e})}},we=function(e){return function(t){t({type:"SET_PAIRED_DEVICE",data:e})}},Ne=function(e){return function(t){t({type:"SET_LAST_TRACK",data:e})}},Ce=function(e){return function(t){t({type:"SET_TRACK_MAP",data:e})}},Ie=function(e){return function(t){t({type:"SET_LOCATION",data:e})}},Le=function(e){return function(t){t({type:"SET_LOCATION_JWT",data:e})}},Te=function(e){return function(t){t({type:"SET_STATION",data:e})}},Me=function(e){return function(t){t({type:"SET_CURRENT_TRACK",data:e})}},Pe=function(e){return function(t){t({type:"PLAYER_ERROR",data:e})}},Ae=function(e){return function(t){t({type:"SET_SHOW_PLAYER",data:e})}},xe=function(e){return function(t){t({type:"SET_IS_PLAYING",data:e})}},De=function(e){return function(t){t({type:"SET_SKIP_DISABLED",data:e})}},_e=function(e){return function(t){t({type:"SET_TRACK_NUMBER",data:e})}},Be=function(e){return function(t){t({type:"SET_USER",data:e})}},Fe=function(e){return function(t){t({type:"SET_SCHEDULE",data:e})}},Re=function(e){return function(t){t({type:"SET_PLAYLISTS",data:e})}},Ue=a(389),Ve=a.n(Ue)()(Ee.SOCKET_URL),qe="connect-web",He="disconnect",We="reconnect",ze="player-paired",Ge="player-un-paired",Ke="player-disconnected",Ye="player-played",Je="player-paused",Ze="station-updated",Qe="player-called-next",$e=function(){return function(e){ct(e),lt(e),ut(e),mt(e),dt(e)}};function Xe(){return function(e,t){return new Promise(function(){var a=Object(he.a)(ge.a.mark((function a(n,r){var o;return ge.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(o=localStorage.getItem("location-jwt")){a.next=3;break}return a.abrupt("return",n(!1));case 3:Oe("post","/auth/player/disconnect",{locationId:Object(z.get)(t(),"auth.location._id",""),locationJWT:o,deviceID:Q()},{"player-access-token":o}).then(function(){var t=Object(he.a)(ge.a.mark((function t(a){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{console.log("disconnect: ",a),e(we(Object(z.get)(a,"data.data.pairedDevice",{}))),e((function(e){e({type:"DISCONNECT_PLAYER_SUCCESS"})})),e(Ae(!1))}catch(r){console.log("Caught error on disconnectPlayer: ",r)}n(Object(z.get)(a,"data.data",null));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("disconnectPlayer error: ",e),r(e.response)}));case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}}function et(e){return function(t){return new Promise((function(a){if(!e)return a(!1);Oe("post","/auth/player/connect",e).then(function(){var e=Object(he.a)(ge.a.mark((function e(n){var r,o,s,i,c,l,u,m;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Object(z.get)(n,"data.data",null),"DEVICE_ALREADY_PAIRED"!==Object(z.get)(r,"data",null)){e.next=5;break}return e.abrupt("return",a("DEVICE_ALREADY_PAIRED"));case 5:o=Object(z.get)(r,"jwt",null),localStorage.setItem("location-jwt",o),s=Object(z.get)(r,"location",{}),i=Object(z.get)(s,"trackSchedule",{}),c=G(Object(z.get)(i,"queue",[]),"isrc"),l=Object(z.get)(s,"currentTrack",null),u=Object(z.get)(s,"currentTrackNumber",0),m=Object(z.get)(i,"queue["+u+"]",l),t(Ie(s)),t(Le(o)),t(Ce(c)),t(_e(u)),t(Me(m)),t(je(i)),t(Ae(!0)),a(r);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("connectPlayer error: ",e),a(!1)}))}))}}function tt(e){var t=e.jwt,a=e.data;return function(e,n){return new Promise(function(){var r=Object(he.a)(ge.a.mark((function r(o){return ge.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t&&a){r.next=3;break}return r.abrupt("return",o(!1));case 3:Oe("post","/auth/player/play-next",a,{"player-access-token":t}).then(function(){var t=Object(he.a)(ge.a.mark((function t(a){var r,s,i,c,l,u,m,d,p,g,h;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=15;break}if(r=Object(z.get)(a,"data.data",{}),console.log("playnext res: ",r),s=Object(z.get)(r,"newStation",!1),i=Object(z.get)(r,"newTrackSchedule",!1),c=Object(z.get)(r,"newUrls",!1),l=Object(z.get)(n(),"auth.location.currentTrack",Object(z.get)(r,"track",null)),u=Object(z.get)(n(),"player.trackNumber",0),"DEVICE_ALREADY_PAIRED"!==Object(z.get)(r,"data","")){t.next=10;break}return t.abrupt("return",o(Object(z.get)(r,"data","")));case 10:s&&(m=Object(z.get)(r,"station",{}),e(Te(m))),(i||c)&&(d=Object(z.get)(r,"trackSchedule",{}),p=G(Object(z.get)(d,"queue",[]),"isrc"),e(Ce(p)),g=s?0:$(l,Object(z.get)(d,"queue",[])),u!==g&&(g||0===g?e(_e(g)):(h=Object(z.get)(n(),"auth.location.lastTrack",""),g=$(h,Object(z.get)(d,"queue",[])),e(_e(g||u)))),e(je(d))),o(!0),t.next=16;break;case 15:o(!1);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.log("error: ",e),o(!1)})),r.next=10;break;case 6:r.prev=6,r.t0=r.catch(0),console.log("playNextReq err: ",r.t0),o(!1);case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}())}}function at(e){var t=e.songCompletion;return function(e,a){return new Promise(function(){var n=Object(he.a)(ge.a.mark((function n(r){var o,s,i,c,l,u,m,d,p,g,h;return ge.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t||(t="0"),o=Object(z.get)(a(),"auth.location",{}),s=Object(z.get)(a(),"player",{}),e(De(!0)),i=Object(z.get)(o,"trackSchedule",""),c=Object(z.get)(i,"_id",""),l=Object(z.get)(i,"queue",[]).length-1,u=Object(z.get)(i,"queue",[]),m=Object(z.get)(i,"queueHash",""),d=Object(z.get)(o,"currentTrack",{}),p=Object(z.get)(s,"trackNumber",0),g=null,p+1<=l?(g=u[p+1]||"",p+=1):(g=Object(z.get)(o,"trackSchedule.queue[0]",""),p=0),e(Ne(d)),e(Me(g)),e(_e(p)),n.next=19,e(tt({jwt:Object(z.get)(s,"locationJWT",null),data:{locationId:Object(z.get)(o,"_id",null),stationId:Object(z.get)(o,"station._id",null),trackScheduleId:c,nextTrack:g,lastTrack:d,deviceID:Q(),songCompletion:t,currentTrackNumber:p.toString(),queueHash:m}}));case 19:if(!(h=n.sent)){n.next=30;break}if(console.log("music bar props: ",a()),"DEVICE_ALREADY_PAIRED"!==h){n.next=28;break}return e(xe(!1)),e(De(!1)),n.next=27,e(Xe());case 27:return n.abrupt("return",r(h));case 28:n.next=31;break;case 30:return n.abrupt("return",r(!1));case 31:r(!0),n.next=39;break;case 34:n.prev=34,n.t0=n.catch(0),e(De(!1)),console.log("caught callPlayNext err: ",n.t0),r(!1);case 39:case"end":return n.stop()}}),n,null,[[0,34]])})));return function(e){return n.apply(this,arguments)}}())}}function nt(e){return function(t){var a="ADVERT_"===Object(z.get)(e,"isrc","").substring(0,7),n="ISM_"===Object(z.get)(e,"isrc","").substring(0,4);if(a||n)t(De(!0));else var r=setTimeout((function(){clearTimeout(r),t(De(!1))}),1e3)}}var rt=function(){return function(e){Ve.removeEventListener(ze),Ve.removeEventListener(Ge),Ve.removeEventListener(Ke),Ve.removeEventListener(Ye),Ve.removeEventListener(Je)}},ot=function(){return function(e){Ve.on(Ze,(function(t){e(Te(t))}))}},st=function(){return function(e){Ve.on(Qe,(function(t){e(Me(Object(z.get)(t,"track",{})))}))}},it=function(){return function(e){Ve.removeEventListener(Ze)}},ct=function(e){Ve.on(ze,(function(e){console.log("Player Paired",e)}))},lt=function(e){Ve.on(Ge,(function(e){console.log("Player UnPaired",e)}))},ut=function(e){Ve.on(Ke,(function(e){console.log("Player Disconnected",e)}))},mt=function(e){Ve.on(Ye,(function(e){console.log("Player playerPlayed",e)}))},dt=function(e){Ve.on(Je,(function(e){console.log("Player playerPaused")}))};function pt(){return function(e){return new Promise((function(t){Oe("post","/auth/login").then((function(a){console.log("auth0setLogin res: ",a);var n=Object(z.get)(a,"data.data",null),r=Object(z.get)(n,"defaultLocation",{});if("apple@ambii.io"===Object(z.get)(n,"user.email","").toLowerCase()&&e(function(e){return function(t){t({type:"SET_IS_APPLE",data:e})}}(!0)),e(function(e){return function(t){t({type:"LOGIN_SUCCESS",data:e})}}(n)),e(Be(Object(z.get)(n,"user",{}))),e(Ie(r)),Q(),Object(z.get)(r,"pairedDevice.uniqueId",null)===Q()){var o={token:Object(z.get)(r,"token",""),deviceName:"web",uniqueId:Q(),deviceBrand:"web",override:!1};e(et(o))}t(a.data)})).catch((function(e){console.log("auth0setLogin error",e),t(!1)}))}))}}function gt(e){var t=e.id,a=e.email,n=e.name;return function(e){Oe("post","/public/create-new-mix-max-contact",{id:t,email:a,name:n,groupName:"Signed Up Users"})}}function ht(e){return function(t){return new Promise((function(a,n){t((function(e){e({type:"LOADER_SHOW"})})),Oe("post","/auth/sign-up",e).then((function(e){var n=Object(z.get)(e,"data.data");Object(z.get)(e,"data.success",!1)&&(t(function(e){return function(t){t({type:"SIGNUP_SUCCESS",data:e})}}(n)),t(Be(Object(z.get)(n,"user",{}))),t(Ie(Object(z.get)(n,"defaultLocation",{})))),a(e.data)})).catch((function(e){var a=Object(z.get)(e,"response","");t(function(e){return function(t){t({type:"SIGNUP_FAILED",error:e})}}(a)),n(a)})).finally((function(){t((function(e){e({type:"LOADER_HIDE"})}))}))}))}}var ft=a(79);function bt(e){var t=e.locationId,a=e.stationId,n=e.favorites;return function(e){return new Promise((function(r){var o={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(o,"access-token",!1)&&!t||!a||!n)return r(!1);Oe("post","/api/location/".concat(t,"/toggleFavorite/"),{locationId:t,stationId:a},o).then((function(t){var a,o=Object(z.get)(t,"data.data.station",{}),s=Object(z.get)(t,"data.data.type",{}),i=Object(ft.a)(n);if("remove"===s)for(var c=0;c<i.length;c++)i[c]._id===o&&i.splice(c,1);else i.push(o);e((a=i,function(e){e({type:"SET_FAVORITES",data:a})})),r(!0)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),r(!0)}))}))}}function vt(e){var t=e.locationId,a=e.currentTrack;return function(e,n){return new Promise((function(r){var o={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(o,"access-token",!1)&&!t||!a)return r(!1);var s=Object(z.get)(n(),"auth.location.explicitAllowed",!1);Oe("post","/api/location/".concat(t,"/toggleExplicit/"),{locationId:t,currentTrack:a},o).then((function(t){var a=Object(z.get)(t,"data.data",{}),n=Object(z.get)(a,"explicitAllowed",!1);e(function(e){return function(t){t({type:"SET_EXPLICIT",data:e})}}(n)),r(!0)})).catch((function(e){console.log("Caught toggleFavorite error: ",e),r(s)}))}))}}function yt(){return function(e){return new Promise((function(t,a){Oe("get","/public/station").then((function(a){var n=Object(z.get)(a,"data.data",{}),r={eraList:[],genreList:[],moodList:[],tempoList:[],playlistList:[]};Object(z.get)(n,"playlistList",[]).forEach((function(e){e.track.length>0&&r.playlistList.push(e)})),e(function(e){return function(t){t({type:"GET_PUBLIC_STATIONS_FOR_DISCOVER",data:e})}}(r)),t(r)})).catch((function(e){console.log("getDiscoverPulicStations error in action ",e),a(e)}))}))}}function Et(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!e)return t(!1);Object(z.get)(a,"access-token",!1)?Oe("get","/api/station/".concat(e),null,a).then((function(e){t(Object(z.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)})):Oe("get","/public/station/".concat(e),null,a).then((function(e){t(Object(z.get)(e,"data.data",{}))})).catch((function(e){console.log("getStationDetails error: ",e.response),t(!1)}))}))}}function Ot(e,t){return function(a){return new Promise((function(n,r){var o={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(o,"access-token",!1)&&!e||!t)return n(!1);Oe("post","/api/company/".concat(e,"/station/").concat(t),null,o).then((function(e){console.log("assignStation: ",e);var t=Object(z.get)(e,"data.data",!1),r=Object(z.get)(t,"station",!1),o=Object(z.get)(t,"trackSchedule",!1),s=G(Object(z.get)(o,"queue",[]),"isrc"),i=Object(z.get)(t,"currentTrack",!1),c=Object(z.get)(t,"currentTrackNumber",!1);a(Fe(null)),r&&a(Te(r)),o&&a(je(o)),s&&a(Ce(s)),i&&a(Me(i)),c&&a(_e(c)),n(t)})).catch((function(e){console.log("Error :",e),r(e.response)}))}))}}var St=a(917);function kt(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(a,"access-token",!1)||!e)return t(!1);Oe("post","/api/company/"+e+"/createSchedule",null,a).then((function(e){console.log("Create Schedule Res!",e),t(e.data)})).catch((function(e){console.log("createSchedule error",e.response),St.a.error(Object(z.get)(e,"response.message","Could not create schedule!")),t(!1)}))}))}}function jt(e){return function(t){return new Promise((function(t){var a={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(a,"access-token",!1)||!e)return t(!1);Oe("post","/api/company/"+e+"/getSchedule",null,a).then((function(e){console.log("Get Schedule Res!",e),t(e.data)})).catch((function(e){console.log("getSchedule error",e.response),St.a.error(Object(z.get)(e,"response.message","Could not find schedule!")),t(!1)}))}))}}function wt(e){return function(t){return new Promise((function(a){var n;t((n=e,function(e){e({type:"ACTIVE_SCHEDULE",data:n})})),a(!0)}))}}function Nt(e){var t=e.companyId,a=e.scheduleId,n=e.name,r=e.stations;return function(e){return new Promise((function(o){var s={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(s,"access-token",!1)||!t||!a||!n||!r)return o(!1);Oe("post","/api/company/"+t+"/schedule",{scheduleId:a,name:n,stations:r},s).then((function(t){var a=Object(z.get)(t,"data",{});console.log("create playlist res in action ",t),e(Fe(a)),o(a)})).catch((function(e){console.log("setSchedule error",e.response),St.a.error(Object(z.get)(e,"response.message","cannot find artist or track")),o(!1)}))}))}}function Ct(e){var t=e.companyId;return function(e){return new Promise((function(a){var n={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(n,"access-token",!1)||!t)return a(!1);Oe("get","/api/company/"+t+"/getSchedules",null,n).then((function(t){console.log("getMyPlaylists res: ",t);var n=Object(z.get)(t,"data.data.schedules",[]);e(Re(n)),a(!0)})).catch((function(e){console.log("getMyPlaylists error",e.response),a(!1)}))}))}}function It(e){var t=e.companyId,a=e.scheduleId;return function(e){return new Promise((function(n){var r={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(r,"access-token",!1)||!t||!a)return n(!1);Oe("post","/api/company/"+t+"/assignSchedule/"+a,{companyId:t,scheduleId:a},r).then((function(t){console.log("assignSchedule: ",t);var a=Object(z.get)(t,"data.data",!1),r=Object(z.get)(a,"schedule",!1),o=Object(z.get)(a,"station",!1),s=Object(z.get)(a,"trackSchedule",!1),i=G(Object(z.get)(s,"queue",[]),"isrc"),c=Object(z.get)(a,"currentTrack",!1),l=Object(z.get)(a,"currentTrackNumber",!1);a?(r&&e(Fe(r)),o&&e(Te(o)),s&&e(je(s)),i&&e(Ce(i)),c&&e(Me(c)),l&&e(_e(l))):e(Rt({message:"Schedule is already playing!",type:"info"})),n(!0)})).catch((function(e){console.log("assignSchedule error:",e),n(!1)}))}))}}function Lt(e){var t=e.companyId,a=e.scheduleId;return function(e,n){return new Promise((function(r){var o={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(o,"access-token",!1)||!t||!a)return r(!1);Oe("post","/api/company/"+t+"/deleteSchedule/"+a,{companyId:t,scheduleId:a},o).then((function(t){console.log("deleteSchedule: ",t);var a=Object(z.get)(t,"data.data._id",null);if(a){for(var o=Object(ft.a)(Object(z.get)(n(),"playlists.schedules",[])),s=0;s<o.length;s++)Object(z.get)(o[s],"_id","")===a&&o.splice(s,1);e(Re(o))}r(!0)})).catch((function(e){console.log("deleteSchedule error:",e),r(!1)}))}))}}function Tt(e){var t=e.companyId,a=e.locationId;return function(e){return new Promise((function(n){var r={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(r,"access-token",!1)||!t||!a)return n(!1);Oe("post","/api/listMessages",{companyId:t,locationId:a},r).then((function(t){var a;console.log("getMessages res",t),e((a=Object(z.get)(t,"data.data",[]),function(e){e({type:"SET_INSTORE_MESSAGES",data:a})})),n(!0)})).catch((function(e){console.log("getMessages error",e),n(!1)}))}))}}function Mt(e){var t=e.voice,a=e.language,n=e.message,r=e.speed,o=e.hash;return function(e){return new Promise((function(e,s){var i={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(i,"access-token",!1)||!o)return e(!1);Oe("post","/api/createPreviewMessage",{voice:t,language:a,message:n,speed:r,hash:o},i).then((function(t){e(Object(z.get)(t,"data",!1))})).catch((function(t){console.log("createPreviewMessage error: ",t),e(!1)}))}))}}function Pt(e){var t=e.companyId,a=e.locationId,n=e.title,r=e.voice,o=e.language,s=e.message,i=e.speed,c=e.frequency,l=e.savedPreviews,u=e.hash;return function(e){return new Promise((function(e){var m={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(m,"access-token",!1)||!n||!s)return e(!1);Oe("post","/api/createMessage",{companyId:t,locationId:a,title:n,voice:r,language:o,message:s,speed:i,frequency:c,savedPreviews:l,hash:u},m).then((function(t){e(Object(z.get)(t,"data",!1))})).catch((function(t){console.log("createMessage error: ",t),e(!1)}))}))}}function At(e){var t=e.companyId,a=e.locationId,n=e.messageId,r=e.title,o=e.voice,s=e.language,i=e.message,c=e.speed,l=e.frequency,u=e.savedPreviews,m=e.hash;return function(e){return new Promise((function(e){var d={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(d,"access-token",!1)||!r||!i)return e(!1);Oe("post","/api/editMessage",{companyId:t,locationId:a,messageId:n,title:r,voice:o,language:s,message:i,speed:c,frequency:l,savedPreviews:u,hash:m},d).then((function(t){e(Object(z.get)(t,"data",!1))})).catch((function(t){console.log("editMessage error: ",t),e(!1)}))}))}}function xt(e){var t=e.companyId,a=e.locationId,n=e.id;return function(e){return new Promise((function(e){var r={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(r,"access-token",!1)||!t||!a||!n)return e(!1);Oe("post","/api/deleteMessagingFile",{companyId:t,locationId:a,id:n},r).then((function(t){e(Object(z.get)(t,"data",!1))})).catch((function(t){console.log("deleteMessage error: ",t),e(!1)}))}))}}function Dt(e){var t=e.companyId,a=e.locationId,n=e.id,r=e.frequency;return function(e){return new Promise((function(e){var o={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(o,"access-token",!1)||!t||!a||!n||!r)return e(!1);Oe("post","/api/changeMessagingFileFrequency",{companyId:t,locationId:a,id:n,frequency:r},o).then((function(t){e(Object(z.get)(t,"data",!1))})).catch((function(t){console.log("updateFrequency error: ",t),e(!1)}))}))}}function _t(){return function(e){return new Promise((function(e){var t={"access-token":localStorage.getItem("access-token")};if(!Object(z.get)(t,"access-token",!1))return e(!1);Oe("get","/public/listVoices",null,t).then((function(t){e(Object(z.get)(t,"data.data",[]))})).catch((function(t){console.log("getVoiceData error: ",t),e(!1)}))}))}}function Bt(){return function(e){e((function(e){Ve.on("connect",(function(){console.log("Socket Connected")}))})),e((function(e){Ve.on(He,(function(){console.log("Socket Disconnected"),e(Rt({message:"Connection Lost",type:"warn"}))}))})),e((function(e){Ve.on(We,(function(){console.log("Socket Reconnected"),e(Rt({message:"Reconnected",type:"success"}))}))}))}}function Ft(e){return function(t){t(function(e){return function(t){t({type:"SET_SNACKBAR_NOTIFICATION",data:e})}}(e))}}function Rt(e){return function(t){t(function(e){return function(t){t({type:"SET_SNACKBAR_MESSAGE",data:e})}}(e))}}var Ut=a(918),Vt=a(19),qt=r.a.createElement(Vt.a,{type:"loading",style:{fontSize:24,color:"#D04283"},spin:!0}),Ht=a(85),Wt=(a(532),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(le.a)(a,[{key:"render",value:function(){return this.props.auth0.isAuthenticated&&this.props.auth.user&&this.props.history.push("/nowPlaying"),r.a.createElement("div",{style:{width:"100%",height:"100%",position:"fixed",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(Ut.a,{indicator:qt,spinning:!0}))}}]),a}(n.Component));var zt=Object(de.b)((function(e){return{auth:e.auth}}),(function(e){return{actions:Object(i.b)({},e)}}))(Object(be.f)(Object(Ht.a)(Wt))),Gt=a(392),Kt=a(924),Yt=(a(224),Kt.a.Item),Jt=window.google,Zt=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).getLocation=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.geolocation;case 2:e.sent.getCurrentPosition((function(e){e.coords?n.setState({myLocation:{lng:e.coords.longitude,lat:e.coords.latitude}}):St.a.info("location permission not granted")}));case 4:case"end":return e.stop()}}),e)}))),n.onSuggestSelect=function(){var e=Object(he.a)(ge.a.mark((function e(t){var a,r,o,s,i,c,l,m,d,p;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.gmaps&&(t.gmaps.address_components.forEach((function(e){var t=e.types;t.indexOf("locality")>-1&&(o=e.long_name),(t.indexOf("sublocality_level_1")>-1||t.indexOf("route")>-1||t.indexOf("administrative_area_level_2")>-1)&&(a=e.long_name),t.indexOf("sublocality_level_2")>-1&&(r=e.long_name),t.indexOf("administrative_area_level_1")>-1&&(s=e.long_name),t.indexOf("postal_code")>-1&&(i=e.long_name),(t.indexOf("country")>-1||t.indexOf("political")>-1)&&(c=e.long_name)})),l=Intl.DateTimeFormat().resolvedOptions().timeZone,m=Object(z.get)(t,"location.lng",""),d=Object(z.get)(t,"location.lat",""),p=Object(u.a)(Object(u.a)({},n.props.userData),{},{name:Object(z.get)(t,"gmaps.name",t.label),addressLineOne:a,addressLineTwo:r,city:o,state:s,postalCode:i,country:c,timezone:l,cords:[m,d],companySearch:!0}),n.setState({userData:p},(function(){Object(z.get)(n.state,"userData.addressLineOne",!1)&&Object(z.get)(n.state,"userData.postalCode",!1)&&Object(z.get)(n.state,"userData.city",!1)&&Object(z.get)(n.state,"userData.state",!1)&&Object(z.get)(n.state,"userData.timezone",!1)?n.props.onSumbit(p):(p.missingData=!0,n.setState({userData:p},(function(){St.a.error("Some required data is missing. Please fill out the below fields.",5),n.props.onSumbit(p)})))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={address:"",userData:{name:"",addressLineOne:"",addressLineTwo:"",city:"",state:"",postalCode:"",cords:[]},myLocation:{lng:0,lat:0}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state.myLocation;return r.a.createElement(Kt.a,{className:"auto-complete-form"},r.a.createElement(Yt,{className:"form-item"},t("userData",{rules:[{required:!0,message:"Please input Company name or address."}]})(r.a.createElement(Gt.a,{ref:function(t){return e._geoSuggest=t},onChange:function(e){return console.log(e)},placeholder:"Ambii Inc. 123 Main St",onSuggestSelect:this.onSuggestSelect,location:new Jt.maps.LatLng(a.lat,a.lng),radius:20,country:"us"}))))}}]),a}(n.Component);var Qt=Kt.a.create()(Zt),$t=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(Qt)),Xt=a(419),ea=a(931),ta=a(67),aa=Kt.a.Item,na=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){console.log(e),n.props.form.validateFieldsAndScroll((function(e,t){console.log("vals: ",t);var a=n.checkIfValidTimezone(Object(z.get)(t,"timezone",""));!e&&a?n.setState({isLoading:!0},(function(){var e=Object(u.a)(Object(u.a)(Object(u.a)({},n.props.userData),n.state.userData),{},{name:Object(z.get)(t,"name","").toString(),addressLineOne:Object(z.get)(t,"addressLineOne","").toString(),addressLineTwo:Object(z.get)(t,"addressLineTwo","").toString(),city:Object(z.get)(t,"city","").toString(),state:Object(z.get)(t,"state","").toString(),postalCode:Object(z.get)(t,"postalCode","").toString(),country:Object(z.get)(t,"country","United States").toString(),cords:Object(z.get)(t,"cords",[]),timezone:Object(z.get)(t,"timezone",Intl.DateTimeFormat().resolvedOptions().timeZone)});n.props.onSumbit(e)})):a?e?St.a.error("One or more fields has an error"):St.a.error("An error occurred"):St.a.error("Invalid timezone selection")}))},n.onSearch=function(e){var t=Object.keys(U),a=t.filter((function(t){return t.toLowerCase().includes(e.toLowerCase())}));n.setState({selectedTimezone:e,timezoneRes:e.length<=0?t:a})},n.onSelect=function(e){n.setState({selectedTimezone:e})},n.state={address:"",dropdownError:!1,selectedTimezone:"",timezoneData:{},timezones:[],timezoneRes:[],userData:{name:Object(z.get)(n.props,"userData.name",""),addressLineOne:Object(z.get)(n.props,"userData.addressLineOne",""),addressLineTwo:Object(z.get)(n.props,"userData.addressLineTwo",""),city:Object(z.get)(n.props,"userData.city",""),country:Object(z.get)(n.props,"userData.country","United States"),state:Object(z.get)(n.props,"userData.state",""),cords:Object(z.get)(n.props,"userData.cords",[]),postalCode:Object(z.get)(n.props,"userData.postalCode",""),timezone:Object(z.get)(n.props,"userData.timezone","")}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=[];Object.keys(U).forEach((function(t){e.push(t)}));var t=Intl.DateTimeFormat().resolvedOptions().timeZone;this.setState({timezoneRes:e,selectedTimezone:t})}},{key:"checkIfValidTimezone",value:function(e){return!!e&&!!U[e]}},{key:"render",value:function(){var e=this,t=this.state,a=t.timezoneRes,n=t.selectedTimezone,o=this.props.form.getFieldDecorator;return r.a.createElement(Kt.a,{hideRequiredMark:!0,onSubmit:this.onSubmit},r.a.createElement("p",{style:{float:"right"}},"* Indicates a required field "),r.a.createElement(aa,{className:"form-item"},o("name",{rules:[{required:!0,message:"Please input your company name"}],initialValue:this.state.userData.name})(r.a.createElement(Xt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Company Name"}))),r.a.createElement(aa,{className:"form-item"},o("addressLineOne",{rules:[{required:!0,message:"Please input your Address"}],initialValue:this.state.userData.addressLineOne})(r.a.createElement(Xt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Address Line 1"}))),r.a.createElement(aa,{className:"form-item"},o("addressLineTwo",{initialValue:this.state.userData.addressLineTwo})(r.a.createElement(Xt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"Enter Address Line 2"}))),r.a.createElement(aa,{className:"form-item"},o("city",{rules:[{required:!0,message:"Please input City"}],initialValue:this.state.userData.city})(r.a.createElement(Xt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter City"}))),r.a.createElement(aa,{className:"form-item"},o("state",{rules:[{required:!0,message:"Please input your state"}],initialValue:this.state.userData.state})(r.a.createElement(Xt.a,{onPressEnter:function(){e.onSubmit()},placeholder:"* Enter State"}))),r.a.createElement(aa,{className:"form-item"},o("postalCode",{rules:[{required:!0,message:"Please input your Postal Code"}],initialValue:this.state.userData.postalCode})(r.a.createElement(Xt.a,{type:"number",onPressEnter:function(){e.onSubmit()},placeholder:"* Enter Postal Code"}))),r.a.createElement(aa,{className:"form-item"},o("timezone",{rules:[{required:!0,message:"Please input your location's timezone"}],initialValue:n})(r.a.createElement(ea.a,{placeholder:"* Enter Location Timezone",dataSource:a,style:{width:"100%"},onSelect:function(t){return e.onSelect(t)},onSearch:function(t){return e.onSearch(t)}}))),r.a.createElement(ta.a,{style:{float:"right"},type:"primary",onClick:function(){return e.onSubmit()}},"Confirm Address"))}}]),a}(n.Component);var ra=Kt.a.create()(na),oa=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(ra)),sa=a(271),ia=a(925),ca=a(927),la=a(5),ua=(a(318),a(634),sa.a.Option),ma=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).onSubmit=function(e){var t=n.state,a=t.countryCode,r=t.businessType;e.preventDefault();var o=r.toLowerCase()!=="Select Business Type".toLowerCase(),s=Object(z.get)(n.props,"userData.userType","company");n.props.form.validateFieldsAndScroll((function(e,t){if(Object.keys(e||[]).length<=0&&("company"!==s||o)){var i,c,l=Object(u.a)(Object(u.a)({},n.props.userData),{},{firstName:null!==(i=t.firstName)&&void 0!==i?i:"",lastName:null!==(c=t.lastName)&&void 0!==c?c:"",phoneNumber:a.concat(n.parsePhoneNumber(Object(z.get)(t,"phone","234567890"))),businessType:"individual"===s?"other":r});"individual"===s&&(Object(z.get)(n.props,"userData.name",null)||(l.name="Individual"),Object(z.get)(n.props,"userData.addressLineOne",null)||(l.addressLineOne=""),Object(z.get)(n.props,"userData.addressLineTwo",null)||(l.addressLineTwo=""),Object(z.get)(n.props,"userData.city",null)||(l.city=""),Object(z.get)(n.props,"userData.state",null)||(l.state=""),Object(z.get)(n.props,"userData.postalCode",null)||(l.postalCode=""),Object(z.get)(n.props,"userData.timezone",null)||(l.timezone=""),Object(z.get)(n.props,"userData.cords",null)||(l.cords=[])),n.props.onSumbit(l)}else o||n.setState({dropdownError:!0})}))},n.state={businessType:"Select Business Type",dropdownError:!1,countryCode:"1"},n}return Object(le.a)(a,[{key:"menu",value:function(){var e=this;return r.a.createElement(ia.a,{onClick:function(t){return e.handleMenuClick(t)},id:"company-info-dropdown-menu"},r.a.createElement(ia.a.Item,{key:"bar"},"Bar"),r.a.createElement(ia.a.Item,{key:"cafe"},"Cafe"),r.a.createElement(ia.a.Item,{key:"gym"},"Gym"),r.a.createElement(ia.a.Item,{key:"hotel"},"Hotel"),r.a.createElement(ia.a.Item,{key:"other"},"Other"),r.a.createElement(ia.a.Item,{key:"restaurant"},"Restaurant"),r.a.createElement(ia.a.Item,{key:"salon"},"Salon"),r.a.createElement(ia.a.Item,{key:"school"},"School"),r.a.createElement(ia.a.Item,{key:"spa"},"Spa"),r.a.createElement(ia.a.Item,{key:"shop"},"Shop"))}},{key:"handleMenuClick",value:function(e){this.setState({businessType:e.key,dropdownError:!1})}},{key:"parsePhoneNumber",value:function(e){return e.replace(/\D/g,"")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.state,n=a.businessType,o=a.dropdownError,s=t("prefix",{initialValue:a.countryCode})(r.a.createElement(sa.a,{style:{width:70,borderRight:"1px solid #d9d9d9"}},r.a.createElement(ua,{value:"1"},"+1")));return r.a.createElement(Kt.a,{hideRequiredMark:!0,onSubmit:this.onSubmit,className:"company-info-form"},"company"===Object(z.get)(this.props,"userData.userType","company")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Kt.a.Item,{className:"form-item no-margin",label:"First Name:"},t("firstName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your first name!"}]})(r.a.createElement(Xt.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter First Name"}))),r.a.createElement(Kt.a.Item,{className:"form-item no-margin",label:"Last Name:"},t("lastName",{rules:[{type:"string",message:"The input is invalid!"},{required:!0,message:"Please input your last name!"}]})(r.a.createElement(Xt.a,{onPressEnter:function(t){e.onSubmit(t)},placeholder:"* Enter Last Name"}))),r.a.createElement(Kt.a.Item,{label:"Phone"},t("phone",{rules:[{required:!0,message:"Please input your phone number!",min:10,pattern:/^[0-9 ()-]*$/}]})(r.a.createElement(Xt.a,{addonBefore:s,placeholder:"Phone Number"}))),r.a.createElement(Kt.a.Item,{label:"Type"},r.a.createElement(ca.a,{overlay:this.menu(),trigger:["click"],className:o?"button-error":""},r.a.createElement(ta.a,{style:{textTransform:"capitalize"}},n," ",r.a.createElement(la.a,{icon:F.b,style:{marginLeft:"5px"}}))))),r.a.createElement(ta.a,{style:{float:"right"},type:"primary",onClick:function(t){return e.onSubmit(t)}},"Continue"))}}]),a}(n.Component);var da=Kt.a.create()(ma),pa=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(da)),ga=a(929),ha=a(153),fa=function(e){var t=e.category,a=e.action,n=e.value,r=e.label;ha.a.event({category:t,action:a,value:n?parseInt(n):null,label:r})},ba=function(){ha.a.pageview(window.location.pathname+window.location.search)},va=function(e){ha.a.modalview(e)},ya=ga.a.Step,Ea=[{key:"Company"},{key:"Contact Info"}],Oa=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).next=function(e){if(e){var t=Object(z.get)(e,"missingData",!1);t&&delete e.missingData,n.setState({current:t?n.state.current:n.state.current+1,userData:e,steps:Ea,companySearch:!t&&n.state.companySearch})}n.state.current===n.state.steps.length-1&&n.signUpSubmit(e)},n.signUpSubmit=function(e){n.setState({isLoading:!0},(function(){e?(delete e.missingData,delete e.companySearch,n.props.actions.signUp(e).then((function(t){n.props.actions.mixMaxRegister({id:Object(z.get)(t,"data.user._id",""),email:Object(z.get)(e,"email",""),name:Object(z.get)(e,"firstName","Ambii")+" "+Object(z.get)(e,"lastName","User")}),n.setState({isLoading:!1}),t.success&&(fa({category:m,action:f,value:Object(z.get)(e,"email","")}),n.props.history.push("/"))})).catch((function(e){fa({category:m,action:f,value:e,label:P}),n.setState({isLoading:!1,current:0}),St.a.error(Object(z.get)(e,"userData.message","Something went wrong. Please try again"))}))):(n.setState({isLoading:!1}),St.a.error("Fields are missing"))}))},n.prev=function(){n.setState({current:n.state.current-1})},n.state={isLoading:!1,current:0,companySearch:!0,steps:Ea,userData:{}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){ba()}},{key:"render",value:function(){var e=this,t=this.state,a=t.current,n=t.steps,o=t.userData,s=t.isLoading,i=t.companySearch;return r.a.createElement(Ut.a,{indicator:qt,spinning:s},r.a.createElement("div",{className:"signup-modal-subtitle"},"Let's set up your first location!"),r.a.createElement("div",{className:"signUp-container"},a>=0&&r.a.createElement(ga.a,{className:"steps",progressDot:!0,current:a,style:{textAlign:"justify"}},n.map((function(e){return r.a.createElement(ya,{key:e.key,title:e.key})}))),{0:i?r.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter business name or address"):null,1:r.a.createElement("div",{className:"signup-modal-subsubtitle"},"Please enter your contact information")}[a],r.a.createElement("div",{className:"form_container"},{0:i?r.a.createElement($t,{onSumbit:this.next,userData:o}):r.a.createElement(oa,{onSumbit:this.next,userData:o}),1:r.a.createElement(pa,{onSumbit:this.next,userData:o})}[a],r.a.createElement("div",{className:"button_row",style:{float:"right"}},!s&&a>0&&r.a.createElement(ta.a,{onClick:function(){return e.prev()},style:{marginRight:"10px"}},"Previous"),i&&0===a?r.a.createElement(ta.a,{onClick:function(){return e.setState({companySearch:!1})}},"Manually Enter Company"):null,i||0!==a?null:r.a.createElement(ta.a,{onClick:function(){return e.setState({companySearch:!0})},style:{marginRight:"10px"}},"Search Company")))))}}]),a}(n.Component);var Sa=Kt.a.create()(Oa),ka=Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({signUp:ht,mixMaxRegister:gt},e)}}))(Sa)),ja=(a(635),Kt.a.Item),wa=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e))._onLogin=function(){n.props.form.validateFieldsAndScroll((function(e,t){e?St.a.error("Fields Required"):n.setState({isLoading:!0},(function(){t.email,t.password}))}))},n.state={isLoading:!1,isLogin:!1,userData:{email:"",password:""}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){ba(),localStorage.getItem("access-token")&&this.props.history.push("/nowPlaying")}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator;return r.a.createElement(Ut.a,{indicator:qt,spinning:this.state.isLoading},r.a.createElement("div",{className:"form-container"},r.a.createElement(Kt.a,{className:"form-wrapper",hideRequiredMark:!0,onSubmit:this._onLogin},r.a.createElement(ja,{className:"form-item no-margin"},t("email",{rules:[{type:"email",message:"The input is not a valid Email!"},{required:!0,message:"Please input your Email!"}]})(r.a.createElement(Xt.a,{onPressEnter:function(){e._onLogin()},placeholder:"Email"}))),r.a.createElement(ja,{className:"form-item"},t("password",{rules:[{required:!0,message:"Please input your password!"}]})(r.a.createElement(Xt.a.Password,{onPressEnter:function(){e._onLogin()},placeholder:"Password"}))),r.a.createElement(ta.a,{className:"login-btn",block:!0,type:"primary",onClick:function(){return e.props.auth0.loginWithRedirect()}},"Login"))))}}]),a}(n.Component);var Na,Ca,Ia,La,Ta,Ma,Pa,Aa,xa,Da=Kt.a.create()(wa),_a=(Object(be.f)(Object(de.b)((function(e){return{}}),(function(e){return{actions:Object(i.b)({},e)}}))(Object(Ht.a)(Da))),a(636),function(e){var t=e.token,a=e.fontSize;return r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},t?t.split("").map((function(e,t){return r.a.createElement("div",{key:t,className:"token-character"},r.a.createElement("p",{style:{fontWeight:"bold",color:"#2A2A2A",fontSize:a||"28px",margin:"0"}},e))})):null)}),Ba=a(926),Fa=a(920),Ra=a(40),Ua=a(18),Va=a(199);function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ha(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var Wa=function(e){var t=e.svgRef,a=e.title,n=Ha(e,["svgRef","title"]);return r.a.createElement("svg",qa({id:"Layer_1",viewBox:"0 0 408 466.9",width:2185,height:2500,ref:t},n),a?r.a.createElement("title",null,a):null,Na||(Na=r.a.createElement("style",null,".st0{fill:url(#SVGID_1_)}.st1{fill:url(#SVGID_2_)}.st2{fill:url(#SVGID_3_)}.st3{fill:url(#SVGID_4_)}")),Ca||(Ca=r.a.createElement("linearGradient",{id:"SVGID_1_",gradientUnits:"userSpaceOnUse",y1:112.094,x2:261.746,y2:112.094},r.a.createElement("stop",{offset:0,stopColor:"#63be6b"}),r.a.createElement("stop",{offset:.506,stopColor:"#5bbc6a"}),r.a.createElement("stop",{offset:1,stopColor:"#4ab96a"}))),Ia||(Ia=r.a.createElement("path",{className:"st0",d:"M261.7 142.3L15 1.3C11.9-.5 8-.4 5 1.4c-3.1 1.8-5 5-5 8.6 0 0 .1 13 .2 34.4l179.7 179.7 81.8-81.8z"})),La||(La=r.a.createElement("linearGradient",{id:"SVGID_2_",gradientUnits:"userSpaceOnUse",x1:.152,y1:223.393,x2:179.896,y2:223.393},r.a.createElement("stop",{offset:0,stopColor:"#3ec6f2"}),r.a.createElement("stop",{offset:1,stopColor:"#45afe3"}))),Ta||(Ta=r.a.createElement("path",{className:"st1",d:"M.2 44.4C.5 121.6 1.4 309 1.8 402.3L180 224.1.2 44.4z"})),Ma||(Ma=r.a.createElement("linearGradient",{id:"SVGID_3_",gradientUnits:"userSpaceOnUse",x1:179.896,y1:229.464,x2:407.976,y2:229.464},r.a.createElement("stop",{offset:0,stopColor:"#faa51a"}),r.a.createElement("stop",{offset:.387,stopColor:"#fab716"}),r.a.createElement("stop",{offset:.741,stopColor:"#fac412"}),r.a.createElement("stop",{offset:1,stopColor:"#fac80f"}))),Pa||(Pa=r.a.createElement("path",{className:"st2",d:"M402.9 223l-141.2-80.7-81.9 81.8 92.4 92.4L403 240.3c3.1-1.8 5-5.1 5-8.6 0-3.6-2-6.9-5.1-8.7z"})),Aa||(Aa=r.a.createElement("linearGradient",{id:"SVGID_4_",gradientUnits:"userSpaceOnUse",x1:1.744,y1:345.521,x2:272.296,y2:345.521},r.a.createElement("stop",{offset:0,stopColor:"#ec3b50"}),r.a.createElement("stop",{offset:1,stopColor:"#e7515b"}))),xa||(xa=r.a.createElement("path",{className:"st3",d:"M1.7 402.3c.2 33.3.3 54.6.3 54.6 0 3.6 1.9 6.9 5 8.6 3.1 1.8 6.9 1.8 10 0l255.3-148.9-92.4-92.4L1.7 402.3z"})))},za=r.a.forwardRef((function(e,t){return r.a.createElement(Wa,qa({svgRef:t},e))})),Ga=(a.p,a(400)),Ka=a.n(Ga),Ya=a(401),Ja=a.n(Ya),Za=a(919),Qa=a(262),$a=a.n(Qa),Xa=function(){function e(){Object(ce.a)(this,e)}return Object(le.a)(e,null,[{key:"initialize",value:function(){window.lock=new $a.a("U6LfUnEpkLYrtnZ2u3IAuSDlraBebeGP","auth.ambii.io",{configurationBaseUrl:"https://ambii.us.auth0.com",autoclose:!0,autofocus:!0,closable:!0,allowShowPassword:!0,auth:{redirectUrl:window.location.origin,responseType:"id_token",sso:!0},theme:{logo:"".concat(window.location.origin,"/icon.png"),primaryColor:"#d04283"},languageDictionary:{title:"",signUpTitle:"",forgotPasswordTitle:""},additionalSignUpFields:[]})}},{key:"getLock",value:function(){return window.lock}},{key:"isLoggedIn",value:function(){return localStorage.getItem("access-token")}},{key:"login",value:function(){window.lock.show()}},{key:"signUp",value:function(){window.lock.show({initialScreen:"signUp"})}},{key:"logout",value:function(){localStorage.removeItem("access-token"),localStorage.removeItem("location-jwt"),window.lock.logout()}}]),e}(),en=function(){function e(){Object(ce.a)(this,e)}return Object(le.a)(e,null,[{key:"inApp",value:function(){return window.inApp}},{key:"send",value:function(e,t){window.ReactNativeWebView&&window.ReactNativeWebView.postMessage(JSON.stringify({data:t,endpoint:e}))}}]),e}(),tn=Za.a.Content,an=null,nn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).assignStation=function(){var e=n.props,t=e.location,a=e.close,r=e.history,o=e.actions,s=e.user,i=e.inApp,c=n.state.station;Xa.isLoggedIn()?n.setState({startStationDisabled:!0},(function(){var e=Object(z.get)(s,"company._id","");o.assignStation(e,c._id).then((function(e){n.setState({startStationDisabled:!1},(function(){if(fa({category:d,action:o.startStation,value:Object(z.get)(c,"_id","Error")}),i){var s=Object(z.get)(n.props,"myLocation",null),l=Object(z.get)(e,"trackSchedule.queue",null);a(),s&&l?en.send("newStation",{location:s,trackSchedule:l}):en.send("newStation",null)}Object(z.get)(t,"pathname","").toLowerCase().includes("nowplaying")?a():i?r.push("/discover"):r.push("/nowPlaying",{isBack:!0})}))})).catch((function(e){console.log("assignStation err: ",e),St.a.error("There was an error when assigning the station. Please refresh and try again."),n.setState({startStationDisabled:!1})}))})):Xa.signUp()},n.favoriteStation=function(){Xa.isLoggedIn()?n.setState({favoriteDisabled:!0},(function(){var e=Object(z.get)(n.props,"myLocation._id",""),t=Object(z.get)(n.state,"station._id",""),a=Object(z.get)(n.props,"myLocation.favorites",[]);n.props.actions.toggleFavorite({locationId:e,stationId:t,favorites:a}).then((function(){fa({category:h,action:L,value:t}),n.setState({favoriteDisabled:!1})}))})):Xa.signUp()},n.state={isLoading:!0,station:{},isBackgroundImage:!1,explicit:!1,startStationDisabled:!1,favoriteDisabled:!1,isMobile:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.checkForMobile(),document.body.scrollTop=document.documentElement.scrollTop=0,an=window.addEventListener("resize",(function(){e.checkForMobile()})),this.setStationDetails()}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",an),an=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"componentDidUpdate",value:function(e){Object(z.isEqual)(Object(z.get)(this.props,"playlistId",null),Object(z.get)(e,"playlistId",null))||this.setStationDetails()}},{key:"setStationDetails",value:function(){var e=Object(he.a)(ge.a.mark((function e(){var t=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({isLoading:!0},Object(he.a)(ge.a.mark((function e(){var a,n,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Object(z.get)(t.props,"match.params.id",null)||Object(z.get)(t.props,"playlistId",null))){e.next=9;break}return e.next=4,t.props.actions.getStationDetails(a);case 4:n=e.sent,r=Object(z.get)(n,"explicit",!1),t.setState({isLoading:!1,explicit:r,station:n}),e.next=10;break;case 9:t.setState({isLoading:!1});case 10:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkForMobile",value:function(){var e=this,t=this.state.isBackgroundImage;this.setState({isMobile:Y()},(function(){e.state.isMobile&&!t&&e.setStationBackgroundImage(),!e.state.isMobile&&t&&e.removeStationBackgroundImage()}))}},{key:"setStationBackgroundImage",value:function(){var e=this,t=this.state.station,a=setInterval((function(){var n=document.getElementById("station-header");n&&(n.style.backgroundImage="url('"+t.cover+"')",t.cover&&e.setState({isBackgroundImage:!0}),clearInterval(a))}),100)}},{key:"removeStationBackgroundImage",value:function(){var e=this,t=setInterval((function(){var a=document.getElementById("station-header");a&&(a.style.backgroundImage=null,e.setState({isBackgroundImage:!1}),clearInterval(t))}),100)}},{key:"checkIfFavorited",value:function(e){return!!Object(z.get)(this.props,"myLocation.favoritesMap",[])[e]}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.station,n=(e.explicit,e.startStationDisabled),o=e.favoriteDisabled,s=(e.isMobile,e.source,Object(z.get)(a,"_id","")),i=Object(z.get)(a,"track",[]),c=this.checkIfFavorited(s),l=!Object(z.get)(this.props,"myLocation.schedule._id","")&&Object(z.get)(this.props,"myLocation.station._id","")===s;return r.a.createElement(Za.a,{className:"create-layout"},r.a.createElement(tn,{className:"create-body"},r.a.createElement(Ut.a,{indicator:qt,spinning:t},r.a.createElement("div",{id:"station-header",className:"cover-content-wrapper",style:{backgroundColor:void 0!==a.hex?a.hex:"#aa4e9f"}},r.a.createElement("div",{className:"headerLeft"},r.a.createElement("div",{className:"station-head-wrapper"},r.a.createElement("h1",{className:"cover-heading"},a.name)),r.a.createElement("div",{className:"cover-btn-div"},r.a.createElement(ta.a,{size:"large",loading:n,className:"cover-btn".concat(l?" disabledButton":""),disabled:l||n,onClick:this.assignStation},l?null:r.a.createElement(la.a,{icon:F.c,className:"cover-icon"}),r.a.createElement("div",null," ",l?"Now Playing":"Start"," ")),r.a.createElement(ta.a,{size:"large",loading:o,className:"cover-btn",disabled:o,onClick:this.favoriteStation},r.a.createElement(la.a,{icon:Ua.j,className:"cover-icon".concat(c?" favorited":"")}),r.a.createElement("div",null," ",c?"Favorited":"Favorite"," "))),r.a.createElement("div",{className:"description"},a.description)),r.a.createElement("div",{className:"headerRight"},r.a.createElement("img",{src:!a.cover&&a.name?K(a.name):a.cover,className:"stationImage",alt:""}))),r.a.createElement("div",{className:"station-table-wrapper"},r.a.createElement("div",{className:"station-table-item station-table-header"},r.a.createElement("div",{className:"station-table-track title"},r.a.createElement("h1",null,"Track")),r.a.createElement("div",{className:"station-table-artist title"},r.a.createElement("h1",null,"Artist/Album"))),i.map((function(e,t){return r.a.createElement("div",{className:"station-table-item",key:e._id,style:{opacity:t>.5*i.length?(i.length+1-t)/i.length:1}},r.a.createElement("div",{className:"station-table-track"},e.title),r.a.createElement("div",{className:"station-table-artist"},e.artist[0],", ",e.album))}))))))}}]),a}(n.Component);var rn=Object(de.b)((function(e){return{auth:e.auth,user:e.auth.user,stations:e.stations.data,count:e.stations.count,myLocation:e.auth.location,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({getStationDetails:Et,assignStation:Ot,toggleFavorite:bt},e)}}))(Object(be.f)(nn)),on=(a(830),function(e){var t=e.animate,a=e.speed,n=e.value,o=e.display,s=e.hideText,i=e.style;return r.a.createElement("div",{className:"bpm-container".concat("column"===o?" column":" row"),style:i},r.a.createElement("div",{className:"beat-container",style:{animation:t?"bpm ".concat(a,"s linear infinite"):"none"}}),!s&&n&&r.a.createElement("div",{className:"bpm-text"},"".concat(parseInt(n).toFixed(0)," BPM")))}),sn=a(48),cn=(a(831),function(e){var t=e.title,a=e.subtitle,n=e.style,o=e.backArrow,s=e.backArrowPress;return r.a.createElement("div",{className:"title-container",style:n},o&&r.a.createElement("div",{className:"backArrow",onClick:s},r.a.createElement(la.a,{icon:sn.a})),r.a.createElement("div",{className:"flexCol"},r.a.createElement("div",{className:"create-list-view-title"}," ",t," "),r.a.createElement("div",{className:"create-list-view-subtitle"}," ",a," ")))}),ln=(a(832),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(le.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.content,n=e.icon,o=e.style,s=Array.isArray(a);return r.a.createElement("div",{className:"dashboard-module",style:o},r.a.createElement("div",{className:"dashboard-header"},r.a.createElement("div",{className:"dashboard-icon"},n&&r.a.createElement(la.a,{icon:n,style:{fontSize:"24px"}})),r.a.createElement("div",{className:"dashboard-title"},t),r.a.createElement("div",{className:"dashboard-icon"})),r.a.createElement("div",{className:"dashboard-content"},s?r.a.Children.map(a,(function(e){return r.a.cloneElement(e)})):a))}}]),a}(n.Component)),un=(a(378),a(402)),mn=a.n(un),dn=a(403),pn=a.n(dn),gn=(a(833),Object(de.b)((function(e){return{myLocation:e.auth.location}}))(Object(be.f)((function(e){var t,a=e.visible,n=e.onOk,o=e.onCancel,s=(e.history,e.myLocation),i=e.playStation,c=e.isApple,l=null===s||void 0===s||null===(t=s.token)||void 0===t?void 0:t.split(""),u=function(e){window.open(e,"_blank")};return r.a.createElement(Ba.a,{centered:!0,className:"instructionModalContainer",visible:a,onOk:n,onCancel:function(){o()},closable:!0,footer:null},r.a.createElement("div",{className:"instructionModalWrapper"},r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"content"},r.a.createElement("h1",{className:"headerText"},"Connect Player"),r.a.createElement("div",{className:"contentInfo"},r.a.createElement("h3",null,"Download the ",r.a.createElement("span",{style:{color:"#D04283",fontWeight:"bold"}}," Ambii - Music for Business")," app on your phone/tablet and enter the code"),r.a.createElement("div",{className:"storeCodeWrapper"},r.a.createElement("h2",{className:"headerText"},"Store Code"),r.a.createElement("div",{className:"storeCodes"},void 0!==l?l.map((function(e){return r.a.createElement("div",{className:"codeBox"},e)})):null)),r.a.createElement("div",{className:"logos"},r.a.createElement("div",{className:"ambiiLogo"},r.a.createElement("img",{src:pn.a,height:"100%",width:"100%",alt:"..."})),r.a.createElement("div",{className:"store-button-wrapper",onClick:function(){return u("https://play.google.com/store/apps/details?id=com.ambii_business_music")}},!c&&r.a.createElement("div",{className:"store-button"},r.a.createElement(za,{className:"connect-music-icon brand-icon",style:{width:24,height:48}}),r.a.createElement("div",{className:"store-button-text"},r.a.createElement("div",{className:"store-button-subtitle"},"Download on"),r.a.createElement("div",{className:"store-button-title"}," Google Play "))),r.a.createElement("div",{className:"store-button",onClick:function(){return u("https://apps.apple.com/us/app/ambii-music-for-business/id1501666271")}},r.a.createElement(la.a,{icon:Va.a,className:"connect-music-icon brand-icon",style:{fontSize:"32px"}}),r.a.createElement("div",{className:"store-button-text"},r.a.createElement("div",{className:"store-button-subtitle"},"Download on"),r.a.createElement("div",{className:"store-button-title"}," App Store "))))),r.a.createElement("p",{className:"playOnWeb",onClick:function(){n(),i()}},"or play on the web instead")))),r.a.createElement("div",{className:"imageWrapper"},r.a.createElement("img",{src:mn.a,alt:"...",height:"100%",width:"100%"}))))})))),hn=null,fn=null,bn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).checkPlayerState=function(){var e=n.props,t=e.myLocation,a=e.player,r=Object(z.get)(t,"pairedDevice.deviceBrand",""),o=r&&Object(z.get)(n.state,"playerInfo.uniqueId","")===Object(z.get)(t,"pairedDevice.uniqueId",""),s=Object(u.a)({},n.state.playerInfo);s.token=Object(z.get)(t,"token",""),n.setState({playerInfo:s,isLoading:!Object(z.get)(t,"station",null),explicitAllowed:Object(z.get)(t,"explicitAllowed",!1),controllerStyle:!!r&&(o?"WEB":o?"MOBILE":"OTHER")},(function(){Object(z.get)(a,"showPlayer",null)?(n.getSongTime(),Object(z.get)(a,"isPlaying",null)&&(clearInterval(fn),fn=setInterval((function(){n.getSongTime()}),100))):clearInterval(fn)}))},n.scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),va("Playlist Modal"),fa({category:p,action:b,value:e,label:M})},n.afterCreateStaion=function(){n.setState({showStationSearch:!1})},n.toggleStationSearch=function(){var e=!n.state.showStationSearch;n.setState({showStationSearch:e}),e&&setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100)},n.parseLocationName=function(e){if(e)return e.split(",")[0]},n.connectPress=function(){n.setState({showAppModal:!0}),va("Connect Modal"),fa({category:p,action:S,label:M})},n.loadPlayer=function(e){var t=e.override,a=Object(u.a)(Object(u.a)({},n.state.playerInfo),{},{override:t});n.setState({loadingPlayer:!0},(function(){n.props.actions.connectPlayer(a).then((function(){n.setState({showConnectModal:!1,loadingPlayer:!1})}))}))},n.changeStationPress=function(){fa({category:p,action:I,value:"Back",label:M}),n.props.history.push("/discover")},n.playStation=function(){n.state.playButtonDisabled||n.setState({playButtonDisabled:!0},(function(){n.props.actions.connectPlayer(n.state.playerInfo).then((function(e){n.setState({playButtonDisabled:!1},(function(){"DEVICE_ALREADY_PAIRED"===e&&(va("Device Already Connected Modal"),n.setState({showConnectModal:!0})),fa({category:p,action:E,label:M})}))})).catch((function(e){n.setState({playButtonDisabled:!1}),console.log("caught err: ",e)}))}))},n.toggleExplicit=function(){n.setState({loadingExplicit:!0},(function(){n.props.actions.toggleExplicit({locationId:Object(z.get)(n.props,"myLocation._id",""),currentTrack:Object(z.get)(n.props,"currentTrack",null)}).then((function(){n.setState({loadingExplicit:!1})}))}))},n.state={isMobile:Y(),isLoading:!1,loadingPlayer:!1,artistName:"",searchText:void 0,isFixHeader:!1,pageHeight:0,showStationSearch:!1,showAppModal:!1,showConnectModal:!1,showErrorModal:!1,playlistModalId:!1,playButtonDisabled:!1,userName:"",errorTitle:"",errorMessage:"",errorIcon:"",errorButton:"",playerInfo:{token:Object(z.get)(n.props,"myLocation.token",""),deviceName:"web",uniqueId:Q(),deviceBrand:"web",override:!1},loadingExplicit:!1,currentSongTime:"0:00",currentSongDuration:"0:00",controllerStyle:!1,showInstructions:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e,t,a=this,n=this.props,r=n.myLocation,o=n.user,s=n.actions,i=n.inApp;null===(null===r||void 0===r||null===(e=r.pairedDevice)||void 0===e?void 0:e.deviceBrand)&&(null===r||void 0===r||null===(t=r.stationHistory)||void 0===t?void 0:t.length)<2&&this.setState({showInstructions:!0}),ba(),i&&en.send("player","player/"+Object(z.get)(r,"token","")),this.checkPlayerState(),this.setState({isMobile:Y(),userName:this.createUserName()},(function(){a.state.isMobile&&fa({category:p,action:s.viewedMobile})})),Object(z.get)(o,"_id",null)&&(Ve.emit(qe,{userId:o._id}),s.addPlayerListeners(),s.updateStationListener(),s.updateCurrentTrackListener())}},{key:"componentWillUnmount",value:function(){try{this.props.actions.removePlayerListeners(),this.props.actions.removeStationListener(),clearInterval(fn),clearTimeout(hn)}catch(e){console.log("caught error when unmounting 'nowPlaying' page: ",e)}}},{key:"componentDidUpdate",value:function(e){var t=this;if(!Object(z.isEqual)(Object(z.get)(this.props,"myLocation",null),Object(z.get)(e,"myLocation",null))&&Object(z.get)(this.props,"myLocation",null)&&(Object(z.get)(this.props,"myLocation.station",null)||this.props.history.push("/discover"),this.checkPlayerState()),!Object(z.isEqual)(Object(z.get)(this.props,"player.playerError",null),Object(z.get)(e,"player.playerError",null))&&Object(z.get)(this.props,"player.playerError.error",null)){console.log("got player error!",Object(z.get)(this.props,"player.playerError",{}));var a=Object(z.get)(this.props,"player.playerError.title",""),n=Object(z.get)(this.props,"player.playerError.message",""),r=Object(z.get)(this.props,"player.playerError.icon",""),o=Object(z.get)(this.props,"player.playerError.button","");this.setState({showErrorModal:!0,errorTitle:a,errorMessage:n,errorIcon:r,errorButton:o}),this.props.actions.playerError({}),va("Error Modal"),fa({category:p,value:n,label:P}),hn=setTimeout((function(){t.closeErrorMessage(),clearTimeout(hn),hn=null}),3e5)}Object(z.isEqual)(Object(z.get)(this.props,"player.isPlaying",null),Object(z.get)(e,"player.isPlaying",null))&&Object(z.isEqual)(Object(z.get)(this.props,"player.showPlayer",null),Object(z.get)(e,"player.showPlayer",null))||(clearInterval(fn),fn=setInterval((function(){Object(z.get)(t.props,"player.isPlaying",null),t.getSongTime()}),100)),Object(z.isEqual)(Object(z.get)(this.props,"player.showPlayer",null),Object(z.get)(e,"player.showPlayer",null))||this.checkPlayerState(),Object(z.isEqual)(Object(z.get)(this.props,"myLocation.pairedDevice.deviceName",null),Object(z.get)(e,"myLocation.pairedDevice.deviceName",null))||console.log("Changed playback device")}},{key:"getSongTime",value:function(){try{var e=document.getElementById("current-song-time").innerHTML,t=document.getElementById("current-song-duration").innerHTML,a=document.getElementById("invis-current-song-time").innerHTML;this.setState({currentSongTime:e,currentSongDuration:t,songCompletion:a})}catch(n){console.log("getSongTime err: ",n)}}},{key:"createUserName",value:function(){var e=Object(z.get)(this.props,"user.firstName",""),t=Object(z.get)(this.props,"user.lastName","");return(e=e.substring(0,1).toUpperCase()+e.substring(1,e.length))+" "+(t=t.substring(0,1).toUpperCase()+t.substring(1,t.length))}},{key:"getTrackData",value:function(e){var t=this.props.myLocation,a=e;a||(a=Object(z.get)(t,"station.track[0]",null));var n={songImage:Object(z.get)(a,"picture",null),locationName:Object(z.get)(t,"name",null),songTrack:Object(z.get)(a,"title",null),bpm:Object(z.get)(a,"bpm",null),songArtist:Object(z.get)(a,"artist",null),token:Object(z.get)(t,"token",null),stationName:Object(z.get)(t,"station.name",null)};return Array.isArray(n.songArtist)&&(n.songArtist=n.songArtist[0]),n}},{key:"openLink",value:function(e){window.open(e,"_blank")}},{key:"closeErrorMessage",value:function(){this.setState({showErrorModal:!1,errorTitle:"",errorMessage:"",errorIcon:"",errorButton:""})}},{key:"openAdBlockMessage",value:function(){this.setState({showErrorModal:!0,errorTitle:"Please Disable Ad-Block",errorMessage:"All of our advertisements help fund small business relief programs. Please help us help them by disabling your ad-blocker.",errorIcon:r.a.createElement(la.a,{icon:Ua.k,className:"connect-icon",style:{color:"#d04283"}}),errorButton:"Ok, Got It"})}},{key:"sendToMobileDevice",value:function(e){this.props.inApp?en.send("player","player/"+e):this.openLink("https://ambii.app.link/OpenMobile")}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:r.a.createElement(la.a,{icon:Ra.b,className:"connect-icon"})})}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isApple,n=t.myLocation,o=Object(z.get)(this.props,"player",{}),s=o.isPlaying,i=o.skipDisabled,c=this.state,l=c.isLoading,u=c.loadingExplicit,m=c.songCompletion,d=c.controllerStyle,p=c.showAppModal,g=c.showConnectModal,h=c.showErrorModal,f=c.loadingPlayer,b=c.errorTitle,v=c.errorMessage,y=c.errorIcon,E=c.errorButton,O=c.playlistModalId,S=c.userName,k=c.isMobile,j=c.playButtonDisabled,w=c.currentSongTime,N=c.currentSongDuration,C=this.getTrackData(Object(z.get)(n,"currentTrack",null)),I=C.songImage,L=C.locationName,T=C.songTrack,M=C.songArtist,P=C.token,A=C.stationName,x=Object(z.get)(n,"company.isIndividual","individual"===Object(z.get)(n,"name","").toLowerCase()),D=Object(z.get)(n,"isPlaying",!1),_=Object(z.get)(n,"station._id",null),B=Object(z.get)(n,"explicitAllowed",!1),F=Object(z.get)(n,"schedule.name",!1),R=Object(z.get)(n,"schedule._id",""),U=Y()?"90%":"80%",V=!1,q=!1,H=Object(z.get)(C,"bpm",100);H||(H=100);var W=document.getElementById("now-playing-info-wrapper")||null,G=document.getElementById("now-playing-track")||null,K=document.getElementById("now-playing-artist")||null;return W&&G&&K&&((W=W.getBoundingClientRect().width-(Y()?0:310))<(G=G.getBoundingClientRect().width)&&(V=!0),W<(K=K.getBoundingClientRect().width)&&(q=!0)),r.a.createElement("div",{className:"dashboard-page-wrapper"},r.a.createElement(Ba.a,{visible:Boolean(O),onCancel:function(){return e.showPlaylistModal(null)},width:U,bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},r.a.createElement(rn,{playlistId:O,close:function(){return e.showPlaylistModal(null)},source:"dashboard"})),r.a.createElement(cn,{title:r.a.createElement("span",null,"Welcome ",r.a.createElement("span",{style:{color:"#D04283"}},"Back")),subtitle:x?S:L,backArrow:!0,backArrowPress:function(){return e.changeStationPress()}}),r.a.createElement(Ut.a,{indicator:qt,spinning:l,style:{backgroundColor:"#f5f5f5",maxHeight:"100%"}},r.a.createElement("div",{className:"dashboard-content-wrapper"},r.a.createElement("div",{className:"nowPlayingContainer"},r.a.createElement("div",{className:"imgAndInfo",id:"now-playing-info-wrapper"},r.a.createElement("div",{className:"songImageContainer"},r.a.createElement("img",{className:"songImage noselect",src:I,alt:""})),r.a.createElement("div",{className:"infoContainer"},r.a.createElement("div",{className:"nowPlayingTitle"},"Now Playing",D&&H&&r.a.createElement(on,{animate:!0,speed:60/H,value:H,hideText:!0,style:{marginLeft:"12px",justifyContent:"flex-start"}})),r.a.createElement("div",{className:"songTitle",style:{justifyContent:k&&!V?"center":"flex-start"}},r.a.createElement("span",{id:"now-playing-track",className:V?"marquee":""},T)),r.a.createElement("div",{className:"songArtist",style:{justifyContent:k&&!q?"center":"flex-start"}},r.a.createElement("span",{id:"now-playing-artist",className:q?"marquee":""},M)),r.a.createElement("div",null,"Station:",r.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.showPlaylistModal(_)}},A)),F&&r.a.createElement("div",null,"Schedule:",r.a.createElement("span",{className:"now-playing-station",onClick:function(){return e.props.history.push("/createSchedule/".concat(R))}},F))),r.a.createElement("div",{className:"adblock-div",onClick:function(){return e.openAdBlockMessage()}},r.a.createElement(Ja.a,null,r.a.createElement(la.a,{icon:Ua.k,className:"connect-icon"}))))),r.a.createElement("div",{className:"module-row"},"MOBILE"===d?r.a.createElement(ln,{title:"Playing on Mobile",icon:Ra.c,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(z.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(z.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!k&&r.a.createElement(Ut.a,{indicator:qt,spinning:j},r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(la.a,{icon:Ra.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"OTHER"===d?r.a.createElement(ln,{title:"Playing on Another Device",icon:Ra.g,style:{borderColor:"#D04283",color:"#2a2a2a"},content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-wrapper"},r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Brand:")," ",Object(z.get)(this.props,"myLocation.pairedDevice.deviceBrand","")),r.a.createElement("div",{className:"dashboard-mobile-info-option"},r.a.createElement("span",{className:"dashboard-mobile-info-title"},"Name:")," ",Object(z.get)(this.props,"myLocation.pairedDevice.deviceName",""))),!k&&r.a.createElement(Ut.a,{indicator:qt,spinning:j},r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginTop:"10px"},onClick:function(){return e.playStation()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(la.a,{icon:Ra.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))))]}):"WEB"===d?r.a.createElement(ln,{title:"Playing on Web",icon:Ra.g,style:{backgroundColor:"#D04283",borderColor:"#FFF",color:"#FFF"},content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},r.a.createElement("div",{className:"dashboard-music-controller"},r.a.createElement("div",{className:"dashboard-music-time"},w," / ",N),r.a.createElement("div",{className:"dashboard-music-controls"},s?r.a.createElement(la.a,{icon:Ua.p,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(!1)}}):r.a.createElement(la.a,{icon:Ua.q,className:"music-controller-icon",onClick:function(){return e.props.actions.setIsPlaying(z.stubTrue)}}),r.a.createElement(la.a,{icon:Ua.u,className:"music-controller-icon".concat(i?" disabled":""),onClick:function(){return i?null:e.skipSong(m)}}),r.a.createElement(la.a,{icon:Ra.f,className:"music-controller-icon close-icon",onClick:function(){return e.props.actions.disconnectPlayer()}}))),r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283",marginTop:"10px"},onClick:function(){return k?e.sendToMobileDevice(P):e.connectPress()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(la.a,{icon:Ra.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},k?"Open App":"Play on Mobile")))]}):r.a.createElement(ln,{title:"Play Music",icon:Ua.o,content:[r.a.createElement("div",{className:"dashboard-play-button-wrapper"},!k&&r.a.createElement(Ut.a,{indicator:qt,spinning:j},r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#d04283",color:"#FFF",borderColor:"#FFF",marginBottom:"15px"},onClick:function(){return e.playStation()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(la.a,{icon:Ra.g,className:"dashboard-play-button-icon",style:{color:"#FFF"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},"Play on Web"))),r.a.createElement("div",{className:"dashboard-play-button",style:{backgroundColor:"#FFF",color:"#D04283",borderColor:"#D04283"},onClick:function(){return k?e.sendToMobileDevice(P):e.connectPress()}},r.a.createElement("div",{className:"dashboard-play-button-left"},r.a.createElement(la.a,{icon:Ra.c,className:"dashboard-play-button-icon",style:{color:"#D04283",fontSize:"32px"}})),r.a.createElement("div",{className:"dashboard-play-button-right"},k?"Open App":"Play on Mobile")))]}),r.a.createElement("div",{className:"flexCol",style:{justifyContent:"space-evenly"}},r.a.createElement(ln,{title:"Store Code",icon:Ua.l,content:[r.a.createElement(_a,{token:P,fontSize:"22px"})]}),r.a.createElement(ln,{title:"Settings",icon:Ua.e,content:r.a.createElement("div",{className:"dashboard-setting-wrapper"},r.a.createElement("div",{className:"dashboard-setting-text"},"Allow Explicit"),r.a.createElement("div",{className:"dashboard-setting-option"},r.a.createElement(Fa.a,{style:{width:"30px"},checked:B,disabled:null===B,loading:u,onClick:function(){return e.toggleExplicit()}})))}))))),r.a.createElement(Ba.a,{visible:p,onOk:function(){return e.setState({showAppModal:!1})},onCancel:function(){return e.setState({showAppModal:!1})},width:U,footer:[],className:"app-modal"},r.a.createElement("div",{className:"connect-wrapper"},r.a.createElement("div",{className:"connect-header"},"Connect Device"),r.a.createElement("div",{className:"connect-display rowItem"},r.a.createElement(la.a,{icon:Ra.h,className:"connect-icon"}),r.a.createElement("div",{className:"connect-dashes"}," - - - - - - "),r.a.createElement("div",{className:"mobile-phone"},r.a.createElement(la.a,{icon:Ra.c,className:"connect-icon"}),r.a.createElement(la.a,{icon:Ua.o,className:"special-music-icon"})),r.a.createElement("div",{className:"connect-dashes"}," - - - - - - "),r.a.createElement("div",{className:"speaker-group"},r.a.createElement(la.a,{icon:Ra.e,className:"connect-icon"}),r.a.createElement(la.a,{icon:Ua.f,className:"connect-music-icon"}))),r.a.createElement("div",{className:"connect-text rowItem"},a?r.a.createElement(r.a.Fragment,null,"1. Download the ",r.a.createElement("span",{style:{color:"#d04283",fontWeight:"bold"}},"Ambii - Music for Business")," app on the App Store."):r.a.createElement(r.a.Fragment,null,"1. Download the ",r.a.createElement("span",{style:{color:"#d04283",fontWeight:"bold"}},"Ambii - Music for Business")," app on Google Play or the App Store onto your mobile device")),r.a.createElement("div",{className:"store-wrapper rowItem"},r.a.createElement("img",{src:Ka.a,className:"connect-music-icon ambii-logo",alt:""}),r.a.createElement("div",{className:"store-button-wrapper",onClick:function(){return e.openLink("https://play.google.com/store/apps/details?id=com.ambii_business_music")}},!a&&r.a.createElement("div",{className:"store-button"},r.a.createElement(za,{className:"connect-music-icon brand-icon",style:{width:24,height:48}}),r.a.createElement("div",{className:"store-button-text"},r.a.createElement("div",{className:"store-button-subtitle"},"Download on"),r.a.createElement("div",{className:"store-button-title"}," Google Play "))),r.a.createElement("div",{className:"store-button",onClick:function(){return e.openLink("https://apps.apple.com/us/app/ambii-music-for-business/id1501666271")}},r.a.createElement(la.a,{icon:Va.a,className:"connect-music-icon brand-icon",style:{fontSize:"32px"}}),r.a.createElement("div",{className:"store-button-text"},r.a.createElement("div",{className:"store-button-subtitle"},"Download on"),r.a.createElement("div",{className:"store-button-title"}," App Store "))))),r.a.createElement("div",{className:"connect-text rowItem"},"2. Once downloaded, enter your Store Code"),r.a.createElement("div",{className:"connect-text",style:{marginTop:"25px",fontSize:"24px"}},"Store Code: ",r.a.createElement("span",{className:"connect-token"},P)))),r.a.createElement(Ba.a,{visible:g,onOk:function(){return e.setState({showConnectModal:!1})},onCancel:function(){return e.setState({showConnectModal:!1})},width:U,footer:[],className:"app-modal"},r.a.createElement("div",{className:"connect-wrapper"},r.a.createElement("div",{className:"connect-header"},"Device Already Connected!"),r.a.createElement("div",{className:"connect-text"},"Another device is already connected to this account. Would you like to play music on this device instead?"),r.a.createElement("div",{className:"connect-display rowItem"},r.a.createElement(la.a,{icon:Ra.h,className:"connect-icon"})),r.a.createElement("div",{className:"connect-button-group"},r.a.createElement(ta.a,{className:"optionButton",loading:f,disabled:f,onClick:function(){return e.loadPlayer({override:!0})}},"Yes, Connect"),r.a.createElement(ta.a,{className:"optionButton mobile-padding",onClick:function(){return e.setState({showConnectModal:!1})}},"No, Cancel")))),r.a.createElement(Ba.a,{visible:h,onOk:function(){return e.closeErrorMessage()},onCancel:function(){return e.closeErrorMessage()},width:U,footer:[],className:"app-modal"},r.a.createElement("div",{className:"connect-wrapper"},r.a.createElement("div",{className:"connect-header"},b),r.a.createElement("div",{className:"connect-text"},v),r.a.createElement("div",{className:"connect-display rowItem"},y),r.a.createElement("div",{className:"connect-button-group"},r.a.createElement(ta.a,{className:"optionButton mobile-padding",onClick:function(){return e.closeErrorMessage()}},E||"Ok")))),r.a.createElement(gn,{visible:this.state.showInstructions,onOk:function(){return e.setState({showInstructions:!1})},playStation:this.playStation,isApple:a,onCancel:function(){e.setState({showInstructions:!1})}}))}}]),a}(n.Component);var vn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,player:e.player,currentTrack:e.auth.location.currentTrack,isApple:e.auth.isApple,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({addPlayerListeners:$e,removePlayerListeners:rt,updateStationListener:ot,updateCurrentTrackListener:st,removeStationListener:it,connectPlayer:et,playerError:Pe,assignStation:Ot,toggleExplicit:vt,setDisableSkip:De,skipSong:at,setIsPlaying:xe,disconnectPlayer:Xe},e)}}))(Object(be.f)(bn)),yn=a(84),En=a(72),On=a(406),Sn=(a(264),a(420)),kn=(a(837),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isHovered:!1},e.onMouseOver=function(){e.setState({isHovered:!0})},e.onMouseOut=function(){e.setState({isHovered:!1})},e}return Object(le.a)(a,[{key:"render",value:function(){var e=this.props,t=e.performSelect,a=e.text;return r.a.createElement("div",{className:"mood_tag",onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseOut,onClick:t},r.a.createElement("span",{style:{marginLeft:8}},a))}}]),a}(n.Component)),jn=(a(838),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).removeTag=function(e){return function(){n.props.performSelect(e)}},n.onChangeText=function(e){n.setState({search:e.target.value},(function(){var e=Object(ft.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))},n.performSelect=function(e){return function(){n.props.performSelect(e),n.setState({search:""},(function(){var e=Object(ft.a)(n.props.items).filter((function(e){return e.toLowerCase().includes(n.state.search)}));n.setState({tags:e})}))}},n.filterTagArray=function(){var e=new Set(n.props.selectedTags);return Object(ft.a)(n.state.tags).filter((function(t){return!e.has(t)}))},n.handleClick=function(e){n.node.contains(e.target)||n.setState({isSearchFocused:!1})},n.state={tags:n.props.items,search:"",isSearchFocused:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.search,n=t.isSearchFocused;return r.a.createElement(Sn.a,{handleHeight:!0},(function(t){var o=t.height;return r.a.createElement("div",{className:"mood_container",ref:function(t){return e.node=t}},r.a.createElement("div",{className:"input-tag ".concat(n?"red-focus":"")},r.a.createElement("ul",{className:"input-tag__tags",ref:function(t){return e.tagListRef=t}},e.props.selectedTags.map((function(t,a){return r.a.createElement("li",{key:t},t,r.a.createElement("button",{type:"button",className:"remove_btn",onClick:e.removeTag(t)},"+"))})),r.a.createElement("li",{className:"input-tag__tags__input"},r.a.createElement("textarea",{className:"mood_searchBar",type:"text",placeholder:"Search for Moods",onFocus:function(){return e.setState({isSearchFocused:!0})},value:a,onChange:e.onChangeText,ref:function(t){e.tagInput=t}}),r.a.createElement(la.a,{icon:sn.h,color:"rgba(95, 95, 95, 0.4)"})))),n?r.a.createElement("div",{className:"tag-result",style:{position:"absolute",top:o}},e.filterTagArray().map((function(t,a){return r.a.createElement(kn,{key:a,text:t,performSelect:e.performSelect(t)})}))):null)}))}}]),a}(n.Component));a(839);function wn(e){var t=function(t,a){return function(){a!==e.currentSelectedTempo?e.selectTempo(t,a):e.deSelectTempo()}};return r.a.createElement("div",{className:"tempo_container"},Object.keys(R).map((function(a,n){return r.a.createElement("div",{key:n,className:"wrapper"},r.a.createElement("div",{className:"energy",onClick:t([R[a].min,R[a].max],n),style:{backgroundColor:n===e.currentSelectedTempo?"rgba(95, 95, 95, 0.1)":"white"}},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"inner"},r.a.createElement(la.a,{icon:R[a].icon,className:"tempo_icon"}),r.a.createElement("span",null,R[a].title)))))})))}a(840),["10's","00's","90's","80's","70's","60's"].reverse();var Nn=function(e){var t=e.browseMoods,a=e.currentSelectedTempo,n=e.onSelectTempo,o=e.onDeselectTempo,s=(e.browseEraRange,e.onSelectEra,e.onSelectMood);return r.a.createElement("div",null,r.a.createElement("div",{className:"moodWrapper",style:{margin:"auto"}},r.a.createElement("div",{className:"browseSettingsTitle"},"Tags"),r.a.createElement("div",{className:"browseSelectionsContainer"},r.a.createElement(jn,{items:Object.keys(t),selectedTags:Object.keys(t).filter((function(e){return!0===t[e]})),performSelect:s}))),r.a.createElement("div",{className:"tempoWrapper",style:{margin:"auto"}},r.a.createElement("div",{className:"browseSettingsTitle"},"Energy"),r.a.createElement("div",{className:"browseSelectionsContainer"},r.a.createElement(wn,{currentSelectedTempo:a,selectTempo:n,deSelectTempo:o}))))},Cn=a(200),In=a(921),Ln=(a(841),function(e){var t=e.visible,a=e.onCancel,n=e.tracks,o=e.title;return r.a.createElement(Ba.a,{title:o,visible:t,onCancel:a,footer:[]},n.map((function(e,t){return r.a.createElement("div",{className:"track-container",key:t},e.albumCover?r.a.createElement(In.a,{shape:"square",size:50,src:e.albumCover}):r.a.createElement(In.a,{shape:"square",size:50,icon:"user"}),r.a.createElement("div",null,r.a.createElement("p",{style:{marginLeft:10},className:"heading-regular margin-0"},e.title),r.a.createElement("p",{style:{marginLeft:10},className:"margin-0"},e.artist)))})))}),Tn=(a(842),function(e){var t,a,n=e.genres,o=e.roundBottom,s=e.bpm,i=e.simple,c=Object.entries(n||[]).sort((function(e,t){return t[1]-e[1]})).slice(0,3),l=0;try{t=c[0][1],a=c[1][1],l=c[2][1]}catch(p){console.log("Not all genre fields available")}var u=(t&&t>.1?t:0)+(a&&a>.1?a:0)+(l&&l>.1?l:0),m=function(e){return e/u},d=Z(s);return r.a.createElement("div",{className:"genre-container"},r.a.createElement("div",{className:"genre-color-bar"},c.map((function(e,t){var a=e[0],s=m(e[1]);return r.a.createElement("div",{className:"genre-wrapper",style:{width:"".concat(100*s,"%"),display:s>.1?"flex":"none"},key:a},r.a.createElement("div",{className:"genre-chunk",style:{backgroundColor:A[a],borderBottomLeftRadius:0===t&&o?"8px":null,borderBottomRightRadius:t===n.length-1&&o?"8px":null}}))}))),!i&&r.a.createElement("div",{className:"genre-tile-info-wrapper"},r.a.createElement("div",{className:"genre-tile-genre-wrapper"},c.map((function(e,t){var a=e[0];if(m(e[1])>.1)return r.a.createElement("div",{className:"flexRow",key:a},r.a.createElement("div",{className:"genre-color-dot",style:{backgroundColor:A[a]}}),r.a.createElement("span",{style:{position:"relative",bottom:4,left:4,fontWeight:0===t?"bold":"normal"}},a))}))),r.a.createElement("div",{className:"genre-bpm"},r.a.createElement(la.a,{icon:Object(z.get)(d,"icon",""),className:"bpm-icon"}),r.a.createElement("div",null,Object(z.get)(d,"title","")))))}),Mn=(a(843),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={modalVisible:!1,hovered:!1},e.showModal=function(){e.setState({modalVisible:!0})},e.hideModal=function(){e.setState({modalVisible:!1})},e.stationPress=function(t,a){var n=e.props.history;t&&(fa({category:d,action:I,value:a,label:M}),n.push("/station/".concat(t)))},e}return Object(le.a)(a,[{key:"render",value:function(){var e=this,t=this.state.modalVisible,a=this.props,n=a.bpm,o=a.genres,s=a._id,i=a.hex,c=a.track,l=a.title,u=a.type,m=a.rowIndex,d=a.browse,p=a.showPlaylistModal,g=a.isApple,h=(a.explicit,"advanced"===u?"advanced-station-preview":"public-station noselect"),f=(s?"item-container pointer":"item-container-preview item-container pointer").concat(0===m?" first-row":""),b=Object(z.get)(this.props,"name",""),v=Object(z.get)(n,"mean",1);return r.a.createElement("div",{className:h,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})},style:d?{margin:"0px 0px 10px 0px",border:"2px solid white"}:{border:"2px solid white"},onClick:function(){return p(s)}},r.a.createElement("div",{className:f,style:{backgroundColor:i,backgroundImage:"url(".concat(K(this.props.name),")")}},r.a.createElement("div",{className:"station-tile-header"},"advanced"!==u&&r.a.createElement("div",{style:s?{}:{fontSize:14},className:"name"},b?b.replace(" (Explicit)",""):l))),c&&c.length?r.a.createElement(Ln,{title:b,visible:t,onCancel:this.hideModal,tracks:c}):null,r.a.createElement("div",{className:"info-container"},r.a.createElement(Tn,{genres:o,showStats:!g,bpm:v||100})))}}]),a}(r.a.PureComponent)),Pn=(a(844),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showArrows:!1,showLeftArrow:!0,showRightArrow:!0,diff:0},e}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth,a=Math.round(5*e/100);this.setState({diff:t-e+a}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.id,n=t.title,o=t.type,s=t.showViewAll,i=t.rowIndex,c=t.isApple,l=Object(z.get)(this.props,"data",[]),u=this.state,m=u.showArrows,d=u.showLeftArrow,p=u.showRightArrow,g=u.diff;return r.a.createElement("section",{className:"feature-section",id:a,style:s?{}:{padding:"25px 0px"}},r.a.createElement("div",{className:"feature-section-head-wrapper"},r.a.createElement("div",{className:"feature-section-title-wrapper"},r.a.createElement("div",{className:"preMargin"}),r.a.createElement("div",{className:"heading heading-large"}," ",n," "),!s&&r.a.createElement(ta.a,{type:"primary",onClick:function(){return An(0,o,e.props.history)}},r.a.createElement(la.a,{icon:sn.d}),"Go back"))),r.a.createElement("div",{className:"description"},_[n]),r.a.createElement("div",{className:"blurredWrapper"},r.a.createElement("div",{className:"blurredEdgeStart",onMouseEnter:function(){e.rightMoveSpeed=2,e.scrollRight=setInterval((function(){e.rightMoveSpeed=Math.min(12,e.rightMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:-e.rightMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},m&&d?r.a.createElement(la.a,{icon:sn.b}):null),r.a.createElement(Cn.a,{className:"stationPreviewWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===g?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},r.a.createElement("div",{className:"preMargin"}),r.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},l.map((function(t,a){return r.a.createElement(Mn,Object.assign({assignStation:e.props.actions.assignStation,showPlaylistModal:e.props.showPlaylistModal,company:e.props.company,history:e.props.history,key:a,rowIndex:i,isApple:c},t))})))),r.a.createElement("div",{className:"blurredEdgeEnd",onMouseEnter:function(){e.leftMoveSpeed=2,e.scrollLeft=setInterval((function(){e.leftMoveSpeed=Math.min(12,e.leftMoveSpeed+.1),e.scrollView.getElement().scrollBy({left:e.leftMoveSpeed}),e.forceUpdate()}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},m&&p?r.a.createElement(la.a,{icon:sn.c}):null)))}}]),a}(n.Component)),An=function(e,t,a){0===e&&a.push("/discover",{isBack:!0}),1===e&&(fa({category:d,action:I,value:"View More",label:M}),a.push("/stations/".concat(t)))};var xn=Object(de.b)((function(e){return{activeStationPreview:e.activeStationPreview}}),(function(e){return{actions:Object(i.b)({assignStation:Ot},e)}}))(Object(be.f)(Pn)),Dn=(a(845),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={showArrows:!1,showLeftArrow:!1,showRightArrow:!0,diff:0},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this.scrollView.getElement().clientWidth,t=this.scrollWrapper.clientWidth;this.setState({diff:t-e}),t>e?this.setState({showArrows:!0}):this.setState({showArrows:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.showArrows,n=t.showLeftArrow,o=t.showRightArrow,s=t.diff;return r.a.createElement("div",{className:"genre_container"},r.a.createElement("div",{className:"edgeStart",onMouseEnter:function(){var t=2;e.scrollRight=setInterval((function(){t=Math.min(12,t+.1),n&&e.scrollView.getElement().scrollBy({left:-t})}),10)},onMouseLeave:function(){clearInterval(e.scrollRight)}},a&&r.a.createElement(la.a,{className:"icon",icon:sn.b,style:{fontSize:24,color:n?"#2a2a2a":"#CCC"}})),r.a.createElement(Cn.a,{className:"itemWrapper",ref:function(t){return e.scrollView=t},onScroll:function(t){0===t?e.setState({showLeftArrow:!1}):e.setState({showLeftArrow:!0}),t===s?e.setState({showRightArrow:!1}):e.setState({showRightArrow:!0})}},r.a.createElement("div",{className:"innerWrapper",ref:function(t){return e.scrollWrapper=t}},this.props.items)),r.a.createElement("div",{className:"edgeEnd",onMouseEnter:function(){var t=2;e.scrollLeft=setInterval((function(){t=Math.min(12,t+.1),e.scrollView.getElement().scrollBy({left:t})}),10)},onMouseLeave:function(){clearInterval(e.scrollLeft)}},a&&r.a.createElement(la.a,{icon:sn.c,style:{fontSize:24,color:o?"#2a2a2a":"#CCC"}})))}}]),a}(n.Component)),_n=a(201),Bn=a(202),Fn=a.n(Bn),Rn=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isStopped:!1,isPaused:!1},n}return Object(le.a)(a,[{key:"render",value:function(){var e=this.props,t=e.animationData,a=e.height,n=e.width,o={loop:!0,autoplay:!0,animationData:t,rendererSettings:{preserveAspectRatio:"xMidYMid slice"}};return r.a.createElement("div",{className:"controlled"},r.a.createElement(Fn.a,{options:o,height:a||400,width:n||400,isStopped:this.state.isStopped,isPaused:this.state.isPaused}))}}]),a}(n.Component),Un=(a(889),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).scrollIntoView=function(e){document.getElementById(e).scrollIntoView({behavior:"smooth"})},n.toggleStationSearch=function(){var e=n.state.showStationSearch;n.setState({showStationSearch:!e},(function(){e?setTimeout((function(){var e=document.getElementsByClassName("ant-collapse-content-active");e&&e.length&&e[0].scrollIntoView()}),100):fa({category:d,action:y,label:M})}))},n.calculateBrowse=function(){var e=n.state.loadNumber,t=function(e){var t={},a=Object.keys(e).filter((function(t){return e[t]}));return a.forEach((function(e){t[e]=1/a.length})),t},a=function(e,t){var a=[];return Object.keys(t).forEach((function(t){e[t]?a.push(e[t]):a.push(0)})),a},r=function(e,t){for(var a=0,n=0,r=0,o=0;o<e.length;o++)a+=e[o]*t[o],n+=e[o]*e[o],r+=t[o]*t[o];return a/((n=Math.sqrt(n))*(r=Math.sqrt(r)))},o=function(e,t){for(var a=0,n=0;n<e.length;n++)for(var r=n+1;r<e.length+1;r++){var o=e.slice(n,r);if(!t.includes(o))break;a+=Math.pow(o.length,1.5)/t.length}return a},s=n.state.playlists.filter((function(e){var t,a,r,o;return!((null===e||void 0===e||null===(t=e.bpm)||void 0===t?void 0:t.mean)>(null===(a=n.state.browseTempoRange)||void 0===a?void 0:a.max))&&!((null===e||void 0===e||null===(r=e.bpm)||void 0===r?void 0:r.mean)<(null===(o=n.state.browseTempoRange)||void 0===o?void 0:o.min))}));if(n.state.searchText)s=s.map((function(e){var t=0;return t+=o(n.state.searchText,e.name),e.description&&(t+=o(n.state.searchText,e.description)),Object(u.a)(Object(u.a)({},e),{},{searchScore:t})})).sort((function(e,t){return t.searchScore-e.searchScore}));else{var i=t(n.state.browseGenres),c=t(n.state.browseMoods),l=0!==Object.keys(i).length,m=0!==Object.keys(c).length;i=a(i,n.state.browseGenres),c=a(c,n.state.browseMoods);var d={};l&&s.forEach((function(e){d[e._id]=r(a(e.genres,n.state.browseGenres),i)}));var p={};m&&s.forEach((function(e){p[e._id]=r(a(e.moods,n.state.browseMoods),c)})),s=s.sort((function(e,t){var a=0;return l&&(a+=.5*(d[t._id]-d[e._id])),m&&(a+=.5*(p[t._id]-p[e._id])),a}))}s=s.slice(0,e),n.setState({calculatedPlaylists:s})},n.showPlaylistModal=function(e){n.setState({playlistModalId:e}),va("Station Preview: "+e)},n._checkIfAllFalse=function(e){var t,a=Object(En.a)(e);try{for(a.s();!(t=a.n()).done;){if(!0===t.value)return!1}}catch(n){a.e(n)}finally{a.f()}return!0},n._checkIsFiltering=function(){var e=n.state,t=e.searchText,a=e.browseGenres,r=e.browseMoods,o=e.currentSelectedTempo,s=t.length>0,i=!1===n._checkIfAllFalse(Object.values(a)),c=!1===n._checkIfAllFalse(Object.values(r));return s||i||c||o>-1},n.onSetFiltering=function(){n._checkIsFiltering()?n.setState({isFiltering:!0}):n.setState({isFiltering:!1})},n.onSelectGenre=function(e){return function(){var t=Object(u.a)({},n.state.selectedGenres);t[e]?delete t[e]:t[e]=!0,n.setState({showAdvancedSearch:Object.keys(t).length>0,selectedGenres:t,browseGenres:Object(u.a)(Object(u.a)({},n.state.browseGenres),{},Object(yn.a)({},e,!n.state.browseGenres[e])),loadNumber:12},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))}},n.onSelectMood=function(e){var t=Object(u.a)({},n.state.selectedMoods);t[e]?delete t[e]:t[e]=!0,n.setState({selectedMoods:t,browseMoods:Object(u.a)(Object(u.a)({},n.state.browseMoods),{},Object(yn.a)({},e,!n.state.browseMoods[e]))},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onSelectTempo=function(e,t){n.setState({browseTempoRange:{min:e[0],max:e[1]},currentSelectedTempo:t},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onDeselectTempo=function(){n.setState({browseTempoRange:{min:30,max:150},currentSelectedTempo:-1},(function(){n.onSetFiltering(),n.calculateBrowse(),n.showClearFilters()}))},n.onSelectEra=function(e){n.setState({browseEraRange:{from:e[0],to:e[1]}})},n.onSetSearchText=function(e){n.setState({searchText:e.target.value},(function(){n.onSetFiltering(),clearTimeout(n.searchTimeout),n.searchTimeout=setTimeout(n.calculateBrowse,250)}))},n.state={isLoading:!0,artistName:"",searchText:"",isStation:!1,isFixHeader:!1,showStationSearch:!1,showAppModal:!1,businessType:"other",browseGenres:{},defaultGenres:{},browseMoods:{},defaultMoods:{},browseTempoRange:{min:30,max:150},browseEraRange:{from:1950,to:2020},playlistModalId:null,playlists:null,calculatedPlaylists:null,showAdvancedSearch:!1,isFiltering:!1,currentSelectedTempo:-1,selectedGenres:{},selectedMoods:{},loadNumber:12},n}return Object(le.a)(a,[{key:"getBusinessType",value:function(){var e=Object(z.get)(this.props,"myLocation.company.businessType","restaurant").toLowerCase();"other"===e.toLowerCase()&&(e="other"),this.setState({businessType:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.inApp;if(!Object(z.isEqual)(Object(z.get)(this.props,"myLocation",null),Object(z.get)(e,"myLocation",null))&&(this.getBusinessType(),t)){var a=Object(z.get)(this.props,"myLocation.token",""),n=Object(z.get)(this.props,"myLocation.station._id","");localStorage.getItem("mobileIntroLogin")&&Xa.isLoggedIn()&&a&&n&&(localStorage.removeItem("mobileIntroLogin"),en.send("player","player/"+a))}}},{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){var t,a,n,r,o,s=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ba(),this.getBusinessType(),t=Object(z.get)(this.props,"playlistList",[]),a=null,t&&!(t.length<=0)){e.next=8;break}return e.next=7,this.props.actions.getDiscoverPulicStations();case 7:a=e.sent;case 8:n=a?Object(z.get)(a,"playlistList",[]):Object(z.get)(this.props,"playlistList",[]),r=n.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),o=n.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{}),this.setState({isLoading:!1,playlists:n,browseGenres:r,defaultGenres:r,browseMoods:o,defaultMoods:o},(function(){s.calculateBrowse()}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.actions.removePlayerListeners()}},{key:"updatePreference",value:function(e){this.setState({businessType:e.key}),fa({category:d,action:v,value:e.key,label:M})}},{key:"clearAdvancedFilters",value:function(){var e=this,t=this.state,a=t.defaultGenres,n=t.defaultMoods;this.setState({searchText:"",selectedGenres:{},selectedMoods:{},browseGenres:a,browseMoods:n,loadNumber:12,currentSelectedTempo:-1},(function(){e.onSetFiltering(),clearTimeout(e.searchTimeout),e.searchTimeout=setTimeout(e.calculateBrowse,250)}))}},{key:"showClearFilters",value:function(){var e=this.state,t=e.currentSelectedTempo,a=e.selectedGenres,n=e.selectedMoods;return e.searchText.length>0||Object.keys(a).length>0||Object.keys(n).length>0||-1!==t}},{key:"loadMoreStations",value:function(){var e=this;this.setState({loadNumber:this.state.loadNumber+12},(function(){e.calculateBrowse()}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.isApple,n=t.inApp,o=this.state,s=(o.showAdFreeModal,o.browseMoods),i=o.isLoading,c=o.playlists,l=o.businessType,u=o.playlistModalId,m=o.showAdvancedSearch,d=o.currentSelectedTempo,p=o.browseEraRange,g=o.isFiltering,h=o.browseGenres,f=o.searchText,b=o.calculatedPlaylists,v=(o.selectedGenres,Y()?"90%":"80%"),y={},E={},O=Object(z.get)(this.props,"user.role",null),S=Object(z.get)(this.props,"user.company",""),k=Object(z.get)(this.props,"myLocation.favorites",[]),j=k.length>0,w={};j&&(w.Favorites=k);var N,C=Object(En.a)(B.global);try{for(C.s();!(N=C.n()).done;){var I=N.value;y[I]=[]}}catch(V){C.e(V)}finally{C.f()}var L,T="other"===l.toLowerCase()&&O===H?B.defaultIndividual:B[l.toLowerCase()],M=Object(En.a)(T);try{for(M.s();!(L=M.n()).done;){I=L.value;E[I]=[]}}catch(V){M.e(V)}finally{M.f()}if(!i){var P,A=Object(En.a)(c);try{for(A.s();!(P=A.n()).done;){var x,D=P.value,_=Object(En.a)(Object(z.get)(D,"supersets",[]));try{for(_.s();!(x=_.n()).done;){var F=x.value;F in y&&y[F].push(D),F in E&&E[F].push(D)}}catch(V){_.e(V)}finally{_.f()}}}catch(V){A.e(V)}finally{A.f()}}var R,U=r.a.createElement(ia.a,{onClick:function(t){return e.updatePreference(t)},selectedKeys:[l],className:"menu-wrapper"},r.a.createElement(ia.a.Item,{key:"bar"},"Bar"),r.a.createElement(ia.a.Item,{key:"cafe"},"Cafe"),r.a.createElement(ia.a.Item,{key:"gym"},"Gym"),r.a.createElement(ia.a.Item,{key:"hotel"},"Hotel"),r.a.createElement(ia.a.Item,{key:"other"},"Other"),r.a.createElement(ia.a.Item,{key:"restaurant"},"Restaurant"),r.a.createElement(ia.a.Item,{key:"salon"},"Salon"),r.a.createElement(ia.a.Item,{key:"school"},"School"),r.a.createElement(ia.a.Item,{key:"spa"},"Spa"),r.a.createElement(ia.a.Item,{key:"shop"},"Shop"));return r.a.createElement("div",{className:"discoverWrapper",id:"discover-container"},r.a.createElement(Ba.a,{visible:Boolean(u),onCancel:function(){return e.showPlaylistModal(null)},width:v,bodyStyle:{minHeight:"80vh",padding:0},closable:!0,footer:null,style:{borderRadius:10,overflow:"hidden"}},r.a.createElement(rn,{login:this.props.login,playlistId:u,close:function(){return e.showPlaylistModal(null)}})),r.a.createElement("div",{className:"create-body"},!n&&r.a.createElement("div",{className:"discover-head-wrapper"},r.a.createElement(cn,{title:r.a.createElement("span",null,"Let's Find Your",r.a.createElement("span",{style:{color:"#D04283"}},"\xa0ambii"),"-ance"),subtitle:"Discover the right music for your business",style:{flex:1}}),O!==H&&r.a.createElement("div",{className:"discover-buttons"},r.a.createElement("div",{className:"viewOptions"},r.a.createElement(ca.a,{overlay:U,trigger:["click"],className:"preference-menu"},r.a.createElement(ta.a,{className:"preference-menu-button"},r.a.createElement("span",{style:{marginRight:"5px",color:"black"}},"Preference:"),(R=l)?R.charAt(0).toUpperCase()+R.substring(1,R.length):"",r.a.createElement(la.a,{icon:Ua.c,style:{marginLeft:"8px"}})))))),r.a.createElement(Ut.a,{indicator:qt,spinning:i,style:{backgroundColor:"#f5f5f5"}},i&&r.a.createElement("div",{style:{width:"100%",height:"30vh"}}),!i&&r.a.createElement(_n.Animated,{animationIn:"fadeIn",isVisible:!0},r.a.createElement("div",{className:"browseSettingsContainer ".concat(m&&"showAdvancedSearch")},r.a.createElement("div",{className:"searchWrapper"},r.a.createElement("div",{className:"searchInput"},r.a.createElement(Xt.a.Search,{className:"searchBar",placeholder:"Search",value:f,onChange:this.onSetSearchText})),r.a.createElement(ta.a,{onClick:function(){return e.setState((function(e){return{showAdvancedSearch:!e.showAdvancedSearch}}))},className:m?"active":null},r.a.createElement(la.a,{icon:Ua.i,style:{paddingRight:"4px"}}),"Filters"),this.showClearFilters()&&r.a.createElement(ta.a,{onClick:function(){return e.clearAdvancedFilters()},style:{marginLeft:"10px"}},"Clear")),r.a.createElement("div",{className:"genreWrapper"},r.a.createElement("div",{className:"browseSelectionsContainer"},r.a.createElement(Dn,{items:Object.keys(h).map((function(t){return r.a.createElement("span",{key:t,className:"mobileGenreItem",onClick:e.onSelectGenre(t),style:{backgroundColor:h[t]?"rgba(95, 95, 95, 0.2)":"transparent"}},t)}))}))),r.a.createElement(On.SlideDown,{style:{width:"100%"}},m?r.a.createElement(Nn,{browseMoods:s,currentSelectedTempo:d,browseEraRange:p,onSelectTempo:this.onSelectTempo,onDeselectTempo:this.onDeselectTempo,onSelectEra:this.onSelectEra,onSelectMood:this.onSelectMood}):null)),g?r.a.createElement("div",{className:"advanced-station-wrapper"},r.a.createElement("div",{className:"playlistsContainer"},b?b.map((function(t,a){return r.a.createElement("div",{className:"playlistContainer",key:Object(z.get)(t,"_id",a)},r.a.createElement(Mn,Object.assign({showPlaylistModal:e.showPlaylistModal,assignStation:e.props.actions.assignStation,company:S,browse:!0,history:e.props.history},t)))})):null),r.a.createElement(ta.a,{className:"load-more",onClick:function(){return e.loadMoreStations()}},"Load More")):null,g?null:r.a.createElement("div",null,j&&Object.keys(w).map((function(t,n){return r.a.createElement(xn,{showPlaylistModal:e.showPlaylistModal,company:S,key:t,id:t,rowIndex:n,title:t,type:t,data:w[t],source:"discover",isApple:a,showViewAll:!0})})),!a&&Object.keys(y).map((function(t,a){if(y[t].length>0)return r.a.createElement(xn,{showPlaylistModal:e.showPlaylistModal,company:S,key:t,id:t,rowIndex:j?null:a,title:t,type:t,data:y[t],source:"discover",showViewAll:!0})})),!a&&Object.keys(E).map((function(t){if(E[t].length>0)return r.a.createElement(xn,{showPlaylistModal:e.showPlaylistModal,company:S,key:t,id:t,title:t,type:t,data:E[t],source:"discover",showViewAll:!0})}))))),r.a.createElement("div",{className:"pageFooter"})))}}]),a}(n.Component));var Vn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,isApple:e.auth.isApple,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({addPlayerListeners:$e,removePlayerListeners:rt,getDiscoverPulicStations:yt,assignStation:Ot},e)}}))(Object(be.f)(Un)),qn=a(410),Hn=a(131),Wn=a(411),zn=a(274),Gn=a(98),Kn=a.n(Gn),Yn=(a(890),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={hovered:!1},n}return Object(le.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.simple,o=Object(z.get)(a,"_id",a),s=Object(z.get)(a,"name",""),i=Object(z.get)(a,"bpm.mean",100).toFixed(0),c=Object(z.get)(a,"genres",[]),l=Z(i);return r.a.createElement("div",{className:"schedule-playlist draggable-events",title:s,data:o,onMouseEnter:function(){return e.setState({hovered:!0})},onMouseLeave:function(){return e.setState({hovered:!1})}},r.a.createElement("div",{className:"flexRow station-content noselect"},r.a.createElement("div",{className:"name"}," ",s," "),r.a.createElement("div",{className:"bpm-wrapper"},r.a.createElement(la.a,{icon:Object(z.get)(l,"icon",""),style:{fontSize:24}}))),r.a.createElement(Tn,{genres:c,roundBottom:!0,simple:n}))}}]),a}(n.Component)),Jn=(a(891),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={expanded:!1},n}return Object(le.a)(a,[{key:"toggleExpand",value:function(){this.setState({expanded:!this.state.expanded})}},{key:"render",value:function(){var e=this,t=this.props,a=t.label,n=t.data,o=this.state.expanded,s=Object(ft.a)(n);return o||(s=s.slice(0,5)),r.a.createElement("div",{className:"music-section-wrapper"},r.a.createElement("div",{className:"music-section-header"}," ",a," "),s.map((function(e){return r.a.createElement(Yn,{data:e,key:Object(z.get)(e,"_id",e),simple:!0})})),n.length>5&&r.a.createElement("div",{className:"view-more",onClick:function(){return e.toggleExpand()}},o?"View Less":"View More"))}}]),a}(n.Component)),Zn=(a(892),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleUpdate=function(e){var t=Object(u.a)({},e),a=Object(z.get)(t,"target.value","");n.setState({text:a.length>0&&a.length<40?a:a.substring(0,40)})},n.toggleInput=function(){try{n.setState({activeInput:!n.state.activeInput},(function(){n.inputRef.current.focus()}))}catch(e){console.log("caught: ",e)}},n.state={text:"",activeInput:!1},n.inputRef=r.a.createRef(),n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;try{document.addEventListener("mousedown",(function(t){return e.handleClickOutside(t)})),document.addEventListener("keypress",(function(t){return e.handleKeyDown(t)}))}catch(t){console.log("caught didMount toggleInput err: ",t)}}},{key:"componentDidUpdate",value:function(e,t){Object(z.isEqual)(Object(z.get)(this.props,"text",""),Object(z.get)(e,"text",""))||(console.log("props: ",this.props),this.setState({text:Object(z.get)(this.props,"text","")})),Object(z.get)(this.state,"activeInput",!1)||Object(z.isEqual)(Object(z.get)(this.state,"activeInput",!1),Object(z.get)(t,"activeInput",!1))||(console.log("onUpdate: ",this.state),this.props.onUpdate(this.state.text))}},{key:"componentWillUnmount",value:function(){try{document.removeEventListener("mousedown",this.handleClickOutside),document.removeEventListener("keypress",this.handleKeyDown)}catch(e){console.log("caught willUnmount toggleInput err: ",e)}}},{key:"handleKeyDown",value:function(e){"enter"===Object(z.get)(e,"key","").toLowerCase()&&this.setState({activeInput:!1})}},{key:"handleClickOutside",value:function(e){var t=Object(z.get)(this,"inputRef.current","");t&&!t.contains(e.target)&&this.setState({activeInput:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.activeInput,n=t.text;return r.a.createElement("div",{className:"toggle-input noselect"},!a&&r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:"scheduleName",onClick:function(){return e.toggleInput()}},n),r.a.createElement(la.a,{icon:sn.f,className:"icon inputIcon",onClick:function(){return e.toggleInput()}})),a&&r.a.createElement("input",{ref:this.inputRef,onChange:function(t){return e.handleUpdate(t)},className:"scheduleNameInput",placeholder:n}))}}]),a}(n.Component)),Qn=(a(893),Ba.a.confirm),$n=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).renderHeader=function(e){switch(e.getDay()){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";default:return"Sunday"}},n.validateEvent=function(e){e.event.start.getDate()!==e.event.end.getDate()&&(e.event.start.getDate()+1===e.event.end.getDate()&&0===e.event.end.getHours()&&0===e.event.end.getMinutes()?console.log("Same day allowed"):e.revert())},n.saveScheduleChanges=function(){var e=n.state,t=e.stationName,a=e.stationId;e.isSaving;try{n.setState({isSaving:!0},(function(){var e=n.calendarComponentRef.current.getApi().getEvents(),r=Object(z.get)(n.props,"user.company._id",null),o=[];e.forEach((function(e){o.push({start:Kn()(e.start).format(),end:Kn()(e.end).format(),day:Kn()(e.start).format(),title:e.title,stationId:null!==e.id&&""!==e.id?e.id:e.extendedProps.stationId})})),n.props.actions.saveSchedule({companyId:r,scheduleId:a,name:t,stations:o}).then((function(){n.setState({isSaving:!1},(function(){fa({category:g,action:j,label:M}),n.props.history.push("/schedules")}))}))}))}catch(r){fa({category:g,value:r,label:P}),n.setState({isSaving:!1}),console.log("caught: ",r)}},n.closeSchedule=function(){fa({category:g,action:w,label:M}),n.props.history.push("/schedules")},n.backToDashboard=function(){fa({category:g,action:N,label:M}),n.props.history.push("/nowPlaying")},n.state={isLoading:!0,isMobile:Y(),stations:[],stationName:"",mySchedule:{},stationId:n.props.match.params.id,playlists:[],showMusicPlayer:!1,isSaving:!1},n.calendarComponentRef=r.a.createRef(),n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){var t,a,n,r,o,s,i,c,l,u=this;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ba(),t=this.state.stationId,e.next=4,this.props.actions.getSchedule(t);case 4:return a=e.sent,e.next=7,this.props.actions.getDiscoverPulicStations(t);case 7:n=e.sent,a.success&&(r=Object(z.get)(a,"data[0]",null),o=Object(z.get)(a,"data[0].name",null),s=Object(z.get)(a,"data[0].stations",null),this.setState({mySchedule:r,stationName:o,stations:s})),i=Object(z.get)(n,"playlistList",[]),c=i.reduce((function(e,t){return Object.keys(t.genres).forEach((function(t){e[t]=!1})),e}),{}),l=i.reduce((function(e,t){return Object.keys(t.moods).forEach((function(t){e[t]=!1})),e}),{}),this.setState({isLoading:!1,playlists:i,browseGenres:c,browseMoods:l,showMusicPlayer:Object(z.get)(this.props,"player.showPlayer",!1)},(function(){try{u.accessFullCalendarAPI(),window.addEventListener("resize",u.accessFullCalendarAPI.bind(u));var e=document.getElementById("external-events");new zn.a(e,{itemSelector:".draggable-events",eventData:function(e){return{title:e.getAttribute("title"),id:e.getAttribute("data")}}})}catch(t){console.log("caught err: ",t)}})),this.state.isMobile&&fa({category:g,action:C});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this;Object(z.isEqual)(Object(z.get)(this.props,"player.showPlayer",null),Object(z.get)(e,"player.showPlayer",null))||this.setState({showMusicPlayer:Object(z.get)(this.props,"player.showPlayer",!1)},(function(){t.accessFullCalendarAPI()}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",this.accessFullCalendarAPI)}catch(e){console.log("caught: ",e)}}},{key:"accessFullCalendarAPI",value:function(){try{this.setState({isMobile:Y()});var e=document.getElementById("external-events")||null;e&&(e=e.getBoundingClientRect().height);var t=this.calendarComponentRef.current.getApi();t.setOption("height",e),t.setOption("eventColor","#2F2F2F")}catch(a){console.log("caught: ",a)}}},{key:"showErrorMessage",value:function(){var e=this;return r.a.createElement("div",{className:"error-div"},r.a.createElement("div",{className:"title"},"Mobile Not Supported"),r.a.createElement("div",{className:"subtitle"},"Please view this page on desktop."),r.a.createElement("div",{className:"phone"},r.a.createElement(la.a,{icon:Ra.a,className:"mobile-icon"}),r.a.createElement(la.a,{icon:Ra.d,className:"frown-icon"})),r.a.createElement(ta.a,{className:"optionButton",onClick:function(){return e.backToDashboard()}},"Back to Dashboard"))}},{key:"eventClick",value:function(e){Qn({title:"Delete this station?",content:Object(z.get)(e,"event.title","")+": "+Kn()(Object(z.get)(e,"event.start","")).format("ddd")+" "+Kn()(Object(z.get)(e,"event.start","")).format("LT")+" - "+Kn()(Object(z.get)(e,"event.end","")).format("ddd")+" "+Kn()(Object(z.get)(e,"event.end","")).format("LT"),onOk:function(){e.event.remove()},onCancel:function(){console.log("Cancel")}})}},{key:"stationNameUpdate",value:function(e){this.setState({stationName:e})}},{key:"render",value:function(){var e,t=this,a=this.props.history,n=this.state,o=n.isLoading,s=n.playlists,i=n.stations,c=n.showMusicPlayer,l=n.isMobile,m=n.stationName,d=n.isSaving,p={},g={},h=Object(z.get)(this.props,"myLocation.favorites",[]),f=Object(En.a)(B.global);try{for(f.s();!(e=f.n()).done;){var b=e.value;p[b]=[]}}catch(L){f.e(L)}finally{f.f()}var v,y=B.defaultIndividual,E=Object(En.a)(y);try{for(E.s();!(v=E.n()).done;){b=v.value;g[b]=[]}}catch(L){E.e(L)}finally{E.f()}if(!o){var O,S=Object(En.a)(s);try{for(S.s();!(O=S.n()).done;){var k,j=O.value,w=Object(En.a)(Object(z.get)(j,"supersets",[]));try{for(w.s();!(k=w.n()).done;){var N=k.value;N in p&&p[N].push(j),N in g&&g[N].push(j)}}catch(L){w.e(L)}finally{w.f()}}}catch(L){S.e(L)}finally{S.f()}}var C=Object.keys(g),I=Object.keys(p);return r.a.createElement("div",{className:"schedulePageWrapper"},r.a.createElement(Ut.a,{indicator:qt,spinning:o},l?this.showErrorMessage():r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"topRowWrapper"},r.a.createElement("div",{className:"topRowLeft"},r.a.createElement("div",{className:"scheduleNameWrapper"},r.a.createElement(Zn,{text:m,onUpdate:function(e){return t.stationNameUpdate(e)}})),r.a.createElement("div",{className:"description"}," Drag and Drop Your Stations to Schedule When They Play ")),r.a.createElement("div",{className:"scheduleButtonGroup"},r.a.createElement(ta.a,{className:"optionButton",loading:d,type:"primary",onClick:d?null:function(){return t.saveScheduleChanges()}},"Save & Close"),r.a.createElement(ta.a,{className:"optionButton",onClick:function(){return t.closeSchedule()}},"Close"))),r.a.createElement("div",{className:"bottomRowWrapper",style:{maxHeight:c?"72vh !important":null}},r.a.createElement("div",{id:"external-events",className:"selectionWrapper"},r.a.createElement(Jn,{label:"Favorites",data:h}),I.map((function(e){return r.a.createElement(Jn,{key:e,label:e,data:p[e]})})),C.map((function(e){return r.a.createElement(Jn,{key:e,label:e,data:g[e]})})),r.a.createElement(Jn,{label:"General",data:s}),r.a.createElement("div",{className:"musicSectionWrapper"},r.a.createElement("div",{className:"musicSectionHeader"}," Browse More Soundtracks "),r.a.createElement("div",{className:"musicSectionFooter",onClick:function(){return a.push("/discover")}},"Discover Music",r.a.createElement(la.a,{icon:sn.e,className:"discoverIcon"})))),r.a.createElement("div",{className:"calendarWrapper"},r.a.createElement("div",{className:"app-calendar noselect",id:"mycalendartest"},r.a.createElement(qn.a,{defaultView:"timeGridWeek",header:!1,defaultDate:"2020-01-10T00:00:00.000Z",allDayDefault:!1,eventDurationEditable:!0,editable:!0,events:i,droppable:!0,plugins:[Hn.d,Wn.a,zn.b],ref:this.calendarComponentRef,eventDrop:this.validateEvent,eventReceive:function(e){console.log("data: ",Object(u.a)({},e))},slotDuration:"00:30",eventClick:function(e){return t.eventClick(e)},startRecur:Date.now(),allDaySlot:!1,eventOverlap:!1,columnHeaderText:this.renderHeader,eventResize:this.validateEvent,forceEventDuration:!0})))))))}}]),a}(n.Component);var Xn=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists,schedules:e.schedules,player:e.player}}),(function(e){return{actions:Object(i.b)({getDiscoverPulicStations:yt,saveSchedule:Nt,getSchedule:jt},e)}}))(Object(be.f)($n)),er=(a(894),Ba.a.confirm),tr=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).assignSchedule=function(e){e.stopPropagation(),n.setState({isLoading:!0},(function(){var e=Object(z.get)(n.props,"data.company._id",null),t=Object(z.get)(n.props,"data._id",null);n.props.actions.assignSchedule({companyId:e,scheduleId:t}).then((function(e){e?(n.setState({isLoading:!1}),n.props.history.push("/nowPlaying",{isBack:!0})):n.props.actions.setSnackbarMessage({message:"Error while assigning station",type:"error"})}))}))},n.deleteSchedule=function(e){var t=e.e,a=e.data,r=e.props,o=e.callback;t.stopPropagation(),n.setState({isLoading:!0},(function(){er({title:"Delete Schedule?",content:Object(z.get)(a,"name",""),onOk:function(){var e=Object(z.get)(r,"data.company._id",null),t=Object(z.get)(r,"data._id",null);r.actions.deleteSchedule({companyId:e,scheduleId:t}).then((function(e){e||(o(),r.actions.setSnackbarMessage({message:"Error while deleting station",type:"error"}))}))},onCancel:function(){o()}})}))},n.state={hidden:!0,isLoading:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.wait,a=setTimeout((function(){e.setState({hidden:!1}),clearTimeout(a)}),t)}},{key:"stopLoading",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.onClick,o=this.state,s=o.hidden,i=o.isLoading,c=Object(z.get)(a,"stations",[]).length>0;return r.a.createElement(r.a.Fragment,null,!s&&r.a.createElement(_n.Animated,{animationIn:"fadeIn",isVisible:!0},r.a.createElement(Ut.a,{indicator:qt,spinning:i},r.a.createElement("div",{key:a._id,className:"scheduleBlock",style:{backgroundColor:"#eee"},onClick:function(){return n(a._id)}},r.a.createElement("div",{className:"schedule-icon-row"}),r.a.createElement("div",{className:"schedule-text-wrapper",style:{flex:1}},r.a.createElement("div",{className:"schedule-text"},Object(z.get)(a,"name",""))),r.a.createElement("div",{className:"schedule-icon-row"},c&&r.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.assignSchedule(t)}},r.a.createElement(la.a,{icon:Ua.q,className:"icon"})),r.a.createElement("div",{className:"schedule-icon",onClick:function(t){return e.deleteSchedule({e:t,data:a,props:e.props,callback:function(){return e.stopLoading()}})}},r.a.createElement(la.a,{icon:Ua.w,className:"icon"})))))))}}]),a}(n.Component);var ar=Object(de.b)((function(e){return{user:e.auth.user,stations:e.stations.data}}),(function(e){return{actions:Object(i.b)({assignSchedule:It,deleteSchedule:Lt,setSnackbarMessage:Rt},e)}}))(Object(be.f)(tr)),nr=(a(895),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).getAllLocations=function(){var e=Object(z.get)(n.props,"user.company._id","");n.props.actions.getMyPlaylists({companyId:e}).then((function(e){e&&n.setState({isLoading:!1})}))},n.state={isLoading:!0,creatingSchedule:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){ba(),this.getAllLocations()}},{key:"componentDidUpdate",value:function(e){Object(z.isEqual)(Object(z.get)(this.props,"myLocation.token",null),Object(z.get)(e,"myLocation.token",null))||(console.log("update props: ",this.props),this.getAllLocations())}},{key:"createNewSchedule",value:function(){var e=this;this.setState({creatingSchedule:!0},(function(){var t=Object(z.get)(e.props,"user.company._id","");e.props.actions.createSchedule(t).then((function(t){fa({category:g,action:k});var a=Object(z.get)(t,"data._id",null);e.props.history.push("/createSchedule/".concat(a))}))}))}},{key:"editSchedule",value:function(e){fa({category:g,action:k,value:e}),this.props.history.push("/createSchedule/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props.playlists,a=this.state,n=a.isLoading,o=a.creatingSchedule;return r.a.createElement("div",{className:"scheduleWrapper"},r.a.createElement(cn,{title:r.a.createElement("span",null,"Your ",r.a.createElement("span",{style:{color:"#D04283"}},"Schedules")),subtitle:"Schedule out your stations for the whole week!"}),r.a.createElement(Ut.a,{indicator:qt,spinning:n},r.a.createElement("div",{className:"scheduleBlockWrapper noselect"},r.a.createElement("div",{className:"newSchedule",onClick:function(){return o?null:e.createNewSchedule()}},r.a.createElement("div",{className:"plusCircle"},r.a.createElement(la.a,{icon:sn.g,className:"icon"})),r.a.createElement("div",{className:"newScheduleText"},"Create Schedule")),Object(z.get)(t,"schedules",[]).map((function(t,a){return r.a.createElement(ar,{key:Object(z.get)(t,"_id",t),wait:300*a,data:t,onClick:function(t){return e.editSchedule(t)}})})))))}}]),a}(n.Component));var rr=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,stations:e.stations,playlistList:e.stations.playlistList,genreList:e.stations.genreList,eraList:e.stations.eraList,moodList:e.stations.moodList,playlists:e.playlists}}),(function(e){return{actions:Object(i.b)({getMyPlaylists:Ct,editSchedule:wt,createSchedule:kt},e)}}))(Object(be.f)(nr)),or=(a(896),Ba.a.confirm),sr=sa.a.Option,ir=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={messageData:n.props.message},n}return Object(le.a)(a,[{key:"updateMessageFrequency",value:function(e){var t=this,a=e.e,n=e.messageData,r=e.user;this.setState({messageData:Object(u.a)(Object(u.a)({},n),{},{frequency:a})},(function(){t.props.actions.updateFrequency({companyId:Object(z.get)(r,"company._id"),locationId:Object(z.get)(t.props,"myLocation._id",""),id:Object(z.get)(n,"_id",""),frequency:a}).then((function(e){e&&t.props.actions.getMessages({companyId:Object(z.get)(t.props,"user.company._id"),locationId:Object(z.get)(t.props,"myLocation._id","")})}))}))}},{key:"editMessage",value:function(e){e.user;var t=e.messageData;e.props.history.push("/createInStoreMessaging",Object(u.a)(Object(u.a)({},t),{},{locationId:Object(z.get)(this.props,"myLocation._id","")}))}},{key:"delete",value:function(e){var t=e.user,a=e.messageData,n=e.props;or({title:"Delete Message?",content:Object(z.get)(a,"title","")+": "+Object(z.get)(a,"message",""),onOk:function(){n.actions.deleteMessage({companyId:Object(z.get)(t,"company._id"),locationId:Object(z.get)(n,"myLocation._id",""),id:Object(z.get)(a,"_id","")}).then((function(e){e&&n.actions.getMessages({companyId:Object(z.get)(n,"user.company._id"),locationId:Object(z.get)(n,"myLocation._id","")})}))},onCancel:function(){console.log("Cancel")}})}},{key:"render",value:function(){var e=this,t=this.props,a=t.message,n=t.user,o=t.setPreviewUrl,s=t.myLocation,i=this.state.messageData;return r.a.createElement("div",{className:"messageCard"},r.a.createElement("div",{className:"messageCardheader"},r.a.createElement(la.a,{icon:Ua.y,className:"messageCardPreview",style:{marginRight:"10px"},onClick:function(){return o(Object(z.get)(i,"url",""))}}),r.a.createElement("div",{className:"messageTitle"}," ",Object(z.get)(i,"title","")," "),r.a.createElement(la.a,{icon:Ua.h,className:"icon",style:{marginLeft:"10px"},onClick:function(){return e.editMessage({user:n,messageData:i,props:e.props})}}),r.a.createElement(la.a,{icon:Ra.f,className:"icon",style:{marginLeft:"10px"},onClick:function(){return e.delete({user:n,messageData:i,props:e.props})}})),r.a.createElement(sa.a,{defaultValue:Object(z.get)(a,"frequency['"+Object(z.get)(s,"_id","")+"']",""),onChange:function(t){e.updateMessageFrequency({e:t,messageData:i,user:n})}},D.map((function(e,t){return r.a.createElement(sr,{key:Object(z.get)(e,"time",t),value:Object(z.get)(e,"time","60")},Object(z.get)(e,"title","Error"))}))))}}]),a}(n.Component);var cr=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(i.b)({deleteMessage:xt,updateFrequency:Dt,getMessages:Tt},e)}}))(Object(be.f)(ir)),lr=a(127),ur=a.n(lr),mr=(a(898),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isPlaying:!1,previewTrackUrl:null,isLoading:!0},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getMessages({companyId:Object(z.get)(this.props,"user.company._id"),locationId:Object(z.get)(this.props,"myLocation._id","")}).then((function(t){t&&e.setState({isLoading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this;Object(z.isEqual)(Object(z.get)(this.props,"myLocation.token",null),Object(z.get)(e,"myLocation.token",null))||this.props.actions.getMessages({companyId:Object(z.get)(this.props,"user.company._id"),locationId:Object(z.get)(this.props,"myLocation._id","")}).then((function(){t.setState({isLoading:!1})}))}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){this.setState({previewTrackUrl:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.inStoreMessaging,o=t.myLocation,s=this.state,i=s.previewTrackUrl,c=s.isLoading,l=Object(z.get)(n,"messages",[]).filter((function(e){return parseInt(Object(z.get)(e,"frequency['"+Object(z.get)(o,"_id","")+"']",""))>0})),u=Object(z.get)(n,"messages",[]).filter((function(e){return 0===parseInt(Object(z.get)(e,"frequency['"+Object(z.get)(o,"_id","")+"']",""))}));return r.a.createElement("div",{className:"messageWrapper"},r.a.createElement(cn,{title:r.a.createElement("span",null,"In-Store ",r.a.createElement("span",{style:{color:"#D04283"}}," Messages ")),subtitle:"Custom announcements to help drive customer action"}),r.a.createElement("div",{className:"centerMessages"},r.a.createElement("div",{className:"viewMessagesContainer"},r.a.createElement("div",null,r.a.createElement("div",{style:{display:"none"}},r.a.createElement(ur.a,{ref:function(t){e.rap=t},src:i,autoPlay:!1,controls:!1,muted:!1,volume:1,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})},onError:function(){return e.setState({isPlaying:!1,previewTrackUrl:null})}})),r.a.createElement(Ut.a,{indicator:qt,spinning:c},l.length>0||u.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement(ta.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",style:{width:"100%",margin:"10px 0px",backgroundColor:"#e3e3e3"}},r.a.createElement(la.a,{icon:Ua.r,className:"connect-icon",style:{marginRight:"10px"}}),"Create New Message"),l.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"heading heading-medium"},"Active Messages "),l.map((function(t,n){return r.a.createElement(cr,{key:Object(z.get)(t,"_id",n),message:t,companyId:Object(z.get)(a,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)}})}))),u.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"heading heading-medium"},"Inactive Messages "),u.map((function(t,n){return r.a.createElement(cr,{key:Object(z.get)(t,"_id",n),message:t,companyId:Object(z.get)(a,"company._id",null),setPreviewUrl:function(t){return e.setPreviewUrl(t)}})})))):r.a.createElement(ta.a,{onClick:function(){return e.props.history.push("/createInStoreMessaging")},size:"large",style:{width:"100%",margin:"10px 0px",backgroundColor:"#e3e3e3"}},r.a.createElement(la.a,{icon:Ua.r,className:"connect-icon",style:{marginRight:"10px"}}),"Create Your First Message"))))))}}]),a}(n.Component));var dr=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inStoreMessaging:e.inStoreMessaging}}),(function(e){return{actions:Object(i.b)({getMessages:Tt},e)}}))(Object(be.f)(mr)),pr=a(150),gr=a(922),hr=(a(899),Object(be.f)((function(e){var t=e.match,a=Object(n.useState)({user:!1,business:!1,payment:!1,security:!1}),o=Object(pr.a)(a,2),s=o[0],i=o[1];return r.a.createElement("div",{className:"setting-panel"},r.a.createElement("div",{className:"menu-row"},r.a.createElement(fe.b,{to:"/settings/user",className:"menu-item ".concat("user"===t.params.setting?"active":null),onMouseEnter:function(){i({user:!0})},onMouseLeave:function(){i({user:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(la.a,{icon:Ua.x})),r.a.createElement("div",{className:"option-text"},"Edit User"),("user"===t.params.setting||s.user)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(la.a,{icon:F.a})))),r.a.createElement(gr.a,null),r.a.createElement("div",{className:"menu-row"},r.a.createElement(fe.b,{to:"/settings/business",className:"menu-item ".concat("business"===t.params.setting?"active":null),onMouseEnter:function(){i({business:!0})},onMouseLeave:function(){i({business:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(la.a,{icon:Ua.v})),r.a.createElement("div",{className:"option-text"},"Edit Business"),("business"===t.params.setting||s.business)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(la.a,{icon:F.a})))),r.a.createElement(gr.a,null),r.a.createElement("div",{className:"menu-row"},r.a.createElement(fe.b,{to:"/settings/payment",className:"menu-item ".concat("payment"===t.params.setting?"active":null),onMouseEnter:function(){i({payment:!0})},onMouseLeave:function(){i({payment:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(la.a,{icon:Ua.g})),r.a.createElement("div",{className:"option-text"},"Payment"),("payment"===t.params.setting||s.payment)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(la.a,{icon:F.a})))),r.a.createElement(gr.a,null),r.a.createElement("div",{className:"menu-row"},r.a.createElement(fe.b,{to:"/settings/security",className:"menu-item ".concat("security"===t.params.setting?"active":null),onMouseOver:function(){i({security:!0})},onMouseOut:function(){i({security:!1})}},r.a.createElement("div",{className:"menu-icon"},r.a.createElement(la.a,{icon:Ua.m})),r.a.createElement("div",{className:"option-text"},"Password & Security"),("security"===t.params.setting||s.security)&&r.a.createElement("div",{className:"hover-arrow"},r.a.createElement(la.a,{icon:F.a})))))}))),fr=a(923),br=(a(900),function(e){var t=e.placeholder,a=void 0===t?null:t,n=e.type,o=void 0===n?"text":n,s=e.label,i=void 0===s?"default label":s,c=e.name,l=e.onChange;return r.a.createElement("div",{className:"inputContainer"},r.a.createElement("div",{className:"inputLabel"},i),r.a.createElement("div",{className:"inputWrapper"},r.a.createElement("input",{placeholder:a,type:o,name:c,className:"inputBox",onChange:l})))}),vr=a(73);function yr(e){return function(){var t=Object(he.a)(ge.a.mark((function t(a){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){Oe("post","/auth/subscription/",e).then((function(e){console.log(e.data),a(pt()),t(e.data)})).catch((function(e){console.log(e),St.a.error(Object(z.get)(e,"response.message","Could not add the subscription")),t(!1)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}a(901);var Er=function(e){var t=e.toggle,a=Object(de.d)((function(e){return e.auth})),o=Object(de.c)(),s=a.user,i=a.location,c=Object(vr.useStripe)(),l=Object(vr.useElements)(),m=Object(n.useState)(!1),d=Object(pr.a)(m,2),p=d[0],g=d[1],h=Object(n.useState)({nameOnCard:"",city:"",postal_code:"",line1:""}),f=Object(pr.a)(h,2),b=f[0],v=f[1],y=function(e){var t=e.target,a=t.name,n=t.value;v(Object(u.a)(Object(u.a)({},b),{},Object(yn.a)({},a,n)))},E=function(){var e=Object(he.a)(ge.a.mark((function e(t){var a,n,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,c.createPaymentMethod({type:"card",card:l.getElement(vr.CardNumberElement,vr.CardExpiryElement,vr.CardCvcElement),billing_details:{email:s.email,name:b.nameOnCard,phone:s.company.phoneNumber,address:{city:b.city,postal_code:b.postal_code,line1:b.line1}}});case 3:if(a=e.sent,n=a.error,r=a.paymentMethod,!n){e.next=12;break}console.log(n),fr.a.error({message:"Information Incomplete",description:n.message,placement:"bottomLeft"}),g(!1),e.next=16;break;case 12:return e.next=14,o(yr({payment_method:r.id,email:s.email,location:i}));case 14:!0!==e.sent.success&&(g(!1),fr.a.error({message:"Payment Error",description:"Something went wrong with your payment",placement:"bottomLeft"}));case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O={style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"transparent"}}}};return r.a.createElement(r.a.Fragment,null,t?r.a.createElement("div",{className:"bottom-section"},r.a.createElement("div",{className:"payment-method"},r.a.createElement("form",{onSubmit:E},r.a.createElement("div",{className:"card-details"},r.a.createElement("div",{className:"cardElementContainer"},r.a.createElement("div",{className:"cardLabel"},"Card Number"),r.a.createElement(vr.CardNumberElement,{options:{showIcon:!1,iconStyle:"solid",style:{base:{fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px",position:"relative","::placeholder":{color:"transparent"}}}}})),r.a.createElement("div",{className:"cardCvcAndExpElementOptions"},r.a.createElement("div",{className:"cardLabel"},"Expiration"),r.a.createElement(vr.CardExpiryElement,{options:O})),r.a.createElement("div",{className:"cardCvcAndExpElementOptions"},r.a.createElement("div",{className:"cardLabel"},"CVC"),r.a.createElement(vr.CardCvcElement,{options:O}))),r.a.createElement("div",{className:"billing-details"},r.a.createElement(br,{type:"text",name:"nameOnCard",label:"Name on Card",onChange:y}),r.a.createElement(br,{type:"text",name:"line1",label:"Street Address",onChange:y})),r.a.createElement("div",{className:"location-details"},r.a.createElement(br,{type:"text",name:"city",label:"City",onChange:y}),r.a.createElement(br,{type:"number",name:"postal_code",label:"Zip Code",onChange:y})),r.a.createElement(ta.a,{type:"primary",size:"large",htmlType:"submit",className:"activate-button",disabled:!c,loading:p,onClick:function(){return g(!0)}},"Activate")))):null)},Or=a(930),Sr=a(928),kr=a(412),jr=a.n(kr),wr=a(413),Nr=a.n(wr),Cr=a(414),Ir=a.n(Cr),Lr=a(415),Tr=a.n(Lr),Mr=(a(902),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){var e;Object(ce.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={cardDetails:null,otherResposeDetails:null,subscriptionData:null,expDate:null,enterLoading:!1,visible:!1,formButton:!1,reason:null},e.fetchCardDetails=Object(he.a)(ge.a.mark((function t(){var a,n,r,o,s,i;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.fetchCardDetails,t.next=3,n({stripeCustomer:null===(a=e.props.user)||void 0===a?void 0:a.stripeCustomer});case 3:!0===(r=t.sent).success?(s=new Date(1e3*(null===(o=r.data.customer.subscriptions.data[0])||void 0===o?void 0:o.current_period_end)),i=s.toDateString(),e.setState({cardDetails:r.data[0].card,otherResposeDetails:r.data,subscriptionData:r.data.customer.subscriptions.data[0],expDate:i})):fr.a.error({message:"Fetching card details failed!",description:"fetching card details from server failed",placement:"bottomLeft"});case 5:case"end":return t.stop()}}),t)}))),e.handleSubmit=function(){var t=Object(he.a)(ge.a.mark((function t(a){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.setState({visible:!0});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchCardDetails();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderSwitch",value:function(e){switch(e){case"visa":return Nr.a;case"amex":return Ir.a;case"mastercard":return Tr.a;default:return jr.a}}},{key:"render",value:function(){var e=this,t=this.state,a=t.cardDetails,n=t.expDate,o=t.enterLoading;return this.props.toggle?r.a.createElement("div",{className:"cancelView active"},r.a.createElement("h3",{style:{color:"white",fontWeight:"bolder"}},"Payment")," ",r.a.createElement("br",null),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"text-content"},r.a.createElement("p",null,"Your Premium plan will renew on ",n,"."),r.a.createElement("p",null,"You will be charged $15.99")),r.a.createElement("div",{className:"cardDetails"},r.a.createElement("div",{className:"cardLogo"},r.a.createElement("img",{src:this.renderSwitch(null===a||void 0===a?void 0:a.brand.toLowerCase()),alt:"...",height:"50",width:"50"})),r.a.createElement("div",{className:"cardInfo"},r.a.createElement("p",null,null===a||void 0===a?void 0:a.brand.toUpperCase()," **** ",null===a||void 0===a?void 0:a.last4),r.a.createElement("p",null,"Expires: ",null===a||void 0===a?void 0:a.exp_month,"/",null===a||void 0===a?void 0:a.exp_year)))):r.a.createElement(Or.a,{active:!0}),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(ta.a,{type:"secondary",style:{float:"right"},htmlType:"submit",loading:o,onClick:function(){return e.setState({enterLoading:!0})}},"Cancel this Subscription")),r.a.createElement(Ba.a,{title:"Are you sure ?",visible:this.state.visible,centered:!0,onOk:Object(he.a)(ge.a.mark((function t(){var a,n,r;return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.state.reason){t.next=10;break}return e.setState({enterLoading:!1,formButton:!0}),a=e.props,n=a.location,r=a.cancelSubscription,t.next=5,r({subId:n.subscription.stripeSubscription,location:n,reason:e.state.reason});case 5:!0!==t.sent.success&&(fr.a.error({message:"Something went wrong",description:"Something went wrong when cancelling the payment",placement:"bottomLeft"}),e.setState({formButton:!1})),console.log(e.state.reason),t.next=11;break;case 10:fr.a.error({message:"Please Select a reason",description:"Please Select a reason before cancelling the subscription",placement:"bottomLeft"});case 11:case"end":return t.stop()}}),t)}))),onCancel:function(){e.setState({enterLoading:!1,visible:!1})},okButtonProps:{loading:this.state.formButton},okText:"Yes, Cancel Subscription"},r.a.createElement(Kt.a,{className:"modalForm"},r.a.createElement(Kt.a.Item,{label:"Just so we know, why did you cancel?"},r.a.createElement(Sr.a.Group,{onChange:function(t){e.setState({reason:t.target.value})},className:"radioGroup"},r.a.createElement(Sr.a,{className:"radioBtn",value:"Too expensive"},"Too expensive"),r.a.createElement(Sr.a,{className:"radioBtn",value:"Not enough product offering"},"Not enough product offering"),r.a.createElement(Sr.a,{className:"radioBtn",value:"I don't mind ads"},"I don't mind ads"),r.a.createElement(Sr.a,{className:"radioBtn",value:"Still planning on using Ambii, but the free tier"},"Still planning on using Ambii, but the free tier")))))):null}}]),a}(r.a.Component)),Pr=Object(de.b)((function(e){return{user:e.auth.user,location:e.auth.location}}),(function(e){return{cancelSubscription:function(t){return e(function(e){return function(){var t=Object(he.a)(ge.a.mark((function t(a){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){Oe("post","/auth/cancelSubscription",e).then((function(e){console.log(e.data),a(Ie(e.data.data.updatedLocation)),t(e.data)})).catch((function(e){console.log(e),St.a.error(Object(z.get)(e,"response.message","Could not cancel the subscription")),n(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))},fetchCardDetails:function(t){return e(function(e){return function(){var t=Object(he.a)(ge.a.mark((function t(a){return ge.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){Oe("post","/auth/fetchCardDetails",e).then((function(e){return t(e.data)})).catch((function(e){console.log(e),St.a.error(Object(z.get)(e,"response.message","Could not fetch the card details")),a(e)}))})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}}}))(Mr),Ar=(a(903),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!0,formToggle:!1},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.actions.getMessages({companyId:Object(z.get)(this.props,"user.company._id"),locationId:Object(z.get)(this.props,"myLocation._id","")}).then((function(t){t&&e.setState({isLoading:!1})}))}},{key:"renderSwitch",value:function(e){var t,a,n,o,s,i,c=this,l=this.props.myLocation;switch(e){case"payment":return r.a.createElement("div",{className:"contentView"},r.a.createElement("div",{className:"top-section"},r.a.createElement("h1",{style:{padding:"0px 20px"}},"Plan"),r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"content ".concat(!0!==(null===l||void 0===l||null===(t=l.subscription)||void 0===t?void 0:t.subscribed)?"active":null)},r.a.createElement("div",{className:"left-section"},r.a.createElement("h1",null,"Free"),!0!==(null===l||void 0===l||null===(a=l.subscription)||void 0===a?void 0:a.subscribed)?r.a.createElement("p",null,"current plan"):r.a.createElement("p",null,"ambii service with ads")),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{style:{fontSize:18}},"$0/mo")))),r.a.createElement("div",{className:"contentWrapper"},r.a.createElement("div",{className:"content ".concat(!0===(null===l||void 0===l||null===(n=l.subscription)||void 0===n?void 0:n.subscribed)?"active":null," ").concat(this.state.formToggle?"removeBorderRadius":null)},r.a.createElement("div",{className:"left-section"},r.a.createElement("h1",null,"Premium"),!0===(null===l||void 0===l||null===(o=l.subscription)||void 0===o?void 0:o.subscribed)?r.a.createElement("p",null,"current plan"):r.a.createElement("p",null,"activate for an ad-free experience")),r.a.createElement("div",{className:"right-section"},r.a.createElement("span",{style:{fontSize:18}},"$15.99/mo"),r.a.createElement(ta.a,{type:!0!==(null===l||void 0===l||null===(s=l.subscription)||void 0===s?void 0:s.subscribed)?"primary":"secondary",onClick:function(){c.setState({formToggle:!c.state.formToggle})}},"Select"))),!0!==(null===l||void 0===l||null===(i=l.subscription)||void 0===i?void 0:i.subscribed)?r.a.createElement(Er,{toggle:this.state.formToggle}):r.a.createElement(Pr,{toggle:this.state.formToggle}))));case"business":return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Business"));case"user":return r.a.createElement("div",{className:"contentView"},r.a.createElement("div",{className:"userDetailsWrapper"},r.a.createElement("h1",{className:"userSettingsHeading"},"User Details"),r.a.createElement("div",{className:"inputsWrapper"},r.a.createElement(br,{label:"First Name"}),r.a.createElement(br,{label:"Last Name"}),r.a.createElement(br,{label:"Email"}),r.a.createElement(br,{label:"Phone no."})),r.a.createElement(ta.a,{type:"primary",size:"large",style:{float:"left",width:"20%"}},"Save")));case"security":return r.a.createElement("h1",null,"Security");default:return r.a.createElement(be.a,{to:"/settings/user"})}}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.match,n=this.state.isLoading;return t?r.a.createElement("div",{className:"settingsWrapper"},r.a.createElement("div",{className:"headerWrapper"},r.a.createElement(cn,{title:r.a.createElement("span",null,"User ",r.a.createElement("span",{style:{color:"#D04283"}}," Settings ")),subtitle:"Change your information here"})),r.a.createElement("div",{className:"settingsView"},r.a.createElement("div",{className:"settingPanel"},r.a.createElement(hr,null)),this.renderSwitch(a.params.setting))):r.a.createElement("div",{className:"settingsWrapper"},r.a.createElement("div",{className:"headerWrapper"},r.a.createElement(cn,{title:r.a.createElement("span",null,"User ",r.a.createElement("span",{style:{color:"#D04283"}}," Settings ")),subtitle:"Change your information here"})),r.a.createElement(Ut.a,{indicator:qt,spinning:n}))}}]),a}(n.Component));var xr=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(i.b)({getMessages:Tt},e)}}))(Object(be.f)(Ar)),Dr=a(416),_r=a.n(Dr),Br=(a(906),sa.a.Option),Fr=Xt.a.TextArea,Rr=ta.a.Group,Ur=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={message:"",title:"",language:"English (US)",languageCode:"en-US",voice:"en-US-Wavenet-A",frequency:"30",speed:1,voiceOptions:{},sortedLanguageArray:[],editingExistingMessage:!1,isSaving:!1,previewMessageUrl:"",isPlaying:!1,isPreviewing:!1,postPreviewChanges:!1,savedPreviews:{}},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("savedISMPreviews"));this.props.actions.getVoiceOptions().then((function(a){if(Object(z.get)(e.props,"location.state._id",null)){var n=Object(z.get)(e.props,"location.state",{});e.setState({voiceOptions:a,title:Object(z.get)(n,"title",""),message:Object(z.get)(n,"message",""),language:V[Object(z.get)(n,"language","")],languageCode:Object(z.get)(n,"language",""),voice:Object(z.get)(n,"voice",""),speed:Object(z.get)(n,"speed",1),frequency:Object(z.get)(n,"frequency["+Object(z.get)(n,"locationId","")+"]",""),editingExistingMessage:!0,sortedLanguageArray:Object.keys(a).sort(),savedPreviews:t||{}})}else e.setState({voiceOptions:a,speed:1,sortedLanguageArray:Object.keys(a).sort(),savedPreviews:t||{}})}))}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){e.rap.audioEl.play()}))}},{key:"setPreviewUrl",value:function(e){console.log("hit setPreviewUrl"),this.setState({previewMessageUrl:e})}},{key:"renderLanguageOptions",value:function(){return this.state.sortedLanguageArray.map((function(e){return r.a.createElement(Br,{key:e}," ",e," ")}))}},{key:"renderVoiceOptions",value:function(){var e=this.state,t=e.language,a=e.voiceOptions;if(t){var n=Object.keys(a).length>0?a[t]:[];return n.sort((function(e,t){return q[e.simpleName]>q[t.simpleName]?1:-1})),n.map((function(e){return r.a.createElement(Br,{key:e.name,parent:e.parent},q[e.simpleName]||e.simpleName)}))}}},{key:"checkIfHashExists",value:function(){var e=this.state.savedPreviews,t=this.getMessageHash();return!!e[t]&&t}},{key:"getMessageHash",value:function(){var e=this.state,t=e.title,a=e.message,n=e.languageCode,r=e.voice,o=e.speed,s=e.frequency;return _r()(t.concat(a).concat(n).concat(r).concat(o).concat(s))}},{key:"previewMessage",value:function(){var e=this,t=this.state,a=t.message,n=t.languageCode,r=t.voice,o=t.speed;if(this.checkIfValidISM()&&!this.state.isPreviewing){var s=this.getMessageHash();this.checkIfHashExists()?this.setState({previewMessageUrl:this.state.savedPreviews[s],isPreviewing:!1},(function(){e.playTrack()})):this.setState({isPreviewing:!0},(function(){e.props.actions.createPreviewMessage({voice:r,language:n,message:a,speed:o,hash:s}).then((function(t){if(t){var a=Object(z.get)(t,"data","");e.setState({previewMessageUrl:a,isPreviewing:!1,savedPreviews:Object(u.a)(Object(u.a)({},e.state.savedPreviews),{},Object(yn.a)({},s,a))},(function(){localStorage.setItem("savedISMPreviews",JSON.stringify(e.state.savedPreviews)),e.playTrack()}))}else e.onFailure("There was an error when creating your preview file")}))}))}}},{key:"saveMessage",value:function(){var e=this,t=this.state,a=t.savedPreviews,n=t.editingExistingMessage,r=t.title,o=t.message,s=t.languageCode,i=t.voice,c=t.speed,l=t.frequency;this.checkIfValidISM()&&!this.state.isSaving&&this.setState({isSaving:!0},(function(){n?e.props.actions.editMessage({companyId:Object(z.get)(e.props,"user.company._id",""),locationId:Object(z.get)(e.props,"myLocation._id",""),messageId:Object(z.get)(e.props,"location.state._id",""),title:r,voice:i,language:s,message:o,speed:c,frequency:l,savedPreviews:a,hash:e.checkIfHashExists()}).then((function(t){t?e.onSuccess():e.onFailure()})):e.props.actions.createMessage({companyId:Object(z.get)(e.props,"user.company._id",""),locationId:Object(z.get)(e.props,"myLocation._id",""),title:r,voice:i,language:s,message:o,speed:c,frequency:l,savedPreviews:a,hash:e.checkIfHashExists()}).then((function(t){t?e.onSuccess():e.onFailure()}))}))}},{key:"onSuccess",value:function(e){var t=this,a=this.props.actions.setSnackbarMessage;this.setState({isSaving:!1},(function(){a({message:e||"Successfully saved message",type:"success"}),localStorage.removeItem("savedISMPreviews"),t.props.history.push("/inStoreMessaging")}))}},{key:"onFailure",value:function(e){var t=this.props.actions.setSnackbarMessage;this.setState({isSaving:!1},(function(){t({message:e||"There was an error when saving your message",type:"error"})}))}},{key:"checkIfValidISM",value:function(){var e=this.props.actions.setSnackbarMessage,t=this.state,a=t.title,n=t.message,r=t.language,o=t.voice,s=t.frequency,i=t.speed;return a?!n||n.length<10?(e({message:"Please add a longer message",type:"warn"}),!1):r?o?s?!!i||(e({message:"Please select a speed",type:"warn"}),!1):(e({message:"Please select a frequency",type:"warn"}),!1):(e({message:"Please select a voice",type:"warn"}),!1):(e({message:"Please select a language",type:"warn"}),!1):(e({message:"Please add a title to your message",type:"warn"}),!1)}},{key:"render",value:function(){var e=this,t=this.state,a=t.editingExistingMessage,n=t.isSaving,o=t.isPreviewing,s=t.language,i=t.voice,c=t.frequency,l=t.message,u=t.title,m=t.speed,d=t.previewMessageUrl;return r.a.createElement("div",{className:"messageWrapper"},r.a.createElement(cn,{backArrow:!0,backArrowPress:function(){return e.props.history.push("/inStoreMessaging")},title:a?r.a.createElement("div",null,"Edit ",r.a.createElement("span",{style:{color:"#D04283"}}," Message ")):r.a.createElement("div",null,"Create ",r.a.createElement("span",{style:{color:"#D04283"}}," Message "))}),r.a.createElement("div",{className:"centerMessages"},r.a.createElement("div",{className:"createMessagesContainer"},r.a.createElement("div",{style:{display:"none"}},r.a.createElement(ur.a,{ref:function(t){e.rap=t},src:d,autoPlay:!1,controls:!1,muted:!1,volume:1,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.setState({isPlaying:!1,previewMessageUrl:null})},onError:function(){return e.setState({isPlaying:!1,previewMessageUrl:null})}})),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Message Name "),r.a.createElement(Xt.a,{onChange:function(t){return e.setState({title:t.target.value})},value:u})),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Message "),r.a.createElement(Fr,{placeholder:"Max 200 Characters",value:l,maxLength:200,onChange:function(t){return e.setState({message:t.target.value})},rows:4})),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Language"),r.a.createElement(sa.a,{value:s||"Please select a language",style:{width:"fill"},onChange:function(t,a){return e.setState({language:a.key,languageCode:"",voice:""})}},this.renderLanguageOptions())),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Voice "),r.a.createElement(sa.a,{value:i||"Please select a voice",style:{width:"fill"},onChange:function(t,a){return e.setState({voice:a.key,languageCode:Object(z.get)(a,"props.parent","")})}},this.renderVoiceOptions())),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Frequency "),r.a.createElement(sa.a,{value:c||"Please select a frequency",style:{width:"fill"},onChange:function(t,a){return e.setState({frequency:a.key})}},D.map((function(e,t){return r.a.createElement(Br,{key:Object(z.get)(e,"time",t),value:Object(z.get)(e,"time","60")},Object(z.get)(e,"title","Error"))})))),r.a.createElement("div",{className:"ism-item"},r.a.createElement("div",{className:"heading-medium"},"Speed"),r.a.createElement(Rr,null,r.a.createElement(ta.a,{type:.75===m?"primary":"secondary",onClick:function(){return e.setState({speed:.75})}},"Slow"),r.a.createElement(ta.a,{type:1===m?"primary":"secondary",onClick:function(){return e.setState({speed:1})}},"Normal"),r.a.createElement(ta.a,{type:1.25===m?"primary":"secondary",onClick:function(){return e.setState({speed:1.25})}},"Fast"))),r.a.createElement("div",{className:"ism-button-group"},r.a.createElement(ta.a,{onClick:function(){return e.previewMessage()},size:"large",loading:o,className:"ism-button"},r.a.createElement(la.a,{icon:Ua.y,className:"icon"}),"Preview Message"),r.a.createElement(ta.a,{onClick:function(){return e.saveMessage()},size:"large",loading:n,className:"ism-button"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(la.a,{icon:Ua.h,className:"icon"}),"Save Changes"):r.a.createElement(r.a.Fragment,null,r.a.createElement(la.a,{icon:Ua.s,className:"icon"}),"Create Message"))))))}}]),a}(n.Component);var Vr=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({createPreviewMessage:Mt,editMessage:At,createMessage:Pt,getVoiceOptions:_t,setSnackbarNotification:Ft,setSnackbarMessage:Rt},e)}}))(Object(be.f)(Ur)),qr=(a(907),sa.a.Option,Xt.a.TextArea,function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={},n}return Object(le.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"sandbox-wrapper"},r.a.createElement(Rn,{animationData:"",height:1440,width:1440}))}}]),a}(n.Component));var Hr=Object(de.b)((function(e){return{user:e.auth.user,myLocation:e.auth.location}}),(function(e){return{actions:Object(i.b)({setSnackbarNotification:Ft,setSnackbarMessage:Rt},e)}}))(Object(be.f)(qr)),Wr=[{path:"/",exact:!0,isChild:!1,private:!1,component:function(){return r.a.createElement(be.a,{to:"/discover"})}},{path:"/landing",exact:!1,isChild:!1,private:!1,component:function(){return r.a.createElement(zt,null)}},{path:"/login",exact:!0,isChild:!1,private:!1,component:function(){return Xa.login(),r.a.createElement(Vn,null)}},{path:"/signUp",exact:!0,isChild:!1,private:!1,component:function(){return Xa.signUp(),r.a.createElement(Vn,null)}},{path:"/nowPlaying",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(vn,null)}},{path:"/discover",exact:!0,isChild:!0,private:!1,component:function(){return r.a.createElement(Vn,null)}},{path:"/station/:id",exact:!0,isChild:!0,private:!1,component:function(){return r.a.createElement(rn,null)}},{path:"/createschedule/:id",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(Xn,null)}},{path:"/schedules",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(rr,null)}},{path:"/inStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(dr,null)}},{path:"/createInStoreMessaging",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(Vr,null)}},{path:"/sandbox",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(Hr,null)}},{path:"/settings",exact:!0,isChild:!0,private:!0,component:function(){return r.a.createElement(be.a,{to:"/settings/user"})}},{path:"/settings/:setting",exact:!0,isChild:!1,private:!0,component:function(){return r.a.createElement(xr,null)}}];a(908);St.a.config({top:"5%",duration:1});var zr=null,Gr=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleClick=function(){var e=Object(he.a)(ge.a.mark((function e(t){var a,r;return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.props.myLocation,"features"!==t&&"price"!==t){e.next=5;break}St.a.info("This service will be available soon, please enjoy our other services"),e.next=16;break;case 5:if("signout"!==t){e.next=9;break}n.logInOut(),e.next=16;break;case 9:if(r=Object(z.get)(a,"station._id",null),"nowPlaying"!==t||r){e.next=13;break}return n.props.actions.setSnackbarMessage({message:"Please select a station before viewing your dashboard",type:"warn"}),e.abrupt("return");case 13:n.setState({current:t}),St.a.destroy(),n.props.history.push("/"+t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.logInOut=function(){if(Xa.isLoggedIn())try{fa({category:h,action:T}),localStorage.removeItem("location-jwt"),Xa.logout()}catch(e){console.log("Caught logout err: ",e)}else Xa.login()},n.state={current:void 0,windowSize:window.innerWidth},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=Object(z.get)(this.props,"location.pathname","").replace("/","");this.setState({current:t}),zr=window.addEventListener("resize",(function(t){e.setState({windowSize:t.target.innerWidth})}))}},{key:"componentWillUnmount",value:function(){try{window.removeEventListener("resize",zr),zr=null}catch(e){console.log("error while unmounting header: ",e)}}},{key:"checkIfActiveTab",value:function(e){return e?Object(z.get)(this.props,"location.pathname","").toLowerCase().includes(e.toLowerCase()):""}},{key:"printStuff",value:function(){var e=this.props,t=e.myLocation,a=e.player,n=Object(z.get)(t,"trackSchedule",{}),r=Object(z.get)(n,"queue",[]),o=Object(z.get)(t,"currentTrack",{});console.log({props:this.props,myLocation:t,player:a,trackSchedule:n,queue:r,currentTrack:o,pos:$(o,r)})}},{key:"render",value:function(){var e=this,t=this.props.inApp,a=this.state,n=a.windowSize,o=a.current,s=r.a.createElement(ia.a,{mode:"horizontal",onClick:function(t){return e.handleClick(t.key)},selectedKeys:[o],className:"menu-wrapper"},r.a.createElement(ia.a.Item,{className:"mobileButtonItem",key:"nowPlaying"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(la.a,{icon:Ua.v})),r.a.createElement("div",{className:"mobileButtonText"},"Dashboard")),r.a.createElement(ia.a.Item,{className:"mobileButtonItem",key:"discover"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(la.a,{icon:Ua.t})),r.a.createElement("div",{className:"mobileButtonText"},"Stations")),r.a.createElement(ia.a.Item,{className:"mobileButtonItem",key:"schedules"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(la.a,{icon:Ua.d})),r.a.createElement("div",{className:"mobileButtonText"},"Schedules")),r.a.createElement(ia.a.Item,{className:"mobileButtonItem",key:"inStoreMessaging"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(la.a,{icon:Ua.n})),r.a.createElement("div",{className:"mobileButtonText"},"Messaging")),r.a.createElement(ia.a.Item,{className:"mobileButtonItem",key:"settings"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(la.a,{icon:Ua.e})),r.a.createElement("div",{className:"mobileButtonText"},"Settings")),Xa.isLoggedIn()?r.a.createElement(ia.a.Item,{key:"signout",className:"mobileButtonItem"},r.a.createElement("div",{className:"mobileButtonIcon"},r.a.createElement(la.a,{icon:F.f,rotation:180})),r.a.createElement("div",{className:"mobileButtonText"},"Sign Out")):r.a.createElement(ia.a.Item,{key:"signout"}," Sign In")),i=Object(z.get)(this.props,"route",null),c=null,l=Object(z.get)(Ee,"API_URL","").includes("localhost")||Object(z.get)(Ee,"API_URL","").includes("-dev");i&&(c=!!i.toUpperCase().includes("createSchedule".toUpperCase()));var u=c?"header-container headerTwo":"header-container headerOne";return r.a.createElement("div",{className:u},r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{src:x.appLogo,className:"header_logo pointer noselect",onClick:function(){return e.props.history.push("/nowPlaying")},alt:"logo"})),r.a.createElement("div",{style:{flex:0}},l&&t?"inApp Mode":""),n<=760?r.a.createElement("div",{className:"mobileButtonsContainer"},r.a.createElement(ca.a,{overlay:s,trigger:["click"]},r.a.createElement(ta.a,null,r.a.createElement(la.a,{icon:Ua.b})))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mainButtonsContainer noselect"},r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("nowPlaying")?" mainButtonActive":""),key:"nowPlaying",onClick:function(){return e.handleClick("nowPlaying")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(la.a,{icon:Ua.v})),r.a.createElement("div",{className:"mainButtonsText"}," Dashboard ")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("discover")||this.checkIfActiveTab("browse")?" mainButtonActive":""),key:"discover",onClick:function(){return e.handleClick("discover")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(la.a,{icon:Ua.t})),r.a.createElement("div",{className:"mainButtonsText"},"Stations")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("schedules")||this.checkIfActiveTab("createSchedule")?" mainButtonActive":""),key:"schedules",onClick:function(){return e.handleClick("schedules")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(la.a,{icon:Ua.d})),r.a.createElement("div",{className:"mainButtonsText"},"Schedules")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("inStoreMessaging")||this.checkIfActiveTab("inStoreMessaging")?" mainButtonActive":""),key:"inStoreMessaging",onClick:function(){return e.handleClick("inStoreMessaging")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(la.a,{icon:Ua.n})),r.a.createElement("div",{className:"mainButtonsText"}," Messaging ")),r.a.createElement("div",{className:"mainButtonsBottomBar"})),r.a.createElement("div",{className:"mainButtons"+(this.checkIfActiveTab("settings")||this.checkIfActiveTab("settings")?" mainButtonActive":""),key:"settings",onClick:function(){return e.handleClick("settings")}},r.a.createElement("div",{className:"mainButtonsContent"},r.a.createElement("div",{className:"mainButtonsIcon"},r.a.createElement(la.a,{icon:Ua.e})),r.a.createElement("div",{className:"mainButtonsText"}," Settings ")),r.a.createElement("div",{className:"mainButtonsBottomBar"}))),r.a.createElement(ta.a,{key:"signout",onClick:function(){return e.logInOut()}},Xa.isLoggedIn()?"Sign Out":"Sign In")),l&&r.a.createElement(la.a,{className:"icon",style:{paddingLeft:"10px",fontSize:"32px"},icon:Ua.a,onClick:function(){return e.printStuff()}}))}}]),a}(n.Component);var Kr=Object(be.f)(Object(de.b)((function(e){return{auth:e.auth,player:e.player,myLocation:e.auth.location,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({setSnackbarMessage:Rt},e)}}))(Object(Ht.a)(Gr))),Yr=a(417),Jr=a.n(Yr),Zr=(a(911),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).handleChange=function(e){n.props.changeVolume(.01*e)},n.state={myVolume:0},n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){this.setState({myVolume:Object(z.get)(this.props,"volume",0)})}},{key:"componentDidUpdate",value:function(e){Object(z.isEqual)(Object(z.get)(this.props,"volume",0),Object(z.get)(e,"volume",0))||this.setState({myVolume:Object(z.get)(this.props,"volume",0)})}},{key:"calculateVolumeHeight",value:function(){return 100*this.state.myVolume}},{key:"render",value:function(){var e=this,t=this.state.myVolume;return r.a.createElement("div",{className:"volume-slider-wrapper"},r.a.createElement("div",{className:"slider orientation-reversed"},r.a.createElement("div",{className:"slider-group"},r.a.createElement("div",{className:"slider-vertical"},r.a.createElement(Jr.a,{min:0,max:100,value:this.calculateVolumeHeight(t),orientation:"vertical",onChange:this.handleChange,tooltip:!1,onChangeStart:function(t){return e.props.startDrag(t)},onChangeComplete:function(t){return e.props.endDrag(t)}})))))}}]),a}(n.Component)),Qr=a(275),$r=(a(913),function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;Object(ce.a)(this,a),n=t.call(this,e);var r=parseFloat(localStorage.getItem("volume"));return n.state={currentTime:"0:00",duration:"0:00",volume:r||("0"===r.toString()?0:.3),previousVolume:r||.3,showVolumeControl:!1,dragging:!1,url:null,isrc:null},n}return Object(le.a)(a,[{key:"checkIfVolumeSlider",value:function(e){if(!e)return!1;for(var t=Object(z.get)(e,"path",[]),a=0;a<t.length;a++)if("volume-wrapper"===t[a].id)return!0;return!1}},{key:"componentDidMount",value:function(){var e=this;this.rap.audioEl.addEventListener("timeupdate",(function(t){e.setState({currentTime:t.target.currentTime,duration:t.target.duration})})),window.addEventListener("mouseover",(function(t){e.checkIfVolumeSlider(t)||e.state.dragging?e.state.showVolumeControl||e.setState({showVolumeControl:!0}):e.state.showVolumeControl&&e.setState({showVolumeControl:!1})}));var t=Object(z.get)(this.props,"currentTrack","");this.updateTrackState(),this.props.actions.checkIfAdvertisement(Object(z.get)(this.props,"currentTrack",{})),this.setState({duration:Object(z.get)(t,"duration",null)})}},{key:"componentWillUnmount",value:function(){try{this.player.removeEventListener("timeupdate"),window.removeEventListener("mouseover")}catch(e){console.log("caught error on music-bar unmount",e)}}},{key:"updateTrackState",value:function(){this.setState({url:Object(z.get)(this.props,"player.trackMap["+Object(z.get)(this.props,"currentTrack.isrc","")+"].url",""),isrc:Object(z.get)(this.props,"currentTrack.isrc",null)})}},{key:"componentDidUpdate",value:function(e){(Object(z.isEqual)(Object(z.get)(this.props,"myLocation.currentTrack.isrc",null),Object(z.get)(e,"myLocation.currentTrack.isrc",null))||(console.log("nowPlaying: ",{currentTrack:Object(z.get)(this.props,"currentTrack.title",""),duration:J(Object(z.get)(this.props,"currentTrack.duration","")),station:Object(z.get)(this.props,"myLocation.station.name","")}),this.props.actions.checkIfAdvertisement(Object(z.get)(this.props,"currentTrack",{})),this.updateTrackState()),Object(z.isEqual)(Object(z.get)(this.props,"myLocation.station._id",null),Object(z.get)(e,"myLocation.station._id",null))||(console.log("<================ CHANGED STATION B ================>",this.props),this.props.actions.setTrackNumber(0),this.updateTrackState(),Qr.isSafari&&Object(z.get)(this.props,"player.isPlaying")&&(this.props.actions.setIsPlaying(!Object(z.get)(this.props,"player.isPlaying")),this.rap.audioEl.play())),Object(z.isEqual)(Object(z.get)(this.props,"player.isPlaying",!1),Object(z.get)(e,"player.isPlaying",!1)))||(Object(z.get)(this.props,"player.isPlaying",!1)?this.rap.audioEl.play():this.rap.audioEl.pause())}},{key:"getCurrentTrack",value:function(){var e=this.state,t=e.url,a=e.isrc,n=Object(z.get)(this.props,"currentTrack.isrc",""),r=Object(z.get)(this.props,"player.trackMap["+n+"].url",Object(z.get)(this.props,"currentTrack.url",""));return a&&t&&a===n&&t!==r?t:r}},{key:"playTrack",value:function(){var e=this;this.setState({isPlaying:!0},(function(){var t=e.rap.audioEl.play();void 0!==t&&t.then((function(){e.props.actions.setIsPlaying(!0)})).catch((function(){e.props.actions.setIsPlaying(!1)}))}))}},{key:"togglePlay",value:function(){this.props.actions.setIsPlaying(!Object(z.get)(this.props,"player.isPlaying"))}},{key:"toggleMute",value:function(){var e=this,t=this.state.previousVolume;this.setState({volume:this.state.volume>0?0:t},(function(){localStorage.setItem("volume",e.state.volume)}))}},{key:"setVolume",value:function(e){var t=this;this.setState({volume:e,previousVolume:e},(function(){localStorage.setItem("volume",t.state.volume)}))}},{key:"toggleVolumeDrag",value:function(e){this.setState({dragging:e})}},{key:"closePlayer",value:function(){var e=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.actions.setIsPlaying(!1),fa({category:p,action:O,label:M}),e.next=4,this.props.actions.disconnectPlayer();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"songError",value:function(e){console.log("Song error: ",{e:e,props:this.props}),this.skipSong(0)}},{key:"skipSong",value:function(e){var t=this;this.props.actions.skipSong({songCompletion:e}).then((function(e){"DEVICE_ALREADY_PAIRED"===e&&t.props.actions.playerError({error:!0,title:"Another Device Has Connected!",message:"Please press the 'play' button if you wish to reconnect with this device.",icon:r.a.createElement(la.a,{icon:Ra.b,className:"connect-icon"})});try{Qr.isSafari&&t.props.actions.setIsPlaying(!Object(z.get)(t.props,"player.isPlaying")),t.rap.audioEl.play()}catch(a){console.log("skipSong err: ",a)}}))}},{key:"render",value:function(){var e=this,t=Object(z.get)(this.props,"player",{}),a=t.isPlaying,n=t.skipDisabled,o=this.state,s=o.volume,i=o.showVolumeControl,c=o.currentTime,l=o.duration,u=Object(z.get)(this.props,"currentTrack",{}),m=(c/l*100).toFixed(2),d=!1,p=!1,g=document.getElementById("player-info-wrapper")||null,h=document.getElementById("player-artist-info")||null,f=document.getElementById("player-track-info")||null;return g&&h&&f&&((g=g.getBoundingClientRect().width-60)<(h=h.getBoundingClientRect().width)&&(d=!0),g<(f=f.getBoundingClientRect().width)&&(p=!0)),r.a.createElement("div",{className:"music-bar-wrapper noselect",id:"music-player-controller"},r.a.createElement("div",{className:"react-music-player"},r.a.createElement(ur.a,{ref:function(t){e.rap=t},src:this.getCurrentTrack(),autoPlay:!1,controls:!1,muted:0===s,volume:s,onCanPlay:function(){return e.playTrack()},onEnded:function(){return e.skipSong(m)},onError:function(t){return e.songError(t)},preload:"auto"})),r.a.createElement("div",{className:"music-bar-scrub-wrapper"},r.a.createElement("div",{className:"music-bar-scrubber",style:{width:m+"%"}})),r.a.createElement("div",{className:"music-bar-content-wrapper"},r.a.createElement("div",{className:"music-bar-item flexRow left-controls",id:"player-info-wrapper"},r.a.createElement("img",{className:"preview-image",src:Object(z.get)(u,"picture",null),alt:""}),r.a.createElement("div",{className:"preview-text"},r.a.createElement("div",{className:"song-artist"},r.a.createElement("span",{id:"player-artist-info",className:d?"marquee":""},Object(z.get)(u,"artist[0]","NA"))),r.a.createElement("div",{className:"song-title"},r.a.createElement("span",{id:"player-track-info",className:p?"marquee":""},Object(z.get)(u,"title","NA"))))),r.a.createElement("div",{className:"music-bar-item flexRow center-controls"},a?r.a.createElement(la.a,{icon:Ua.p,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}):r.a.createElement(la.a,{icon:Ua.q,className:"music-bar-icon",onClick:function(){return e.togglePlay()}}),r.a.createElement(la.a,{icon:Ua.u,className:"music-bar-icon".concat(n?" disabled":""),onClick:function(){return n?null:e.skipSong(m)}})),r.a.createElement("div",{className:"music-bar-item right-controls"},r.a.createElement("div",{className:"time-display"},r.a.createElement("span",{id:"current-song-time"},J(c))," \xa0/\xa0 ",r.a.createElement("span",{id:"current-song-duration"},J(l))," ",r.a.createElement("span",{id:"invis-current-song-time"},m)),r.a.createElement("div",{className:"volume-icon",id:"volume-wrapper"},i&&r.a.createElement(Zr,{volume:s,changeVolume:function(t){return e.setVolume(t)},startDrag:function(){return e.toggleVolumeDrag(!0)},endDrag:function(){return e.toggleVolumeDrag(!1)}}),0===s?r.a.createElement(la.a,{icon:Ua.z,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):s<.7?r.a.createElement(la.a,{icon:Ua.y,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}}):r.a.createElement(la.a,{icon:Ua.A,className:"music-bar-icon",style:{margin:0},onClick:function(){return e.toggleMute()}})),r.a.createElement(la.a,{icon:Ra.f,className:"music-bar-icon close-icon",onClick:function(){return e.closePlayer()}}))))}}]),a}(n.Component));var Xr=Object(de.b)((function(e){return{player:e.player,myLocation:e.auth.location,currentTrack:e.auth.location.currentTrack}}),(function(e){return{actions:Object(i.b)({checkIfAdvertisement:nt,skipSong:at,setIsPlaying:xe,setTrackNumber:_e,disconnectPlayer:Xe,playerError:Pe},e)}}))($r);a(914);Xa.initialize();var eo=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!0},n}return Object(le.a)(a,[{key:"initiateLogin",value:function(e){localStorage.setItem("access-token",e),this.props.actions.auth0setLogin()}},{key:"componentWillMount",value:function(){var e=this;Xa.getLock().on("authenticated",(function(t){e.initiateLogin(t.idToken)})),Xa.getLock().on("unrecoverable_error",(function(e){console.log("auth0 - unrecoverable_error: ",{err:e})})),Xa.getLock().on("authorization_error",(function(e){console.log("auth0 - authorization_error: ",{err:e})})),Xa.getLock().checkSession({},(function(t,a){console.log("hit auth0 check session: ",{err:t,data:a}),e.setState({isLoading:!1},(function(){!t&&(null===a||void 0===a?void 0:a.idToken)?e.initiateLogin(a.idToken):(localStorage.getItem("access-token")&&localStorage.getItem("location-jwt")&&Xa.logout(),"login_required"===Object(z.get)(t,"code","")&&Xa.login(),e.setState({isLoading:!1}))}))})),(Object(z.get)(window,"location.search","").includes("inApp")||localStorage.getItem("inApp"))&&this.props.actions.setInApp(!0),window.ReactNativeWebView&&window.addEventListener("message",(function(e){Object(z.get)(e,"data.data",null);var t=Object(z.get)(e,"data.endpoint",null),a=!!Xa.isLoggedIn();switch(t){case"auth":en.send("auth",a);break;case"introLogin":localStorage.setItem("mobileIntroLogin",!0),en.send("auth",a);break;case"login":Xa.login(),en.send("login","Login Success");break;case"logout":Xa.logout(),en.send("logout","Logout Success");break;default:en.send("default",null)}}))}},{key:"componentDidUpdate",value:function(){Xa.isLoggedIn()&&this.state.isLoading&&this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this,t=this.props,a=t.player,n=t.auth,o=t.inApp,s=Object(z.get)(a,"showPlayer",!1);return r.a.createElement(fe.a,null,r.a.createElement("div",null,Wr.map((function(t,a){return r.a.createElement(be.b,{key:a,path:t.path,exact:t.exact,render:function(){var a,i,c;return e.state.isLoading||Xa.isLoggedIn()||!t.private||Xa.login(),Xa.isLoggedIn()||!t.private?r.a.createElement(r.a.Fragment,null,(null===n||void 0===n||null===(a=n.user)||void 0===a?void 0:a.company)&&!(null===n||void 0===n||null===(i=n.user)||void 0===i||null===(c=i.company)||void 0===c?void 0:c.name)?r.a.createElement(Ba.a,{visible:!0,onCancel:e.onCancel,width:900,className:"modal-container",closable:!1,footer:!1},r.a.createElement("div",{className:"signup-modal-title"},"Welcome to ",r.a.createElement("span",{style:{color:"#d04283"}},"ambii")),r.a.createElement(ka,null)):null,r.a.createElement("div",{className:"explore_container"},!o&&r.a.createElement(Kr,{showMenu:"userlogin",route:t.path}),r.a.createElement("div",{className:"contentWrapper".concat(s?" player-visible":"")},t.component()))):r.a.createElement(Za.a,{className:"explore_container"},!o&&r.a.createElement(Kr,{id:"myHeader",showMenu:"landing"}),r.a.createElement("div",{className:"loading-app"},r.a.createElement("div",{className:"loading-app-text"},"Logging Into ",r.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),r.a.createElement(Ut.a,{indicator:qt,spinning:!0,size:"large"})))}})}))))}}]),a}(r.a.Component);var to=Object(de.b)((function(e){return{snackbar:e.snackbar,auth:e.auth,player:e.player,inApp:e.auth.inApp}}),(function(e){return{actions:Object(i.b)({auth0setLogin:pt,setInApp:ke},e)}}))(Object(Ht.a)(eo)),ao=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(e){var n;return Object(ce.a)(this,a),(n=t.call(this,e)).state={isLoading:!1,initAnalytics:!1,snackbarMessageDuration:3},ha.a.initialize("UA-167385126-1",{siteSpeedSampleRate:100,testMode:!document.location.hostname.includes("business.ambii.io")}),n}return Object(le.a)(a,[{key:"componentDidMount",value:function(){var e=Object(he.a)(ge.a.mark((function e(){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.actions.startSockets();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){Object(z.isEqual)(Object(z.get)(this.props,"snackbar.notification",null),Object(z.get)(e,"snackbar.notification",null))||this.openNotification(Object(z.get)(this.props,"snackbar.notification",null)),Object(z.isEqual)(Object(z.get)(this.props,"snackbar.message",null),Object(z.get)(e,"snackbar.message",null))||this.openMessage(Object(z.get)(this.props,"snackbar.message",null))}},{key:"openNotification",value:function(e){var t=this.state.snackbarMessageDuration;console.log("hasNotification: ",e),e&&fr.a.open({message:Object(z.get)(e,"message",""),description:Object(z.get)(e,"description",""),duration:t,onClick:function(){console.log("Notification Clicked!")},className:"snackbar-notification snackbar-type-".concat(Object(z.get)(e,"type",""))}),this.props.actions.setSnackbarNotification(null)}},{key:"openMessage",value:function(e){var t=this.state.snackbarMessageDuration;console.log("hasMessage: ",{hasMessage:e,snackbarMessageDuration:t});var a=Object(z.get)(e,"message","");switch(Object(z.get)(e,"type","")){case"success":St.a.success(a,t);break;case"info":St.a.info(a,t);break;case"warn":St.a.warn(a,t);break;case"error":St.a.error(a,t);break;default:console.log("error in openMessage")}this.props.actions.setSnackbarMessage(null)}},{key:"render",value:function(){var e=this.props.player,t=Object(z.get)(e,"showPlayer",!1);return this.state.isLoading?r.a.createElement("div",{className:"loading-app"},r.a.createElement("div",{className:"loading-app-text"},"Loading ",r.a.createElement("span",{style:{color:"#d04283"}},"Ambii - Music for Business")),r.a.createElement(Ut.a,{indicator:qt,spinning:!0,size:"large"})):r.a.createElement(r.a.Fragment,null,r.a.createElement(to,{props:{showMusicPlayer:t}}),t&&r.a.createElement(Xr,null))}}]),a}(r.a.Component);var no=Object(de.b)((function(e){return{snackbar:e.snackbar,auth:e.auth,player:e.player}}),(function(e){return{actions:Object(i.b)({startSockets:Bt,setSnackbarNotification:Ft,setSnackbarMessage:Rt},e)}}))(Object(Ht.a)(ao)),ro=function(e){Object(ue.a)(a,e);var t=Object(me.a)(a);function a(){return Object(ce.a)(this,a),t.apply(this,arguments)}return Object(le.a)(a,[{key:"componentDidCatch",value:function(e){this.setState({error:e})}},{key:"render",value:function(){var e=this.props,t=e.store,a=e.stripePromise;return r.a.createElement(de.a,{store:t},r.a.createElement("div",null,r.a.createElement(vr.Elements,{stripe:a},r.a.createElement(no,null))))}}]),a}(n.Component);var oo=Object(de.b)((function(e){return{auth:e.auth,snackbar:e.snackbar,loader:e.loader}}),(function(e){return{actions:Object(i.b)({},e)}}))(ro),so=(a(915),a(418));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var io=ie(),co=Object(so.a)("pk_live_51H0l3xBY2i2h5IOVo9Edk9SwGfqsOBcdd5cfJdaxKxWgijujk141nn5fMq7h4pija45rxwou240Tj9bIwNwmTjxZ00YIrQmclD");"localhost"!==document.location.hostname&&"business-dev.ambii.io"!==document.location.hostname&&(console.log=function(){}),Object(o.render)(r.a.createElement(s.AppContainer,null,r.a.createElement(oo,{store:io,stripePromise:co})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[425,1,2]]]);
//# sourceMappingURL=main.e9d1b5f2.chunk.js.map